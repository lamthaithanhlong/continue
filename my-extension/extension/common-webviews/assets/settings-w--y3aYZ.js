import{Q as ne,C as t,G as m,bi as nn,t as qe,u as D,z as ge,A as V,I as E,n as s,F as Je,Z as At,x as f,R as Xt,_ as ir,E as d,S as nr,l as ur,ag as Oa,w as lt,W as Xe,H as ga,bc as on,aU as Da,bj as Kt,ak as ba,J as v,T as Q,a5 as S,K as te,a0 as de,L as Ut,a8 as Nr,$ as Jt,am as zs,a4 as Lt,a6 as Le,o as ln,a1 as nt,m as Ue,ai as cn,a2 as pe,a3 as lr,X as dn,B as ca,y as me,M as Dt,aa as et,aG as _t,aj as un,an as rs,P as Qt,b9 as Ma,ah as pa,v as tr,D as ct,aD as Pr,ac as Rr,ab as or,bk as gs,N as Lr,bl as ps,b4 as Ta,bm as vn,bn as Ea,O as Ze,a7 as as,a9 as Fa,b3 as ms,al as Os,bo as hn,aY as rr,aB as gn,bp as qr,bq as aa,br as pn,bs as mn,bt as fn,bu as sa,bv as ut,Y as wr,aE as yn}from"./TextAugment-CCgoKCVh.js";import"./design-system-init-D_ikSdGN.js";import{h as Ra,au as Ht,L as st,av as Xr,aw as Mr,ax as Sa,ay as _a,az as wn,aA as Ba,aB as fs,aC as ys,aD as $n,aE as bn,aF as Sn,j as Na,aG as Ds,aH as _n,T as zt,k as Fs,D as ot,g as Cn,Z as kn,aI as ws,aJ as $s,aK as bs,aL as An,aM as xn,aN as Ss,Y as Mn,aO as Tn,aP as En,aQ as Rn,aR as Nn,aS as _s,aT as Un,aU as In,aV as Pn,o as Cs,s as Ln,aW as zn,W as zr,i as Sr,E as On,S as Dn,F as Fn}from"./Store-CzuxPCq8.js";import{R as Bn,M as Hn}from"./message-broker-CppRv-qk.js";import{G as qn,S as Jn,a as Vn,N as jn,L as Gn,b as kt,f as Bs,c as ks,d as As,M as at,P as mr,e as Wn}from"./partner-mcp-utils-8KSbNsEE.js";import{a as Kn,c as Zn,b as Yn,d as Jr,m as Xn,F as Qn,D as na,g as Qr,s as xs,T as jr,S as Ha,e as ei,u as ti,f as ri}from"./extension-client-context-DEcT1UDn.js";import{h as ai,k as si,C as Hs,a as ni}from"./CollapseButtonAugment-CdECN-QQ.js";import{e as gt,I as _e,c as It,b as ii,i as Cr,d as oi}from"./IconButtonAugment-CsdawHyK.js";import{o as da}from"./keypress-fD7XHdyk.js";import{C as li}from"./Chevron-Cl2ZClCm.js";import{D as ci}from"./Drawer-CTpZHzzm.js";import{b as ua,T as Ot,a as kr,p as di}from"./CardAugment-Bqwu5ahx.js";import{B as We}from"./ButtonAugment-dm8Gq3Cq.js";import{B as Ar,C as Vt}from"./CalloutAugment-BUb-HAQ6.js";import{T as Ca}from"./TextAreaAugment-Pjr5jpcU.js";import{S as ui}from"./SuccessfulButton-CqblPP5m.js";import{M as vi}from"./index-BuNY6jLF.js";import"./BaseTextInput-CKEk7GUD.js";import{R as hi}from"./RulesModeSelector-CMEKpeTG.js";import{M as ka}from"./ModalAugment-IuAGqBL4.js";import{F as gi}from"./Filespan-DQTy5qup.js";import{T as pi}from"./TextCombo-BcswIAtX.js";import"./focusTrapStack-9JCo5vKi.js";import"./index-B4NDmpYR.js";/* empty css                                                */import"./index-B9uIMiyK.js";try{xr=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(hs=new xr.Error().stack)&&(xr._sentryDebugIds=xr._sentryDebugIds||{},xr._sentryDebugIds[hs]="b8a7ff22-bdea-4ecd-9d66-3360df4d4408",xr._sentryDebugIdIdentifier="sentry-dbid-b8a7ff22-bdea-4ecd-9d66-3360df4d4408")}catch{}var xr,hs;const mi=Zn({component:"meter",parts:["root"]});class ss{static create(e){return new ss(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=Kn(this.opts.ref)}#e=ne(()=>({role:"meter",value:this.opts.value.current,"aria-valuemin":this.opts.min.current,"aria-valuemax":this.opts.max.current,"aria-valuenow":this.opts.value.current,"data-value":this.opts.value.current,"data-max":this.opts.max.current,"data-min":this.opts.min.current,[mi.root]:"",...this.attachment}));get props(){return t(this.#e)}set props(e){m(this.#e,e)}}var fi=f("<div><!></div>");function yi(i,e){const r=nn();qe(e,!0);let a=D(e,"value",3,0),n=D(e,"max",3,100),o=D(e,"min",3,0),l=D(e,"id",19,()=>Yn(r)),c=D(e,"ref",15,null),p=nr(e,["$$slots","$$events","$$legacy","child","children","value","max","min","id","ref"]);const u=ss.create({value:Jr(()=>a()),max:Jr(()=>n()),min:Jr(()=>o()),id:Jr(()=>l()),ref:Jr(()=>c(),h=>c(h))}),g=ne(()=>Xn(p,u.props));var R=ge(),N=V(R),F=h=>{var w=ge(),$=V(w);At($,()=>e.child,()=>({props:t(g)})),s(h,w)},j=h=>{var w=fi();Xt(w,()=>({...t(g)}));var $=d(w);At($,()=>e.children??ir),s(h,w)};E(N,h=>{e.child?h(F):h(j,!1)}),s(i,R),Je()}const Vr={maxMS:9e5,initialMS:6e4,mult:2,maxSteps:4};let qs=class{constructor(i,e=Vr){this.callback=i;const r={...e};r.maxMS<0&&(console.warn("PollingManager: Negative maxMS detected, using default value of 15 minutes"),r.maxMS=Vr.maxMS),r.initialMS<=0&&(console.warn("PollingManager: Negative or zero initialMS detected, using default value of 1 minute"),r.initialMS=Vr.initialMS),r.mult<=0&&(console.warn("PollingManager: Negative or zero multiplier detected, using default value of 2"),r.mult=Vr.mult),r.maxSteps!==void 0&&r.maxSteps<0&&(console.warn("PollingManager: Negative maxSteps detected, using default value of 4"),r.maxSteps=Vr.maxSteps),this.params=r,this.currentMS=this.params.maxMS}timerId=null;currentMS;step=0;params;startPolling(){this.stopPolling(),this.currentMS=this.params.initialMS,this.step=0,this.safeExecute(),this.scheduleNext()}stopPolling(){this.timerId!==null&&(window.clearTimeout(this.timerId),this.timerId=null)}dispose(){this.stopPolling()}scheduleNext(){this.timerId=window.setTimeout(()=>{if(this.safeExecute(),this.params.maxMS===0){if(this.step++,this.params.maxSteps!==void 0&&this.step>=this.params.maxSteps)return void this.stopPolling()}else this.currentMS<this.params.maxMS&&(this.step++,this.params.maxSteps!==void 0&&this.step>=this.params.maxSteps?(this.currentMS=this.params.maxMS,this.step=0):this.currentMS=Math.min(this.currentMS*this.params.mult,this.params.maxMS));this.scheduleNext()},this.currentMS)}safeExecute(){try{const i=this.callback();i instanceof Promise&&i.catch(e=>console.error("Error in polling callback:",e))}catch(i){console.error("Error in polling callback:",i)}}};var wi=ur('<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.43703 10.7785C2.30998 10.978 2.16478 11.2137 2.05588 11.3951C1.94698 11.5764 2.00143 11.8121 2.18293 11.921L4.66948 13.4442C4.85098 13.553 5.08695 13.4986 5.19585 13.3173C5.2866 13.1541 5.41365 12.9365 5.55885 12.7007C6.53895 11.0868 7.5372 11.2681 9.3159 12.1204L11.7843 13.281C11.9839 13.3717 12.2017 13.281 12.2925 13.0997L13.4722 10.4339C13.563 10.2526 13.4722 10.0169 13.2907 9.92619C12.7644 9.69044 11.7298 9.20084 10.8223 8.74749C7.44645 7.13354 4.59689 7.24234 2.43703 10.7785Z" fill="currentColor"></path><path d="M13.563 4.72157C13.69 4.52209 13.8352 4.28635 13.9441 4.105C14.053 3.92366 13.9985 3.68791 13.817 3.57911L11.3305 2.05583C11.149 1.94702 10.913 2.00143 10.8041 2.18277C10.7134 2.34598 10.5863 2.56359 10.4411 2.79934C9.461 4.41329 8.46275 4.23194 6.68405 3.37963L4.21563 2.21904C4.01598 2.12837 3.79818 2.21904 3.70743 2.40038L2.52767 5.0661C2.43692 5.24745 2.52767 5.4832 2.70917 5.5739C3.23552 5.80965 4.27007 6.29925 5.1776 6.7526C8.53535 8.34845 11.3849 8.25775 13.563 4.72157Z" fill="currentColor"></path></svg>');function $i(i){var e=wi();s(i,e)}var bi=ur('<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.49933 0.25C3.49635 0.25 0.25 3.49593 0.25 7.50024C0.25 10.703 2.32715 13.4206 5.2081 14.3797C5.57084 14.446 5.70302 14.2222 5.70302 14.0299C5.70302 13.8576 5.69679 13.4019 5.69323 12.797C3.67661 13.235 3.25112 11.825 3.25112 11.825C2.92132 10.9874 2.44599 10.7644 2.44599 10.7644C1.78773 10.3149 2.49584 10.3238 2.49584 10.3238C3.22353 10.375 3.60629 11.0711 3.60629 11.0711C4.25298 12.1788 5.30335 11.8588 5.71638 11.6732C5.78225 11.205 5.96962 10.8854 6.17658 10.7043C4.56675 10.5209 2.87415 9.89918 2.87415 7.12104C2.87415 6.32925 3.15677 5.68257 3.62053 5.17563C3.54576 4.99226 3.29697 4.25521 3.69174 3.25691C3.69174 3.25691 4.30015 3.06196 5.68522 3.99973C6.26337 3.83906 6.8838 3.75895 7.50022 3.75583C8.1162 3.75895 8.73619 3.83906 9.31523 3.99973C10.6994 3.06196 11.3069 3.25691 11.3069 3.25691C11.7026 4.25521 11.4538 4.99226 11.3795 5.17563C11.8441 5.68257 12.1245 6.32925 12.1245 7.12104C12.1245 9.9063 10.4292 10.5192 8.81452 10.6985C9.07444 10.9224 9.30633 11.3648 9.30633 12.0413C9.30633 13.0102 9.29742 13.7922 9.29742 14.0299C9.29742 14.2239 9.42828 14.4496 9.79591 14.3788C12.6746 13.4179 14.75 10.7025 14.75 7.50024C14.75 3.49593 11.5036 0.25 7.49933 0.25Z" fill="currentColor"></path></svg>');function Si(i){var e=bi();s(i,e)}var _i=ur('<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.5028 2H7.7257C7.7257 3.44 8.8914 4.60571 10.3314 4.60571H11.3942V5.6343C11.3942 7.0743 12.5599 8.24 14 8.24V2.49714C14 2.22285 13.7771 2 13.5028 2ZM10.6399 4.88H4.86279C4.86279 6.32 6.0285 7.4857 7.4685 7.4857H8.53135V8.5143C8.53135 9.9543 9.69705 11.12 11.137 11.12V5.37715C11.137 5.10285 10.9142 4.88 10.6399 4.88ZM2 7.75995H7.7771C8.0514 7.75995 8.27425 7.9828 8.27425 8.2571V13.9999C6.83425 13.9999 5.66855 12.8342 5.66855 11.3942V10.3656H4.6057C3.16571 10.3656 2 9.19995 2 7.75995Z" fill="currentColor"></path></svg>');function Ci(i){var e=_i();s(i,e)}var ki=ur('<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 2.5C3 2.22386 3.22386 2 3.5 2H9.08579C9.21839 2 9.34557 2.05268 9.43934 2.14645L11.8536 4.56066C11.9473 4.65443 12 4.78161 12 4.91421V12.5C12 12.7761 11.7761 13 11.5 13H3.5C3.22386 13 3 12.7761 3 12.5V2.5ZM3.5 1C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V4.91421C13 4.51639 12.842 4.13486 12.5607 3.85355L10.1464 1.43934C9.86514 1.15804 9.48361 1 9.08579 1H3.5ZM4.5 4C4.22386 4 4 4.22386 4 4.5C4 4.77614 4.22386 5 4.5 5H7.5C7.77614 5 8 4.77614 8 4.5C8 4.22386 7.77614 4 7.5 4H4.5ZM4.5 7C4.22386 7 4 7.22386 4 7.5C4 7.77614 4.22386 8 4.5 8H10.5C10.7761 8 11 7.77614 11 7.5C11 7.22386 10.7761 7 10.5 7H4.5ZM4.5 10C4.22386 10 4 10.2239 4 10.5C4 10.7761 4.22386 11 4.5 11H10.5C10.7761 11 11 10.7761 11 10.5C11 10.2239 10.7761 10 10.5 10H4.5Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>');function ar(i){var e=ki();s(i,e)}var Ai=ur('<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.5 2C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V4.70711L9.29289 2H3.5ZM2 2.5C2 1.67157 2.67157 1 3.5 1H9.5C9.63261 1 9.75979 1.05268 9.85355 1.14645L12.7803 4.07322C12.921 4.21388 13 4.40464 13 4.60355V12.5C13 13.3284 12.3284 14 11.5 14H3.5C2.67157 14 2 13.3284 2 12.5V2.5ZM4.75 7.5C4.75 7.22386 4.97386 7 5.25 7H9.75C10.0261 7 10.25 7.22386 10.25 7.5C10.25 7.77614 10.0261 8 9.75 8H5.25C4.97386 8 4.75 7.77614 4.75 7.5Z" fill="currentColor"></path></svg>');function xi(i){var e=Ai();s(i,e)}var Mi=ur('<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>');function Tr(i){var e=Mi();s(i,e)}var Ti=ur("<svg><!></svg>");function Ei(i,e){const r=Oa(e,["children","$$slots","$$events","$$legacy"]);var a=Ti();Xt(a,()=>({xmlns:"http://www.w3.org/2000/svg","data-ds-icon":"fa",viewBox:"0 0 448 512",...r}));var n=d(a);ai(n,()=>'<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M144 80v96H48V80zM48 32C21.5 32 0 53.5 0 80v96c0 26.5 21.5 48 48 48h24v96c0 48.6 39.4 88 88 88h96v24c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48v-96c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v24h-96c-22.1 0-40-17.9-40-40v-96h24c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm352 304v96h-96v-96z"/>',!0),s(i,a)}class Or{constructor(e){this._host=e,this.pollingManager=new qs(()=>this.requestToolStatus(!1),{maxMS:0,initialMS:2e3,mult:1,maxSteps:150}),this.requestToolStatus(!1)}static key="toolConfigModel";configs=lt([]);pollingManager;_enableDebugFeatures=lt(!1);_settingsComponentSupported=lt({workspaceContext:!1,mcpServerList:!1,mcpServerImport:!1,orientation:!1,remoteTools:!1,userGuidelines:!1,terminal:!1,rules:!1,allowFeatureFlagOverrides:!1,secretsManagerEnabled:!1});_enableAgentMode=lt(!1);_enableAgentSwarmMode=lt(!1);_enableNativeRemoteMcp=lt(!0);_hasEverUsedRemoteAgent=lt(!1);_enableInitialOrientation=lt(!1);_userTier=lt("unknown");_userEmail=lt(void 0);_guidelines=lt({});transformToolDisplay(e){const r=!e.isConfigured,a=e.oauthUrl;if(e.identifier.hostName===Ra.remoteToolHost){let n=e.identifier.toolId;switch(typeof n=="string"&&/^\d+$/.test(n)&&(n=Number(n)),n){case Ht.GitHubApi:return{displayName:"GitHub",description:"Configure GitHub API access for repository operations",icon:Si,requiresAuthentication:r,authUrl:a};case Ht.GitHubAppReadonlyApi:case Ht.GitHubAppPostComment:return null;case Ht.Linear:return{displayName:"Linear",description:"Configure Linear API access for issue tracking",icon:Gn,requiresAuthentication:r,authUrl:a};case Ht.Jira:return{displayName:"Jira",description:"Configure Jira API access for issue tracking",icon:Ci,requiresAuthentication:r,authUrl:a};case Ht.Notion:return{displayName:"Notion",description:"Configure Notion API access",icon:jn,requiresAuthentication:r,authUrl:a};case Ht.Confluence:return{displayName:"Confluence",description:"Configure Confluence API access",icon:$i,requiresAuthentication:r,authUrl:a};case Ht.WebSearch:return{displayName:"Web Search",description:"Configure web search capabilities",icon:Vn,requiresAuthentication:r,authUrl:a};case Ht.Supabase:return{displayName:"Supabase",description:"Configure Supabase API access",icon:Jn,requiresAuthentication:r,authUrl:a};case Ht.Glean:return{displayName:"Glean",description:"Configure Glean API access",icon:qn,requiresAuthentication:r,authUrl:a};case Ht.Unknown:return{displayName:"Unknown",description:"Unknown tool",requiresAuthentication:r,authUrl:a};default:throw new Error(`Unhandled RemoteToolId: ${n}`)}}else if(e.identifier.hostName===Ra.localToolHost){const n=e.identifier.toolId;switch(n){case st.readFile:case st.editFile:case st.saveFile:case st.launchProcess:case st.killProcess:case st.readProcess:case st.writeProcess:case st.listProcesses:case st.waitProcess:case st.openBrowser:case st.clarify:case st.onboardingSubAgent:case st.strReplaceEditor:case st.remember:case st.diagnostics:case st.webFetch:case st.setupScript:case st.readTerminal:case st.gitCommitRetrieval:case st.memoryRetrieval:case st.startWorkerAgent:case st.readWorkerState:case st.waitForWorkerAgent:case st.sendInstructionToWorkerAgent:case st.stopWorkerAgent:case st.deleteWorkerAgent:case st.readWorkerAgentEdits:case st.applyWorkerAgentEdits:case st.LocalSubAgent:return{displayName:e.definition.name.toString(),description:"Local tool",icon:ar,requiresAuthentication:r,authUrl:a};default:throw new Error(`Unhandled LocalToolType: ${n}`)}}else if(e.identifier.hostName===Ra.sidecarToolHost){const n=e.identifier.toolId;switch(n){case kt.codebaseRetrieval:return{displayName:"Code Search",description:"Configure codebase search capabilities",icon:Tr,requiresAuthentication:r,authUrl:a};case kt.shell:return{displayName:"Shell",description:"Shell",icon:Tr,requiresAuthentication:r,authUrl:a};case kt.strReplaceEditor:return{displayName:"File Edit",description:"File Editor",icon:Tr,requiresAuthentication:r,authUrl:a};case kt.view:return{displayName:"File View",description:"File Viewer",icon:Tr,requiresAuthentication:r,authUrl:a};case kt.webFetch:return{displayName:"Web Fetch",description:"Retrieve information from the web",icon:Tr,requiresAuthentication:r,authUrl:a};case kt.removeFiles:return{displayName:"Remove Files",description:"Remove files from the codebase",icon:xi,requiresAuthentication:r,authUrl:a};case kt.remember:return{displayName:e.definition.name.toString(),description:"Remember",icon:ar,requiresAuthentication:r,authUrl:a};case kt.saveFile:return{displayName:"Save File",description:"Save a new file",icon:Qn,requiresAuthentication:r,authUrl:a};case kt.viewTaskList:return{displayName:"View Task List",description:"View the current task list",icon:ar,requiresAuthentication:r,authUrl:a};case kt.reorganizeTaskList:return{displayName:"Reorganize Task List",description:"Reorganize the task list structure for major restructuring",icon:ar,requiresAuthentication:r,authUrl:a};case kt.viewRangeUntruncated:return{displayName:e.definition.name.toString(),description:"View Range",icon:ar,requiresAuthentication:r,authUrl:a};case kt.updateTasks:return{displayName:"Update Tasks",description:"Update one or more tasks in the task list",icon:ar,requiresAuthentication:r,authUrl:a};case kt.addTasks:return{displayName:"Add Tasks",description:"Add one or more new tasks to the task list",icon:ar,requiresAuthentication:r,authUrl:a};case kt.searchUntruncated:return{displayName:e.definition.name.toString(),description:"Search Untruncated",icon:ar,requiresAuthentication:r,authUrl:a};case kt.renderMermaid:return{displayName:"View Mermaid Diagram",description:"View a mermaid diagram",icon:Ei,requiresAuthentication:r,authUrl:a};case kt.grepSearch:return{displayName:"Grep search",description:"Run grep search",icon:Tr,requiresAuthentication:r,authUrl:a};case kt.subAgent:return{displayName:"Sub-agent",description:"Delegate tasks to sub-agents",icon:ar,requiresAuthentication:r,authUrl:a};default:throw new Error(`Unhandled SidecarToolType: ${n}`)}}return{displayName:e.definition.name.toString(),description:e.definition.description||"",requiresAuthentication:r,authUrl:a}}handleMessageFromExtension(e){const r=e.data;switch(r.type){case Xe.toolConfigInitialize:return this.createConfigsFromHostTools(r.data.hostTools,r.data.toolConfigs),r.data&&r.data.enableDebugFeatures!==void 0&&this._enableDebugFeatures.set(r.data.enableDebugFeatures),r.data&&r.data.settingsComponentSupported!==void 0&&this._settingsComponentSupported.set(r.data.settingsComponentSupported),r.data.enableAgentMode!==void 0&&this._enableAgentMode.set(r.data.enableAgentMode),r.data.enableAgentSwarmMode!==void 0&&this._enableAgentSwarmMode.set(r.data.enableAgentSwarmMode),r.data.hasEverUsedRemoteAgent!==void 0&&this._hasEverUsedRemoteAgent.set(r.data.hasEverUsedRemoteAgent),r.data.enableInitialOrientation!==void 0&&this._enableInitialOrientation.set(r.data.enableInitialOrientation),r.data.userTier!==void 0&&this._userTier.set(r.data.userTier),r.data.userEmail!==void 0&&this._userEmail.set(r.data.userEmail),r.data.guidelines!==void 0&&this._guidelines.set(r.data.guidelines),r.data.enableNativeRemoteMcp!==void 0&&this._enableNativeRemoteMcp.set(r.data.enableNativeRemoteMcp),!0;case Xe.toolConfigDefinitionsResponse:return this.configs.update(a=>this.createConfigsFromHostTools(r.data.hostTools,[]).map(n=>{const o=a.find(l=>l.name===n.name);return o?{...o,displayName:n.displayName,description:n.description,icon:n.icon,requiresAuthentication:n.requiresAuthentication,authUrl:n.authUrl,isConfigured:n.isConfigured,toolApprovalConfig:n.toolApprovalConfig}:n})),!0}return!1}createConfigsFromHostTools(e,r){return e.map(a=>{const n=this.transformToolDisplay(a);if(n===null)return null;const o=r.find(c=>c.name===a.definition.name),l=o?.isConfigured??!n.requiresAuthentication;return{config:o?.config??{},configString:JSON.stringify(o?.config??{},null,2),isConfigured:l,name:a.definition.name.toString(),displayName:n.displayName,description:n.description,identifier:a.identifier,icon:n.icon,requiresAuthentication:n.requiresAuthentication,authUrl:n.authUrl,showStatus:!1,statusMessage:"",statusType:"info",toolApprovalConfig:a.toolApprovalConfig}}).filter(a=>a!==null)}getConfigs(){return this.configs}isDisplayableTool(e){return["github","linear","notion","jira","confluence","supabase"].includes(e.displayName.toLowerCase())}getDisplayableTools(){return ga(this.configs,e=>{const r=e.filter(n=>this.isDisplayableTool(n)),a=new Map;for(const n of r)a.set(n.displayName,n);return Array.from(a.values()).sort((n,o)=>{const l={GitHub:1,Linear:2,Notion:3},c=Number.MAX_SAFE_INTEGER,p=l[n.displayName]||c,u=l[o.displayName]||c;return p<c&&u<c||p===c&&u===c?p!==u?p-u:n.displayName.localeCompare(o.displayName):p-u})})}getPretendNativeToolDefs(){return ga(this.configs,e=>this.getEnableNativeRemoteMcp()?Bs(e):[])}saveConfig(e){this.startPolling()}notifyLoaded(){this._host.postMessage({type:Xe.toolConfigLoaded})}startPolling(){this.pollingManager.startPolling()}requestToolStatus(e=!0){this._host.postMessage({type:Xe.toolConfigGetDefinitions,data:{useCache:e}})}dispose(){this.pollingManager.dispose()}getEnableDebugFeatures(){return this._enableDebugFeatures}getEnableAgentMode(){return this._enableAgentMode}getEnableAgentSwarmMode(){return this._enableAgentSwarmMode}getEnableNativeRemoteMcp(){return this._host.clientType==="vscode"?this._enableNativeRemoteMcp:on(!1)}getHasEverUsedRemoteAgent(){return this._hasEverUsedRemoteAgent}getEnableInitialOrientation(){return this._enableInitialOrientation}getUserTier(){return this._userTier}getUserEmail(){return this._userEmail}getGuidelines(){return this._guidelines}updateLocalUserGuidelines(e){this._guidelines.update(r=>r.userGuidelines?{...r,userGuidelines:{...r.userGuidelines,contents:e,enabled:e.length>0}}:r)}updateToolApprovalConfig(e,r){this.configs.update(a=>a.map(n=>n.identifier.toolId===e.toolId&&n.identifier.hostName===e.hostName?{...n,toolApprovalConfig:r}:n))}getSettingsComponentSupported(){return this._settingsComponentSupported}}var qa=(i=>(i[i.ok=0]="ok",i[i.cancelled=1]="cancelled",i[i.unknown=2]="unknown",i[i.unavailable=3]="unavailable",i[i.unimplemented=4]="unimplemented",i[i.invalidArgument=5]="invalidArgument",i[i.resourceExhausted=6]="resourceExhausted",i[i.unauthenticated=7]="unauthenticated",i[i.permissionDenied=8]="permissionDenied",i[i.deadlineExceeded=9]="deadlineExceeded",i[i.augmentTooLarge=10]="augmentTooLarge",i[i.augmentClientTimeout=11]="augmentClientTimeout",i[i.augmentUpgradeRequired=12]="augmentUpgradeRequired",i))(qa||{});function sr(i,e=!1){if(i instanceof Error){if(e){const r=function(a){return a.cause instanceof String?String(a.cause):a.cause instanceof Object?JSON.stringify(a.cause):""}(i);if(r!=="")return`${i.message} (due to ${r})`}return i.message}return String(i)}qa.unavailable,qa.cancelled;const jt=Xr({name:Mr().optional(),title:Mr().optional(),type:wn(["stdio","http","sse"]).optional(),command:Mr().optional(),args:_a(Ba([Mr(),fs(),ys()])).optional(),env:Sa(Ba([Mr(),fs(),ys(),$n(),bn()])).optional(),url:Mr().optional()}).passthrough(),Ri=_a(jt),Ni=Xr({servers:_a(jt)}),Ui=Xr({mcpServers:_a(jt)}),Ii=Xr({servers:Sa(jt)}),Pi=Xr({mcpServers:Sa(jt)}),Li=Sa(Sn()),zi=jt.refine(i=>{const e=i.command!==void 0,r=i.url!==void 0;if(!e&&!r)return!1;const a=new Set(["name","title","type","command","args","env","url"]);return Object.keys(i).every(o=>a.has(o))},{message:"Single server object must have valid server properties"});class Tt extends Error{constructor(e){super(e),this.name="MCPServerError",Object.setPrototypeOf(this,Tt.prototype)}}function qt(i){return i?.type==="http"||i?.type==="sse"}function Er(i){return i?.type==="stdio"}function ia(i){return function(e){return e?.type==="http"||e?.type==="sse"}(i)?i.url:function(e){return e?.type==="stdio"}(i)?i.command:""}function fr(i){try{const e=jt.transform(a=>{let n;if(a.type)n=a.type;else if(a.url)n="http";else{if(!a.command)throw new Error("Server must have either 'command' (for stdio) or 'url' (for http/sse) property");n="stdio"}if(n==="http"||n==="sse"){if(!a.url)throw new Error(`${n.toUpperCase()} server must have a 'url' property`);return{type:n,name:a.name||a.title||a.url,url:a.url}}{const o=a.command||"",l=a.args?a.args.map(g=>String(g)):[];if(!o)throw new Error("Stdio server must have a 'command' property");const c=l.length>0?`${o} ${l.join(" ")}`:o,p=a.name||a.title||(o?o.split(" ")[0]:""),u=a.env?Object.fromEntries(Object.entries(a.env).filter(([g,R])=>R!=null).map(([g,R])=>[g,String(R)])):void 0;return{type:"stdio",name:p,command:c,arguments:"",useShellInterpolation:!0,env:Object.keys(u||{}).length>0?u:void 0}}}).refine(a=>!!a.name,{message:"Server must have a name",path:["name"]}).refine(a=>a.type==="http"||a.type==="sse"?!!a.url:!!a.command,{message:"Server must have either 'command' (for stdio) or 'url' (for http/sse)",path:["command","url"]}),r=e.safeParse(i);if(!r.success)throw new Tt(r.error.message);return r.data}catch(e){throw e instanceof Error?new Tt(`Invalid server configuration: ${e.message}`):new Tt("Invalid server configuration")}}class ea{constructor(e,r){this.host=e,this.extensionClient=r,this.poll(),this.loadServersFromStorage(),this.pollingManager=new qs(this.poll.bind(this),{maxMS:3e3,initialMS:1e3,mult:1.5,maxSteps:2}),this.pollingManager.startPolling()}static key="mcpServerModel";pollingManager;servers=lt([]);authRequired=lt(new Set);dispose(){this.pollingManager.dispose()}async poll(){await this.refreshAuthRequiredServers()}handleMessageFromExtension(e){const r=e.data;if(r.type===Xe.getStoredMCPServersResponse){const a=r.data;return Array.isArray(a)&&this.servers.set(a),!0}return!1}async refreshAuthRequiredServers(){const e=await this.extensionClient.mcpGetAuthRequiredServers();this.authRequired.set(new Set(e))}getAuthRequiredStore(){return this.authRequired}async getAuthSecret(e){return await this.extensionClient.mcpGetAuthSecret(e)}async setAuthSecret(e,r){await this.extensionClient.mcpSetAuthSecret(e,r)}async importServersFromJSON(e){return this.importFromJSON(e)}loadServersFromStorage(){try{this.host.postMessage({type:Xe.getStoredMCPServers})}catch(e){console.error("Failed to load MCP servers:",e),this.servers.set([])}}saveServers(e){try{this.host.postMessage({type:Xe.setStoredMCPServers,data:e})}catch(r){throw console.error("Failed to save MCP servers:",r),new Tt("Failed to save MCP servers")}}getServers(){return this.servers}async addServer(e,r){r&&await this.setAuthSecret(e.name,r),this.checkExistingServerName(e.name),this.servers.update(a=>{const n=[...a,{...e,id:crypto.randomUUID()}];return this.saveServers(n),n})}addServers(e){for(const r of e)this.checkExistingServerName(r.name);this.servers.update(r=>{const a=[...r,...e.map(n=>({...n,id:crypto.randomUUID()}))];return this.saveServers(a),a})}checkExistingServerName(e,r){const a=Da(this.servers).find(n=>n.name===e);if(a&&a?.id!==r)throw new Tt(`Server name '${e}' already exists`)}async updateServer(e,r){r&&await this.setAuthSecret(e.name,r),this.checkExistingServerName(e.name,e.id),this.servers.update(a=>{const n=a.map(o=>o.id===e.id?e:o);return this.saveServers(n),n})}deleteServer(e){this.servers.update(r=>{const a=r.filter(n=>n.id!==e.id);return this.saveServers(a),a}),e.type!=="http"&&e.type!=="sse"||this.host.postMessage({type:Xe.deleteOAuthSession,data:e.name})}toggleDisabledServer(e){this.servers.update(r=>{const a=r.map(n=>n.id===e?{...n,disabled:!n.disabled}:n);return this.saveServers(a),a})}static convertServerToJSON(e){if(qt(e))return JSON.stringify({mcpServers:{[e.name]:{url:e.url,type:e.type}}},null,2);{const r=e;return JSON.stringify({mcpServers:{[r.name]:{command:r.command.split(" ")[0],args:r.command.split(" ").slice(1),env:r.env}}},null,2)}}static parseServerValidationMessages(e){const r=new Map,a=new Map;e.forEach(o=>{const l=o.tools?.filter(c=>!c.enabled).map(c=>c.definition.mcp_tool_name);o.disabled?r.set(o.id,"MCP server has been manually disabled"):o.tools&&o.tools.length===0?r.set(o.id,"No tools are available for this MCP server"):l&&l.length===o.tools?.length?r.set(o.id,"All tools for this MCP server have validation errors: "+l.join(", ")):l&&l.length>0&&a.set(o.id,"MCP server has validation errors in the following tools which have been disabled: "+l.join(", "))});const n=this.parseDuplicateServerIds(e);return{errors:new Map([...r,...n]),warnings:a}}static parseDuplicateServerIds(e){const r=new Map;for(const n of e)r.has(n.name)||r.set(n.name,[]),r.get(n.name).push(n.id);const a=new Map;for(const[,n]of r)if(n.length>1)for(let o=1;o<n.length;o++)a.set(n[o],"MCP server is disabled due to duplicate server names");return a}static convertParsedServerToWebview(e){const{tools:r,...a}=e;return{...a,tools:void 0}}static parseServerConfigFromJSON(e){return function(a){try{const n=JSON.parse(a),o=Ba([Ri.transform(l=>l.map(c=>fr(c))),Ni.transform(l=>l.servers.map(c=>fr(c))),Ui.transform(l=>l.mcpServers.map(c=>fr(c))),Ii.transform(l=>Object.entries(l.servers).map(([c,p])=>{const u=jt.parse(p);return fr({...u,name:u.name||c})})),Pi.transform(l=>Object.entries(l.mcpServers).map(([c,p])=>{const u=jt.parse(p);return fr({...u,name:u.name||c})})),zi.transform(l=>[fr(l)]),Li.transform(l=>{if(!Object.values(l).some(c=>{const p=jt.safeParse(c);return p.success&&(p.data.command!==void 0||p.data.url!==void 0)}))throw new Error("No command or url property found in any server config");return Object.entries(l).map(([c,p])=>{const u=jt.parse(p);return fr({...u,name:u.name||c})})})]).safeParse(n);if(o.success)return o.data;throw new Tt(`Invalid MCP servers JSON. Expected either an array of server configs or an object with a 'servers' array property (e.g. { "servers": [ ... ] }).`)}catch(n){throw n instanceof Tt?n:new Tt("Failed to parse MCP servers from JSON. Please check the format.")}}(e).map(a=>this.convertParsedServerToWebview(a))}importFromJSON(e){try{const r=ea.parseServerConfigFromJSON(e),a=Da(this.servers),n=new Set(a.map(o=>o.name));for(const o of r){if(!o.name)throw new Tt("All servers must have a name.");if(n.has(o.name))throw new Tt(`A server with the name '${o.name}' already exists.`);n.add(o.name)}return this.servers.update(o=>{const l=[...o,...r.map(c=>({...c,id:crypto.randomUUID()}))];return this.saveServers(l),l}),r.length}catch(r){throw r instanceof Tt?r:new Tt("Failed to import MCP servers from JSON. Please check the format.")}}}class Oi{constructor(e){this._host=e,this.requestTerminalSettings()}_terminalSettings=lt({supportedShells:[],selectedShell:void 0,startupScript:void 0});handleMessageFromExtension(e){const r=e.data;return r.type===Xe.terminalSettingsResponse&&(this._terminalSettings.set(r.data),!0)}getTerminalSettings(){return this._terminalSettings}requestTerminalSettings(){this._host.postMessage({type:Xe.getTerminalSettings})}updateSelectedShell(e){this._terminalSettings.update(r=>({...r,selectedShell:e})),this._host.postMessage({type:Xe.updateTerminalSettings,data:{selectedShell:e}})}updateStartupScript(e){this._terminalSettings.update(r=>({...r,startupScript:e})),this._host.postMessage({type:Xe.updateTerminalSettings,data:{startupScript:e}})}}class Kr{constructor(e){this._msgBroker=e,this.initialize(),this.startPolling()}static key="swarmModeModel";static POLLING_INTERVAL_MS=5e3;_swarmModeSettings=lt(na);_isLoaded=!1;_pollInterval=null;_lastKnownSettingsHash="";get getCurrentSettings(){return this._swarmModeSettings}async initialize(){if(!this._isLoaded)try{const e=await this._msgBroker.sendToSidecar({type:Na.getSwarmModeSettings});e.data&&(this._swarmModeSettings.set(e.data),this._lastKnownSettingsHash=JSON.stringify(e.data)),this._isLoaded=!0}catch(e){console.warn("Failed to load swarm mode settings, using defaults:",e),this._swarmModeSettings.set(na),this._lastKnownSettingsHash=JSON.stringify(na),this._isLoaded=!0}}async updateSettings(e){try{const r=await this._msgBroker.sendToSidecar({type:Na.updateSwarmModeSettings,data:e});r.data&&(this._swarmModeSettings.set(r.data),this._lastKnownSettingsHash=JSON.stringify(r.data))}catch(r){throw console.error("Failed to update swarm mode settings:",r),r}}async setEnabled(e){await this.updateSettings({enabled:e})}async resetToDefaults(){await this.updateSettings(na)}updateEnabled(e){this.setEnabled(e).catch(r=>{console.error("Failed to update enabled setting:",r)})}startPolling(){this._pollInterval=setInterval(()=>{this.checkForUpdates()},Kr.POLLING_INTERVAL_MS)}stopPolling(){this._pollInterval!==null&&(clearInterval(this._pollInterval),this._pollInterval=null)}async checkForUpdates(){try{const e=await this._msgBroker.sendToSidecar({type:Na.getSwarmModeSettings}),r=JSON.stringify(e.data);this._lastKnownSettingsHash&&r!==this._lastKnownSettingsHash&&e.data&&this._swarmModeSettings.set(e.data),this._lastKnownSettingsHash=r}catch(e){console.warn("Failed to check for swarm mode settings updates:",e)}}dispose=()=>{this.stopPolling()}}var $r=(i=>(i.file="file",i.folder="folder",i))($r||{});class cr{constructor(e,r){this.host=e,this.asyncMsgSender=r;const{subscribe:a,set:n,update:o}=lt({sourceFolders:[],sourceTree:[],syncStatus:Ds.done});this.subscribe=a,this.set=n,this.update=o,this.getSourceFolders().then(l=>{this.update(c=>({...c,sourceFolders:l,sourceTree:cr.sourceFoldersToSourceNodes(l)}))})}subscribe;set;update;async expandNode(e){e.children=await this.getChildren(e.fileId),e.expanded=!0,this.update(r=>r)}collapseNode(e){this.update(r=>(e.children=[],e.expanded=!1,r))}toggleNode(e){e.type==="folder"&&e.inclusionState!==Kt.excluded&&(e.expanded?this.collapseNode(e):this.expandNode(e))}addMoreSourceFolders(){this.host.postMessage({type:Xe.wsContextAddMoreSourceFolders})}removeSourceFolder(e){this.host.postMessage({type:Xe.wsContextRemoveSourceFolder,data:e})}requestRefresh(){this.host.postMessage({type:Xe.wsContextUserRequestedRefresh})}handleMessageFromExtension=async e=>{const r=e.data;switch(r.type){case Xe.wsContextSourceFoldersChanged:case Xe.wsContextFolderContentsChanged:this.updateSourceFolders(await this.getSourceFolders());break;case Xe.sourceFoldersSyncStatus:this.update(a=>({...a,syncStatus:r.data.status}))}};async updateSourceFolders(e){let r=Da(this);const a=await this.getRefreshedSourceTree(r.sourceTree,e);this.update(n=>({...n,sourceFolders:e,sourceTree:a}))}async getRefreshedSourceTree(e,r){const a=cr.sourceFoldersToSourceNodes(r);return this.getRefreshedSourceTreeRecurse(e,a)}async getRefreshedSourceTreeRecurse(e,r){const a=new Map(e.map(n=>[JSON.stringify([n.fileId.folderRoot,n.fileId.relPath]),n]));for(let n of r){const o=cr.fileIdToString(n.fileId);if(n.type==="folder"){const l=a.get(o);l&&(n.expanded=l.type==="folder"&&l.expanded,n.expanded&&(n.children=await this.getChildren(n.fileId),n.children=await this.getRefreshedSourceTreeRecurse(l.children,n.children)))}}return r}static fileIdToString(e){return JSON.stringify([e.folderRoot,e.relPath])}static sourceFoldersToSourceNodes(e){return e.filter(r=>!r.isNestedFolder&&!r.isPending).sort((r,a)=>r.name.localeCompare(a.name)).map(r=>({name:r.name,fileId:r.fileId,children:[],expanded:!1,type:"folder",inclusionState:r.inclusionState,reason:"",trackedFileCount:r.trackedFileCount}))}getSourceFolders=async()=>(await this.asyncMsgSender.send({type:Xe.wsContextGetSourceFoldersRequest},1e4)).data.workspaceFolders;getChildren=async e=>(await this.asyncMsgSender.send({type:Xe.wsContextGetChildrenRequest,data:{fileId:{folderRoot:e.folderRoot,relPath:e.relPath}}},1e4)).data.children.map(r=>r.type==="folder"?{...r,children:[],expanded:!1}:{...r}).sort((r,a)=>r.type===a.type?r.name.localeCompare(a.name):r.type==="folder"?-1:1)}var Di=f('<div><!> <!> <span class="name svelte-wku3wr"> <!></span> <!></div>'),Fi=f('<div class="source-folder svelte-wku3wr"><!> <div role="button" tabindex="0" class="add-more svelte-wku3wr"><!> Add more...</div></div>');ba(["keyup","click"]);const Bi="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M2.66658%201.01118C3.65328%200.351894%204.81331%200%206%200C7.5907%200.00195418%209.11569%200.634723%2010.2405%201.75952C11.3653%202.88431%2011.998%204.4093%2012%206C12%207.18669%2011.6481%208.34672%2010.9888%209.33342C10.3295%2010.3201%209.39246%2011.0891%208.2961%2011.5433C7.19975%2011.9974%205.99335%2012.1162%204.82946%2011.8847C3.66557%2011.6532%202.59648%2011.0818%201.75736%2010.2426C0.918247%209.40352%200.346802%208.33443%200.115291%207.17054C-0.11622%206.00666%200.00259969%204.80025%200.456725%203.7039C0.910851%202.60754%201.67989%201.67047%202.66658%201.01118ZM5.86301%208.67273L9.44256%203.9L8.24256%203L5.12729%207.15368L3.17471%205.59162L2.23767%206.76292L4.79449%208.80838L5.86301%208.67273Z'%20fill='%23388A34'/%3e%3c/svg%3e",Hi="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M2.66658%201.01119C3.65328%200.351896%204.81332%200%206%200C7.5907%200.00195419%209.11569%200.634726%2010.2405%201.75953C11.3653%202.88433%2011.998%204.40933%2012%206.00003C12%207.18673%2011.6481%208.34677%2010.9888%209.33347C10.3295%2010.3202%209.39246%2011.0892%208.2961%2011.5433C7.19975%2011.9975%205.99335%2012.1163%204.82946%2011.8848C3.66558%2011.6533%202.59648%2011.0818%201.75736%2010.2427C0.918247%209.40358%200.346802%208.33447%200.115291%207.17058C-0.11622%206.00669%200.00259969%204.80028%200.456726%203.70392C0.910851%202.60756%201.67989%201.67048%202.66658%201.01119ZM6.00007%207.07359L8.1213%209.19482L9.18196%208.13416L7.06073%206.01292L9.18198%203.89166L8.12132%202.83099L6.00007%204.95225L3.87866%202.83083L2.818%203.89149L4.93941%206.01292L2.81802%208.13432L3.87868%209.19499L6.00007%207.07359Z'%20fill='%23E51400'/%3e%3c/svg%3e",qi="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M2.66658%201.01118C3.65328%200.351894%204.81331%200%206%200C7.5907%200.00195418%209.11569%200.634723%2010.2405%201.75952C11.3653%202.88431%2011.998%204.4093%2012%206C12%207.18669%2011.6481%208.34672%2010.9888%209.33342C10.3295%2010.3201%209.39246%2011.0891%208.2961%2011.5433C7.19975%2011.9974%205.99335%2012.1162%204.82946%2011.8847C3.66557%2011.6532%202.59648%2011.0818%201.75736%2010.2426C0.918247%209.40352%200.346802%208.33443%200.115291%207.17054C-0.11622%206.00666%200.00259969%204.80025%200.456725%203.7039C0.910851%202.60754%201.67989%201.67047%202.66658%201.01118ZM3.66667%205.83333C3.66667%205.99815%203.61779%206.15927%203.52623%206.29631C3.43466%206.43335%203.30451%206.54016%203.15224%206.60323C2.99997%206.66631%202.83241%206.68281%202.67076%206.65065C2.50911%206.6185%202.36062%206.53913%202.24408%206.42259C2.12753%206.30605%202.04817%206.15756%202.01601%205.99591C1.98386%205.83426%202.00036%205.6667%202.06343%205.51443C2.12651%205.36216%202.23332%205.23201%202.37036%205.14044C2.5074%205.04887%202.66852%205%202.83333%205C3.05435%205%203.26631%205.0878%203.42259%205.24408C3.57887%205.40036%203.66667%205.61232%203.66667%205.83333ZM6.83333%205.83333C6.83333%205.99815%206.78446%206.15927%206.69289%206.29631C6.60132%206.43335%206.47117%206.54016%206.3189%206.60323C6.16663%206.66631%205.99908%206.68281%205.83742%206.65065C5.67577%206.6185%205.52729%206.53913%205.41074%206.42259C5.2942%206.30605%205.21483%206.15756%205.18268%205.99591C5.15052%205.83426%205.16703%205.6667%205.2301%205.51443C5.29317%205.36216%205.39998%205.23201%205.53702%205.14044C5.67407%205.04887%205.83518%205%206%205C6.22101%205%206.43297%205.0878%206.58926%205.24408C6.74554%205.40036%206.83333%205.61232%206.83333%205.83333ZM9.85956%206.29631C9.95113%206.15927%2010%205.99815%2010%205.83333C10%205.61232%209.9122%205.40036%209.75592%205.24408C9.59964%205.0878%209.38768%205%209.16667%205C9.00185%205%208.84073%205.04887%208.70369%205.14044C8.56665%205.23201%208.45984%205.36216%208.39677%205.51443C8.33369%205.6667%208.31719%205.83426%208.34935%205.99591C8.3815%206.15756%208.46087%206.30605%208.57741%206.42259C8.69395%206.53913%208.84244%206.6185%209.00409%206.65065C9.16574%206.68281%209.3333%206.66631%209.48557%206.60323C9.63784%206.54016%209.76799%206.43335%209.85956%206.29631Z'%20fill='%23388A34'/%3e%3c/svg%3e";var Ji=f('<div class="children-container"></div>'),Vi=f('<div><div role="treeitem" aria-selected="false" tabindex="0"><!> <span class="name svelte-1qg3awc"> </span> <!> <img/></div> <!></div>');function Js(i,e){qe(e,!0);let r=Nr(e.data);const a=()=>{e.wsContextModel.toggleNode(r)},n={[Kt.included]:Bi,[Kt.excluded]:Hi,[Kt.partial]:qi},o={[Kt.included]:"included",[Kt.excluded]:"excluded",[Kt.partial]:"partially included"};let l=ne(()=>r.type===$r.folder&&r.inclusionState!==Kt.excluded),c=ne(()=>r.type===$r.folder&&r.expanded&&r.children&&r.children.length>0?r:null);var p=Vi(),u=d(p);let g;u.__click=a;var R=ne(()=>da("Enter",a));u.__keyup=function(...C){t(R)?.apply(this,C)};var N=d(u),F=C=>{{let A=ne(()=>r.expanded?"down":"right");li(C,{get direction(){return t(A)},size:1})}},j=C=>{var A=ge(),_=V(A),z=b=>{_e(b,{name:"folder",size:1})},H=b=>{_e(b,{name:"file",size:1})};E(_,b=>{r.type===$r.folder?b(z):b(H,!1)},!0),s(C,A)};E(N,C=>{r.type===$r.folder&&r.inclusionState!==Kt.excluded?C(F):C(j,!1)});var h=v(N,2),w=d(h),$=v(h,2),P=C=>{Q(C,{size:1,class:"file-count",children:(A,_)=>{var z=S();te(H=>de(z,H),[()=>r.trackedFileCount.toLocaleString()]),s(A,z)},$$slots:{default:!0}})};E($,C=>{r.type===$r.folder&&r.inclusionState!==Kt.excluded&&typeof r.trackedFileCount=="number"&&C(P)});var k=v($,2),y=v(u,2),G=C=>{var A=Ji();gt(A,21,()=>t(c).children,_=>cr.fileIdToString(_.fileId),(_,z)=>{{let H=ne(()=>e.indentLevel+1);Js(_,{get data(){return t(z)},get wsContextModel(){return e.wsContextModel},get indentLevel(){return t(H)}})}}),s(C,A)};E(y,C=>{t(c)&&C(G)}),te(C=>{g=Ut(u,1,"tree-item svelte-1qg3awc",null,g,C),Jt(u,"title",r.reason),Jt(u,"aria-expanded",r.type===$r.folder&&r.expanded),Jt(u,"aria-level",e.indentLevel),zs(u,`padding-left: ${10*e.indentLevel+20}px;`),de(w,r.name),Jt(k,"src",n[r.inclusionState]),Jt(k,"alt",o[r.inclusionState])},[()=>({"included-folder":t(l)})]),s(i,p),Je()}ba(["click","keyup"]);var ji=f('<div class="files-container svelte-ne2oho"></div>');function Gi(i,e){qe(e,!0);const[r,a]=Lt();let n=ne(()=>Le(e.wsContextModel,"$wsContextModel",r).sourceTree);var o=ji();gt(o,21,()=>t(n),l=>cr.fileIdToString(l.fileId),(l,c)=>{Js(l,{get wsContextModel(){return e.wsContextModel},get data(){return t(c)},indentLevel:0})}),s(i,o),Je(),a()}var Wi=ur('<svg width="15" height="15" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="16" height="16" transform="matrix(-1 0 0 -1 16 16)" fill="currentColor" fill-opacity="0.01"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M13.7075 11.7333C13.7075 12.8236 12.8236 13.7075 11.7333 13.7075C10.643 13.7075 9.75909 12.8236 9.75909 11.7333C9.75909 10.643 10.643 9.75909 11.7333 9.75909C12.8236 9.75909 13.7075 10.643 13.7075 11.7333ZM11.7333 14.6675C13.3538 14.6675 14.6675 13.3538 14.6675 11.7333C14.6675 10.1128 13.3538 8.79909 11.7333 8.79909C10.1128 8.79909 8.79909 10.1128 8.79909 11.7333C8.79909 13.3538 10.1128 14.6675 11.7333 14.6675ZM9.79161 4.26647L13.3333 2.30721V6.22571L9.79161 4.26647ZM13.1852 7.24088C13.6829 7.51617 14.2933 7.15625 14.2933 6.58752V1.9454C14.2933 1.37665 13.6829 1.01676 13.1852 1.29207L8.98946 3.61313C8.47582 3.89729 8.47582 4.63564 8.98946 4.9198L13.1852 7.24088ZM7.14663 6.39988C7.14663 6.81225 6.81233 7.14654 6.39996 7.14654H2.1333C1.72093 7.14654 1.38664 6.81225 1.38664 6.39988V2.13324C1.38664 1.72087 1.72093 1.38657 2.1333 1.38657H6.39996C6.81233 1.38657 7.14663 1.72087 7.14663 2.13324V6.39988ZM6.18663 6.18654V2.34657H2.34664V6.18654H6.18663ZM1.66056 13.6606C1.47314 13.848 1.47314 14.152 1.66056 14.3394C1.84797 14.5269 2.15186 14.5269 2.33938 14.3394L4.26664 12.4121L6.19388 14.3394C6.38133 14.5268 6.68525 14.5268 6.8727 14.3394C7.06015 14.1519 7.06015 13.848 6.8727 13.6606L4.94546 11.7333L6.8727 9.80608C7.06015 9.61863 7.06015 9.31471 6.8727 9.12726C6.68525 8.9398 6.38133 8.9398 6.19388 9.12726L4.26664 11.0545L2.33938 9.12722C2.15186 8.93978 1.84797 8.93978 1.66056 9.12722C1.47314 9.31468 1.47314 9.61861 1.66056 9.80605L3.58781 11.7333L1.66056 13.6606Z" fill="currentColor"></path></svg>');function Ki(i){var e=Wi();s(i,e)}var Zi=f('<div class="icon-wrapper svelte-17335g0"><!></div>'),Yi=f('<div class="icon-wrapper svelte-17335g0"><!></div>'),Xi=f("<!> <!>",1),Qi=f('<div class="settings-card-body"><!></div>'),eo=f('<div><div class="settings-card-content svelte-17335g0"><div class="settings-card-left svelte-17335g0"><!></div> <div class="settings-card-right svelte-17335g0"><!></div></div> <!></div>');function Gt(i,e){const r=ln(e),a=Oa(e,["children","$$slots","$$events","$$legacy"]),n=Oa(a,["class","icon","iconName","title","isClickable"]);qe(e,!1);const o=Ue(),l=Ue(),c=Ue();let p=D(e,"class",8,""),u=D(e,"icon",24,()=>{}),g=D(e,"iconName",24,()=>{}),R=D(e,"title",24,()=>{}),N=D(e,"isClickable",8,!1);nt(()=>(t(o),t(l),pe(n)),()=>{m(o,n.class),m(l,cn(n,["class"]))}),nt(()=>(pe(p()),t(o)),()=>{m(c,`settings-card ${p()} ${t(o)||""}`)}),lr();var F=eo();Xt(F,A=>({role:"button",class:t(c),...t(l),[dn]:A}),[()=>({clickable:N()})],void 0,"svelte-17335g0");var j=d(F),h=d(j),w=d(h),$=A=>{var _=Xi(),z=V(_),H=W=>{var I=Zi(),M=d(I);_e(M,{get name(){return g()},size:1}),s(W,I)},b=W=>{var I=ge(),M=V(I),L=K=>{var T=Yi(),O=d(T);et(O,u,(Y,x)=>{x(Y,{})}),s(K,T)};E(M,K=>{u()&&K(L)},!0),s(W,I)};E(z,W=>{g()?W(H):W(b,!1)});var q=v(z,2),J=W=>{Q(W,{color:"neutral",size:1,weight:"light",class:"card-title",children:(I,M)=>{var L=S();te(()=>de(L,R())),s(I,L)},$$slots:{default:!0}})};E(q,W=>{R()&&W(J)}),s(A,_)},P=A=>{var _=ge(),z=V(_);ca(z,e,"headerLeft",{},null),s(A,_)};E(w,A=>{u()||R()?A($):A(P,!1)});var k=v(h,2),y=d(k);ca(y,e,"headerRight",{},null);var G=v(j,2),C=A=>{var _=Qi(),z=d(_);ca(z,e,"default",{},null),s(A,_)};E(G,A=>{me(()=>r.default)&&A(C)}),Dt("click",F,function(A){ii.call(this,e,A)}),s(i,F),Je()}var to=f("<div><!></div>"),ro=f('<div class="context-list svelte-yszddx"><div><!> <!></div> <div><div class="files-header svelte-yszddx"><!> <!></div> <!></div></div>');function ao(i,e){qe(e,!0);const r=()=>Le(o,"$wsContextModel",a),[a,n]=Lt();let o=new cr(_t,new un(_t.postMessage)),l=ne(()=>r().sourceFolders.sort((p,u)=>p.isWorkspaceFolder!==u.isWorkspaceFolder?p.isWorkspaceFolder?-1:1:p.fileId.folderRoot.localeCompare(u.fileId.folderRoot))),c=ne(()=>t(l).reduce((p,u)=>p+(u.trackedFileCount??0),0));Dt("message",rs,function(...p){o.handleMessageFromExtension?.apply(this,p)}),Gt(i,{get icon(){return Ki},title:"Context",$$events:{contextmenu:u=>u.preventDefault()},headerRight:u=>{var g=to(),R=d(g),N=F=>{var j=ne(()=>da("Enter",()=>o.requestRefresh()));It(F,{title:"Refresh",variant:"ghost-block",color:"neutral",size:1,$$events:{click:()=>o.requestRefresh(),keyup(...h){t(j)?.apply(this,h)}},children:(h,w)=>{_e(h,{name:"refresh-ccw"})},$$slots:{default:!0}})};E(R,F=>{r().syncStatus===Ds.done&&F(N)}),s(u,g)},children:(u,g)=>{var R=ro(),N=d(R),F=d(N);Q(F,{size:1,weight:"medium",class:"context-section-header",children:(P,k)=>{var y=S("SOURCE FOLDERS");s(P,y)},$$slots:{default:!0}}),function(P,k){qe(k,!0);let y=D(k,"folders",19,()=>[]);var G=Fi(),C=d(G);gt(C,17,y,H=>cr.fileIdToString(H.fileId),(H,b)=>{var q=Di();let J;var W=d(q),I=x=>{{let ie=ne(()=>da("Enter",()=>k.onRemove(t(b).fileId.folderRoot)));It(x,{title:"Remove source folder from Augment context",onclick:()=>k.onRemove(t(b).fileId.folderRoot),get onkeyup(){return t(ie)},variant:"ghost",color:"neutral",size:.5,children:(Z,Ce)=>{_e(Z,{name:"x"})},$$slots:{default:!0}})}};E(W,x=>{t(b).isWorkspaceFolder||x(I)});var M=v(W,2);{let x=ne(()=>(ie=>ie.isWorkspaceFolder?"folder-root":"folder")(t(b)));_e(M,{get name(){return t(x)}})}var L=v(M,2),K=d(L),T=v(K);Q(T,{size:0,color:"secondary",style:"font-style: italic;",children:(x,ie)=>{var Z=S();te(()=>de(Z,t(b).isPending?"(pending)":t(b).fileId.folderRoot)),s(x,Z)},$$slots:{default:!0}});var O=v(L,2),Y=x=>{Q(x,{size:1,class:"file-count",children:(ie,Z)=>{var Ce=S();te(be=>de(Ce,be),[()=>t(b).trackedFileCount.toLocaleString()]),s(ie,Ce)},$$slots:{default:!0}})};E(O,x=>{t(b).trackedFileCount&&x(Y)}),te(x=>{J=Ut(q,1,"source-folder__item svelte-wku3wr",null,J,x),de(K,`${t(b).name??""} `)},[()=>({"workspace-folder":t(b).isWorkspaceFolder})]),s(H,q)});var A=v(C,2),_=ne(()=>da("Enter",k.onAddMore));A.__keyup=function(...H){t(_)?.apply(this,H)},A.__click=function(...H){k.onAddMore?.apply(this,H)};var z=d(A);_e(z,{name:"plus"}),s(P,G),Je()}(v(F,2),{get folders(){return t(l)},onRemove:P=>o.removeSourceFolder(P),onAddMore:()=>o.addMoreSourceFolders()});var j=v(N,2),h=d(j),w=d(h);Q(w,{size:1,weight:"medium",class:"context-section-header",children:(P,k)=>{var y=S("FILES");s(P,y)},$$slots:{default:!0}});var $=v(w,2);Q($,{size:1,class:"file-count",children:(P,k)=>{var y=S();te(G=>de(y,G),[()=>t(c).toLocaleString()]),s(P,y)},$$slots:{default:!0}}),Gi(v(h,2),{get wsContextModel(){return o}}),s(u,R)},$$slots:{headerRight:!0,default:!0}}),Je(),n()}function Vs(i){return function(e){switch(typeof e){case"object":return e!=null;case"function":return!0;default:return!1}}(i)&&"name"in i}var so=f('<div class="c-navigation__content-header svelte-rogn1u"> </div>'),no=f('<div class="c-navigation__content-description svelte-rogn1u"> </div>'),io=f('<!> <!> <!> <div class="c-navigation__content-container svelte-rogn1u"><!></div>',1),oo=f("<div><div><!></div></div>");function Ms(i,e){qe(e,!0);var r=oo();let a;var n=d(r),o=d(n),l=c=>{var p=io(),u=V(p);Q(u,{size:4,weight:"medium",color:"neutral",children:(w,$)=>{var P=so(),k=d(P);te(()=>de(k,e.item?.name)),s(w,P)},$$slots:{default:!0}});var g=v(u,2),R=w=>{Q(w,{color:"secondary",size:1,weight:"light",children:($,P)=>{var k=no(),y=d(k);te(()=>de(y,e.item?.description)),s($,k)},$$slots:{default:!0}})};E(g,w=>{e.item?.description&&w(R)});var N=v(g,2);_n(N,{size:4});var F=v(N,2),j=d(F),h=w=>{var $=ge(),P=V($);At(P,()=>e.children),s(w,$)};E(j,w=>{e.children&&w(h)}),s(c,p)};E(o,c=>{e.item!=null&&c(l)}),te(c=>{Jt(r,"id",e.item?.id),a=Ut(r,1,"svelte-rogn1u",null,a,c)},[()=>({"c-navigation__content":!0,"l-full-width":e.item?.fullWidth})]),s(i,r),Je()}function yr(i){const{name:e,description:r,icon:a,id:n,component:o,props:l,fullWidth:c}=i;return o!==void 0?{name:e,description:r,icon:a,id:n,component:o,props:l??{},fullWidth:c}:{name:e,description:r,icon:a,id:n,fullWidth:c}}var lo=f('<div class="c-navigation__head svelte-1dd65wn"><!> <!></div>'),co=(i,e,r)=>e(t(r)),uo=f("<button><!> <!></button>"),vo=f('<div class="c-navigation__group"><!> <div class="c-navigation__items svelte-1dd65wn"></div></div>'),ho=f('<nav class="c-navigation__nav svelte-1dd65wn" slot="left"><!></nav>'),go=f('<div slot="right"><!></div>'),po=f("<span> </span>"),mo=f("<!> <!>",1),fo=f("<span><!></span>"),yo=f('<div class="c-navigation__head svelte-1dd65wn"><!></div> <!>',1),wo=f('<div class="c-navigation__flat svelte-1dd65wn"><!> <!></div>'),$o=f("<div><!></div>");function bo(i,e){qe(e,!0);let r=D(e,"group",3,"Workspace Settings"),a=D(e,"items",19,()=>[]),n=D(e,"item",7),o=D(e,"mode",3,"tree"),l=D(e,"selectedId",15),c=D(e,"showButton",3,!0),p=D(e,"class",3,"");Qt(()=>{l()&&n(a().find(h=>h?.id===l()))});const u=ne(()=>a().reduce((h,w)=>{if(!w)return h;const $=w.group??r(),P=h.get($)??[];return P.push(w),h.set($,P),h},new Map));function g(h){n(h),l(h?.id)}Qt(()=>{var h,w;n()||(h=a(),w=Ma(h,1),n(w[0]))});var R=$o(),N=d(R),F=h=>{ci(h,{initialWidth:200,expandedMinWidth:150,columnLayoutThreshold:0,get showButton(){return c()},minimized:!1,$$slots:{left:(w,$)=>{var P=ho(),k=d(P);si(k,l,y=>{var G=ge(),C=V(G);gt(C,17,()=>t(u),([A,_])=>A,(A,_)=>{var z=ne(()=>Ma(t(_),2));let H=()=>t(z)[0];var b=vo(),q=d(b),J=M=>{var L=ge(),K=V(L);At(K,()=>e.groupSnippet,()=>({label:H(),mode:o()})),s(M,L)},W=M=>{var L=lo(),K=d(L);_e(K,{name:"cog",size:2});var T=v(K,2);Q(T,{size:2,color:"primary",children:(O,Y)=>{var x=S();te(()=>de(x,H())),s(O,x)},$$slots:{default:!0}}),s(M,L)};E(q,M=>{e.groupSnippet?M(J):M(W,!1)});var I=v(q,2);gt(I,21,()=>t(z)[1],Cr,(M,L)=>{var K=uo();let T;K.__click=[co,g,L];var O=d(K);_e(O,{get name(){return t(L).icon},size:2});var Y=v(O,2);Q(Y,{size:2,weight:"regular",color:"primary",children:(x,ie)=>{var Z=S();te(()=>de(Z,t(L).name)),s(x,Z)},$$slots:{default:!0}}),te(x=>T=Ut(K,1,"c-navigation__item svelte-1dd65wn",null,T,x),[()=>({"is-active":t(L).id===l()})]),s(M,K)}),s(A,b)}),s(y,G)}),s(w,P)},right:(w,$)=>{var P=go();Ms(d(P),{get item(){return n()},children:(k,y)=>{var G=ge(),C=V(G),A=z=>{var H=ge(),b=V(H);At(b,()=>e.content,()=>({item:n(),isSelected:n()?.id===l()})),s(z,H)},_=z=>{var H=ge(),b=V(H),q=J=>{const W=ne(()=>n().component);var I=ge(),M=V(I);et(M,()=>t(W),(L,K)=>{K(L,pa(()=>n().props))}),s(J,I)};E(b,J=>{var W,I,M;(function(L){return Vs(L)&&"component"in L})(n())&&(W=n(),I=o(),M=l(),I!=="tree"||W?.id===M)&&J(q)},!0),s(z,H)};E(C,z=>{e.content?z(A):z(_,!1)}),s(k,G)},$$slots:{default:!0}}),s(w,P)}}})},j=h=>{var w=wo(),$=d(w),P=y=>{var G=ge(),C=V(G);At(C,()=>e.header,()=>({item:n(),selectedId:void 0})),s(y,G)};E($,y=>{e.header&&y(P)});var k=v($,2);gt(k,17,()=>t(u),Cr,(y,G)=>{var C=ne(()=>Ma(t(G),2));let A=()=>t(C)[0];var _=yo(),z=V(_),H=d(z),b=W=>{var I=ge(),M=V(I);At(M,()=>e.groupSnippet,()=>({label:A(),mode:o()})),s(W,I)},q=W=>{var I=mo(),M=V(I);_e(M,{name:"cog",size:2});var L=v(M,2);Q(L,{color:"secondary",size:2,weight:"medium",children:(K,T)=>{var O=po(),Y=d(O);te(()=>de(Y,A())),s(K,O)},$$slots:{default:!0}}),s(W,I)};E(H,W=>{e.groupSnippet?W(b):W(q,!1)});var J=v(z,2);gt(J,17,()=>t(C)[1],W=>W.id,(W,I)=>{var M=fo();Ms(d(M),{get item(){return t(I)},children:(L,K)=>{var T=ge(),O=V(T),Y=x=>{var ie=ge(),Z=V(ie);At(Z,()=>e.content,()=>({item:t(I)})),s(x,ie)};E(O,x=>{e.content&&x(Y)}),s(L,T)},$$slots:{default:!0}}),oi(M,(L,K)=>function(T,O){let Y;function x({scrollTo:ie,delay:Z,options:Ce}){clearTimeout(Y),ie&&(Y=setTimeout(()=>{T.scrollIntoView(Ce)},Z))}return x(O),{update:x,destroy(){clearTimeout(Y)}}}(L,K),()=>({scrollTo:o()==="flat"&&t(I).id===l(),delay:300,options:{behavior:"smooth"}})),s(W,M)}),s(y,_)}),s(h,w)};E(N,h=>{o()==="tree"?h(F):h(j,!1)}),te(()=>Ut(R,1,`c-navigation c-navigation--mode__${o()??""} ${p()??""}`,"svelte-1dd65wn")),s(i,R),Je()}ba(["click"]);var So=f('<div class="connect-button-spinner svelte-1m3ir4e"><!></div> <span>Cancel</span>',1),_o=f("<span>Connect</span>"),Co=f('<div class="connect-button-content svelte-1m3ir4e"><!></div>'),ko=f('<div class="status-controls svelte-1m3ir4e"><div class="icon-container svelte-1m3ir4e"><div class="connection-status svelte-1m3ir4e"><div><!></div></div> <!></div></div>'),Ao=f('<div slot="headerRight"><!></div>'),xo=f("<div> </div>"),Mo=f('<div class="config-wrapper" role="group" aria-label="Connection status controls"><!> <!></div>'),To=f('<div class="loading-container svelte-1kb2yeg"><!> <!></div>'),Eo=f('<div class="category-content"><!></div>'),Ro=f('<div class="category"><div class="category-heading"><!></div> <!></div>');function ns(i,e){let r=D(e,"title",8),a=D(e,"loading",8,!1);var n=Ro(),o=d(n),l=d(o);Q(l,{size:3,color:"primary",weight:"regular",children:(g,R)=>{var N=S();te(()=>de(N,r())),s(g,N)},$$slots:{default:!0}});var c=v(o,2),p=g=>{var R=To(),N=d(R);Pr(N,{size:1});var F=v(N,2);Q(F,{size:1,color:"secondary",children:(j,h)=>{var w=S("Loading...");s(j,w)},$$slots:{default:!0}}),s(g,R)},u=g=>{var R=Eo(),N=d(R);ca(N,e,"default",{},null),s(g,R)};E(c,g=>{a()?g(p):g(u,!1)}),s(i,n)}const js="mcpServerModel";function is(){const i=or(js);if(!i)throw new Error("MCPServerModel context not found. Make sure setMCPServerModelContext() was called in a parent component.");return i}var No=f('<div class="connect-button-spinner svelte-1wv2ms7"><!></div> <span>Cancel</span>',1),Uo=f("<span>Connect</span>"),Io=f('<div class="connect-button-content svelte-1wv2ms7"><!></div>'),Po=f('<div class="api-key-input-container svelte-1wv2ms7"><!> <!> <!></div>'),Lo=f('<div class="status-controls svelte-1wv2ms7"><div><!></div> <!></div>'),zo=f('<div slot="headerRight"><!></div>'),Oo=f("<div> </div>"),Do=f('<div class="config-wrapper" role="group" aria-label="Connection status controls"><!> <!></div>');function Fo(i,e){qe(e,!1);const r=()=>Le(P,"$authRequiredSet",n),a=()=>Le(k,"$enableNativeRemoteMcp",n),[n,o]=Lt(),l=Ue();let c=D(e,"config",12),p=D(e,"mcpTool",8);const u=is(),g=Qr(),R=or(Or.key);async function N(){await g.openConfirmationModal({title:"Revoke Access",message:`Are you sure you want to revoke access for ${c().displayName}? This will disconnect the tool and you'll need to reconnect it to use it again.`,confirmButtonText:"Revoke Access",cancelButtonText:"Cancel"})&&(p()&&u.deleteServer(p()),m(F,!1))}let F=Ue(!1),j=Ue(!1),h=null,w=Ue(""),$=Ue(!1);const P=u.getAuthRequiredStore(),k=R.getEnableNativeRemoteMcp();async function y(){c().authType===at.OAUTH?await async function(){if(t(F))return h&&(clearTimeout(h),h=null),void m(F,!1);g.startRemoteMCPAuth(c().name),m(F,!0);const b=new Promise(q=>{h=setTimeout(()=>{q(),h=null},6e4)});await Promise.race([b]),m(F,!1)}():c().authType===at.HEADER&&(m(w,""),m($,!0))}async function G(){if(m($,!1),!c().mcpUrl)return;const b={name:c().name,type:"http",url:c().mcpUrl},q={type:at.HEADER,headers:{Authorization:`Bearer ${t(w)}`}};u.addServer(b,q)}async function C(){p()&&u.deleteServer(p()),m(F,!1)}nt(()=>(pe(c()),ks),()=>{c(ks(c()))}),nt(()=>(pe(c()),As),()=>{c(As(c()))}),nt(()=>(r(),pe(c())),()=>{m(l,r().has(c().name))}),nt(()=>pe(p()),()=>{c(c().isConfigured=!!p(),!0)}),lr(),tr();var A=Do(),_=d(A);Gt(_,{get icon(){return pe(c()),me(()=>c().icon)},get title(){return pe(c()),me(()=>c().displayName)},$$slots:{headerRight:(b,q)=>{var J=zo(),W=d(J),I=L=>{var K=ge(),T=V(K),O=x=>{{let ie=ct(()=>t(F)?"neutral":"accent");We(x,{variant:"ghost-block",get color(){return t(ie)},size:1,$$events:{click:y},children:(Z,Ce)=>{var be=Io(),he=d(be),fe=B=>{var U=No(),oe=V(U),ue=d(oe);Pr(ue,{size:1,useCurrentColor:!0}),s(B,U)},ee=B=>{var U=Uo();s(B,U)};E(he,B=>{t(F)?B(fe):B(ee,!1)}),s(Z,be)},$$slots:{default:!0}})}},Y=x=>{var ie=ge(),Z=V(ie),Ce=be=>{var he=Po(),fe=d(he);zt(fe,{size:1,placeholder:"Enter your API key",get value(){return t(w)},set value(U){m(w,U)},$$legacy:!0});var ee=v(fe,2);It(ee,{color:"neutral",variant:"ghost",size:1,$$events:{click:()=>{m(w,""),m($,!1)}},children:(U,oe)=>{_e(U,{name:"x"})},$$slots:{default:!0}});var B=v(ee,2);It(B,{color:"neutral",variant:"ghost",size:1,$$events:{click:G},children:(U,oe)=>{_e(U,{name:"check"})},$$slots:{default:!0}}),s(be,he)};E(Z,be=>{pe(c()),pe(at),me(()=>c().authType===at.HEADER)&&be(Ce)},!0),s(x,ie)};E(T,x=>{t($)?x(Y,!1):x(O)}),s(L,K)},M=L=>{var K=ge(),T=V(K),O=Y=>{var x=Lo(),ie=d(x);let Z;var Ce=d(ie);{let ee=ct(()=>(pe(kr),me(()=>[kr.Hover])));Ot(Ce,{get triggerOn(){return t(ee)},content:"Revoke Access",children:(B,U)=>{It(B,{color:"neutral",variant:"ghost",size:1,$$events:{click:N},children:(oe,ue)=>{_e(oe,{name:"unplug"})},$$slots:{default:!0}})},$$slots:{default:!0}})}var be=v(ie,2),he=ee=>{We(ee,{variant:"ghost-block",color:"warning",size:1,$$events:{click:C},children:(B,U)=>{var oe=S("Authenticate");s(B,oe)},$$slots:{default:!0}})},fe=ee=>{var B=ge(),U=V(B),oe=Ae=>{Ar.Root(Ae,{color:"warning",size:1,variant:"soft",children:(Ee,Oe)=>{var Re=S("Auth Required");s(Ee,Re)},$$slots:{default:!0}})},ue=Ae=>{Ar.Root(Ae,{color:"success",size:1,variant:"soft",children:(Ee,Oe)=>{var Re=S("Connected");s(Ee,Re)},$$slots:{default:!0}})};E(U,Ae=>{t(l)&&!a()?Ae(oe):Ae(ue,!1)},!0),s(ee,B)};E(be,ee=>{t(l)&&a()?ee(he):ee(fe,!1)}),te(ee=>Z=Ut(ie,1,"disconnect-button svelte-1wv2ms7",null,Z,ee),[()=>({active:t(j)})]),s(Y,x)};E(T,Y=>{pe(c()),me(()=>c().isConfigured)&&Y(O)},!0),s(L,K)};E(W,L=>{pe(c()),me(()=>!c().isConfigured)?L(I):L(M,!1)}),s(b,J)}}});var z=v(_,2),H=b=>{var q=Oo(),J=d(q);te(()=>{Ut(q,1,`status-message ${pe(c()),me(()=>c().statusType)??""}`,"svelte-1wv2ms7"),de(J,(pe(c()),me(()=>c().statusMessage)))}),s(b,q)};E(z,b=>{pe(c()),me(()=>c().showStatus)&&b(H)}),Dt("mouseenter",A,()=>m(j,!0)),Dt("mouseleave",A,()=>m(j,!1)),s(i,A),Je(),o()}var Bo=f('<div class="tool-category-list svelte-1hdlwqf"><!> <!></div>'),Ho=f("<div><!></div>");function qo(i,e){qe(e,!0);const r=()=>Le(u,"$pretendNativeToolDefs",a),[a,n]=Lt();let o=D(e,"tools",19,()=>[]),l=D(e,"onToolApprovalConfigChange",3,()=>{});const c=or(Or.key),p=is(),u=c.getPretendNativeToolDefs(),g=p.getServers();let R=ne(()=>c.getEnableNativeRemoteMcp()?Bs(Le(g,"$allServers",a)):[]);var N=Ho(),F=d(N);{let j=ne(()=>o().length===0);ns(F,{get title(){return e.title},get loading(){return t(j)},children:(h,w)=>{var $=Bo(),P=d($);gt(P,17,o,y=>y.name,(y,G)=>{(function(C,A){qe(A,!1);let _=D(A,"config",8),z=D(A,"onAuthenticate",8),H=D(A,"onRevokeAccess",8);const b=()=>{};let q=Ue(!1),J=Ue(null),W=Ue(!1),I=Ue();function M(){if(t(q))m(q,!1),t(J)&&(clearTimeout(t(J)),m(J,null));else{m(q,!0);const x=_().authUrl||"";z()({authUrl:x,toolName:_().displayName.toLowerCase()}),m(J,setTimeout(()=>{m(q,!1),m(J,null)},6e4))}}nt(()=>pe(_()),()=>{m(I,_().name.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""))}),nt(()=>(pe(_()),t(q),t(J)),()=>{_().isConfigured&&t(q)&&(m(q,!1),t(J)&&(clearTimeout(t(J)),m(J,null)))}),lr();var L={onToolApprovalConfigChange:b};tr();var K=Mo(),T=d(K);Gt(T,{get icon(){return pe(_()),me(()=>_().icon)},get title(){return pe(_()),me(()=>_().displayName)},$$slots:{headerRight:(x,ie)=>{var Z=Ao(),Ce=d(Z),be=fe=>{{let ee=ct(()=>t(q)?"neutral":"accent");We(fe,{variant:"ghost-block",get color(){return t(ee)},size:1,$$events:{click:M},children:(B,U)=>{var oe=Co(),ue=d(oe),Ae=Oe=>{var Re=So(),le=V(Re),ye=d(le);Pr(ye,{size:1,useCurrentColor:!0}),s(Oe,Re)},Ee=Oe=>{var Re=_o();s(Oe,Re)};E(ue,Oe=>{t(q)?Oe(Ae):Oe(Ee,!1)}),s(B,oe)},$$slots:{default:!0}})}},he=fe=>{var ee=ge(),B=V(ee),U=oe=>{var ue=ko(),Ae=d(ue),Ee=d(Ae),Oe=d(Ee);let Re;var le=d(Oe);{let re=ct(()=>(pe(kr),me(()=>[kr.Hover])));Ot(le,{get triggerOn(){return t(re)},content:"Revoke Access",children:(ze,we)=>{It(ze,{color:"neutral",variant:"ghost",size:1,$$events:{click:()=>H()(_())},children:(ae,ke)=>{_e(ae,{name:"unplug"})},$$slots:{default:!0}})},$$slots:{default:!0}})}var ye=v(Ee,2);Ar.Root(ye,{color:"success",size:1,variant:"soft",children:(re,ze)=>{var we=S("Connected");s(re,we)},$$slots:{default:!0}}),te(re=>Re=Ut(Oe,1,"icon-button-wrapper svelte-1m3ir4e",null,Re,re),[()=>({active:t(W)})]),s(oe,ue)};E(B,oe=>{pe(_()),me(()=>_().isConfigured)&&oe(U)},!0),s(fe,ee)};E(Ce,fe=>{pe(_()),me(()=>!_().isConfigured&&_().authUrl)?fe(be):fe(he,!1)}),s(x,Z)}}});var O=v(T,2),Y=x=>{var ie=xo(),Z=d(ie);te(()=>{Ut(ie,1,`status-message ${pe(_()),me(()=>_().statusType)??""}`,"svelte-1m3ir4e"),de(Z,(pe(_()),me(()=>_().statusMessage)))}),s(x,ie)};E(O,x=>{pe(_()),me(()=>_().showStatus)&&x(Y)}),te(()=>Jt(K,"id",t(I))),Dt("mouseenter",K,()=>m(W,!0)),Dt("mouseleave",K,()=>m(W,!1)),s(C,K),ua(A,"onToolApprovalConfigChange",b),Je(L)})(y,{get config(){return t(G)},get onAuthenticate(){return e.onAuthenticate},get onRevokeAccess(){return e.onRevokeAccess},get onToolApprovalConfigChange(){return l()}})});var k=v(P,2);gt(k,1,r,y=>y.name,(y,G)=>{{let C=ne(()=>t(R).find(A=>A.name===t(G).name));Fo(y,{get mcpTool(){return t(C)},get config(){return t(G)}})}}),s(h,$)},$$slots:{default:!0}})}s(i,N),Je(),n()}var Jo=f('<tr class="key-val-row svelte-9znzh3"><td class="key-cell svelte-9znzh3"><!></td><td class="value-cell svelte-9znzh3"><!></td><td class="action-cell svelte-9znzh3"><!></td></tr>'),Vo=f('<!> <table class="key-val-table svelte-9znzh3"><tbody><!></tbody></table> <div class="new-var-button-container svelte-9znzh3"><!></div>',1);function Ts(i,e){qe(e,!1);let r=D(e,"handleEnterEditMode",8),a=D(e,"keyValEntries",28,()=>[]),n=D(e,"title",8,"Key Value"),o=D(e,"keyPlaceholder",8,"Key"),l=D(e,"valuePlaceholder",8,"Value"),c=D(e,"addButtonText",8,"Entry");tr();var p=Vo(),u=V(p);Q(u,{size:1,weight:"medium",children:(w,$)=>{var P=S();te(()=>de(P,n())),s(w,P)},$$slots:{default:!0}});var g=v(u,2),R=d(g),N=d(R),F=w=>{var $=ge(),P=V($);gt(P,1,a,k=>k.id,(k,y,G)=>{var C=Jo(),A=d(C),_=d(A);zt(_,{size:1,get placeholder(){return o()},class:"full-width",get value(){return t(y).key},set value(J){t(y).key=J,gs(()=>a())},$$events:{focus(...J){r()?.apply(this,J)},change:()=>function(J,W){const I=a().findIndex(M=>M.id===J);I!==-1&&(a(a()[I].key=W,!0),a(a()))}(t(y).id,t(y).key)},$$legacy:!0});var z=v(A),H=d(z);zt(H,{size:1,get placeholder(){return l()},class:"full-width",get value(){return t(y).value},set value(J){t(y).value=J,gs(()=>a())},$$events:{focus(...J){r()?.apply(this,J)},change:()=>function(J,W){const I=a().findIndex(M=>M.id===J);I!==-1&&(a(a()[I].value=W,!0),a(a()))}(t(y).id,t(y).value)},$$legacy:!0});var b=v(z),q=d(b);Ot(q,{content:"Remove",children:(J,W)=>{We(J,{variant:"ghost",color:"neutral",type:"button",size:1,$$events:{focus(...I){r()?.apply(this,I)},click:()=>{return I=t(y).id,r()(),void a(a().filter(M=>M.id!==I));var I}},$$slots:{iconLeft:(I,M)=>{_e(I,{slot:"iconLeft",name:"trash-2"})}}})},$$slots:{default:!0}}),s(k,C)}),s(w,$)};E(N,w=>{pe(a()),me(()=>a().length>0)&&w(F)});var j=v(g,2),h=d(j);We(h,{size:1,variant:"soft",color:"neutral",type:"button",$$events:{click:function(){r()(),a([...a(),{id:crypto.randomUUID(),key:"",value:""}])}},children:(w,$)=>{var P=S();te(()=>de(P,c())),s(w,P)},$$slots:{default:!0,iconLeft:(w,$)=>{_e(w,{slot:"iconLeft",name:"plus"})}}}),s(i,p),Je()}const us=class us{static setPluginMcpConfig(e){this._instance===void 0?this._instance=e:Fs().warn("Attempting to initialize PluginMcpConfig when one is already configured. Keeping existing.")}static getPluginMcpConfig(){if(this._instance===void 0)throw new Error("PluginMcpConfig not set");return this._instance}static reset(){this._instance=void 0}};us._instance=void 0;let Ja=us;const Ua=()=>Ja.getPluginMcpConfig();let Va;(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(Va="oauth4webapi/v3.8.1");function Ur(i,e){if(i==null)return!1;try{return i instanceof e||Object.getPrototypeOf(i)[Symbol.toStringTag]===e.prototype[Symbol.toStringTag]}catch{return!1}}const er="ERR_INVALID_ARG_VALUE",Nt="ERR_INVALID_ARG_TYPE";function vt(i,e,r){const a=new TypeError(i,{cause:r});return Object.assign(a,{code:e}),a}const os=Symbol(),jo=Symbol(),Go=Symbol(),Aa=Symbol(),ja=Symbol(),Wo=new TextEncoder,Ko=new TextDecoder;function Ga(i){return typeof i=="string"?Wo.encode(i):Ko.decode(i)}let Wa,Gs;Uint8Array.prototype.toBase64?Wa=i=>(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),i.toBase64({alphabet:"base64url",omitPadding:!0})):Wa=e=>{e instanceof ArrayBuffer&&(e=new Uint8Array(e));const r=[];for(let a=0;a<e.byteLength;a+=32768)r.push(String.fromCharCode.apply(null,e.subarray(a,a+32768)));return btoa(r.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")};function ma(i){return typeof i=="string"?Gs(i):Wa(i)}Gs=Uint8Array.fromBase64?i=>{try{return Uint8Array.fromBase64(i,{alphabet:"base64url"})}catch(e){throw vt("The input to be decoded is not correctly encoded.",er,e)}}:i=>{try{const e=atob(i.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r}catch(e){throw vt("The input to be decoded is not correctly encoded.",er,e)}};class va extends Error{code;constructor(e,r){super(e,r),this.name=this.constructor.name,this.code=ml,Error.captureStackTrace?.(this,this.constructor)}}class Zo extends Error{code;constructor(e,r){super(e,r),this.name=this.constructor.name,r?.code&&(this.code=r?.code),Error.captureStackTrace?.(this,this.constructor)}}function Pe(i,e,r){return new Zo(i,{code:e,cause:r})}function fa(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)}function ls(i){Ur(i,Headers)&&(i=Object.fromEntries(i.entries()));const e=new Headers(i??{});if(Va&&!e.has("user-agent")&&e.set("user-agent",Va),e.has("authorization"))throw vt('"options.headers" must not include the "authorization" header name',er);return e}function cs(i,e){if(e!==void 0){if(typeof e=="function"&&(e=e(i.href)),!(e instanceof AbortSignal))throw vt('"options.signal" must return or be an instance of AbortSignal',Nt);return e}}function Ir(i,e,r,a,n){try{if(typeof i!="number"||!Number.isFinite(i))throw vt(`${r} must be a number`,Nt,n);if(i>0)return;if(e){if(i!==0)throw vt(`${r} must be a non-negative number`,er,n);return}throw vt(`${r} must be a positive number`,er,n)}catch(o){throw a?Pe(o.message,a,n):o}}function Ct(i,e,r,a){try{if(typeof i!="string")throw vt(`${e} must be a string`,Nt,a);if(i.length===0)throw vt(`${e} must not be empty`,er,a)}catch(n){throw r?Pe(n.message,r,a):n}}function Ws(i){(function(e,r){if(a=e,a.headers.get("content-type")?.split(";")[0]!==r)throw function(n,...o){let l='"response" content-type must be ';if(o.length>2){const c=o.pop();l+=`${o.join(", ")}, or ${c}`}else o.length===2?l+=`${o[0]} or ${o[1]}`:l+=o[0];return Pe(l,yl,n)}(e,r);var a})(i,"application/json")}function Ia(){return ma(crypto.getRandomValues(new Uint8Array(32)))}function Ka(i){const e=i?.[jo];return typeof e=="number"&&Number.isFinite(e)?e:0}function Za(i){const e=i?.[Go];return typeof e=="number"&&Number.isFinite(e)&&Math.sign(e)!==-1?e:30}function Ya(){return Math.floor(Date.now()/1e3)}function Zr(i){if(typeof i!="object"||i===null)throw vt('"as" must be an object',Nt);Ct(i.issuer,'"as.issuer"')}function ya(i){if(typeof i!="object"||i===null)throw vt('"client" must be an object',Nt);Ct(i.client_id,'"client.client_id"')}const Yo=URL.parse?(i,e)=>URL.parse(i,e):(i,e)=>{try{return new URL(i,e)}catch{return null}};function Ks(i,e){if(e&&i.protocol!=="https:")throw Pe("only requests to HTTPS are allowed",wl,i);if(i.protocol!=="https:"&&i.protocol!=="http:")throw Pe("only HTTP and HTTPS requests are allowed",$l,i)}function Es(i,e,r,a){let n;if(typeof i!="string"||!(n=Yo(i)))throw Pe("authorization server metadata does not contain a valid "+(r?`"as.mtls_endpoint_aliases.${e}"`:`"as.${e}"`),i===void 0?bl:Sl,{attribute:r?`mtls_endpoint_aliases.${e}`:e});return Ks(n,a),n}function Zs(i,e,r,a){return r&&i.mtls_endpoint_aliases&&e in i.mtls_endpoint_aliases?Es(i.mtls_endpoint_aliases[e],e,r,a):Es(i[e],e,r,a)}class Xo extends Error{cause;code;error;status;error_description;response;constructor(e,r){super(e,r),this.name=this.constructor.name,this.code=pl,this.cause=r.cause,this.error=r.cause.error,this.status=r.response.status,this.error_description=r.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:r.response}),Error.captureStackTrace?.(this,this.constructor)}}class Qo extends Error{cause;code;error;error_description;constructor(e,r){super(e,r),this.name=this.constructor.name,this.code=fl,this.cause=r.cause,this.error=r.cause.get("error"),this.error_description=r.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class el extends Error{cause;code;response;status;constructor(e,r){super(e,r),this.name=this.constructor.name,this.code=gl,this.cause=r.cause,this.status=r.response.status,this.response=r.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}const wa="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",tl="("+wa+')\\s*=\\s*"((?:[^"\\\\]|\\\\.)*)"',rl="("+wa+")\\s*=\\s*("+wa+")",al=new RegExp("^[,\\s]*("+wa+")\\s(.*)"),sl=new RegExp("^[,\\s]*"+tl+"[,\\s]*(.*)"),nl=new RegExp("^[,\\s]*"+rl+"[,\\s]*(.*)"),il=new RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+[=]{0,2})(?:$|[,\\s])(.*)");async function Ys(i,e,r){if(i.status!==e){let a;throw function(n){let o;if(o=function(l){if(!Ur(l,Response))throw vt('"response" must be an instance of Response',Nt);const c=l.headers.get("www-authenticate");if(c===null)return;const p=[];let u=c;for(;u;){let g=u.match(al);const R=g?.[1].toLowerCase();if(u=g?.[2],!R)return;const N={};let F;for(;u;){let h,w;if(g=u.match(sl)){if([,h,w,u]=g,w.includes("\\"))try{w=JSON.parse(`"${w}"`)}catch{}N[h.toLowerCase()]=w}else{if(!(g=u.match(nl))){if(g=u.match(il)){if(Object.keys(N).length)break;[,F,u]=g;break}return}[,h,w,u]=g,N[h.toLowerCase()]=w}}const j={scheme:R,parameters:N};F&&(j.token68=F),p.push(j)}return p.length?p:void 0}(n))throw new el("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:o,response:n})}(i),(a=await async function(n){if(n.status>399&&n.status<500){Gr(n),Ws(n);try{const o=await n.clone().json();if(fa(o)&&typeof o.error=="string"&&o.error.length)return o}catch{}}}(i))?(await i.body?.cancel(),new Xo("server responded with an error in the response body",{cause:a,response:i})):Pe(`"response" is not a conform ${r} response (unexpected HTTP status code)`,es,i)}}async function Rs(i,e,r,a,n,o){const l=Zs(i,"token_endpoint",e.use_mtls_endpoint_aliases,o?.[os]!==!0);n.set("grant_type",a);const c=ls(o?.headers);return c.set("accept","application/json"),await async function(u,g,R,N,F,j,h){return await R(u,g,F,j),j.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(h?.[Aa]||fetch)(N.href,{body:F,headers:Object.fromEntries(j.entries()),method:"POST",redirect:"manual",signal:cs(N,h?.signal)})}(i,e,r,l,n,c,o)}const Xs=new WeakMap,ol=new WeakMap;function Ns(i){if(!i.id_token)return;const e=Xs.get(i);if(!e)throw vt('"ref" was already garbage collected or did not resolve from the proper sources',er);return e}async function Xa(i,e,r,a,n,o){if(Zr(i),ya(e),!Ur(r,Response))throw vt('"response" must be an instance of Response',Nt);await Ys(r,200,"Token Endpoint"),Gr(r);const l=await ha(r);if(Ct(l.access_token,'"response" body "access_token" property',tt,{body:l}),Ct(l.token_type,'"response" body "token_type" property',tt,{body:l}),l.token_type=l.token_type.toLowerCase(),l.expires_in!==void 0){let c=typeof l.expires_in!="number"?parseFloat(l.expires_in):l.expires_in;Ir(c,!0,'"response" body "expires_in" property',tt,{body:l}),l.expires_in=c}if(l.refresh_token!==void 0&&Ct(l.refresh_token,'"response" body "refresh_token" property',tt,{body:l}),l.scope!==void 0&&typeof l.scope!="string")throw Pe('"response" body "scope" property must be a string',tt,{body:l});if(l.id_token!==void 0){Ct(l.id_token,'"response" body "id_token" property',tt,{body:l});const c=["aud","exp","iat","iss","sub"];e.require_auth_time===!0&&c.push("auth_time"),e.default_max_age!==void 0&&(Ir(e.default_max_age,!0,'"client.default_max_age"'),c.push("auth_time")),a?.length&&c.push(...a);const{claims:p,jwt:u}=await async function(g,R,N,F,j){let h,w,{0:$,1:P,length:k}=g.split(".");if(k===5){if(j===void 0)throw new va("JWE decryption is not configured",{cause:g});g=await j(g),{0:$,1:P,length:k}=g.split(".")}if(k!==3)throw Pe("Invalid JWT",tt,g);try{h=JSON.parse(Ga(ma($)))}catch(G){throw Pe("failed to parse JWT Header body as base64url encoded JSON",Qa,G)}if(!fa(h))throw Pe("JWT Header must be a top level object",tt,g);if(R(h),h.crit!==void 0)throw new va('no JWT "crit" header parameter extensions are supported',{cause:{header:h}});try{w=JSON.parse(Ga(ma(P)))}catch(G){throw Pe("failed to parse JWT Payload body as base64url encoded JSON",Qa,G)}if(!fa(w))throw Pe("JWT Payload must be a top level object",tt,g);const y=Ya()+N;if(w.exp!==void 0){if(typeof w.exp!="number")throw Pe('unexpected JWT "exp" (expiration time) claim type',tt,{claims:w});if(w.exp<=y-F)throw Pe('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',$a,{claims:w,now:y,tolerance:F,claim:"exp"})}if(w.iat!==void 0&&typeof w.iat!="number")throw Pe('unexpected JWT "iat" (issued at) claim type',tt,{claims:w});if(w.iss!==void 0&&typeof w.iss!="string")throw Pe('unexpected JWT "iss" (issuer) claim type',tt,{claims:w});if(w.nbf!==void 0){if(typeof w.nbf!="number")throw Pe('unexpected JWT "nbf" (not before) claim type',tt,{claims:w});if(w.nbf>y+F)throw Pe('unexpected JWT "nbf" (not before) claim value',$a,{claims:w,now:y,tolerance:F,claim:"nbf"})}if(w.aud!==void 0&&typeof w.aud!="string"&&!Array.isArray(w.aud))throw Pe('unexpected JWT "aud" (audience) claim type',tt,{claims:w});return{header:h,claims:w,jwt:g}}(l.id_token,_l.bind(void 0,e.id_token_signed_response_alg,i.id_token_signing_alg_values_supported,"RS256"),Ka(e),Za(e),n).then(vl.bind(void 0,c)).then(cl.bind(void 0,i)).then(ll.bind(void 0,e.client_id));if(Array.isArray(p.aud)&&p.aud.length!==1){if(p.azp===void 0)throw Pe('ID Token "aud" (audience) claim includes additional untrusted audiences',dr,{claims:p,claim:"aud"});if(p.azp!==e.client_id)throw Pe('unexpected ID Token "azp" (authorized party) claim value',dr,{expected:e.client_id,claims:p,claim:"azp"})}p.auth_time!==void 0&&Ir(p.auth_time,!0,'ID Token "auth_time" (authentication time)',tt,{claims:p}),ol.set(r,u),Xs.set(l,p)}if(o?.[l.token_type]!==void 0)o[l.token_type](r,l);else if(l.token_type!=="dpop"&&l.token_type!=="bearer")throw new va("unsupported `token_type` value",{cause:{body:l}});return l}function ll(i,e){if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(i))throw Pe('unexpected JWT "aud" (audience) claim value',dr,{expected:i,claims:e.claims,claim:"aud"})}else if(e.claims.aud!==i)throw Pe('unexpected JWT "aud" (audience) claim value',dr,{expected:i,claims:e.claims,claim:"aud"});return e}function cl(i,e){const r=i[Tl]?.(e)??i.issuer;if(e.claims.iss!==r)throw Pe('unexpected JWT "iss" (issuer) claim value',dr,{expected:r,claims:e.claims,claim:"iss"});return e}const ds=new WeakSet,dl=Symbol(),ul={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function vl(i,e){for(const r of i)if(e.claims[r]===void 0)throw Pe(`JWT "${r}" (${ul[r]}) claim missing`,tt,{claims:e.claims});return e}const Pa=Symbol(),La=Symbol();async function hl(i,e,r,a){return typeof a?.expectedNonce=="string"||typeof a?.maxAge=="number"||a?.requireIdToken?async function(n,o,l,c,p,u,g){const R=[];switch(c){case void 0:c=Pa;break;case Pa:break;default:Ct(c,'"expectedNonce" argument'),R.push("nonce")}switch(p??=o.default_max_age,p){case void 0:p=La;break;case La:break;default:Ir(p,!0,'"maxAge" argument'),R.push("auth_time")}const N=await Xa(n,o,l,R,u,g);Ct(N.id_token,'"response" body "id_token" property',tt,{body:N});const F=Ns(N);if(p!==La){const j=Ya()+Ka(o),h=Za(o);if(F.auth_time+p<j-h)throw Pe("too much time has elapsed since the last End-User authentication",$a,{claims:F,now:j,tolerance:h,claim:"auth_time"})}if(c===Pa){if(F.nonce!==void 0)throw Pe('unexpected ID Token "nonce" claim value',dr,{expected:void 0,claims:F,claim:"nonce"})}else if(F.nonce!==c)throw Pe('unexpected ID Token "nonce" claim value',dr,{expected:c,claims:F,claim:"nonce"});return N}(i,e,r,a.expectedNonce,a.maxAge,a[ja],a.recognizedTokenTypes):async function(n,o,l,c,p){const u=await Xa(n,o,l,void 0,c,p),g=Ns(u);if(g){if(o.default_max_age!==void 0){Ir(o.default_max_age,!0,'"client.default_max_age"');const R=Ya()+Ka(o),N=Za(o);if(g.auth_time+o.default_max_age<R-N)throw Pe("too much time has elapsed since the last End-User authentication",$a,{claims:g,now:R,tolerance:N,claim:"auth_time"})}if(g.nonce!==void 0)throw Pe('unexpected ID Token "nonce" claim value',dr,{expected:void 0,claims:g,claim:"nonce"})}return u}(i,e,r,a?.[ja],a?.recognizedTokenTypes)}const gl="OAUTH_WWW_AUTHENTICATE_CHALLENGE",pl="OAUTH_RESPONSE_BODY_ERROR",ml="OAUTH_UNSUPPORTED_OPERATION",fl="OAUTH_AUTHORIZATION_RESPONSE_ERROR",Qa="OAUTH_PARSE_ERROR",tt="OAUTH_INVALID_RESPONSE",yl="OAUTH_RESPONSE_IS_NOT_JSON",es="OAUTH_RESPONSE_IS_NOT_CONFORM",wl="OAUTH_HTTP_REQUEST_FORBIDDEN",$l="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",$a="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",dr="OAUTH_JWT_CLAIM_COMPARISON_FAILED",Us="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",bl="OAUTH_MISSING_SERVER_METADATA",Sl="OAUTH_INVALID_SERVER_METADATA";function Gr(i){if(i.bodyUsed)throw vt('"response" body has been used already',er)}function _l(i,e,r,a){if(i===void 0)if(Array.isArray(e)){if(!e.includes(a.alg))throw Pe('unexpected JWT "alg" header parameter',tt,{header:a,expected:e,reason:"authorization server metadata"})}else{if(r===void 0)throw Pe('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:i,issuer:e,fallback:r});if(typeof r=="string"?a.alg!==r:typeof r=="function"?!r(a.alg):!r.includes(a.alg))throw Pe('unexpected JWT "alg" header parameter',tt,{header:a,expected:r,reason:"default value"})}else if(typeof i=="string"?a.alg!==i:!i.includes(a.alg))throw Pe('unexpected JWT "alg" header parameter',tt,{header:a,expected:i,reason:"client configuration"})}function br(i,e){const{0:r,length:a}=i.getAll(e);if(a>1)throw Pe(`"${e}" parameter must be provided only once`,tt);return r}const Cl=Symbol(),kl=Symbol();function Al(i,e,r,a){if(Zr(i),ya(e),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw vt('"parameters" must be an instance of URLSearchParams, or URL',Nt);if(br(r,"response"))throw Pe('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',tt,{parameters:r});const n=br(r,"iss"),o=br(r,"state");if(!n&&i.authorization_response_iss_parameter_supported)throw Pe('response parameter "iss" (issuer) missing',tt,{parameters:r});if(n&&n!==i.issuer)throw Pe('unexpected "iss" (issuer) response parameter value',tt,{expected:i.issuer,parameters:r});switch(a){case void 0:case kl:if(o!==void 0)throw Pe('unexpected "state" response parameter encountered',tt,{expected:void 0,parameters:r});break;case Cl:break;default:if(Ct(a,'"expectedState" argument'),o!==a)throw Pe(o===void 0?'response parameter "state" missing':'unexpected "state" response parameter value',tt,{expected:a,parameters:r})}if(br(r,"error"))throw new Qo("authorization response from the server is an error",{cause:r});const l=br(r,"id_token"),c=br(r,"token");if(l!==void 0||c!==void 0)throw new va("implicit and hybrid flows are not supported");return p=new URLSearchParams(r),ds.add(p),p;var p}async function xl(i,e,r){Zr(i);const a=Zs(i,"registration_endpoint",e.use_mtls_endpoint_aliases,r?.[os]!==!0),n=ls(r?.headers);n.set("accept","application/json"),n.set("content-type","application/json");const o="POST";r?.DPoP&&(function(c){if(!ds.has(c))throw vt('"options.DPoP" is not a valid DPoPHandle',er)}(r.DPoP),await r.DPoP.addProof(a,n,o,r.initialAccessToken)),r?.initialAccessToken&&n.set("authorization",`${n.has("dpop")?"DPoP":"Bearer"} ${r.initialAccessToken}`);const l=await(r?.[Aa]||fetch)(a.href,{body:JSON.stringify(e),headers:Object.fromEntries(n.entries()),method:o,redirect:"manual",signal:cs(a,r?.signal)});return r?.DPoP?.cacheNonce(l),l}async function Ml(i,e){return async function(r,a,n,o){if(!(r instanceof URL))throw vt(`"${a}" must be an instance of URL`,Nt);Ks(r,o?.[os]!==!0);const l=n(new URL(r.href)),c=ls(o?.headers);return c.set("accept","application/json"),(o?.[Aa]||fetch)(l.href,{body:void 0,headers:Object.fromEntries(c.entries()),method:"GET",redirect:"manual",signal:cs(l,o?.signal)})}(i,"resourceIdentifier",r=>(function(a,n,o=!1){var l;a.pathname==="/"?a.pathname=n:a.pathname=(l=`${n}/${o?a.pathname:a.pathname.replace(/(\/)$/,"")}`).includes("//")?l.replace("//","/"):l}(r,".well-known/oauth-protected-resource",!0),r),e)}async function ha(i,e=Ws){let r;try{r=await i.json()}catch(a){throw e(i),Pe('failed to parse "response" body as JSON',Qa,a)}if(!fa(r))throw Pe('"response" body must be a top level object',tt,{body:r});return r}const oa=Symbol(),Tl=Symbol(),Wr=class Wr{static async discover(e){const r=await this._discoverResourceMetadata(e),a=r?.authorization_servers?.map(n=>new URL(n))??[e];for(const n of a){const o=await this._discoverAuthServerMetadataUrl(n);if(o)return o}throw new Error("Failed to discover metadata URL")}static async _discoverResourceMetadata(e){try{const r=await Ml(e);return await async function(a,n){const o=a;if(!(o instanceof URL)&&o!==oa)throw vt('"expectedResourceIdentifier" must be an instance of URL',Nt);if(!Ur(n,Response))throw vt('"response" must be an instance of Response',Nt);if(n.status!==200)throw Pe('"response" is not a conform Resource Server Metadata response (unexpected HTTP status code)',es,n);Gr(n);const l=await ha(n);if(Ct(l.resource,'"response" body "resource" property',tt,{body:l}),o!==oa&&new URL(l.resource).href!==o.href)throw Pe('"response" body "resource" property does not match the expected value',Us,{expected:o.href,body:l,attribute:"resource"});return l}(e,r)}catch{return}}static async _discoverAuthServerMetadataUrl(e){for(const r of this._buildWellKnownUrls(e))try{const a=new URL(r,e);if(!(await fetch(a)).ok)continue;return a}catch{continue}}static _buildWellKnownUrls(e){const r=e.pathname.startsWith("/")?e.pathname.substring(1):e.pathname;return[...e.pathname.length>0?[new URL(`/.well-known/oauth-authorization-server/${r}`,e),new URL(`/.well-known/openid-configuration${r}`,e),new URL(`/${r}/.well-known/openid-configuration`,e)]:[],new URL("/.well-known/oauth-authorization-server",e),new URL("/.well-known/openid-configuration",e)]}static async getAuthServerMetadata(e){const r=await fetch(e),a=await this._extractIssuerFromDiscoveryResponse(r.clone());if(!a)throw new Error("Missing issuer from discovery response");return await async function(n,o){const l=n;if(!(l instanceof URL)&&l!==oa)throw vt('"expectedIssuerIdentifier" must be an instance of URL',Nt);if(!Ur(o,Response))throw vt('"response" must be an instance of Response',Nt);if(o.status!==200)throw Pe('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',es,o);Gr(o);const c=await ha(o);if(Ct(c.issuer,'"response" body "issuer" property',tt,{body:c}),l!==oa&&new URL(c.issuer).href!==l.href)throw Pe('"response" body "issuer" property does not match the expected value',Us,{expected:l.href,body:c,attribute:"issuer"});return c}(a,r)}static async _extractIssuerFromDiscoveryResponse(e){if(!e.ok)throw new Error("Invalid status code from discovery response");const r=await e.json();if(!r.issuer||typeof r.issuer!="string")throw new Error("Invalid issuer from discovery response");return new URL(r.issuer)}static async registerClient(e,r){const a=await xl(e,{client_name:this.CLIENT_NAME,client_uri:this.CLIENT_URI,logo_uri:this.LOGO_URI,redirect_uris:r,grant_types:["authorization_code","refresh_token"],response_types:["code"]},{[Aa]:this._fetchRegisterClient.bind(this)});return await async function(n){if(!Ur(n,Response))throw vt('"response" must be an instance of Response',Nt);await Ys(n,201,"Dynamic Client Registration Endpoint"),Gr(n);const o=await ha(n);return Ct(o.client_id,'"response" body "client_id" property',tt,{body:o}),o.client_secret!==void 0&&Ct(o.client_secret,'"response" body "client_secret" property',tt,{body:o}),o.client_secret&&Ir(o.client_secret_expires_at,!0,'"response" body "client_secret_expires_at" property',tt,{body:o}),o}(a)}static async _fetchRegisterClient(e,r){const a=await fetch(e,r);let n=await a.clone().text();const o={status:a.status,statusText:a.statusText,headers:a.headers};if(a.status===200&&(o.status=201,o.statusText="Created"),a.status===201){const l=await a.json();l.client_secret_expires_at||(l.client_secret_expires_at=0),n=JSON.stringify(l)}return new Response(n,o)}static async buildAuthorizationState(e,r,a,n){if(!a.authorization_endpoint)throw new Error("No authorization endpoint");const o=Ia(),l=await async function(g){return Ct(g,"codeVerifier"),ma(await crypto.subtle.digest("SHA-256",Ga(g)))}(o),c=Ia();let p;const u=new URL(a.authorization_endpoint);return u.searchParams.set("response_type","code"),u.searchParams.set("client_id",r.client_id),u.searchParams.set("code_challenge",l),u.searchParams.set("code_challenge_method","S256"),u.searchParams.set("redirect_uri",n),u.searchParams.set("resource",e.toString()),u.searchParams.set("state",c),a.code_challenge_methods_supported?.includes("S256")||(p=Ia(),u.searchParams.set("nonce",p)),{type:at.OAUTH,client:r,serverMetadata:a,redirectUri:n,codeVerifier:o,nonce:p,state:c,authUri:u}}static async authorizationCodeGrant(e,r){const a=Al(r.serverMetadata,r.client,e,r.state),n=await async function(l,c,p,u,g,R,N){if(Zr(l),ya(c),!ds.has(u))throw vt('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',er);Ct(g,'"redirectUri"');const F=br(u,"code");if(!F)throw Pe('no authorization code in "callbackParameters"',tt);const j=new URLSearchParams(N?.additionalParameters);return j.set("redirect_uri",g),j.set("code",F),R!==dl&&(Ct(R,'"codeVerifier"'),j.set("code_verifier",R)),Rs(l,c,p,"authorization_code",j,N)}(r.serverMetadata,r.client,this._getClientAuth(r.client),a,r.redirectUri,r.codeVerifier),o=await hl(r.serverMetadata,r.client,n,{expectedNonce:r.nonce});return this._buildAuthSecret(o,r.serverMetadata,r.client)}static async refreshTokenGrant(e){if(!e.refreshToken)throw new Error("No refresh token available");const r=await async function(n,o,l,c,p){Zr(n),ya(o),Ct(c,'"refreshToken"');const u=new URLSearchParams(p?.additionalParameters);return u.set("refresh_token",c),Rs(n,o,l,"refresh_token",u,p)}(e.serverMetadata,e.client,this._getClientAuth(e.client),e.refreshToken),a=await async function(n,o,l,c){return Xa(n,o,l,void 0,c?.[ja],c?.recognizedTokenTypes)}(e.serverMetadata,e.client,r);return this._buildAuthSecret(a,e.serverMetadata,e.client)}static _getClientAuth(e){const r=e.client_secret;return e.client_secret&&typeof r=="string"?(Ct(a=r,'"clientSecret"'),(n,o,l,c)=>{l.set("client_id",o.client_id),l.set("client_secret",a)}):(n,o,l,c)=>{l.set("client_id",o.client_id)};var a}static _buildAuthSecret(e,r,a){return{type:at.OAUTH,accessToken:e.access_token,refreshToken:e.refresh_token,expiresAt:e.expires_in?Date.now()+1e3*e.expires_in:void 0,tokenType:e.token_type,scope:e.scope,serverMetadata:r,client:a}}};Wr.CLIENT_NAME="Augment Code",Wr.CLIENT_URI="https://augmentcode.com",Wr.LOGO_URI="https://storage.googleapis.com/augment-bazel-data/public/auth0/2024-10-15-auth0-augment-logo-512x512.png";let Zt=Wr;class El{constructor(){this._logger=Fs(),this.MCP_ACCESS_TOKEN_KEY_PREFIX="augment.mcp-access-token",this._authRequired=new Set,this._authState={}}static getAuthTypeFunctional(e){switch(e){case at.OAUTH:case at.MIGRATION_OAUTH:return at.OAUTH;case at.HEADER:return at.HEADER;default:return e}}async getAuthHeaders(e){if(!e.name)return void this._logger.error("MCP server config is missing name");this._logger.debug(`Getting auth headers for MCP: ${e.name}`);const r=await this.getAuthSecret(e);if(r)switch(r.type){case at.OAUTH:case at.MIGRATION_OAUTH:return{Authorization:`Bearer ${await this.getAccessToken(e.name,r)}`};case at.HEADER:return r.headers}else this._logger.warn(`No auth secret found for MCP: ${e.name}`)}async getAccessToken(e,r){switch(r.type){case at.OAUTH:return await this.getAccessTokenOAuthFromSecret(e,r);case at.MIGRATION_OAUTH:return r.accessToken;default:return}}async getAccessTokenOAuthFromSecret(e,r){const a=Date.now();if(!(r.expiresAt&&a+2e4>=r.expiresAt))return r.accessToken;this._logger.debug(`Token for MCP ${e} is expiring soon, attempting refresh`);try{const n=await Zt.refreshTokenGrant(r);return await this.setAuthSecret(e,n),this._logger.debug(`Successfully refreshed and stored new token for MCP: ${e}`),n.accessToken}catch(n){this._logger.error(`Failed to refresh token for MCP ${e}: ${sr(n)}`)}return r.accessToken}async getAuthSecret(e){const r=e.name;if(!r)return void this._logger.error("MCP server config is missing name");let a,n;try{a=await Ua().getSecret(this.getAuthSecretKey(r))}catch(o){return void this._logger.error(`Failed to retrieve token data for MCP ${r}: ${sr(o)}`)}if(a){try{n=JSON.parse(a)}catch{this._logger.warn(`Failed to parse auth secret data for MCP ${r}, reformatting it into migration format.`),n=await this._migrateAuthSecretMigrationOAuth(r,a)}return typeof n=="string"?(this._logger.error(`Unexpected string value for auth secret for MCP ${r}`),void await this.deleteAuthSecret(r)):(n.type===at.OAUTH&&"clientId"in n&&(n=await this._migrateAuthSecretOAuthWithoutMetadata(r,n)),this._logger.debug(`Successfully retrieved auth secret for MCP: ${r}`),n)}this._logger.warn(`No token data found for MCP ${r}`)}async _migrateAuthSecretMigrationOAuth(e,r){const a={type:at.MIGRATION_OAUTH,accessToken:r};return await this.setAuthSecret(e,a),a}async _migrateAuthSecretOAuthWithoutMetadata(e,r){try{const a=await Zt.discover(new URL(r.resource)),n=await Zt.getAuthServerMetadata(a),o={...r,serverMetadata:n,client:{client_id:r.clientId,client_secret:void 0}};return await this.setAuthSecret(e,o),o}catch(a){return void this._logger.error(`Failed to migrate auth secret for MCP ${e}: ${sr(a)}`)}}async setAuthSecret(e,r){try{await Ua().setSecret(this.getAuthSecretKey(e),JSON.stringify(r)),this._logger.debug(`Successfully stored auth secret for MCP: ${e}`)}catch(a){throw this._logger.error(`Failed to store token data for MCP ${e}: ${sr(a)}`),new Error(`Failed to store token data for MCP ${e}: ${sr(a)}`)}}async deleteAuthSecret(e){try{await Ua().deleteSecret(this.getAuthSecretKey(e)),this._logger.debug(`Successfully deleted auth secret for MCP: ${e}`)}catch(r){throw this._logger.error(`Failed to delete token data for MCP ${e}: ${sr(r)}`),new Error(`Failed to delete token data for MCP ${e}: ${sr(r)}`)}}getAuthSecretKey(e){return`${this.MCP_ACCESS_TOKEN_KEY_PREFIX}.${e}`}getAuthRequiredServers(){return this._authRequired}isAuthRequired(e){return this._authRequired.has(e)}addAuthRequired(e){this._authRequired.add(e)}removeAuthRequired(e){this._authRequired.delete(e)}getAuthState(e){return this._authState[e]}setAuthState(e,r){this._authState[e]=r}deleteAuthState(e){delete this._authState[e]}async initiateOAuth(e,r,a){const n=new URL(r.url);this._logger.debug(`Initiating OAuth for MCP ${e} (${n.toString()})`);const o=await Zt.discover(n);this._logger.debug(`Discovered OAuth metadata URL for MCP ${e}: ${o.toString()}`);const l=await Zt.getAuthServerMetadata(o);this._logger.debug(`Successfully retrieved OAuth metadata for MCP ${e}`);const c=await Zt.registerClient(l,[a]);this._logger.debug(`Successfully registered client for MCP ${e} (client_id: ${c.client_id})`);const p=await Zt.buildAuthorizationState(n,c,l,a);return this._logger.debug(`Successfully built authorization state for MCP ${e}`),this.setAuthState(e,p),p.authUri.toString()}async handleOAuthCallback(e,r){this._logger.debug(`Handling OAuth callback for MCP ${e}`);const a=this.getAuthState(e);if(this.deleteAuthState(e),a?.type!==at.OAUTH)throw this._logger.error(`Unexpected auth state type for MCP ${e}: expected ${at.OAUTH}, got ${a?.type}`),new Error(`Unexpected auth state type: ${a?.type}`);let n;try{n=await Zt.authorizationCodeGrant(r,a)}catch(o){throw this._logger.error(`Failed to complete OAuth for MCP ${e}: ${sr(o)}`),new Error(`Failed to complete OAuth: ${sr(o)}`)}this._logger.debug(`Successfully completed OAuth for MCP ${e}`),await this.setAuthSecret(e,n)}}var Rl=f("<div></div>"),Nl=f(" <!>",1),Ul=f('<div class="server-name svelte-8g1e5g"><!></div>'),Il=f('<div slot="headerLeft" class="l-header svelte-8g1e5g"><!> <!> <!> <div class="command-text svelte-8g1e5g"><!></div></div>'),Pl=f('<div class="status-controls-button svelte-8g1e5g"><!> <!></div>'),Ll=f('<div class="status-controls-button svelte-8g1e5g"><!> <!></div>'),zl=f('<div class="status-controls-button svelte-8g1e5g"><!> <!></div>'),Ol=f("<!> <!> <!>",1),Dl=f("<!> <!>",1),Fl=f('<div class="server-actions svelte-8g1e5g" slot="headerRight"><!> <div class="status-controls svelte-8g1e5g"><!> <!></div></div>'),Bl=f('<div class="c-tool-item svelte-8g1e5g"><div class="c-tool-info svelte-8g1e5g"><div class="tool-status svelte-8g1e5g"><div></div> <!></div> <div class="c-tool-description svelte-8g1e5g"><!></div></div></div>'),Hl=f('<div slot="footer"></div>'),ql=f('<div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div> <div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div>',1),Jl=f('<div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!> <div class="connection-type-buttons svelte-8g1e5g"><!> <!></div></div></div>'),Vl=f('<div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!> <div class="connection-type-buttons svelte-8g1e5g"><!> <!></div></div></div> <!>',1),jl=f('<div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div>'),Gl=f('<div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div>'),Wl=f('<!> <div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div> <!>',1),Kl=f('<form><div class="server-edit-form svelte-8g1e5g"><div class="server-header svelte-8g1e5g"><div class="server-title svelte-8g1e5g"><div class="server-icon svelte-8g1e5g"><!></div> <!></div></div> <!> <!> <div class="form-actions-row svelte-8g1e5g"><div><!></div> <div class="form-actions svelte-8g1e5g"><!> <!></div></div></div></form>');function Is(i,e){qe(e,!1);const r=()=>Le(I,"$authRequiredSet",a),[a,n]=Lt(),o=Ue(),l=Ue(),c=Ue(),p=Ue(),u=Ue(),g=Ue(),R=Ue(),N=Ue(),F=Ue(),j=Ue();let h=D(e,"server",8,null),w=D(e,"onDelete",8),$=D(e,"onAdd",8),P=D(e,"onSave",8),k=D(e,"onEdit",8),y=D(e,"onToggleDisableServer",8),G=D(e,"onJSONImport",8),C=D(e,"onCancel",8),A=D(e,"onAuthenticate",24,()=>{}),_=D(e,"disabledText",24,()=>{}),z=D(e,"warningText",24,()=>{}),H=D(e,"mcpServerModel",8),b=D(e,"mode",12,"view"),q=D(e,"mcpServerError",12,""),J=D(e,"enableNativeRemoteMcp",8,!0),W=Ue(0);const I=H().getAuthRequiredStore();let M=Ue(h()?.name??""),L=Ue(qt(h())?"":Er(h())?h().command:""),K=Ue(qt(h())?h().url:""),T=Er(h())?h().env??{}:{},O=Ue(""),Y=Ue(qt(h())?h().type:"http"),x=Ue(void 0),ie={};async function Z(){const we=qt(h())?await H().getAuthSecret(h().name):void 0;m(x,we?El.getAuthTypeFunctional(we?.type):at.OAUTH),ie=we?.type===at.HEADER?we?.headers:{},ee()}Lr(async()=>{await Z()});let Ce=Ue([]);fe();let be=Ue([]);ee();let he=Ue(!0);function fe(){m(Ce,Object.entries(T).map(([we,ae])=>({id:crypto.randomUUID(),key:we,value:ae})))}function ee(){m(be,Object.entries(ie).map(([we,ae])=>({id:crypto.randomUUID(),key:we,value:ae})))}let B=Ue(void 0);function U(){h()&&b()==="view"&&(b("edit"),k()(h()),t(B)?.())}let oe=D(e,"busy",12,!1);function ue({key:we,value:ae}){return we.trim()&&ae.trim()}async function Ae(){q(""),oe(!0);const we=t(Ce).filter(ue);T=Object.fromEntries(we.map(({key:se,value:X})=>[se.trim(),X.trim()])),fe();const ae=t(be).filter(ue);ie=Object.fromEntries(ae.map(({key:se,value:X})=>[se.trim(),X.trim()])),ee();const ke=t(x)===at.HEADER?{type:at.HEADER,headers:ie}:void 0;try{if(b()==="add"){const se={type:"stdio",name:t(M).trim(),command:t(L).trim(),arguments:"",useShellInterpolation:!0,env:Object.keys(T).length>0?T:void 0};await $()(se)}else if(b()==="addRemote"){const se={type:t(Y),name:t(M).trim(),url:t(K).trim()};await $()(se,ke)}else if(b()==="addJson"){try{JSON.parse(t(O))}catch(se){const X=se instanceof Error?se.message:String(se);throw new Tt(`Invalid JSON format: ${X}`)}await G()(t(O))}else if(b()==="edit"&&h()){if(qt(h())){const se={...h(),type:t(Y),name:t(M).trim(),url:t(K).trim()};await P()(se,ke)}else if(Er(h())){const se={...h(),name:t(M).trim(),command:t(L).trim(),arguments:"",env:Object.keys(T).length>0?T:void 0};await P()(se)}}}catch(se){q(se instanceof Tt?se.message:"Failed to save server"),console.warn(se)}finally{oe(!1)}}function Ee(){oe(!1),q(""),C()?.(),m(O,""),m(M,h()?.name??""),m(L,qt(h())?"":Er(h())?h().command:""),m(K,qt(h())?h().url:""),m(Y,qt(h())?h().type:"http"),T=Er(h())&&h().env?{...h().env}:{},fe(),Z()}nt(()=>pe(h()),()=>{m(o,h()?.tools??[])}),nt(()=>(pe(b()),pe(h())),()=>{m(l,b()==="add"||b()==="edit"&&Er(h()))}),nt(()=>(pe(b()),pe(h())),()=>{m(c,b()==="addRemote"||b()==="edit"&&qt(h()))}),nt(()=>pe(h()),()=>{m(p,qt(h()))}),nt(()=>t(W),()=>{m(u,Date.now()-t(W)<3e3)}),nt(()=>(t(p),pe(h()),r(),t(o),t(u)),()=>{m(g,t(p)&&!h()?.disabled&&h()&&r().has(h()?.name)&&t(o).length===0&&!t(u))}),nt(()=>(t(M),t(L)),()=>{t(M)&&t(L)&&q("")}),nt(()=>(pe(b()),t(M),t(L),t(K)),()=>{m(R,!((b()!=="add"||t(M).trim()&&t(L).trim())&&(b()!=="addRemote"||t(M).trim()&&t(K).trim())))}),nt(()=>(pe(b()),t(O)),()=>{m(N,b()==="addJson"&&!t(O).trim())}),nt(()=>(t(R),pe(b()),t(N)),()=>{m(F,t(R)||b()==="view"||t(N))}),nt(()=>pe(b()),()=>{m(j,(()=>{switch(b()){case"add":return"New MCP Server";case"addRemote":return"New Remote MCP Server";case"addJson":return"Import MCP Server";default:return"Edit MCP Server"}})())}),lr();var Oe={loadAuthHeaders:Z,setLocalEnvVarFormState:fe,setLocalAuthHeaderFormState:ee};tr();var Re=ge();te(()=>{console.log({server:me(()=>xs(h())),serverTools:me(()=>xs(t(o)))})});var le=V(Re),ye=we=>{Hs(we,{get collapsed(){return t(he)},set collapsed(ae){m(he,ae)},$$slots:{header:(ae,ke)=>{Gt(ae,{slot:"header",$$slots:{headerLeft:(se,X)=>{var ce=Il(),Be=d(ce),Ne=ve=>{It(ve,{size:1,variant:"ghost",$$events:{click:()=>m(he,!t(he))},children:($e,Te)=>{var xe=ge(),Se=V(xe),Ie=Ve=>{_e(Ve,{name:"chevron-right"})},it=Ve=>{_e(Ve,{name:"chevron-down"})};E(Se,Ve=>{t(he)?Ve(Ie):Ve(it,!1)}),s($e,xe)},$$slots:{default:!0}})};E(Be,ve=>{t(o),me(()=>t(o).length>0)&&ve(Ne)});var je=v(Be,2);{let ve=ct(()=>_()||(t(g)?"Authentication required":z()));Ot(je,{get content(){return t(ve)},children:($e,Te)=>{var xe=Rl();let Se;te(Ie=>Se=Ut(xe,1,"c-dot svelte-8g1e5g",null,Se,Ie),[()=>({"c-green":!_()&&!t(g),"c-warning":t(g)||!_()&&!!z(),"c-red":!!_()&&!t(g),"c-disabled":h().disabled})]),s($e,xe)},$$slots:{default:!0}})}var Me=v(je,2);Ot(Me,{get content(){return pe(h()),me(()=>h().name)},side:"top",align:"start",children:(ve,$e)=>{var Te=Ul(),xe=d(Te);Q(xe,{size:1,weight:"medium",children:(Se,Ie)=>{var it=Nl(),Ve=V(it),yt=v(Ve),He=Qe=>{var Ke=S();te(()=>de(Ke,`(${t(o),me(()=>t(o).length)??""}) tools`)),s(Qe,Ke)};E(yt,Qe=>{t(o),me(()=>t(o).length>0)&&Qe(He)}),te(()=>de(Ve,`${pe(h()),me(()=>h().name)??""} `)),s(Se,it)},$$slots:{default:!0}}),s(ve,Te)},$$slots:{default:!0}});var rt=v(Me,2),Fe=d(rt);{let ve=ct(()=>(pe(ia),pe(h()),me(()=>ia(h()))));Ot(Fe,{get content(){return t(ve)},side:"top",align:"start",children:($e,Te)=>{Q($e,{color:"secondary",size:1,weight:"regular",children:(xe,Se)=>{var Ie=S();te(it=>de(Ie,it),[()=>(pe(ia),pe(h()),me(()=>ia(h())))]),s(xe,Ie)},$$slots:{default:!0}})},$$slots:{default:!0}})}s(se,ce)},headerRight:(se,X)=>{var ce=Fl(),Be=d(ce),Ne=ve=>{We(ve,{size:1,variant:"surface",color:"warning",$$events:{click:()=>{t(x)===at.OAUTH?A()?.(h()):t(x)===at.HEADER&&U()}},children:($e,Te)=>{var xe=S("Authenticate");s($e,xe)},$$slots:{default:!0}})};E(Be,ve=>{t(g)&&ve(Ne)});var je=v(Be,2),Me=d(je),rt=ve=>{{let $e=ct(()=>(pe(h()),me(()=>!h().disabled)));jr(ve,{size:1,get checked(){return t($e)},onchange:()=>{h()&&(m(W,Date.now()),y()(h().id)),t(B)?.()}})}};E(Me,ve=>{pe(ps),me(ps)&&ve(rt)});var Fe=v(Me,2);ot.Root(Fe,{get requestClose(){return t(B)},set requestClose(ve){m(B,ve)},children:(ve,$e)=>{var Te=Dl(),xe=V(Te);ot.Trigger(xe,{children:(Ie,it)=>{It(Ie,{size:1,variant:"ghost-block",color:"neutral",children:(Ve,yt)=>{_e(Ve,{name:"ellipsis"})},$$slots:{default:!0}})},$$slots:{default:!0}});var Se=v(xe,2);ot.Content(Se,{side:"bottom",align:"end",children:(Ie,it)=>{var Ve=Ol(),yt=V(Ve);ot.Item(yt,{onSelect:U,children:(Ke,ht)=>{var De=Pl(),Ge=d(De);_e(Ge,{name:"square-pen"});var Ye=v(Ge,2);Q(Ye,{size:1,weight:"medium",children:(dt,wt)=>{var xt=S("Edit");s(dt,xt)},$$slots:{default:!0}}),s(Ke,De)},$$slots:{default:!0}});var He=v(yt,2);ot.Item(He,{onSelect:()=>{(function(){if(h()){const Ke=ea.convertServerToJSON(h());navigator.clipboard.writeText(Ke)}})(),t(B)?.()},children:(Ke,ht)=>{var De=Ll(),Ge=d(De);_e(Ge,{name:"copy"});var Ye=v(Ge,2);Q(Ye,{size:1,weight:"medium",children:(dt,wt)=>{var xt=S("Copy JSON");s(dt,xt)},$$slots:{default:!0}}),s(Ke,De)},$$slots:{default:!0}});var Qe=v(He,2);ot.Item(Qe,{color:"error",onSelect:()=>{w()(h()),t(B)?.()},children:(Ke,ht)=>{var De=zl(),Ge=d(De);_e(Ge,{name:"trash-2"});var Ye=v(Ge,2);Q(Ye,{size:1,weight:"medium",children:(dt,wt)=>{var xt=S("Delete");s(dt,xt)},$$slots:{default:!0}}),s(Ke,De)},$$slots:{default:!0}}),s(Ie,Ve)},$$slots:{default:!0}}),s(ve,Te)},$$slots:{default:!0},$$legacy:!0}),s(se,ce)}}})},footer:(ae,ke)=>{var se=Hl();gt(se,5,()=>t(o),Cr,(X,ce)=>{var Be=Bl(),Ne=d(Be),je=d(Ne),Me=d(je);let rt;var Fe=v(Me,2);Q(Fe,{size:1,weight:"medium",children:(Te,xe)=>{var Se=S();te(()=>de(Se,(t(ce),me(()=>t(ce).definition.mcp_tool_name||t(ce).definition.name)))),s(Te,Se)},$$slots:{default:!0}});var ve=v(je,2),$e=d(ve);Ot($e,{get content(){return t(ce),me(()=>t(ce).definition.description)},align:"start",children:(Te,xe)=>{var Se=ge(),Ie=V(Se),it=Ve=>{Q(Ve,{size:1,color:"secondary",children:(yt,He)=>{var Qe=S();te(()=>de(Qe,(t(ce),me(()=>t(ce).definition.description)))),s(yt,Qe)},$$slots:{default:!0}})};E(Ie,Ve=>{t(ce),me(()=>t(ce).definition.description)&&Ve(it)}),s(Te,Se)},$$slots:{default:!0}}),te(Te=>rt=Ut(Me,1,"tool-status-dot svelte-8g1e5g",null,rt,Te),[()=>({enabled:t(ce).enabled,disabled:!t(ce).enabled})]),s(X,Be)}),s(ae,se)}},$$legacy:!0})},re=we=>{var ae=Kl(),ke=d(ae),se=d(ke),X=d(se),ce=d(X),Be=d(ce);_e(Be,{name:"cpu"});var Ne=v(ce,2);Q(Ne,{color:"secondary",size:1,weight:"medium",children:(He,Qe)=>{var Ke=S();te(()=>de(Ke,t(j))),s(He,Ke)},$$slots:{default:!0}});var je=v(se,2),Me=He=>{var Qe=ql(),Ke=V(Qe),ht=d(Ke),De=d(ht);Q(De,{size:1,weight:"medium",children:(wt,xt)=>{var pt=S("Code Snippet");s(wt,pt)},$$slots:{default:!0}});var Ge=v(Ke,2),Ye=d(Ge),dt=d(Ye);Ca(dt,{size:1,placeholder:"Paste JSON here...",get value(){return t(O)},set value(wt){m(O,wt)},$$legacy:!0}),s(He,Qe)},rt=He=>{var Qe=ge(),Ke=V(Qe),ht=De=>{var Ge=Wl(),Ye=V(Ge),dt=$t=>{var bt=Vl(),mt=V(bt),Mt=d(mt),St=d(Mt);Q(St,{size:1,weight:"medium",children:(Pt,gr)=>{var pr=S("Connection Type");s(Pt,pr)},$$slots:{default:!0}});var Ft=v(St,2),ft=d(Ft);{let Pt=ct(()=>t(Y)==="http"?"solid":"ghost"),gr=ct(()=>t(Y)==="http"?"accent":"neutral");We(ft,{size:1,get variant(){return t(Pt)},get color(){return t(gr)},type:"button",$$events:{click:()=>m(Y,"http")},children:(pr,ta)=>{var Fr=S("HTTP");s(pr,Fr)},$$slots:{default:!0}})}var vr=v(ft,2);{let Pt=ct(()=>t(Y)==="sse"?"solid":"ghost"),gr=ct(()=>t(Y)==="sse"?"accent":"neutral");We(vr,{size:1,get variant(){return t(Pt)},get color(){return t(gr)},type:"button",$$events:{click:()=>m(Y,"sse")},children:(pr,ta)=>{var Fr=S("SSE");s(pr,Fr)},$$slots:{default:!0}})}var hr=v(mt,2),Bt=Pt=>{var gr=Jl(),pr=d(gr),ta=d(pr);Q(ta,{size:1,weight:"medium",children:(Br,ra)=>{var Hr=S("Authentication Type");s(Br,Hr)},$$slots:{default:!0}});var Fr=v(ta,2),vs=d(Fr);{let Br=ct(()=>t(x)==="oauth"?"solid":"ghost"),ra=ct(()=>t(x)==="oauth"?"accent":"neutral");We(vs,{size:1,get variant(){return t(Br)},get color(){return t(ra)},type:"button",$$events:{click:()=>m(x,at.OAUTH)},children:(Hr,sn)=>{var xa=S("OAuth");s(Hr,xa)},$$slots:{default:!0}})}var an=v(vs,2);{let Br=ct(()=>t(x)==="header"?"solid":"ghost"),ra=ct(()=>t(x)==="header"?"accent":"neutral");We(an,{size:1,get variant(){return t(Br)},get color(){return t(ra)},type:"button",$$events:{click:()=>m(x,at.HEADER)},children:(Hr,sn)=>{var xa=S("Header");s(Hr,xa)},$$slots:{default:!0}})}s(Pt,gr)};E(hr,Pt=>{J()&&Pt(Bt)}),s($t,bt)};E(Ye,$t=>{t(c)&&$t(dt)});var wt=v(Ye,2),xt=d(wt),pt=d(xt);zt(pt,{size:1,placeholder:"Enter a name for your MCP server (e.g., 'Server Memory')",get value(){return t(M)},set value($t){m(M,$t)},$$events:{focus:U},$$slots:{label:($t,bt)=>{Q($t,{slot:"label",size:1,weight:"medium",children:(mt,Mt)=>{var St=S("Name");s(mt,St)},$$slots:{default:!0}})}},$$legacy:!0});var Rt=v(wt,2),Wt=$t=>{var bt=jl(),mt=d(bt),Mt=d(mt);zt(Mt,{size:1,placeholder:"Enter the URL (e.g., 'https://api.example.com/mcp')",get value(){return t(K)},set value(St){m(K,St)},$$events:{focus:U},$$slots:{label:(St,Ft)=>{Q(St,{slot:"label",size:1,weight:"medium",children:(ft,vr)=>{var hr=S("URL");s(ft,hr)},$$slots:{default:!0}})}},$$legacy:!0}),s($t,bt)},Dr=$t=>{var bt=Gl(),mt=d(bt),Mt=d(mt);zt(Mt,{size:1,placeholder:"Enter the MCP command (e.g., 'npx -y @modelcontextprotocol/server-memory')",get value(){return t(L)},set value(St){m(L,St)},$$events:{focus:U},$$slots:{label:(St,Ft)=>{Q(St,{slot:"label",size:1,weight:"medium",children:(ft,vr)=>{var hr=S("Command");s(ft,hr)},$$slots:{default:!0}})}},$$legacy:!0}),s($t,bt)};E(Rt,$t=>{t(c)?$t(Wt):$t(Dr,!1)}),s(De,Ge)};E(Ke,De=>{b()!=="add"&&b()!=="addRemote"&&b()!=="edit"||De(ht)},!0),s(He,Qe)};E(je,He=>{b()==="addJson"?He(Me):He(rt,!1)});var Fe=v(je,2),ve=He=>{Ts(He,{handleEnterEditMode:U,title:"Environment Variables",keyPlaceholder:"Key",valuePlaceholder:"Value",addButtonText:"Variable",get keyValEntries(){return t(Ce)},set keyValEntries(Qe){m(Ce,Qe)},$$legacy:!0})},$e=He=>{var Qe=ge(),Ke=V(Qe),ht=De=>{Ts(De,{handleEnterEditMode:U,title:"Headers",keyPlaceholder:"Header",valuePlaceholder:"Value",addButtonText:"Header",get keyValEntries(){return t(be)},set keyValEntries(Ge){m(be,Ge)},$$legacy:!0})};E(Ke,De=>{t(c),t(x),pe(at),me(()=>t(c)&&t(x)===at.HEADER)&&De(ht)},!0),s(He,Qe)};E(Fe,He=>{t(l)?He(ve):He($e,!1)});var Te=v(Fe,2),xe=d(Te);let Se;var Ie=d(xe);Vt(Ie,{variant:"soft",color:"error",size:1,icon:Qe=>{_e(Qe,{name:"circle-x"})},children:(Qe,Ke)=>{var ht=S();te(()=>de(ht,q())),s(Qe,ht)},$$slots:{icon:!0,default:!0}});var it=v(xe,2),Ve=d(it);We(Ve,{size:1,variant:"ghost",color:"neutral",type:"button",$$events:{click:Ee},children:(He,Qe)=>{var Ke=S("Cancel");s(He,Ke)},$$slots:{default:!0}});var yt=v(Ve,2);We(yt,{size:1,variant:"solid",color:"accent",get loading(){return oe()},type:"submit",get disabled(){return t(F)},children:(He,Qe)=>{var Ke=ge(),ht=V(Ke),De=Ye=>{var dt=S("Import");s(Ye,dt)},Ge=Ye=>{var dt=ge(),wt=V(dt),xt=Rt=>{var Wt=S("Add");s(Rt,Wt)},pt=Rt=>{var Wt=ge(),Dr=V(Wt),$t=mt=>{var Mt=S("Add");s(mt,Mt)},bt=mt=>{var Mt=ge(),St=V(Mt),Ft=ft=>{var vr=S("Save");s(ft,vr)};E(St,ft=>{b()==="edit"&&ft(Ft)},!0),s(mt,Mt)};E(Dr,mt=>{b()==="addRemote"?mt($t):mt(bt,!1)},!0),s(Rt,Wt)};E(wt,Rt=>{b()==="add"?Rt(xt):Rt(pt,!1)},!0),s(Ye,dt)};E(ht,Ye=>{b()==="addJson"?Ye(De):Ye(Ge,!1)}),s(He,Ke)},$$slots:{default:!0}}),te(He=>{Ut(ae,1,"c-mcp-server-card "+(b()==="add"||b()==="addJson"||b()==="addRemote"?"add-server-section":"server-item"),"svelte-8g1e5g"),Se=Ut(xe,1,"error-container svelte-8g1e5g",null,Se,He)},[()=>({"is-error":!!q()})]),Dt("submit",ae,di(Ae)),s(we,ae)};E(le,we=>{b()==="view"&&h()?we(ye):we(re,!1)}),s(i,Re),ua(e,"loadAuthHeaders",Z),ua(e,"setLocalEnvVarFormState",fe),ua(e,"setLocalAuthHeaderFormState",ee);var ze=Je(Oe);return n(),ze}var Zl=f('<div class="user-input-field svelte-14uub1e"><!> <!> <!></div>'),Yl=f('<div class="user-input-container svelte-14uub1e"><!> <div class="user-input-actions svelte-14uub1e"><!> <!></div></div>'),Xl=f('<div slot="headerLeft" class="mcp-service-info svelte-14uub1e"><div class="mcp-service-title svelte-14uub1e"><!></div> <!> <!></div>'),Ql=f('<div class="installed-indicator svelte-14uub1e"><!></div>'),ec=f('<div slot="headerRight" class="mcp-service-actions svelte-14uub1e"><!></div>'),tc=f('<div class="mcp-service-item"><!></div>'),rc=f('<div class="mcp-install-content svelte-14uub1e"><div class="mcp-list-container svelte-14uub1e"></div></div>'),ac=f('<div slot="headerLeft" class="mcp-install-left svelte-14uub1e"><!> <!></div>'),sc=f('<div slot="header" class="mcp-install-header svelte-14uub1e"><!></div>'),nc=f('<div class="mcp-install-wrapper svelte-14uub1e"><!></div>');function ic(i,e){qe(e,!1);let r=D(e,"onMCPServerAdd",24,()=>{}),a=D(e,"servers",24,()=>[]);const n=[{label:mr.REDIS,description:"Real-time data platform for building fast apps",command:"uvx",args:["--from","redis-mcp-server@latest","redis-mcp-server","--url"],userInput:[{label:"Redis connection URL",description:"Enter your connection URL (redis://localhost:6379/0)",placeholder:"rediss://<USERNAME>:<PASSWORD>@<HOST>:<PORT>?ssl_cert_reqs=required&ssl_ca_certs=<PATH_TO_CERT>",correspondingArg:"--url",type:"argument"}]},{label:mr.MONGODB,description:"Optimize database queries and performance.",command:"npx",args:["-y","mongodb-mcp-server","--connectionString"],userInput:[{label:"MongoDB Connection String",description:"Enter your MongoDB connection string",placeholder:"mongodb://username:password@host:port/database",correspondingArg:"--connectionString",type:"argument"}]},{label:mr.CIRCLECI,description:"Debug builds and improve CI/CD pipelines.",command:"npx",args:["-y","@circleci/mcp-server-circleci"],userInput:[{label:"CircleCI Token",description:"Enter your CircleCI token",placeholder:"YOUR_CIRCLE_CI_TOKEN",type:"environmentVariable",envVarName:"CIRCLECI_TOKEN"},{label:"Base URL",description:"Enter the base URL for your CircleCI instance",placeholder:"https://circleci.com",defaultValue:"https://circleci.com",type:"environmentVariable",envVarName:"CIRCLECI_BASE_URL"}]},{label:mr.HEROKU,description:"Interact with the Heroku Platform.",command:"heroku",args:["mcp:start"],userInput:[]},{label:mr.RAILWAY,description:"Railway simplifies your infrastructure stack from servers to observability with a single, scalable, easy-to-use platform.",command:"npx -y @railway/mcp-server"},{label:mr.CONVEX,description:"The backend platform that keeps your app in sync.",command:"npx -y convex@latest mcp start"},{label:mr.SNOWFLAKE,description:"Snowflake Cortex AI, object management, SQL orchestration, and semantic views.",command:"uvx",args:["snowflake-labs-mcp","--service-config-file"],userInput:[{label:"Service Config File Path",description:"Path to your Snowflake MCP configuration YAML file",placeholder:"/path/to/config.yaml",correspondingArg:"--service-config-file",type:"argument"}]},{label:"Context 7",description:"Package documentation",command:"npx -y @upstash/context7-mcp@latest"},{label:"Playwright",description:"Browser automation",command:"npx -y @playwright/mcp@latest"},{label:"Sequential thinking",description:"Think through complex problems step-by-step.",command:"npx -y @modelcontextprotocol/server-sequential-thinking"}],o="easyMCPInstall.collapsed";let l=Ue(!1),c=Ue(!1),p=Ue(null),u=Ue({}),g=Ue({});function R(h){if(!h.userInput)return;for(let k=0;k<h.userInput.length;k++){const y=h.userInput[k];let G;if(G=y.type==="environmentVariable"&&y.envVarName?y.envVarName:y.correspondingArg?y.correspondingArg:`input_${k}`,!t(u)[G]?.trim()){const A=t(g)[G];return void(A&&A.focus())}}let w=[h.command],$={};h.args&&w.push(...h.args);for(let k=0;k<h.userInput.length;k++){const y=h.userInput[k];let G;G=y.type==="environmentVariable"&&y.envVarName?y.envVarName:y.correspondingArg?y.correspondingArg:`input_${k}`;const C=t(u)[G].trim(),A=`"${C}"`;if(y.type==="environmentVariable"&&y.envVarName)$[y.envVarName]=C;else if(y.correspondingArg){const _=w.indexOf(y.correspondingArg);_!==-1?w.splice(_+1,0,A):w.push(y.correspondingArg,A)}else w.push(A)}const P={type:"stdio",name:h.label,command:w.join(" "),arguments:"",useShellInterpolation:!0,env:Object.keys($).length>0?$:void 0};r()&&r()(P),m(p,null),m(u,{})}function N(){m(p,null),m(u,{})}nt(()=>{},()=>{const h=localStorage.getItem(o);if(h!==null)try{m(l,JSON.parse(h))}catch{localStorage.removeItem(o)}m(c,!0)}),nt(()=>(t(c),t(l)),()=>{typeof window<"u"&&t(c)&&localStorage.setItem(o,JSON.stringify(t(l)))}),lr(),tr();var F=nc(),j=d(F);Hs(j,{get collapsed(){return t(l)},set collapsed(h){m(l,h)},children:(h,w)=>{var $=rc(),P=d($);gt(P,5,()=>n,Cr,(k,y)=>{var G=tc();Gt(d(G),{$$slots:{headerLeft:(C,A)=>{var _=Xl(),z=d(_),H=d(z);Q(H,{size:1,weight:"medium",children:(I,M)=>{var L=S();te(()=>de(L,(t(y),me(()=>t(y).label)))),s(I,L)},$$slots:{default:!0}});var b=v(z,2),q=I=>{Q(I,{size:1,color:"secondary",children:(M,L)=>{var K=S();te(()=>de(K,(t(y),me(()=>t(y).description)))),s(M,K)},$$slots:{default:!0}})};E(b,I=>{t(y),me(()=>t(y).description)&&I(q)});var J=v(b,2),W=I=>{var M=Yl(),L=d(M);gt(L,1,()=>(t(y),me(()=>t(y).userInput)),Cr,(Y,x,ie)=>{const Z=ct(()=>(t(x),me(()=>t(x).type==="environmentVariable"&&t(x).envVarName?t(x).envVarName:t(x).correspondingArg||`input_${ie}`)));var Ce=Zl(),be=d(Ce);Q(be,{size:1,weight:"medium",color:"neutral",children:(B,U)=>{var oe=S();te(()=>de(oe,(t(x),me(()=>t(x).label)))),s(B,oe)},$$slots:{default:!0}});var he=v(be,2),fe=B=>{Q(B,{size:1,color:"secondary",children:(U,oe)=>{var ue=S();te(()=>de(ue,(t(x),me(()=>t(x).description)))),s(U,ue)},$$slots:{default:!0}})};E(he,B=>{t(x),me(()=>t(x).description)&&B(fe)});var ee=v(he,2);{let B=ct(()=>(t(x),me(()=>t(x).placeholder||"")));zt(ee,{get placeholder(){return t(B)},size:1,variant:"surface",get value(){return t(u)[t(Z)]},set value(U){Ta(u,t(u)[t(Z)]=U)},get textInput(){return t(g)[t(Z)]},set textInput(U){Ta(g,t(g)[t(Z)]=U)},$$events:{keydown:U=>{U.key==="Enter"?R(t(y)):U.key==="Escape"&&N()}},$$legacy:!0})}s(Y,Ce)});var K=v(L,2),T=d(K);We(T,{variant:"ghost-block",color:"accent",size:1,$$events:{click:()=>R(t(y))},children:(Y,x)=>{var ie=S("Install");s(Y,ie)},$$slots:{default:!0}});var O=v(T,2);We(O,{variant:"ghost-block",color:"neutral",size:1,$$events:{click:N},children:(Y,x)=>{var ie=S("Cancel");s(Y,ie)},$$slots:{default:!0}}),s(I,M)};E(J,I=>{t(p),t(y),me(()=>t(p)===t(y).label&&t(y).userInput)&&I(W)}),s(C,_)},headerRight:(C,A)=>{var _=ec(),z=d(_),H=q=>{var J=Ql(),W=d(J);Ar.Root(W,{color:"success",size:1,variant:"soft",children:(I,M)=>{var L=S("Installed");s(I,L)},$$slots:{default:!0}}),s(q,J)},b=q=>{var J=ge(),W=V(J),I=M=>{It(M,{variant:"ghost-block",color:"accent",size:1,$$events:{click:()=>function(L){if(a().some(T=>T.name===L.label))return;if(L.userInput&&L.userInput.length>0)return m(u,{}),L.userInput.forEach((T,O)=>{let Y;Y=T.type==="environmentVariable"&&T.envVarName?T.envVarName:T.correspondingArg?T.correspondingArg:`input_${O}`,Ta(u,t(u)[Y]=T.defaultValue||"")}),void m(p,L.label);const K={type:"stdio",name:L.label,command:L.args?`${L.command} ${L.args.join(" ")}`:L.command,arguments:"",useShellInterpolation:!0};r()&&r()(K)}(t(y))},children:(L,K)=>{_e(L,{name:"plus"})},$$slots:{default:!0}})};E(W,M=>{t(p),t(y),me(()=>t(p)!==t(y).label)&&M(I)},!0),s(q,J)};E(z,q=>{pe(a()),t(y),me(()=>a().some(J=>J.name===t(y).label))?q(H):q(b,!1)}),s(C,_)}}}),s(k,G)}),s(h,$)},$$slots:{default:!0,header:(h,w)=>{var $=sc();Gt(d($),{$$slots:{headerLeft:(P,k)=>{var y=ac(),G=d(y);ni(G,{});var C=v(G,2);Q(C,{color:"neutral",size:1,weight:"light",class:"card-title",children:(A,_)=>{var z=S("Easy MCP Installation");s(A,z)},$$slots:{default:!0}}),s(P,y)}}}),s(h,$)}},$$legacy:!0}),s(i,F),Je()}const oc={mcpDocsURL:"https://docs.augmentcode.com/setup-augment/mcp"},lc={mcpDocsURL:"https://docs.augmentcode.com/jetbrains/setup-augment/mcp"},cc=vn(),dc=new class{strings;constructor(i){let e={[Ea.vscode]:{},[Ea.jetbrains]:lc,[Ea.web]:{}};this.strings={...oc,...e[i]}}get(i){return this.strings[i]}}(cc.clientType);var uc=f('<div class="section-heading-text">MCP</div>'),vc=f(`<div class="mcp-servers svelte-2oxayh"><div class="section-heading svelte-2oxayh"><!></div> <div class="description-text svelte-2oxayh">Configure a new Model Context Protocol server to connect Augment to custom tools. Find out more
    about MCP <a>in the docs</a>.</div> <!> <!></div> <!> <div class="add-mcp-button-container svelte-2oxayh"><!> <!> <!></div>`,1),hc=f('<div class="section-heading-text">Terminal</div>'),gc=f(' <span class="support-string svelte-1xynlc1"> </span>',1),pc=f('<span class="name"> </span> <span class="support-string svelte-1xynlc1"> </span>',1),mc=f("<!> <!>",1),fc=f('<div class="terminal-settings svelte-1xynlc1"><!> <div class="shell-selector svelte-1xynlc1"><!> <!></div> <div class="startup-script-container svelte-1xynlc1"><!> <!></div></div>');function yc(i,e){qe(e,!1);const r=Ue();let a=D(e,"supportedShells",24,()=>[]),n=D(e,"selectedShell",24,()=>{}),o=D(e,"startupScript",28,()=>{}),l=D(e,"onShellSelect",8),c=D(e,"onStartupScriptChange",8),p=Ue();nt(()=>pe(n()),()=>{var $;m(r,n()?($=n(),a().find(P=>P.friendlyName===$)):void 0)}),lr(),tr();var u=fc(),g=d(u);Q(g,{size:1,weight:"regular",color:"secondary",children:($,P)=>{var k=hc();s($,k)},$$slots:{default:!0}});var R=v(g,2),N=d(R);Q(N,{size:1,children:($,P)=>{var k=S("Shell:");s($,k)},$$slots:{default:!0}});var F=v(N,2);ot.Root(F,{get requestClose(){return t(p)},set requestClose($){m(p,$)},children:($,P)=>{var k=mc(),y=V(k);ot.Trigger(y,{children:(C,A)=>{{let _=ct(()=>(pe(a()),me(()=>a().length===0)));We(C,{size:1,variant:"outline",color:"neutral",get disabled(){return t(_)},children:(z,H)=>{var b=ge(),q=V(b),J=I=>{var M=gc(),L=V(M),K=v(L),T=d(K);te(()=>{de(L,`${t(r),me(()=>t(r).friendlyName)??""} `),de(T,`(${t(r),me(()=>t(r).supportString)??""})`)}),s(I,M)},W=I=>{var M=ge(),L=V(M),K=O=>{var Y=S("No shells available");s(O,Y)},T=O=>{var Y=S("Select a shell");s(O,Y)};E(L,O=>{pe(a()),me(()=>a().length===0)?O(K):O(T,!1)},!0),s(I,M)};E(q,I=>{t(r),pe(a()),me(()=>t(r)&&a().length>0)?I(J):I(W,!1)}),s(z,b)},$$slots:{default:!0,iconRight:(z,H)=>{_e(z,{slot:"iconRight",name:"chevron-down"})}}})}},$$slots:{default:!0}});var G=v(y,2);ot.Content(G,{side:"bottom",align:"start",children:(C,A)=>{var _=ge(),z=V(_),H=q=>{var J=ge(),W=V(J);gt(W,1,a,I=>I.friendlyName,(I,M)=>{{let L=ct(()=>(pe(n()),t(M),me(()=>n()===t(M).friendlyName)));ot.Item(I,{onSelect:()=>{l()(t(M).friendlyName),t(p)()},get highlight(){return t(L)},children:(K,T)=>{var O=pc(),Y=V(O),x=d(Y),ie=v(Y,2),Z=d(ie);te(()=>{de(x,(t(M),me(()=>t(M).friendlyName))),de(Z,`(${t(M),me(()=>t(M).supportString)??""})`)}),s(K,O)},$$slots:{default:!0}})}}),s(q,J)},b=q=>{ot.Label(q,{children:(J,W)=>{var I=S("No shells available");s(J,I)},$$slots:{default:!0}})};E(z,q=>{pe(a()),me(()=>a().length>0)?q(H):q(b,!1)}),s(C,_)},$$slots:{default:!0}}),s($,k)},$$slots:{default:!0},$$legacy:!0});var j=v(R,2),h=d(j);Q(h,{size:1,children:($,P)=>{var k=S("Start-up script: Code to run wherever a new terminal is opened");s($,k)},$$slots:{default:!0}});var w=v(h,2);Ca(w,{onchange:function($){const P=$.target;c()(P.value)},placeholder:"Enter shell commands to run on terminal startup",resize:"vertical",get value(){return o()},set value($){o($)},$$legacy:!0}),s(i,u),Je()}var wc=f('<div class="section-heading-text">Sound Settings</div>'),$c=f('<div class="c-sound-setting__info svelte-vusrgo" slot="headerLeft"><div><!></div> <div><!></div></div>'),bc=f('<div slot="headerRight"><!></div>'),Sc=f('<div class="c-sound-setting__info svelte-vusrgo" slot="headerLeft"><div><!></div> <div><!></div></div>'),_c=f('<div slot="headerRight"><!></div>'),Cc=f('<div class="c-sound-setting__info svelte-vusrgo" slot="headerLeft"><div><!></div> <div><!></div></div>'),kc=f('<div slot="headerRight"><!></div>'),Ac=f("<!> <!>",1),xc=f('<!> <div class="c-sound-settings svelte-vusrgo"><!> <!></div>',1),Mc=f('<div class="section-heading-text">Agent Settings</div>'),Tc=f('<div class="c-agent-setting__info svelte-146nb7y"><div><!></div> <div><!></div> <div class="c-agent-setting__education svelte-146nb7y"><!></div></div>'),Ec=f("<div><!></div>"),Rc=f('<!> <div class="c-agent-settings svelte-146nb7y"><!></div>',1),Nc=f('<div class="c-settings-tools svelte-13dsvvl"><!> <!> <!> <!> <!></div>');function Uc(i,e){let r=D(e,"tools",19,()=>[]),a=D(e,"isMCPEnabled",3,!0),n=D(e,"isMCPImportEnabled",3,!0),o=D(e,"isTerminalEnabled",3,!0),l=D(e,"isSoundCategoryEnabled",3,!1),c=D(e,"isAgentCategoryEnabled",3,!1),p=D(e,"isSwarmModeFeatureFlagEnabled",3,!1),u=D(e,"hasEverUsedRemoteAgent",3,!1),g=D(e,"onToolApprovalConfigChange",3,()=>{}),R=D(e,"onCancel",19,()=>{}),N=D(e,"supportedShells",19,()=>[]),F=D(e,"selectedShell",19,()=>{}),j=D(e,"startupScript",19,()=>{}),h=D(e,"onShellSelect",3,()=>{}),w=D(e,"onStartupScriptChange",3,()=>{});var $=Nc(),P=d($);qo(P,{title:"Services",get tools(){return r()},get onAuthenticate(){return e.onAuthenticate},get onRevokeAccess(){return e.onRevokeAccess},get onToolApprovalConfigChange(){return g()}});var k=v(P,2),y=b=>{(function(q,J){qe(J,!0);const W=()=>Le(he,"$enableNativeRemoteMcp",M),I=()=>Le(fe,"$allServers",M),[M,L]=Lt();let K=D(J,"isMCPImportEnabled",3,!0);const T=Qr();function O(ve){T.startRemoteMCPAuth(ve.name)}let Y=Ze(null),x=Ze(null),ie=ne(()=>t(x)==="add"||t(x)==="addJson"||t(x)==="addRemote"||t(Y)!==null);function Z(){m(Y,null),m(x,null),J.onCancel?.()}const Ce=or(Or.key),be=is(),he=Ce.getEnableNativeRemoteMcp(),fe=be.getServers();let ee=ne(()=>W()?Wn(I()):I());function B(ve){m(Y,ve.id,!0)}function U(ve){return async function(...$e){const Te=await ve(...$e);return m(x,null),m(Y,null),Te}}const oe=U(J.onMCPServerAdd),ue=U(J.onMCPServerSave),Ae=U(J.onMCPServerJSONImport),Ee=U(J.onMCPServerDelete),Oe=U(J.onMCPServerToggleDisable),Re=dc.get("mcpDocsURL");let le=ne(()=>ea.parseServerValidationMessages(t(ee)));var ye=vc(),re=V(ye),ze=d(re),we=d(ze);Q(we,{size:1,weight:"regular",color:"secondary",children:(ve,$e)=>{var Te=uc();s(ve,Te)},$$slots:{default:!0}});var ae=v(ze,2),ke=v(d(ae)),se=v(ae,2);ic(se,{get onMCPServerAdd(){return oe},get servers(){return t(ee)}});var X=v(se,2);gt(X,17,()=>t(ee),ve=>ve.id,(ve,$e)=>{{let Te=ne(()=>t(Y)===t($e).id?"edit":"view"),xe=ne(()=>t(le).errors.get(t($e).id)),Se=ne(()=>t(le).warnings.get(t($e).id));Is(ve,{get mode(){return t(Te)},get server(){return t($e)},get onAdd(){return oe},get onSave(){return ue},get onDelete(){return Ee},get onToggleDisableServer(){return Oe},onEdit:B,onCancel:Z,get onJSONImport(){return Ae},onAuthenticate:O,get disabledText(){return t(xe)},get warningText(){return t(Se)},get mcpServerModel(){return be},get enableNativeRemoteMcp(){return W()}})}});var ce=v(re,2),Be=ve=>{Is(ve,{get mode(){return t(x)},get onAdd(){return oe},get onSave(){return ue},get onDelete(){return Ee},get onToggleDisableServer(){return Oe},onEdit:B,onCancel:Z,get onJSONImport(){return Ae},onAuthenticate:O,get mcpServerModel(){return be},get enableNativeRemoteMcp(){return W()}})};E(ce,ve=>{t(x)!=="add"&&t(x)!=="addJson"&&t(x)!=="addRemote"||ve(Be)});var Ne=v(ce,2),je=d(Ne);We(je,{get disabled(){return t(ie)},color:"neutral",variant:"soft",size:1,$$events:{click:()=>{m(x,"add")}},iconLeft:$e=>{_e($e,{name:"plus"})},children:($e,Te)=>{var xe=S("Add MCP");s($e,xe)},$$slots:{iconLeft:!0,default:!0}});var Me=v(je,2);We(Me,{get disabled(){return t(ie)},color:"neutral",variant:"soft",size:1,$$events:{click:()=>{m(x,"addRemote")}},iconLeft:$e=>{_e($e,{name:"plus"})},children:($e,Te)=>{var xe=S("Add remote MCP");s($e,xe)},$$slots:{iconLeft:!0,default:!0}});var rt=v(Me,2),Fe=ve=>{We(ve,{get disabled(){return t(ie)},color:"neutral",variant:"soft",size:1,title:"Add MCP from JSON",$$events:{click:()=>{m(x,"addJson")}},iconLeft:Te=>{_e(Te,{name:"download"})},children:(Te,xe)=>{var Se=S("Import from JSON");s(Te,Se)},$$slots:{iconLeft:!0,default:!0}})};E(rt,ve=>{K()&&ve(Fe)}),te(()=>Jt(ke,"href",Re)),s(q,ye),Je(),L()})(b,{get onMCPServerAdd(){return e.onMCPServerAdd},get onMCPServerSave(){return e.onMCPServerSave},get onMCPServerDelete(){return e.onMCPServerDelete},get onMCPServerToggleDisable(){return e.onMCPServerToggleDisable},get onMCPServerJSONImport(){return e.onMCPServerJSONImport},get onCancel(){return R()},get isMCPImportEnabled(){return n()}})};E(k,b=>{a()&&b(y)});var G=v(k,2),C=b=>{yc(b,{get supportedShells(){return N()},get selectedShell(){return F()},get startupScript(){return j()},get onShellSelect(){return h()},get onStartupScriptChange(){return w()}})};E(G,b=>{o()&&b(C)});var A=v(G,2),_=b=>{(function(q,J){qe(J,!1);const W=()=>Le(t(L),"$currentSettings",I),[I,M]=Lt(),L=Ue(),K=Ue(),T=or(Ha.key);async function O(){return await T.playAgentComplete({playOnlyWhenWindowUnfocused:!1}),"success"}nt(()=>{},()=>{as(m(L,T.getCurrentSettings),"$currentSettings",I)}),nt(()=>W(),()=>{m(K,W().enabled)}),lr(),tr();var Y=xc(),x=V(Y);Q(x,{size:1,weight:"regular",color:"secondary",children:(he,fe)=>{var ee=wc();s(he,ee)},$$slots:{default:!0}});var ie=v(x,2),Z=d(ie);Gt(Z,{$$slots:{headerLeft:(he,fe)=>{var ee=$c(),B=d(ee),U=d(B);Q(U,{size:2,weight:"medium",children:(Ae,Ee)=>{var Oe=S("Enable Sound Effects");s(Ae,Oe)},$$slots:{default:!0}});var oe=v(B,2),ue=d(oe);Q(ue,{size:1,weight:"medium",children:(Ae,Ee)=>{var Oe=S("Play a sound when an agent completes a task");s(Ae,Oe)},$$slots:{default:!0}}),s(he,ee)},headerRight:(he,fe)=>{var ee=bc(),B=d(ee);jr(B,{size:1,get checked(){return t(K)},ariaLabel:"Enable sound effects",onchange:()=>T.updateEnabled(!t(K))}),s(he,ee)}}});var Ce=v(Z,2),be=he=>{var fe=Ac(),ee=V(fe);Gt(ee,{$$slots:{headerLeft:(B,U)=>{var oe=Sc(),ue=d(oe),Ae=d(ue);Q(Ae,{size:2,weight:"medium",children:(Re,le)=>{var ye=S("Only play when app window is unfocused");s(Re,ye)},$$slots:{default:!0}});var Ee=v(ue,2),Oe=d(Ee);Q(Oe,{size:1,weight:"medium",children:(Re,le)=>{var ye=S("Play the agent completion sound only when the host window is not focused");s(Re,ye)},$$slots:{default:!0}}),s(B,oe)},headerRight:(B,U)=>{var oe=_c(),ue=d(oe);{let Ae=ct(()=>(W(),me(()=>W().playOnlyWhenWindowUnfocused??!1)));jr(ue,{size:1,get checked(){return t(Ae)},ariaLabel:"Only play when app window is unfocused",onchange:()=>T.updateSettings({playOnlyWhenWindowUnfocused:!W().playOnlyWhenWindowUnfocused})})}s(B,oe)}}}),Gt(v(ee,2),{$$slots:{headerLeft:(B,U)=>{var oe=Cc(),ue=d(oe),Ae=d(ue);Q(Ae,{size:2,weight:"medium",children:(Re,le)=>{var ye=S("Test Sound");s(Re,ye)},$$slots:{default:!0}});var Ee=v(ue,2),Oe=d(Ee);Q(Oe,{size:1,weight:"medium",children:(Re,le)=>{var ye=S("Play a sample of the agent completion sound");s(Re,ye)},$$slots:{default:!0}}),s(B,oe)},headerRight:(B,U)=>{var oe=kc(),ue=d(oe);{let Ae=ct(()=>t(K)?"":"Enable sound effects to test"),Ee=ct(()=>(pe(kr),me(()=>[kr.Hover])));Ot(ue,{get content(){return t(Ae)},get triggerOn(){return t(Ee)},children:(Oe,Re)=>{{let le=ct(()=>!t(K));ui(Oe,{size:1,defaultColor:"neutral",get enabled(){return t(K)},stickyColor:!1,get disabled(){return t(le)},onClick:O,tooltip:{neutral:"Play a sample of the agent completion sound",success:"Played!"},children:(ye,re)=>{var ze=S("Play");s(ye,ze)},$$slots:{default:!0}})}},$$slots:{default:!0}})}s(B,oe)}}}),s(he,fe)};E(Ce,he=>{t(K)&&he(be)}),s(q,Y),Je(),M()})(b,{})};E(A,b=>{l()&&b(_)});var z=v(A,2),H=b=>{(function(q,J){qe(J,!0);const W=()=>Le(O,"$currentSettings",I),[I,M]=Lt();let L=D(J,"isSwarmModeEnabled",3,!1),K=D(J,"hasEverUsedRemoteAgent",3,!1);const T=or(Kr.key),O=T.getCurrentSettings;var Y=ge(),x=V(Y),ie=Z=>{var Ce=Rc(),be=V(Ce);Q(be,{size:1,weight:"regular",color:"secondary",children:(fe,ee)=>{var B=Mc();s(fe,B)},$$slots:{default:!0}});var he=v(be,2);{const fe=B=>{var U=Tc(),oe=d(U),ue=d(oe);Q(ue,{size:2,weight:"medium",children:(le,ye)=>{var re=S("Enable Swarm Mode");s(le,re)},$$slots:{default:!0}});var Ae=v(oe,2),Ee=d(Ae);Q(Ee,{size:1,weight:"medium",children:(le,ye)=>{var re=S("Allow agents to coordinate and work together on complex tasks");s(le,re)},$$slots:{default:!0}});var Oe=v(Ae,2),Re=d(Oe);Q(Re,{size:1,weight:"regular",color:"secondary",children:(le,ye)=>{var re=S(`Sub-agents run in isolated remote environments and communicate via git repositories.
              Each remote agent consumes credits from your account. Changes are reviewed before
              being applied to your local workspace.`);s(le,re)},$$slots:{default:!0}}),s(B,U)},ee=B=>{var U=Ec(),oe=d(U);jr(oe,{size:1,get checked(){return W().enabled},onchange:()=>T.updateEnabled(!W().enabled)}),s(B,U)};Gt(d(he),{headerLeft:fe,headerRight:ee,$$slots:{headerLeft:!0,headerRight:!0}})}s(Z,Ce)};E(x,Z=>{L()&&K()&&Z(ie)}),s(q,Y),Je(),M()})(b,{get isSwarmModeEnabled(){return p()},get hasEverUsedRemoteAgent(){return u()}})};E(z,b=>{c()&&b(H)}),s(i,$)}var Ic=f('<div class="l-markdown-editor svelte-z9ze0l"><div class="c-markdown-editor__header svelte-z9ze0l"><!></div> <!> <div class="c-markdown-editor__content svelte-z9ze0l"><!> <!></div></div> <div class="c-markdown-editor__status svelte-z9ze0l"><!> <!></div>',1),Pc=f('<div class="c-user-guidelines-category__input svelte-19odral"><!></div>');function Qs(i,e){qe(e,!0);const[r,a]=Lt();let n=D(e,"userGuidelines",15,""),o=D(e,"userGuidelinesLengthLimit",19,()=>{}),l=D(e,"updateUserGuideline",3,()=>!1);const c=lt(void 0);function p(){const g=n().trim();if(Le(c,"$originalValue",r)!==g){if(!l()(g))throw o()&&g.length>o()?`The user guideline must be less than ${o()} character long`:"An error occurred updating the user";ms(c,g)}}Lr(()=>{ms(c,n().trim())}),Fa(()=>{p()});var u=Pc();(function(g,R){qe(R,!0);let N,F=D(R,"variant",3,"surface"),j=D(R,"size",3,2),h=D(R,"color",19,()=>{}),w=D(R,"resize",3,"none"),$=D(R,"textInput",15),P=D(R,"value",15,""),k=D(R,"selectedText",15,""),y=D(R,"selectionStart",15,0),G=D(R,"selectionEnd",15,0),C=nr(R,["$$slots","$$events","$$legacy","variant","size","color","resize","textInput","value","selectedText","selectionStart","selectionEnd","saveFunction","header","children","title"]),A=Ze(!1),_=Ze(void 0);const z=async()=>{try{R.saveFunction(),m(A,!0),clearTimeout(N),N=setTimeout(()=>{m(A,!1)},1500)}catch(Z){m(_,Z instanceof Error?Z.message:String(Z),!0)}};function H(){$()&&(y($().selectionStart),G($().selectionEnd),y()!==G()?k(P().substring(y(),G())):k(""))}Fa(()=>{z()});var b=Ic(),q=V(b),J=d(q),W=d(J);At(W,()=>R.header??ir);var I=v(J,2);At(I,()=>R.children??ir);var M=v(I,2),L=d(M);At(L,()=>R.title??ir);var K=v(L,2);Ca(K,pa({get variant(){return F()},get size(){return j()},get color(){return h()},get resize(){return w()},placeholder:"Enter markdown content...",onselect:H,onmouseup:H,onkeyup:()=>{H()},onblur:z,onkeydown:Z=>{(Z.key==="Escape"||(Z.metaKey||Z.ctrlKey)&&Z.key==="s")&&(Z.preventDefault(),z())}},()=>C,{get textInput(){return $()},set textInput(Z){$(Z)},get value(){return P()},set value(Z){P(Z)}}));var T=v(q,2),O=d(T),Y=Z=>{Q(Z,{size:1,weight:"light",color:"error",children:(Ce,be)=>{var he=S();te(()=>de(he,t(_))),s(Ce,he)},$$slots:{default:!0}})};E(O,Z=>{t(_)&&Z(Y)});var x=v(O,2),ie=Z=>{Q(Z,{size:1,weight:"light",color:"success",children:(Ce,be)=>{var he=S("Saved");s(Ce,he)},$$slots:{default:!0}})};E(x,Z=>{t(A)&&Z(ie)}),s(g,b),Je()})(d(u),{placeholder:"Add your guidelines for Augment Chat...",resize:"vertical",rows:6,saveFunction:p,get value(){return n()},set value(g){n(g)}}),s(i,u),Je(),a()}var Lc=f("<!> <!> <!>",1),zc=f("<!> <!>",1),Oc=f('<input type="text" value="No existing rules found" readonly="" class="c-dropdown-input svelte-1wjtvv4"/>'),Dc=f('<div class="c-dropdown-trigger svelte-1wjtvv4"><input type="text" readonly="" class="c-dropdown-input svelte-1wjtvv4"/> <!></div>'),Fc=f("<!> <!>",1),Bc=f("<!> <!>",1),Hc=f("<!> <!>",1),qc=f("<!> <!> <!> <!>",1),Jc=f('<div class="c-auto-import-rules-dialog svelte-1wjtvv4"><!></div>'),Vc=f("<!> <!>",1);function jc(i,e){qe(e,!1);const r=()=>Le(t(F),"$focusedIndex",a),[a,n]=Lt(),o=Ue(),l=Os();let c=D(e,"show",8,!1),p=D(e,"options",24,()=>[]),u=D(e,"isLoading",8,!1),g=D(e,"errorMessage",8,""),R=D(e,"successMessage",8,""),N=Ue(t(o)),F=Ue(void 0),j=Ue(()=>{});function h(){t(N)&&!u()&&l("select",t(N))}function w(){u()||(l("cancel"),m(N,t(o)))}nt(()=>pe(p()),()=>{m(o,p().length>0?p()[0]:null)}),nt(()=>(pe(c()),t(o)),()=>{c()&&m(N,t(o))}),lr(),tr(),Dt("keydown",rs,function($){c()&&!u()&&($.key==="Escape"?($.preventDefault(),w()):$.key==="Enter"&&t(N)&&($.preventDefault(),h()))}),ka(i,{get show(){return c()},title:"Auto Import Rules",ariaLabelledBy:"dialog-title",get preventBackdropClose(){return u()},get preventEscapeClose(){return u()},$$events:{cancel:w},body:k=>{var y=Jc(),G=d(y),C=_=>{var z=Oc();s(_,z)},A=_=>{var z=qc(),H=V(z);Q(H,{size:2,color:"secondary",children:(M,L)=>{var K=S("Select existing rules to auto import to .augment/rules");s(M,K)},$$slots:{default:!0}});var b=v(H,2);{let M=ct(()=>(pe(p()),me(()=>p().length===0?[]:void 0)));ot.Root(b,{get triggerOn(){return t(M)},get requestClose(){return t(j)},set requestClose(L){m(j,L)},get focusedIndex(){return t(F)},set focusedIndex(L){as(m(F,L),"$focusedIndex",a)},children:(L,K)=>{var T=Hc(),O=V(T);ot.Trigger(O,{children:(x,ie)=>{var Z=Dc(),Ce=d(Z),be=v(Ce,2);_e(be,{name:"chevron-down"}),te(()=>hn(Ce,(t(N),me(()=>t(N)?t(N).label:"Existing rules")))),s(x,Z)},$$slots:{default:!0}});var Y=v(O,2);ot.Content(Y,{align:"start",side:"bottom",children:(x,ie)=>{var Z=Bc(),Ce=V(Z);gt(Ce,1,p,Cr,(fe,ee)=>{{let B=ct(()=>(t(N),t(ee),me(()=>t(N)?.label===t(ee).label)));ot.Item(fe,{onSelect:()=>function(U){m(N,U),t(j)()}(t(ee)),get highlight(){return t(B)},children:(U,oe)=>{var ue=S();te(()=>de(ue,(t(ee),me(()=>t(ee).label)))),s(U,ue)},$$slots:{default:!0}})}});var be=v(Ce,2),he=fe=>{var ee=Fc(),B=V(ee);ot.Separator(B,{});var U=v(B,2);ot.Label(U,{children:(oe,ue)=>{var Ae=S();te(()=>de(Ae,(r(),pe(p()),t(N),me(()=>r()!==void 0?p()[r()].description:t(N)?.description)))),s(oe,Ae)},$$slots:{default:!0}}),s(fe,ee)};E(be,fe=>{(r()!==void 0||t(N))&&fe(he)}),s(x,Z)},$$slots:{default:!0}}),s(L,T)},$$slots:{default:!0},$$legacy:!0})}var q=v(b,2),J=M=>{Vt(M,{variant:"soft",color:"error",size:1,icon:K=>{_e(K,{name:"circle-alert"})},children:(K,T)=>{var O=S();te(()=>de(O,g())),s(K,O)},$$slots:{icon:!0,default:!0}})};E(q,M=>{g()&&M(J)});var W=v(q,2),I=M=>{Vt(M,{variant:"soft",color:"success",size:1,icon:K=>{_e(K,{name:"circle-check"})},children:(K,T)=>{var O=S();te(()=>de(O,R())),s(K,O)},$$slots:{icon:!0,default:!0}})};E(W,M=>{R()&&M(I)}),s(_,z)};E(G,_=>{pe(p()),me(()=>p().length===0)?_(C):_(A,!1)}),s(k,y)},footer:k=>{var y=Vc(),G=V(y);We(G,{variant:"solid",color:"neutral",get disabled(){return u()},$$events:{click:w},children:(_,z)=>{var H=S("Cancel");s(_,H)},$$slots:{default:!0}});var C=v(G,2),A=_=>{{let z=ct(()=>!t(N)||u());We(_,{color:"accent",variant:"solid",get disabled(){return t(z)},get loading(){return u()},$$events:{click:h},children:(H,b)=>{var q=S();te(()=>de(q,u()?"Importing...":"Import ")),s(H,q)},$$slots:{default:!0}})}};E(C,_=>{pe(p()),me(()=>p().length>0)&&_(A)}),s(k,y)},$$slots:{body:!0,footer:!0}}),Je(),n()}var Gc=f('<div class="loading-container"><!> <!></div>'),Wc=f('<div class="c-rules-list-empty svelte-33mxxk"><!></div>'),Kc=f('<div class="c-rule-item-info svelte-33mxxk"><div class="l-icon-wrapper svelte-33mxxk"><!></div> <div class="c-rule-item-path svelte-33mxxk"><!></div></div>'),Zc=f('<div class="server-actions"><div class="status-controls svelte-33mxxk"><div class="c-rules-dropdown"><!></div> <!> <!></div></div>'),Yc=f('<div class="c-rules-actions-button-content svelte-33mxxk">Create new rule file</div>'),Xc=f('<div class="c-rules-actions-button-content svelte-33mxxk">Import rules</div>'),Qc=f("<!> <!>",1),ed=f("<!> <!>",1),td=f("<!> <!>",1),rd=f(`<!> <!> <div class="c-rules-category svelte-33mxxk"><div class="c-rules-section svelte-33mxxk"><div class="c-rules-header svelte-33mxxk"><!> <!></div> <div>Rules are instructions for Augment Chat and Agent that can be applied automatically across all
      conversations or referenced in specific conversations using @mentions (e.g., @rule-file.md) <a href="https://docs.augmentcode.com/setup-augment/guidelines#workspace-guidelines" target="_blank"><!></a></div> <!> <div class="c-rules-list svelte-33mxxk"><!></div> <div class="c-rules-actions-container svelte-33mxxk"><!> <!></div></div> <div class="c-user-guidelines-section svelte-33mxxk"><!> <div>User Guidelines allow you to control Augment's behavior through natural language instructions.
      These guidelines are applied globally to all Chat and Agent interactions. <a href="https://docs.augmentcode.com/setup-augment/guidelines#workspace-guidelines" target="_blank"><!></a></div> <!></div></div> <!> <!>`,1);function ad(i,e){qe(e,!0);const r=()=>Le(R,"$rulesFiles",o),a=()=>Le(N,"$areRulesLoading",o),n=()=>Le(t(z),"$importFocusedIndex",o),[o,l]=Lt();let c=D(e,"userGuidelines",3,""),p=D(e,"workspaceGuidelinesContent",3,""),u=D(e,"updateUserGuideline",3,()=>!1);const g=Cn(),R=kn(),N=ws("createRule"),F=$s("createRule"),j=bs("createRule"),h=ws("autoImport"),w=An(),$=$s("autoImport"),P=xn("autoImport"),k=bs("autoImport");let y=ne(()=>e.workspaceGuidelinesLengthLimit),G=ne(()=>ei({rules:r(),workspaceGuidelinesContent:p(),rulesAndGuidelinesLimit:t(y)})),C=ne(()=>t(G).isOverLimit),A=ne(()=>t(G).warningMessage);const _=[{label:"Auto import existing rules in the workspace",id:"auto_import",description:"Choose existing rules in your workspace to auto import to Augment."},{label:"Select file(s) or directory to import",id:"select_file_or_directory",description:"Select an existing directory or list of markdown files to import to Augment."}];let z=Ze(void 0),H=Ze(()=>{});var b=rd(),q=V(b);Ss(q,{sagaName:"rulesRefetch"});var J=v(q,2);Ss(J,{sagaName:"rulesEditing"});var W=v(J,2),I=d(W),M=d(I),L=d(M);Q(L,{class:"c-section-header",size:3,color:"primary",children:(le,ye)=>{var re=S("Rules");s(le,re)},$$slots:{default:!0}});var K=v(L,2);Ot(K,{content:"Refresh rules",children:(le,ye)=>{It(le,{size:1,variant:"ghost-block",color:"neutral",get disabled(){return a()},title:"Refresh rules",$$events:{click:()=>g(Mn())},children:(re,ze)=>{_e(re,{name:"refresh-ccw"})},$$slots:{default:!0}})},$$slots:{default:!0}});var T=v(M,2),O=v(d(T)),Y=d(O);Q(Y,{size:1,weight:"regular",children:(le,ye)=>{var re=S("Learn more");s(le,re)},$$slots:{default:!0}});var x=v(T,2),ie=le=>{Vt(le,{variant:"soft",color:"warning",size:1,icon:re=>{_e(re,{name:"circle-alert"})},children:(re,ze)=>{var we=S();te(()=>de(we,t(A))),s(re,we)},$$slots:{icon:!0,default:!0}})};E(x,le=>{t(C)&&le(ie)});var Z=v(x,2),Ce=d(Z),be=le=>{var ye=Gc(),re=d(ye);Pr(re,{size:1});var ze=v(re,2);Q(ze,{size:1,color:"secondary",children:(we,ae)=>{var ke=S("Loading rules...");s(we,ke)},$$slots:{default:!0}}),s(le,ye)},he=le=>{var ye=ge(),re=V(ye),ze=ae=>{var ke=Wc(),se=d(ke);Q(se,{size:1,color:"neutral",children:(X,ce)=>{var Be=S("No rules files found");s(X,Be)},$$slots:{default:!0}}),s(ae,ke)},we=ae=>{var ke=ge(),se=V(ke);gt(se,1,r,X=>X.path,(X,ce)=>{Gt(X,{isClickable:!0,$$events:{click:()=>g(Cs({pathName:t(ce).path}))},headerLeft:je=>{var Me=Kc(),rt=d(Me),Fe=d(rt),ve=Se=>{Ot(Se,{content:"No description found",children:(Ie,it)=>{_e(Ie,{name:"circle-alert"})},$$slots:{default:!0}})},$e=Se=>{_e(Se,{name:"file"})};E(Fe,Se=>{t(ce).type!==Bn.AGENT_REQUESTED||t(ce).description?Se($e,!1):Se(ve)});var Te=v(rt,2),xe=d(Te);gi(xe,{get filepath(){return t(ce).path}}),s(je,Me)},headerRight:je=>{var Me=Zc(),rt=d(Me),Fe=d(rt),ve=d(Fe);hi(ve,{get rule(){return t(ce)},onSave:(xe,Se)=>{g(Ln({type:xe,path:t(ce).path,content:t(ce).content,description:Se,settingsStored:t(ce).settingsStored}))}});var $e=v(Fe,2);We($e,{size:1,variant:"ghost-block",color:"neutral",class:"c-rule-item-button",$$events:{click:Se=>{Se.stopPropagation(),g(Cs({pathName:t(ce).path}))}},iconRight:Se=>{_e(Se,{name:"external-link"})},$$slots:{iconRight:!0}});var Te=v($e,2);We(Te,{size:1,variant:"ghost-block",color:"neutral",class:"c-rule-item-button",$$events:{click:Se=>{Se.stopPropagation(),g(zn(t(ce).path))}},iconRight:Se=>{_e(Se,{name:"trash-2"})},$$slots:{iconRight:!0}}),s(je,Me)},$$slots:{headerLeft:!0,headerRight:!0}})}),s(ae,ke)};E(re,ae=>{r().length===0?ae(ze):ae(we,!1)},!0),s(le,ye)};E(Ce,le=>{a()&&r().length===0?le(be):le(he,!1)});var fe=v(Z,2),ee=d(fe);We(ee,{size:1,variant:"soft",color:"neutral",class:"c-rules-action-button",$$events:{click:()=>g(Tn("createRule"))},iconLeft:ye=>{_e(ye,{name:"plus"})},children:(ye,re)=>{var ze=Yc();s(ye,ze)},$$slots:{iconLeft:!0,default:!0}});var B=v(ee,2);et(B,()=>ot.Root,(le,ye)=>{ye(le,{get requestClose(){return t(H)},set requestClose(re){m(H,re,!0)},get focusedIndex(){return t(z)},set focusedIndex(re){as(m(z,re,!0),"$importFocusedIndex",o)},children:(re,ze)=>{var we=td(),ae=V(we);et(ae,()=>ot.Trigger,(se,X)=>{X(se,{children:(ce,Be)=>{We(ce,{size:1,variant:"soft",color:"neutral",class:"c-rules-action-button",iconLeft:Me=>{_e(Me,{name:"download"})},iconRight:Me=>{_e(Me,{name:"chevron-down"})},children:(Me,rt)=>{var Fe=Xc();s(Me,Fe)},$$slots:{iconLeft:!0,iconRight:!0,default:!0}})},$$slots:{default:!0}})});var ke=v(ae,2);et(ke,()=>ot.Content,(se,X)=>{X(se,{align:"start",side:"bottom",children:(ce,Be)=>{var Ne=ed(),je=V(Ne);gt(je,17,()=>_,Fe=>Fe.id,(Fe,ve)=>{var $e=ge(),Te=V($e);et(Te,()=>ot.Item,(xe,Se)=>{Se(xe,{onSelect:()=>function(Ie){Ie.id==="select_file_or_directory"?g(En()):Ie.id==="auto_import"&&g(Rn()),t(H)?.()}(t(ve)),children:(Ie,it)=>{var Ve=S();te(()=>de(Ve,t(ve).label)),s(Ie,Ve)},$$slots:{default:!0}})}),s(Fe,$e)});var Me=v(je,2),rt=Fe=>{var ve=Qc(),$e=V(ve);et($e,()=>ot.Separator,(xe,Se)=>{Se(xe,{})});var Te=v($e,2);et(Te,()=>ot.Label,(xe,Se)=>{Se(xe,{children:(Ie,it)=>{var Ve=S();te(()=>de(Ve,n()!==void 0?_[n()].description:_[0].description)),s(Ie,Ve)},$$slots:{default:!0}})}),s(Fe,ve)};E(Me,Fe=>{(n()!==void 0||_.length>0)&&Fe(rt)}),s(ce,Ne)},$$slots:{default:!0}})}),s(re,we)},$$slots:{default:!0}})});var U=v(I,2),oe=d(U);Q(oe,{class:"c-section-header",size:3,color:"primary",children:(le,ye)=>{var re=S("User Guidelines");s(le,re)},$$slots:{default:!0}});var ue=v(oe,2),Ae=v(d(ue)),Ee=d(Ae);Q(Ee,{size:1,weight:"regular",children:(le,ye)=>{var re=S("Learn more");s(le,re)},$$slots:{default:!0}}),Qs(v(ue,2),{get userGuidelines(){return c()},get userGuidelinesLengthLimit(){return e.userGuidelinesLengthLimit},get updateUserGuideline(){return u()}});var Oe=v(W,2);(function(le,ye){qe(ye,!1);const re=Os();let ze=D(ye,"show",8,!1),we=D(ye,"errorMessage",8,""),ae=Ue(""),ke=Ue(void 0),se=Ue(!1);function X(){t(ae).trim()&&!t(se)&&(m(se,!0),re("create",t(ae).trim()))}function ce(){t(se)||(re("cancel"),m(ae,""))}function Be(Ne){t(se)||(Ne.key==="Enter"?(Ne.preventDefault(),X()):Ne.key==="Escape"&&(Ne.preventDefault(),ce()))}nt(()=>(pe(ze()),t(ke)),()=>{ze()&&t(ke)&&setTimeout(()=>t(ke)?.focus(),100)}),nt(()=>(pe(ze()),pe(we())),()=>{ze()&&!we()||m(se,!1)}),nt(()=>(pe(ze()),pe(we())),()=>{ze()||we()||m(ae,"")}),lr(),tr(),ka(le,{get show(){return ze()},title:"Create New Rule",ariaLabelledBy:"dialog-title",get preventBackdropClose(){return t(se)},get preventEscapeClose(){return t(se)},$$events:{cancel:ce,keydown:function(Me){t(se)||Me.detail.key==="Enter"&&(Me.detail.preventDefault(),X())}},body:Me=>{var rt=Lc(),Fe=V(rt);Q(Fe,{size:2,color:"secondary",children:(xe,Se)=>{var Ie=S("Enter a name for the new rule file (e.g., architecture.md):");s(xe,Ie)},$$slots:{default:!0}});var ve=v(Fe,2);zt(ve,{placeholder:"rule-name.md",get disabled(){return t(se)},get value(){return t(ae)},set value(xe){m(ae,xe)},get textInput(){return t(ke)},set textInput(xe){m(ke,xe)},$$events:{keydown:Be},$$legacy:!0});var $e=v(ve,2),Te=xe=>{Vt(xe,{variant:"soft",color:"error",size:1,icon:Ie=>{_e(Ie,{name:"circle-alert"})},children:(Ie,it)=>{var Ve=S();te(()=>de(Ve,we())),s(Ie,Ve)},$$slots:{icon:!0,default:!0}})};E($e,xe=>{we()&&xe(Te)}),s(Me,rt)},footer:Me=>{var rt=zc(),Fe=V(rt);We(Fe,{variant:"solid",color:"neutral",get disabled(){return t(se)},$$events:{click:ce},children:($e,Te)=>{var xe=S("Cancel");s($e,xe)},$$slots:{default:!0}});var ve=v(Fe,2);{let $e=ct(()=>(t(ae),t(se),me(()=>!t(ae).trim()||t(se))));We(ve,{variant:"solid",color:"accent",get disabled(){return t($e)},get loading(){return t(se)},$$events:{click:X},children:(Te,xe)=>{var Se=S();te(()=>de(Se,t(se)?"Creating...":"Create")),s(Te,Se)},$$slots:{default:!0}})}s(Me,rt)},$$slots:{body:!0,footer:!0}}),Je()})(Oe,{get show(){return Le(F,"$showCreateRuleDialog",o)},get errorMessage(){return Le(j,"$createRuleError",o)},$$events:{create:function(le){g(Pn(le.detail))},cancel:function(){g(_s("createRule"))}}});var Re=v(Oe,2);{let le=ne(()=>Le(w,"$autoImportOptions",o)||[]);jc(Re,{get show(){return Le($,"$showAutoImportDialog",o)},get options(){return t(le)},get isLoading(){return Le(h,"$autoImportLoading",o)},get errorMessage(){return Le(k,"$autoImportError",o)},get successMessage(){return Le(P,"$autoImportSuccess",o)},$$events:{select:function(ye){const re=ye.detail;g(Nn(re))},cancel:function(){g(_s("autoImport")),g(Un("autoImport","")),g(In("autoImport",""))}}})}s(i,b),Je(),l()}class sd{constructor(e,r){this._callback=e,this.initialMS=r.initialMS,this.maxMS=r.maxMS,this.waitForCallback=r.waitForCallback??!0,this.backoffMultiplier=r.backoffMultiplier??2,this.autoBackoff=r.autoBackoff??!1,this.maxSteps=r.maxSteps,this.maxStepBehavior=r.maxStepBehavior??2,this.reset()}_currentTimeout=null;_currentIntervalMS;_steps;_isFixed;_initialMS;_maxMS;_backoffMultiplier;_maxSteps;waitForCallback;autoBackoff;maxStepBehavior;start(){this.stop(),this.reset(),this._schedule()}continue(){this._currentTimeout===null&&this._schedule()}stop(){this._currentTimeout!==null&&(clearTimeout(this._currentTimeout),this._currentTimeout=null)}reset(){this._currentIntervalMS=this._initialMS,this._steps=0,this._isFixed=!1}backoff(e=!1){if(!this._isFixed){if(this._maxSteps!==void 0&&this._steps>=this._maxSteps){if(this.maxStepBehavior===0)return void this.stop();this.maxStepBehavior===1&&this.reset()}else this._currentIntervalMS=Math.min(this._currentIntervalMS*this._backoffMultiplier,this._maxMS??1/0),this._steps++;e&&(this.stop(),this.continue())}}startFixedPolling(e){e<=0?console.warn("PollingManager: fixedPollingMS must be positive, ignoring fixed polling request"):(this._currentIntervalMS=e,this._isFixed=!0,this._steps=0,this.continue())}get isPolling(){return this._currentTimeout!==null}get currentInterval(){return this._currentIntervalMS}get isFixed(){return this._isFixed}dispose(){this.stop()}get initialMS(){return this._initialMS}set initialMS(e){e<=0?this._initialMS===void 0?(console.warn("PollingManager: initialMS value must be positive, using default value of 60 seconds"),this._initialMS=6e4):console.warn("PollingManager: initialMS value must be positive, keeping original value"):this._initialMS=e}get maxMS(){return this._maxMS}set maxMS(e){e!==void 0&&e<=0?console.warn("PollingManager: maxMS value must be positive, keeping original value"):this._maxMS=e}get backoffMultiplier(){return this._backoffMultiplier}set backoffMultiplier(e){e<1?this._backoffMultiplier===void 0?(console.warn("PollingManager: backoffMultiplier value must be greater than or equal to 1, using default value of 2"),this._backoffMultiplier=2):console.warn("PollingManager: backoffMultiplier value must be greater than or equal to 1, keeping original value"):this._backoffMultiplier=e}get maxSteps(){return this._maxSteps}set maxSteps(e){e!==void 0&&e<1?console.warn("PollingManager: maxSteps must be greater than or equal to 1"):this._maxSteps=e}_schedule(){this._currentTimeout=setTimeout(async()=>{const e=this._currentTimeout,r=this._safeExecute();this.waitForCallback&&await r,this._currentTimeout===e&&(this.autoBackoff&&!this._isFixed&&this.backoff(),this._currentTimeout===e&&this._schedule())},this._currentIntervalMS)}async _safeExecute(){try{await this._callback()}catch(e){console.error("Error in polling callback:",e)}}}class _r{static CTX_KEY=Symbol("credit-model");_usageUnitsRemaining;_usageUnitsTotal;_includedUsageUnitsPerBillingCycle;_isCreditBalanceLow;_usageUnitDisplayName;_planDisplayName;_alertBanner;_refreshedAt;_daysLeftInPlan;_creditDetails;usageUnitsRemaining;usageUnitsTotal;usageUnitsUsed;includedUsageUnitsPerBillingCycle;isCreditBalanceLow;usageUnitDisplayName;planDisplayName;alertBanner;refreshedAt;daysLeftInPlan;creditDetails;constructor(){this._usageUnitsRemaining=lt(0),this._usageUnitsTotal=lt(0),this._includedUsageUnitsPerBillingCycle=lt(0),this._isCreditBalanceLow=lt(!1),this._usageUnitDisplayName=lt("Credits"),this._planDisplayName=lt("Plan"),this._alertBanner=lt(void 0),this._refreshedAt=lt(void 0),this._daysLeftInPlan=lt(0),this._creditDetails=lt([]),this.usageUnitsRemaining=rr(this._usageUnitsRemaining),this.usageUnitsTotal=rr(this._usageUnitsTotal),this.usageUnitsUsed=ga([this.usageUnitsTotal,this.usageUnitsRemaining],([e,r])=>e-r),this.includedUsageUnitsPerBillingCycle=rr(this._includedUsageUnitsPerBillingCycle),this.isCreditBalanceLow=rr(this._isCreditBalanceLow),this.usageUnitDisplayName=ga(this._usageUnitDisplayName,e=>e.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")),this.planDisplayName=rr(this._planDisplayName),this.alertBanner=rr(this._alertBanner),this.refreshedAt=rr(this._refreshedAt),this.daysLeftInPlan=rr(this._daysLeftInPlan),this.creditDetails=rr(this._creditDetails)}static setInContext(e,r){Rr(_r.CTX_KEY,{model:e,controller:r})}static getContext(){return or(_r.CTX_KEY)}static requireContext(){const e=_r.getContext();if(!e)throw new Error("CreditModel context missing");return e}_getWritableStores(){return{usageUnitsRemaining:this._usageUnitsRemaining,usageUnitsTotal:this._usageUnitsTotal,includedUsageUnitsPerBillingCycle:this._includedUsageUnitsPerBillingCycle,isCreditBalanceLow:this._isCreditBalanceLow,usageUnitDisplayName:this._usageUnitDisplayName,planDisplayName:this._planDisplayName,alertBanner:this._alertBanner,refreshedAt:this._refreshedAt,daysLeftInPlan:this._daysLeftInPlan,creditDetails:this._creditDetails}}}class nd{constructor(e,r){this._model=e,this._extensionClient=r,this._stores=this._model._getWritableStores(),this._pollingManager=new sd(this.requestCreditInfo.bind(this),{initialMS:5e3,maxMS:6e4,backoffMultiplier:2})}_pollingManager;_stores;async startPolling(){await this.requestCreditInfo(),this._pollingManager.start()}async requestCreditInfo(){const e=await this._extensionClient.getCreditInfo();if(this._pollingManager.isPolling){if(e?.error)return void(e?.error.continuePolling?e?.error.backoff&&this._pollingManager.backoff():(this._reset(),this._pollingManager.startFixedPolling(6e4)));this._pollingManager.isFixed||this._pollingManager.reset()}if(e){const r=(a,n)=>{n!==void 0&&a.set(n)};if(r(this._stores.usageUnitsRemaining,e.usageUnitsRemaining),r(this._stores.usageUnitsTotal,e.usageUnitsTotal),r(this._stores.includedUsageUnitsPerBillingCycle,e.includedUsageUnitsPerBillingCycle),r(this._stores.isCreditBalanceLow,e.isCreditBalanceLow),r(this._stores.planDisplayName,e.displayInfo?.planDisplayName),r(this._stores.refreshedAt,e.refreshedAt),r(this._stores.creditDetails,e.creditDetails),this._stores.alertBanner.set(e.displayInfo?.banner),e.currentBillingCycleEndDateIso!==void 0){const a=new Date(e.currentBillingCycleEndDateIso).getTime()-Date.now();a<0?this._stores.daysLeftInPlan.set(-1):this._stores.daysLeftInPlan.set(Math.ceil(a/864e5))}}}async backgroundPoll(){this._pollingManager.isPolling||await this.requestCreditInfo(),this._pollingManager.startFixedPolling(6e4)}async foregroundPoll(){this._pollingManager.isPolling||await this.requestCreditInfo(),this._pollingManager.start()}async stop(){this._pollingManager.stop()}_reset(){this._stores.usageUnitsRemaining.set(0),this._stores.usageUnitsTotal.set(0),this._stores.includedUsageUnitsPerBillingCycle.set(0),this._stores.isCreditBalanceLow.set(!1),this._stores.usageUnitDisplayName.set("Credits"),this._stores.planDisplayName.set("Plan"),this._stores.alertBanner.set(void 0),this._stores.refreshedAt.set(void 0),this._stores.daysLeftInPlan.set(0),this._stores.creditDetails.set([])}dispose=()=>{this._pollingManager.dispose()}}var id=f('<div class="c-account-category__plan-wrapper svelte-1ptxg1z"><div class="c-account-category__split c-account-category__plan-section c-account-category__sub-box svelte-1ptxg1z"><div class="c-account-category__split-left c-account-category__plan-details svelte-1ptxg1z"><!> <!></div> <div class="c-account-category__split-right c-account-category__plan-buttons svelte-1ptxg1z"><!></div></div></div>'),od=f('<div class="ds-meter__indicator svelte-1wh49el"></div>'),ld=f("<div><!></div>"),cd=f('<div class="c-account-category__banner-icon svelte-18qxvpu"><!></div>'),dd=f('<div class="c-account-category__split-right c-account-category__banner-buttons svelte-18qxvpu"><!></div>'),ud=f('<div class="c-account-category__banner-wrapper svelte-18qxvpu"><div class="c-account-category__split c-account-category__banner-section svelte-18qxvpu"><div class="c-account-category__split-left c-account-category__banner-details svelte-18qxvpu"><!> <div class="c-account-category__banner-text svelte-18qxvpu"><!></div></div> <!></div></div>');function vd(i,e){qe(e,!0);const r=Qr(),a=()=>{r.track(zr.CREDIT_BANNER_CLICKED,{message:e.message,button:e.button})},n=ne(()=>(j=>{switch(j){case qr.PROMOTION:case qr.WARNING:case qr.ALERT:return"info";case qr.INFO:case qr.BANNER_DISPLAY_STYLE_UNKNOWN:default:return"check"}})(e.displayStyle));var o=ud(),l=d(o),c=d(l),p=d(c),u=j=>{var h=cd(),w=d(h);_e(w,{get name(){return t(n)}}),s(j,h)};E(p,j=>{t(n)!==void 0&&j(u)});var g=v(p,2),R=d(g);Q(R,{size:1,weight:"light",children:(j,h)=>{var w=S();te(()=>de(w,e.message)),s(j,w)},$$slots:{default:!0}});var N=v(c,2),F=j=>{var h=dd(),w=d(h);{let $=ne(()=>e.button?.url);We(w,{variant:"soft",color:"neutral",size:2,get href(){return t($)},onclick:a,asAnchor:!0,children:(P,k)=>{Q(P,{size:1,weight:"medium",children:(y,G)=>{var C=S();te(()=>de(C,e.button?.title)),s(y,C)},$$slots:{default:!0}})},$$slots:{default:!0}})}s(j,h)};E(N,j=>{e.button?.title&&j(F)}),s(i,o),Je()}var hd=f('<div class="c-account-category__split svelte-cothnq"><div class="c-account-category__split-left svelte-cothnq"><!></div> <div class="c-account-category__split-right svelte-cothnq"><!></div></div>'),gd=f('<div class="c-account-category__credits-box svelte-cothnq"><div class="c-account-category__credits-upper svelte-cothnq"><div class="c-account-category__split svelte-cothnq"><div class="c-account-category__split-left c-account-category__credits-title svelte-cothnq"><!> <!> <!></div> <div class="c-account-category__split-right c-account-category__credits-count svelte-cothnq"><!></div></div> <!></div> <div class="c-account-category__credits-lower svelte-cothnq"><div class="c-account-category__credits-stats svelte-cothnq"></div> <!></div></div>');function pd(i,e){qe(e,!0);const r=D(e,"enableCreditBannerInSettings",3,!0);var a=gd(),n=d(a),o=d(n),l=d(o),c=d(l);_e(c,{name:"gauge",size:3});var p=v(c,2);Q(p,{size:2,weight:"medium",children:(P,k)=>{var y=S();te(()=>de(y,e.usageUnitDisplayName)),s(P,y)},$$slots:{default:!0}});var u=v(p,2),g=P=>{var k=ge(),y=V(k);et(y,()=>Ar.Root,(G,C)=>{C(G,{color:"error",size:1,children:(A,_)=>{var z=S("Out of Credits");s(A,z)},$$slots:{default:!0}})}),s(P,k)};E(u,P=>{e.usageUnitsTotal<=e.usageUnitsUsed&&P(g)});var R=v(l,2),N=d(R);Q(N,{size:2,weight:"medium",children:(P,k)=>{var y=S();te((G,C)=>de(y,`${G??""} / ${C??""}`),[()=>e.usageUnitsUsed.toLocaleString("en-US"),()=>e.usageUnitsTotal.toLocaleString("en-US")]),s(P,y)},$$slots:{default:!0}});var F=v(o,2);{let P=ne(()=>e.isCreditBalanceLow?"error":"accent");(function(k,y){qe(y,!0),D(y,"ref",11,null);let G=D(y,"max",3,100),C=D(y,"min",3,0),A=D(y,"value",3,0),_=D(y,"color",3,"accent"),z=D(y,"size",3,2),H=D(y,"labelledby",19,ti),b=nr(y,["$$slots","$$events","$$legacy","ref","class","max","min","value","color","size","labelledby"]);const q=ne(()=>Math.min(100,Math.max(0,(A()-C())/(G()-C())*100)));var J=ld();Xt(J,I=>({...I,class:["ds-meter",`ds-meter--size-${z()}`,y.class]}),[()=>gn(_())],void 0,"svelte-1wh49el");var W=d(J);et(W,()=>yi,(I,M)=>{M(I,pa({get"aria-labelledby"(){return H()},get"aria-valuetext"(){return`${A()??""} out of ${G()??""}`},class:"ds-meter__root",get value(){return A()},get min(){return C()},get max(){return G()}},()=>b,{children:(L,K)=>{var T=od();let O;te(Y=>O=zs(T,"",O,Y),[()=>({"--meter-percentage":`${t(q)??""}%`})]),s(L,T)},$$slots:{default:!0}}))}),s(k,J),Je()})(F,{get value(){return e.usageUnitsUsed},get max(){return e.usageUnitsTotal},get color(){return t(P)},size:1,get"aria-label"(){return e.usageUnitDisplayName}})}var j=v(n,2),h=d(j);gt(h,21,()=>e.creditDetails,Cr,(P,k)=>{var y=hd(),G=d(y),C=d(G);Q(C,{size:2,weight:"regular",color:"secondary",children:(z,H)=>{var b=S();te(()=>de(b,t(k).label)),s(z,b)},$$slots:{default:!0}});var A=v(G,2),_=d(A);Q(_,{size:2,weight:"regular",color:"secondary",children:(z,H)=>{var b=S();te(q=>de(b,q),[()=>(t(k).amount??0).toLocaleString("en-US")]),s(z,b)},$$slots:{default:!0}}),s(P,y)});var w=v(h,2),$=P=>{vd(P,pa(()=>e.alertBanner))};E(w,P=>{(k=>{if(!e.alertBanner?.message||!r())return!1;switch(k){case aa.REQUIRE_PAYMENT_FOR_TRIAL:case aa.USAGE_BALANCE_DEPLETED:case aa.USAGE_BALANCE_LOW:break;case aa.BANNER_TYPE_UNKNOWN:default:return!1}return!0})(e.alertBanner?.bannerType)&&P($)}),s(i,a),Je()}var md=f('<div class="c-account-category__plan-usage-body svelte-126fk15"><!> <!> <!></div>');function fd(i,e){const r=D(e,"enableCreditBannerInSettings",3,!0);var a=md(),n=d(a);(function(c,p){qe(p,!0);const u=Qr(),g=ne(()=>(k=>{switch(k){case"Enterprise Plan":case"Enterprise":return{backgroundColor:"var(--ds-color-success-3)",nameColor:"var(--ds-color-success-10)",badgeColor:"success",buttonColor:"success"};case"Max Plan":case"Max":return{backgroundColor:"var(--ds-color-premium-3)",nameColor:"var(--ds-color-premium-10)",badgeColor:"premium",buttonColor:"premium"};case"Indie Plan":case"Developer Plan":case"Standard Plan":case"Indie":case"Developer":case"Standard":return{backgroundColor:"var(--ds-color-gold-3)",nameColor:"var(--ds-color-gold-10)",badgeColor:"gold",buttonColor:"gold"};default:return{backgroundColor:"var(--ds-color-accent-a3)",nameColor:"var(--ds-color-accent-10)",badgeColor:"accent",buttonColor:"accent"}}})(p.planDisplayName));var R=id(),N=d(R),F=d(N),j=d(F);Q(j,{size:2,weight:"medium",color:"neutral",children:(k,y)=>{var G=S();te(()=>de(G,p.planDisplayName)),s(k,G)},$$slots:{default:!0}});var h=v(j,2),w=k=>{var y=ge(),G=V(y);et(G,()=>Ar.Root,(C,A)=>{A(C,{variant:"solid",get color(){return t(g).badgeColor},size:1,children:(_,z)=>{var H=S();te(b=>de(H,`${b??""}
          ${p.usageUnitDisplayName??""}/Cycle`),[()=>p.includedUsageUnitsPerBillingCycle.toLocaleString("en-US")]),s(_,H)},$$slots:{default:!0}})}),s(k,y)};E(h,k=>{p.includedUsageUnitsPerBillingCycle>0&&k(w)});var $=v(F,2),P=d($);We(P,{variant:"soft",color:"neutral",href:"https://app.augmentcode.com/account",onclick:()=>{u.track(zr.CREDIT_MANAGE_PLAN_CLICKED,{currentPlanName:p.planDisplayName})},asAnchor:!0,children:(k,y)=>{Q(k,{size:1,weight:"medium",children:(G,C)=>{var A=S("Manage Plan");s(G,A)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(c,R),Je()})(n,{get planDisplayName(){return e.planDisplayName},get includedUsageUnitsPerBillingCycle(){return e.includedUsageUnitsPerBillingCycle},get usageUnitDisplayName(){return e.usageUnitDisplayName}});var o=v(n,2);pd(o,{get usageUnitsTotal(){return e.usageUnitsTotal},get usageUnitsUsed(){return e.usageUnitsUsed},get isCreditBalanceLow(){return e.isCreditBalanceLow},get usageUnitDisplayName(){return e.usageUnitDisplayName},get creditDetails(){return e.creditDetails},get alertBanner(){return e.alertBanner},get enableCreditBannerInSettings(){return r()}});var l=v(o,2);Q(l,{size:2,color:"secondary",children:(c,p)=>{var u=S();te(()=>de(u,`Your cycle renews in: ${e.daysLeftInPlan??""}
    ${e.daysLeftInPlan===1?"day":"days"}`)),s(c,u)},$$slots:{default:!0}}),s(i,a)}var yd=f('<div class="c-account-category__split-left c-account-category__account-info-details svelte-1mj35xg"><!></div>'),wd=f('<div><div class="c-account-category__split c-account-category__account-info-section svelte-1mj35xg"><!> <div class="c-account-category__split-right c-account-category__account-info-buttons svelte-1mj35xg"><!> <!></div></div> <!></div>');function $d(i,e){qe(e,!0);const r=()=>Le(j,"$planDisplayName",n),a=()=>Le(p,"$userEmail",n),[n,o]=Lt(),l=Sr("enableCreditsInSettings"),c=Sr("enableCreditBannerInSettings"),p=or(Or.key).getUserEmail(),{model:u}=_r.requireContext(),g=Qr(),{usageUnitsTotal:R,usageUnitsUsed:N,includedUsageUnitsPerBillingCycle:F,planDisplayName:j,isCreditBalanceLow:h,usageUnitDisplayName:w,daysLeftInPlan:$,creditDetails:P,alertBanner:k,refreshedAt:y}=u,G=()=>{g.track(zr.ACCOUNT_SIGN_OUT_CLICKED,{}),e.onSignOut()};var C=wd(),A=d(C),_=d(A),z=I=>{var M=yd(),L=d(M);Q(L,{size:2,color:"secondary",children:(K,T)=>{var O=S();te(()=>de(O,`Signed in as ${a()??""}`)),s(K,O)},$$slots:{default:!0}}),s(I,M)};E(_,I=>{a()&&I(z)});var H=v(_,2),b=d(H);We(b,{size:1,variant:"soft",color:"neutral","data-testid":"manage-account-button",onclick:()=>{g.track(zr.ACCOUNT_MANAGE_ACCOUNT_CLICKED,{currentPlanName:r()})},href:"https://app.augmentcode.com/account",asAnchor:!0,children:(I,M)=>{var L=S("Manage account");s(I,L)},$$slots:{default:!0}});var q=v(b,2);We(q,{size:1,variant:"solid",onclick:G,"data-testid":"sign-out-button",iconLeft:M=>{_e(M,{name:"log-out"})},children:(M,L)=>{var K=S("Sign out");s(M,K)},$$slots:{iconLeft:!0,default:!0}});var J=v(A,2),W=I=>{ns(I,{title:"Plan & usage",children:(M,L)=>{fd(M,{get usageUnitsTotal(){return Le(R,"$usageUnitsTotal",n)},get usageUnitsUsed(){return Le(N,"$usageUnitsUsed",n)},get includedUsageUnitsPerBillingCycle(){return Le(F,"$includedUsageUnitsPerBillingCycle",n)},get planDisplayName(){return r()},get isCreditBalanceLow(){return Le(h,"$isCreditBalanceLow",n)},get usageUnitDisplayName(){return Le(w,"$usageUnitDisplayName",n)},get daysLeftInPlan(){return Le($,"$daysLeftInPlan",n)},get creditDetails(){return Le(P,"$creditDetails",n)},get alertBanner(){return Le(k,"$alertBanner",n)},get enableCreditBannerInSettings(){return Le(c,"$enableCreditBannerInSettings",n)}})},$$slots:{default:!0}})};E(J,I=>{Le(y,"$refreshedAt",n)&&Le(l,"$enableCreditsInSettings",n)&&I(W)}),s(i,C),Je(),o()}var bd=f('<div class="c-feature-flag-editor__loading svelte-1ab37k5"><!> <!></div>'),Sd=f('<div class="c-feature-flag-editor__count svelte-1ab37k5"><!></div>'),_d=f('<div class="c-feature-flag-editor__json-error svelte-1ab37k5"><!></div>'),Cd=f('<div class="c-feature-flag-editor__json-editor svelte-1ab37k5"><!> <!> <div class="c-feature-flag-editor__json-actions svelte-1ab37k5"><!> <!></div></div>'),kd=f('<div class="c-feature-flag-editor__json-display svelte-1ab37k5"><div class="c-feature-flag-editor__json-preview svelte-1ab37k5"><pre class="c-feature-flag-editor__json-code svelte-1ab37k5"> </pre></div> <!></div>'),Ad=f('<div class="c-feature-flag-editor__item svelte-1ab37k5"><div class="c-feature-flag-editor__item-label svelte-1ab37k5"><div class="c-feature-flag-editor__item-label-name svelte-1ab37k5"><!> <!></div> <div class="c-feature-flag-editor__item-meta svelte-1ab37k5"><!> <!></div></div> <div class="c-feature-flag-editor__item-control svelte-1ab37k5"><!></div></div>'),xd=f('<div class="c-feature-flag-editor__search svelte-1ab37k5"><!> <!></div> <!> <div class="c-feature-flag-editor__list svelte-1ab37k5"></div>',1),Md=f('<div class="c-feature-flag-editor svelte-1ab37k5"><!></div>');function Td(i,e){qe(e,!0);let r=D(e,"onFlagToggle",19,()=>{});const a=new Set(["eloModelConfiguration","memoriesParams","modelRegistry","modelInfoRegistry","additionalChatModels","agentViewToolParams"]);let n=Ze(!0),o=Ze(null),l=Ze(null),c=Ze(Nr(new Set)),p=Ze(""),u=Ze(Nr(new Map)),g=Ze(Nr(new Map)),R=ne(()=>{const C=sa.fields.findIndex(A=>A.name==="enable_onboarding_v2");return new Map(sa.fields.map((A,_)=>[A.localName,_<=C]))});function N(C){return C.replace(/([A-Z])/g," $1").replace(/^./,A=>A.toUpperCase()).trim()}function F(C){if(C==null)return"";switch(typeof C){case"string":return C;case"bigint":case"number":case"boolean":return C.toString();default:return JSON.stringify(C)}}let j=ne(()=>{return t(l)?(C=t(l),sa.fields.map(A=>{const _=A.localName;return{name:_,value:F(C[_]),field:A}}).sort((A,_)=>A.name.localeCompare(_.name))):[];var C}),h=ne(()=>{if(!t(p).trim())return t(j);const C=t(p).toLowerCase().trim();return t(j).filter(A=>{const _=N(A.name).toLowerCase(),z=A.name.toLowerCase();return _.includes(C)||z.includes(C)})});function w(C){try{const A=JSON.parse(C);return JSON.stringify(A,null,2)}catch{return C}}async function $(C,A){m(c,new Set(t(c)).add(C),!0);const _=function(z,H){const b=sa.fields.find(q=>q.localName===H);if(!b)return z;switch(b.scalar){case ut.BOOL:return z==="true";case ut.BYTES:case ut.STRING:return z+"";case ut.FLOAT:case ut.SFIXED32:case ut.SFIXED64:case ut.INT32:case ut.UINT32:case ut.FIXED32:case ut.DOUBLE:case ut.INT64:return Number(z);default:try{return JSON.parse(z)}catch{return z}}}(A,C);try{_t.postMessage({type:Xe.updateFeatureFlagOverrides,data:{flagName:C,value:_}}),t(l)&&m(l,{...t(l),[C]:_},!0),r()?.(C,_)}catch(z){m(o,z instanceof Error?z.message:"Failed to update feature flag",!0),console.error("Error updating feature flag:",z)}finally{const z=new Set(t(c));z.delete(C),m(c,z,!0)}}Lr(async function(){pn();try{m(n,!0),m(o,null);const C=mn(fn),A=await C.featureFlags({},{timeoutMs:15e3});if(!A.featureFlags)throw new Error("No feature flags returned from service");m(l,A.featureFlags,!0)}catch(C){m(o,C instanceof Error?C.message:"Failed to load feature flags",!0),console.error("Error loading feature flags:",C)}finally{m(n,!1)}});var P=Md(),k=d(P),y=C=>{var A=bd(),_=d(A);Pr(_,{size:2});var z=v(_,2);Q(z,{size:1,color:"secondary",children:(H,b)=>{var q=S("Loading feature flags...");s(H,q)},$$slots:{default:!0}}),s(C,A)},G=C=>{var A=ge(),_=V(A),z=b=>{Vt(b,{color:"error",children:(q,J)=>{Q(q,{size:1,children:(W,I)=>{var M=S();te(()=>de(M,t(o))),s(W,M)},$$slots:{default:!0}})},$$slots:{default:!0}})},H=b=>{var q=ge(),J=V(q),W=I=>{var M=ge(),L=V(M),K=O=>{Vt(O,{color:"info",children:(Y,x)=>{Q(Y,{size:1,children:(ie,Z)=>{var Ce=S("No feature flags available.");s(ie,Ce)},$$slots:{default:!0}})},$$slots:{default:!0}})},T=O=>{var Y=xd(),x=V(Y),ie=d(x);zt(ie,{get value(){return t(p)},oninput:B=>m(p,B.target.value,!0),placeholder:"Search by name or field...",ariaLabel:"Search feature flags",size:1});var Z=v(ie,2),Ce=B=>{It(B,{size:1,variant:"ghost",onclick:()=>m(p,""),"aria-label":"Clear search",children:(U,oe)=>{_e(U,{name:"x",size:2})},$$slots:{default:!0}})};E(Z,B=>{t(p)&&B(Ce)});var be=v(x,2),he=B=>{Vt(B,{color:"info",children:(U,oe)=>{Q(U,{size:1,children:(ue,Ae)=>{var Ee=S();te(()=>de(Ee,`No feature flags match "${t(p)??""}"`)),s(ue,Ee)},$$slots:{default:!0}})},$$slots:{default:!0}})},fe=B=>{var U=Sd(),oe=d(U);Q(oe,{size:0,color:"secondary",children:(ue,Ae)=>{var Ee=S();te(()=>de(Ee,`Showing ${t(h).length??""} of ${t(j).length??""} flags`)),s(ue,Ee)},$$slots:{default:!0}}),s(B,U)};E(be,B=>{t(h).length===0?B(he):B(fe,!1)});var ee=v(be,2);gt(ee,21,()=>t(h),B=>B.name,(B,U)=>{var oe=Ad(),ue=d(oe),Ae=d(ue),Ee=d(Ae);Q(Ee,{size:1,children:(ke,se)=>{var X=S();te(ce=>de(X,ce),[()=>N(t(U).name)]),s(ke,X)},$$slots:{default:!0}});var Oe=v(Ee,2);Q(Oe,{size:0,color:"secondary",children:(ke,se)=>{var X=S();te(ce=>de(X,`v${ce??""}`),[()=>t(R).get(t(U).name)?"1":"2"]),s(ke,X)},$$slots:{default:!0}});var Re=v(Ae,2),le=d(Re);Q(le,{size:0,color:"secondary",children:(ke,se)=>{var X=S();te(()=>de(X,t(U).name)),s(ke,X)},$$slots:{default:!0}});var ye=v(le,2);Q(ye,{size:0,color:"secondary",children:(ke,se)=>{var X=S();te(ce=>de(X,` Type: ${ce??""}`),[()=>function(ce){if(!ce.scalar)return"unknown";switch(ce.scalar){case ut.BOOL:return"boolean";case ut.STRING:return"string";case ut.INT32:case ut.UINT32:case ut.FIXED32:case ut.SFIXED32:return"number (32-bit)";case ut.INT64:case ut.UINT64:case ut.FIXED64:case ut.SFIXED64:return"number (64-bit)";case ut.FLOAT:return"float";case ut.DOUBLE:return"double";case ut.BYTES:return"bytes";default:return"unknown"}}(t(U).field)]),s(ke,X)},$$slots:{default:!0}});var re=v(ue,2),ze=d(re),we=ke=>{Pr(ke,{size:1})},ae=ke=>{var se=ge(),X=V(se),ce=Ne=>{{let je=ne(()=>t(U).value==="true"),Me=ne(()=>`Toggle ${N(t(U).name)}`);jr(Ne,{get checked(){return t(je)},onchange:()=>$(t(U).name,t(U).value==="true"?"false":"true"),get ariaLabel(){return t(Me)}})}},Be=Ne=>{var je=ge(),Me=V(je),rt=ve=>{var $e=ge(),Te=V($e),xe=Ie=>{var it=Cd(),Ve=d(it);{let De=ne(()=>t(u).get(t(U).name)??"");Ca(Ve,{get value(){return t(De)},oninput:Ge=>{const Ye=Ge.target.value;m(u,new Map(t(u)).set(t(U).name,Ye),!0)},rows:10,resize:"vertical",placeholder:"Enter valid JSON...",class:"c-feature-flag-editor__json-textarea",autoresize:!1})}var yt=v(Ve,2),He=De=>{var Ge=_d(),Ye=d(Ge);Vt(Ye,{color:"error",children:(dt,wt)=>{Q(dt,{size:0,children:(xt,pt)=>{var Rt=S();te(Wt=>de(Rt,Wt),[()=>t(g).get(t(U).name)]),s(xt,Rt)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(De,Ge)};E(yt,De=>{t(g).has(t(U).name)&&De(He)});var Qe=v(yt,2),Ke=d(Qe);We(Ke,{size:1,variant:"ghost",color:"neutral",onclick:()=>function(De){const Ge=new Map(t(u));Ge.delete(De),m(u,Ge,!0);const Ye=new Map(t(g));Ye.delete(De),m(g,Ye,!0)}(t(U).name),children:(De,Ge)=>{var Ye=S("Cancel");s(De,Ye)},$$slots:{default:!0}});var ht=v(Ke,2);We(ht,{size:1,variant:"solid",color:"accent",onclick:()=>async function(De){const Ge=t(u).get(De);if(!Ge)return;try{JSON.parse(Ge);const dt=new Map(t(g));dt.delete(De),m(g,dt,!0)}catch(dt){const wt=dt instanceof Error?dt.message:"Invalid JSON";return void m(g,new Map(t(g)).set(De,wt),!0)}await $(De,Ge);const Ye=new Map(t(u));Ye.delete(De),m(u,Ye,!0)}(t(U).name),children:(De,Ge)=>{var Ye=S("Save");s(De,Ye)},$$slots:{default:!0}}),s(Ie,it)},Se=Ie=>{var it=kd(),Ve=d(it),yt=d(Ve),He=d(yt),Qe=v(Ve,2);We(Qe,{size:1,variant:"soft",color:"neutral",onclick:()=>function(Ke,ht){const De=w(ht);m(u,new Map(t(u)).set(Ke,De),!0);const Ge=new Map(t(g));Ge.delete(Ke),m(g,Ge,!0)}(t(U).name,t(U).value),children:(Ke,ht)=>{var De=S("Edit JSON");s(Ke,De)},$$slots:{default:!0,iconLeft:(Ke,ht)=>{_e(Ke,{slot:"iconLeft",name:"pencil",size:1})}}}),te(Ke=>de(He,Ke),[()=>w(t(U).value)]),s(Ie,it)};E(Te,Ie=>{t(u).has(t(U).name)?Ie(xe):Ie(Se,!1)}),s(ve,$e)},Fe=ve=>{{let $e=ne(()=>F(t(U).value));zt(ve,{get value(){return t($e)},onchange:Te=>$(t(U).name,Te.target?.value??"")})}};E(Me,ve=>{var $e;$e=t(U).name,a.has($e)?ve(rt):ve(Fe,!1)},!0),s(Ne,je)};E(X,Ne=>{t(U).field.scalar===ut.BOOL?Ne(ce):Ne(Be,!1)},!0),s(ke,se)};E(ze,ke=>{t(c).has(t(U).name)?ke(we):ke(ae,!1)}),s(B,oe)}),s(O,Y)};E(L,O=>{t(j).length===0?O(K):O(T,!1)}),s(I,M)};E(J,I=>{t(l)&&I(W)},!0),s(b,q)};E(_,b=>{t(o)?b(z):b(H,!1)},!0),s(C,A)};E(k,C=>{t(n)?C(y):C(G,!1)}),s(i,P),Je()}var Ed=f('<div class="c-table-augment svelte-1pcrcvp"><table><!></table></div>'),Rd=f("<tbody><!></tbody>"),Nd=f("<td><!></td>"),Ud=f("<th><!></th>"),Id=f("<thead><!></thead>"),Pd=f("<tr><!></tr>");const Et={Root:function(i,e){qe(e,!0);let r=D(e,"ref",15,null),a=D(e,"size",3,"2"),n=D(e,"variant",3,"default"),o=nr(e,["$$slots","$$events","$$legacy","ref","class","size","variant","children"]);var l=Ed(),c=d(l);Xt(c,()=>({class:["c-table-augment__table",e.class],"data-table-augment-size":a(),...o}),void 0,void 0,"svelte-1pcrcvp");var p=d(c);At(p,()=>e.children??ir),wr(c,u=>r(u),()=>r()),te(()=>{Jt(l,"data-table-augment-size",a()),Jt(l,"data-table-augment-variant",n())}),s(i,l),Je()},Body:function(i,e){qe(e,!0);let r=D(e,"ref",15,null),a=nr(e,["$$slots","$$events","$$legacy","ref","class","children"]);var n=Rd();Xt(n,()=>({class:["c-table-augment__body",e.class],...a}),void 0,void 0,"svelte-1hsf04x");var o=d(n);At(o,()=>e.children??ir),wr(n,l=>r(l),()=>r()),s(i,n),Je()},Cell:function(i,e){qe(e,!0);let r=D(e,"ref",15,null),a=nr(e,["$$slots","$$events","$$legacy","ref","class","children"]);var n=Nd();Xt(n,()=>({class:["c-table-augment__cell",e.class],...a}),void 0,void 0,"svelte-1d6wf9h");var o=d(n);At(o,()=>e.children??ir),wr(n,l=>r(l),()=>r()),s(i,n),Je()},Head:function(i,e){qe(e,!0);let r=D(e,"ref",15,null),a=nr(e,["$$slots","$$events","$$legacy","ref","class","children"]);var n=Ud();Xt(n,()=>({class:["c-table-augment__head-cell",e.class],...a}),void 0,void 0,"svelte-652vqj");var o=d(n),l=c=>{var p=ge(),u=V(p);At(u,()=>e.children),s(c,p)};E(o,c=>{e.children&&c(l)}),wr(n,c=>r(c),()=>r()),s(i,n),Je()},Header:function(i,e){qe(e,!0);let r=D(e,"ref",15,null),a=nr(e,["$$slots","$$events","$$legacy","ref","class","children"]);var n=Id();Xt(n,()=>({class:["c-table-augment__header",e.class],...a}),void 0,void 0,"svelte-1rpg4mu");var o=d(n);At(o,()=>e.children??ir),wr(n,l=>r(l),()=>r()),s(i,n),Je()},Row:function(i,e){qe(e,!0);let r=D(e,"ref",15,null),a=nr(e,["$$slots","$$events","$$legacy","ref","class","children"]);var n=Pd();Xt(n,()=>({class:["c-table-augment__row",e.class],...a}),void 0,void 0,"svelte-iivjbh");var o=d(n);At(o,()=>e.children??ir),wr(n,l=>r(l),()=>r()),s(i,n),Je()}};async function Ps(i){return(await i.send({type:Xe.listSecretsRequest,data:{}},1e4)).data.secrets}async function en(i,e){const r=await i.send({type:Xe.createSecretRequest,data:{name:e.name,value:e.value,tags:e.tags,description:e.description}});if(r.type===Xe.createSecretResponse&&r.data.success)return{name:e.name,tags:e.tags,description:e.description,created_at:new Date().toISOString(),updated_at:r.data.updatedAt||new Date().toISOString(),version:r.data.version||"1",value_size_bytes:new TextEncoder().encode(e.value).length};throw new Error(r.data?.error||"Failed to create secret")}async function tn(i,e){const r=await i.send({type:Xe.updateSecretRequest,data:{name:e.name,...e.value!==void 0&&{value:e.value},tags:e.tags,description:e.description,expectedVersion:e.expectedVersion}});if(r.type===Xe.updateSecretResponse&&r.data.success)return{updatedAt:r.data.updatedAt||new Date().toISOString(),version:r.data.version||e.expectedVersion,valueSizeBytes:e.value?new TextEncoder().encode(e.value).length:void 0};throw new Error(r.data?.error||"Failed to update secret")}var Yt=(i=>(i.env="env",i.file="file",i))(Yt||{});const rn=Symbol("secrets-context");function Yr(){const i=or(rn);if(!i)throw new Error("SecretsContext not found. Make sure to call createSecretsContext in a parent component.");return i}var Ld=f("<!> <!>",1),zd=f("<!> <!>",1),Od=["second","minute","hour","day","week","month","year"],Dd=["","","","","","",""],ts={},Ls=function(i,e){ts[i]=e},za=[60,60,24,7,365/7/12,12];function Fd(i,e){var r;return(+new Date-+((r=i)instanceof Date?r:!isNaN(r)||/^\d+$/.test(r)?new Date(parseInt(r)):(r=(r||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(r))))/1e3}var Bd=function(i,e,r){return function(a,n){for(var o=a<0?1:0,l=a=Math.abs(a),c=0;a>=za[c]&&c<za.length;c++)a/=za[c];return(a=Math.floor(a))>((c*=2)==0?9:1)&&(c+=1),n(a,c,l)[o].replace("%s",a.toString())}(Fd(i),function(a){return ts[a]||ts.en_US}(e))};Ls("en_US",function(i,e){if(e===0)return["just now","right now"];var r=Od[Math.floor(e/2)];return i>1&&(r+="s"),[i+" "+r+" ago","in "+i+" "+r]}),Ls("zh_CN",function(i,e){if(e===0)return["",""];var r=Dd[~~(e/2)];return[i+" "+r+"",i+" "+r+""]});const Hd="/run/augment_secrets/";function la(i){return i["augment:mount_point"]||null}var qd=f('<div class="c-loading-state svelte-wym0by"><div>Loading secrets...</div></div>'),Jd=f('<div class="c-error-state svelte-wym0by"><div class="c-error-state__title svelte-wym0by">Error Loading Secrets</div> <div class="c-error-state__description svelte-wym0by"> </div></div>'),Vd=f(`<div class="c-empty-state svelte-wym0by"><div class="c-empty-state__title svelte-wym0by">No Secrets Found</div> <div class="c-empty-state__description svelte-wym0by">You haven't created any secrets yet. Secrets allow you to securely store sensitive
        information like API keys, passwords, and tokens that can be used by remote agents and other
        Augment features.</div></div>`),jd=f("<!> <!> <!> <!> <!>",1),Gd=f('<div class="c-secret-details svelte-wym0by"><div><!></div> <div><!></div></div>'),Wd=f("<!> <!> <!> <!> <!>",1),Kd=f("<!> <!>",1),Zd=f('<div class="c-secrets-table svelte-wym0by"><!></div>');function Yd(i,e){qe(e,!0);const r=Yr();Lr(async()=>{try{r.setLoading(!0),r.setError(null);const u=await Ps(e.msgBroker);r.setSecrets(u)}catch(u){const g=u instanceof Error?u.message:"Failed to load secrets";r.setError(g),console.error("Error loading secrets:",u)}finally{r.setLoading(!1)}});let a=ne(()=>[...r.secrets].sort((u,g)=>new Date(g.updated_at??g.created_at).getTime()-new Date(u.updated_at??u.created_at).getTime()));async function n(u){try{r.deleteSecretOptimistically(u),await async function(g,R){const N=await g.send({type:Xe.deleteSecretRequest,data:{name:R}});if(N.type!==Xe.deleteSecretResponse||!N.data.success)throw new Error(N.data?.error||"Failed to delete secret")}(e.msgBroker,u)}catch(g){console.error("Failed to delete secret:",g);try{const R=await Ps(e.msgBroker);r.setSecrets(R)}catch(R){console.error("Failed to reload secrets after delete error:",R)}}}var o=Zd(),l=d(o),c=u=>{var g=qd();s(u,g)},p=u=>{var g=ge(),R=V(g),N=j=>{var h=Jd(),w=v(d(h),2),$=d(w);te(()=>de($,r.error)),s(j,h)},F=j=>{var h=ge(),w=V(h),$=k=>{var y=Vd();s(k,y)},P=k=>{var y=ge(),G=V(y);et(G,()=>Et.Root,(C,A)=>{A(C,{size:"custom",children:(_,z)=>{var H=Kd(),b=V(H);et(b,()=>Et.Header,(J,W)=>{W(J,{children:(I,M)=>{var L=ge(),K=V(L);et(K,()=>Et.Row,(T,O)=>{O(T,{children:(Y,x)=>{var ie=jd(),Z=V(ie);et(Z,()=>Et.Head,(ee,B)=>{B(ee,{children:(U,oe)=>{var ue=S("Details");s(U,ue)},$$slots:{default:!0}})});var Ce=v(Z,2);et(Ce,()=>Et.Head,(ee,B)=>{B(ee,{class:"column-type",children:(U,oe)=>{var ue=S("Type");s(U,ue)},$$slots:{default:!0}})});var be=v(Ce,2);et(be,()=>Et.Head,(ee,B)=>{B(ee,{class:"column-updated",children:(U,oe)=>{var ue=S("Updated");s(U,ue)},$$slots:{default:!0}})});var he=v(be,2);et(he,()=>Et.Head,(ee,B)=>{B(ee,{class:"column-size",children:(U,oe)=>{var ue=S("Size");s(U,ue)},$$slots:{default:!0}})});var fe=v(he,2);et(fe,()=>Et.Head,(ee,B)=>{B(ee,{class:"column-actions"})}),s(Y,ie)},$$slots:{default:!0}})}),s(I,L)},$$slots:{default:!0}})});var q=v(b,2);et(q,()=>Et.Body,(J,W)=>{W(J,{children:(I,M)=>{var L=ge(),K=V(L);gt(K,17,()=>t(a),T=>T.name,(T,O)=>{var Y=ge(),x=V(Y);et(x,()=>Et.Row,(ie,Z)=>{Z(ie,{children:(Ce,be)=>{var he=Wd(),fe=V(he);et(fe,()=>Et.Cell,(ue,Ae)=>{Ae(ue,{children:(Ee,Oe)=>{var Re=Gd(),le=d(Re),ye=d(le);Q(ye,{size:1,weight:"medium",children:(ae,ke)=>{var se=S();te(X=>de(se,X),[()=>la(t(O).tags)??t(O).name]),s(ae,se)},$$slots:{default:!0}});var re=v(le,2),ze=d(re),we=ae=>{pi(ae,{leftIcon:se=>{_e(se,{name:"folder"})},$$slots:{leftIcon:!0,text:(se,X)=>{Q(se,{size:1,weight:"light",slot:"text",color:"secondary",children:(ce,Be)=>{var Ne=S();te(je=>de(Ne,`${Hd}${je??""}`),[()=>la(t(O).tags)]),s(ce,Ne)},$$slots:{default:!0}})}}})};E(ze,ae=>{la(t(O).tags)&&ae(we)}),s(Ee,Re)},$$slots:{default:!0}})});var ee=v(fe,2);et(ee,()=>Et.Cell,(ue,Ae)=>{Ae(ue,{class:"column-type  l__table-cell--no-min-width",children:(Ee,Oe)=>{Q(Ee,{size:1,weight:"light",children:(Re,le)=>{var ye=ge(),re=V(ye);et(re,()=>Ar.Root,(ze,we)=>{we(ze,{variant:"soft",color:"neutral",size:1,children:(ae,ke)=>{var se=ge(),X=V(se),ce=Ne=>{var je=S("File");s(Ne,je)},Be=Ne=>{var je=S("EnvVar");s(Ne,je)};E(X,Ne=>{la(t(O).tags)?Ne(ce):Ne(Be,!1)}),s(ae,se)},$$slots:{default:!0}})}),s(Re,ye)},$$slots:{default:!0}})},$$slots:{default:!0}})});var B=v(ee,2);et(B,()=>Et.Cell,(ue,Ae)=>{Ae(ue,{class:"column-updated l__table-cell--no-min-width",children:(Ee,Oe)=>{{let Re=ne(()=>function(le){try{return new Date(le).toLocaleString()}catch{return le}}(t(O).updated_at));Ot(Ee,{get content(){return t(Re)},children:(le,ye)=>{Q(le,{size:1,weight:"light",children:(re,ze)=>{var we=S();te(ae=>de(we,ae),[()=>function(ae){try{return Bd(ae)}catch{return ae}}(t(O).updated_at)]),s(re,we)},$$slots:{default:!0}})},$$slots:{default:!0}})}},$$slots:{default:!0}})});var U=v(B,2);et(U,()=>Et.Cell,(ue,Ae)=>{Ae(ue,{class:"column-size  l__table-cell--no-min-width",children:(Ee,Oe)=>{Q(Ee,{size:1,weight:"light",children:(Re,le)=>{var ye=S();te(re=>de(ye,re),[()=>{return(re=t(O).value_size_bytes)<1024?`${re} B`:re<1048576?`${(re/1024).toFixed(1)} KB`:`${(re/1048576).toFixed(1)} MB`;var re}]),s(Re,ye)},$$slots:{default:!0}})},$$slots:{default:!0}})});var oe=v(U,2);et(oe,()=>Et.Cell,(ue,Ae)=>{Ae(ue,{class:"column-actions  l__table-cell--no-min-width",children:(Ee,Oe)=>{(function(Re,le){qe(le,!0);let ye=D(le,"handleDeleteSecret",3,()=>Promise.resolve());const re=Yr();let ze=Ze(()=>{});var we=ge(),ae=V(we);et(ae,()=>ot.Root,(ke,se)=>{se(ke,{get requestClose(){return t(ze)},set requestClose(X){m(ze,X,!0)},children:(X,ce)=>{var Be=zd(),Ne=V(Be);et(Ne,()=>ot.Trigger,(Me,rt)=>{rt(Me,{children:(Fe,ve)=>{It(Fe,{variant:"ghost-block",size:1,title:"More",children:($e,Te)=>{_e($e,{name:"ellipsis",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})});var je=v(Ne,2);et(je,()=>ot.Content,(Me,rt)=>{rt(Me,{size:1,side:"bottom",align:"start",children:(Fe,ve)=>{var $e=Ld(),Te=V($e);{const Se=Ie=>{_e(Ie,{name:"square-pen"})};et(Te,()=>ot.Item,(Ie,it)=>{it(Ie,{onSelect:()=>{re.editSecret(le.secret.name,le.secret.tags["augment:mount_point"]?Yt.file:Yt.env),t(ze)()},iconLeft:Se,children:(Ve,yt)=>{var He=S("Edit");s(Ve,He)},$$slots:{iconLeft:!0,default:!0}})})}var xe=v(Te,2);{const Se=Ie=>{_e(Ie,{name:"trash-2"})};et(xe,()=>ot.Item,(Ie,it)=>{it(Ie,{onSelect:()=>{ye()(le.secret.name),t(ze)()},color:"error",iconLeft:Se,children:(Ve,yt)=>{var He=S("Delete");s(Ve,He)},$$slots:{iconLeft:!0,default:!0}})})}s(Fe,$e)},$$slots:{default:!0}})}),s(X,Be)},$$slots:{default:!0}})}),s(Re,we),Je()})(Ee,{get secret(){return t(O)},handleDeleteSecret:n})},$$slots:{default:!0}})}),s(Ce,he)},$$slots:{default:!0}})}),s(T,Y)}),s(I,L)},$$slots:{default:!0}})}),s(_,H)},$$slots:{default:!0}})}),s(k,y)};E(w,k=>{r.secrets.length===0?k($):k(P,!1)},!0),s(j,h)};E(R,j=>{r.error?j(N):j(F,!1)},!0),s(u,g)};E(l,u=>{r.loading?u(c):u(p,!1)}),s(i,o),Je()}var Xd=f('<div class="c-secret-manager-header svelte-ifydh6"><!> <!></div>'),Qd=f('<div class="c-modal-header-content svelte-1jlpdjp"><!> <!></div>'),eu=f("<span></span>"),tu=f('<div class="c-info-icon svelte-1jlpdjp"><!></div>'),ru=f('<div class="c-form-field svelte-1jlpdjp"><div class="c-field-label svelte-1jlpdjp"><!> <!></div> <!> <!></div>'),au=f('<!> <div class="c-form-field svelte-1jlpdjp"><!> <!> <!></div> <!>',1),su=f('<div class="c-modal-footer-content svelte-1jlpdjp"><!> <!></div>');function nu(i,e){qe(e,!0);const r=Yr();let a=ne(()=>r.editingEnv?.name??null),n=ne(()=>t(a)?r.getSecretByName(t(a)):null),o=Ze(""),l=Ze(""),c=Ze(null),p=Ze(null),u=Ze(!1),g=Ze(null),R=ne(()=>t(a)!==null),N=ne(()=>t(R)?"Update Secret":"Create Secret");const F=/^[A-Z_][A-Z0-9_]*$/,j="Secret names must only contain uppercase letters, numbers, and underscores. It must start with a letter or underscore.";function h(G){return G.trim()?F.test(G)?r.validateSecretName(G,t(a)??void 0)||null:j:"Required field."}function w(G){return G.length===0?"Required field.":null}Qt(()=>{m(o,t(a)??"",!0),m(l,""),m(c,null),m(p,null),m(u,!1),m(g,null)}),Qt(()=>{t(o)&&m(c,h(t(o)),!0)}),Qt(()=>{t(l)&&m(p,w(t(l)),!0)});let $=ne(()=>t(o).trim()!==""&&t(l).length!==0&&!t(c)&&!t(p));function P(){r.closeModal()}async function k(){const G=h(t(o)),C=w(t(l));if(m(c,G,!0),m(p,C,!0),!G&&!C){m(u,!0),m(g,null);try{const _=(A=t(l),btoa(unescape(encodeURIComponent(A)))),z={"augment:encoding":"base64"};if(t(R)&&t(n)){const H=await tn(e.msgBroker,{name:t(n).name,value:_,tags:z,description:"",expectedVersion:t(n).version}),b={...t(n),tags:z,updated_at:H.updatedAt,version:H.version,value_size_bytes:H.valueSizeBytes||t(n).value_size_bytes};r.updateSecretOptimistically(b)}else{const H=await en(e.msgBroker,{name:t(o).trim(),value:_,tags:z,description:""});r.addSecretOptimistically(H)}r.closeModal()}catch(_){m(g,_ instanceof Error?_.message:"Failed to submit secret",!0),console.error(`Failed to ${t(R)?"update":"create"} secret:`,_)}finally{m(u,!1)}}var A}function y(G){G.key==="Enter"&&t($)&&!t(u)&&(G.preventDefault(),k())}ka(i,{show:!0,cardSize:2,maxWidth:"450px",oncancel:P,get preventEscapeClose(){return t(u)},preventBackdropClose:!0,header:_=>{var z=Qd(),H=d(z);Q(H,{size:3,weight:"bold",color:"primary",children:(q,J)=>{var W=S();te(()=>de(W,t(a)?`Edit ${t(a)}`:"New Environment Variable")),s(q,W)},$$slots:{default:!0}});var b=v(H,2);It(b,{variant:"ghost",color:"neutral",size:1,title:"Close",onclick:P,get disabled(){return t(u)},children:(q,J)=>{_e(q,{name:"x",size:1})},$$slots:{default:!0}}),s(_,z)},body:_=>{var z=au(),H=V(z),b=T=>{var O=ru(),Y=d(O),x=d(Y);Q(x,{size:2,weight:"medium",children:(he,fe)=>{var ee=S("Secret Name");s(he,ee)},$$slots:{default:!0}});var ie=v(x,2);{const he=ee=>{var B=eu();B.textContent="Secret names must only contain uppercase letters, numbers, and underscores. It must start with a letter or underscore.",s(ee,B)};let fe=ne(()=>[kr.Hover]);Ot(ie,{get triggerOn(){return t(fe)},delayDurationMs:300,side:"right",content:he,children:(ee,B)=>{var U=tu(),oe=d(U);_e(oe,{name:"info",size:1}),s(ee,U)},$$slots:{content:!0,default:!0}})}var Z=v(Y,2);{let he=ne(()=>t(c)?"error":void 0);zt(Z,{placeholder:"Enter name",get disabled(){return t(u)},get color(){return t(he)},onkeydown:y,get value(){return t(o)},set value(fe){m(o,fe,!0)}})}var Ce=v(Z,2),be=he=>{Q(he,{size:1,color:"error",children:(fe,ee)=>{var B=S();te(()=>de(B,t(c))),s(fe,B)},$$slots:{default:!0}})};E(Ce,he=>{t(c)&&he(be)}),s(T,O)};E(H,T=>{t(a)===null&&T(b)});var q=v(H,2),J=d(q);Q(J,{size:2,weight:"medium",children:(T,O)=>{var Y=S("Secret Value");s(T,Y)},$$slots:{default:!0}});var W=v(J,2);{let T=ne(()=>t(p)?"error":void 0);zt(W,{placeholder:"Enter value",get disabled(){return t(u)},get color(){return t(T)},onkeydown:y,get value(){return t(l)},set value(O){m(l,O,!0)}})}var I=v(W,2),M=T=>{Q(T,{size:1,color:"error",children:(O,Y)=>{var x=S();te(()=>de(x,t(p))),s(O,x)},$$slots:{default:!0}})};E(I,T=>{t(p)&&T(M)});var L=v(q,2),K=T=>{Vt(T,{color:"error",variant:"soft",size:2,icon:Y=>{_e(Y,{name:"circle-alert"})},children:(Y,x)=>{var ie=S();te(()=>de(ie,t(g))),s(Y,ie)},$$slots:{icon:!0,default:!0}})};E(L,T=>{t(g)&&T(K)}),s(_,z)},footer:_=>{var z=su(),H=d(z);We(H,{variant:"ghost",color:"neutral",get disabled(){return t(u)},onclick:P,children:(q,J)=>{var W=S("Cancel");s(q,W)},$$slots:{default:!0}});var b=v(H,2);{let q=ne(()=>!t($)||t(u));We(b,{variant:"solid",color:"accent",get disabled(){return t(q)},get loading(){return t(u)},onclick:k,children:(J,W)=>{var I=S();te(()=>de(I,t(N))),s(J,I)},$$slots:{default:!0}})}s(_,z)},$$slots:{header:!0,body:!0,footer:!0}}),Je()}function iu(i,e){const r=i.target.files;r?.[0]&&e(r[0])}var ou=f('<div class="c-modal-header-content svelte-1q9v4po"><!> <!></div>'),lu=f('<div class="c-drag-drop-container svelte-1q9v4po"><div role="button" tabindex="0"><!> <!> <!> <!> <input type="file" hidden=""/></div> <!></div>'),cu=f("<!> <!>",1),du=f('<div class="c-file-badge-wrapper svelte-1q9v4po"><!></div>'),uu=f('<div class="c-form-fields svelte-1q9v4po"><div class="c-form-field svelte-1q9v4po"><!> <div class="c-mount-path-input svelte-1q9v4po"><!> <!></div> <!></div> <div class="c-form-field svelte-1q9v4po"><!> <!></div></div>'),vu=f("<!> <!>",1),hu=f('<div class="c-modal-footer-content"><!> <!></div>');function gu(i,e){qe(e,!0);const r=Yr();let a=ne(()=>r.editingFile?.name??null),n=ne(()=>r.editingFile?.mountPath??null),o=ne(()=>r.editingFile?.fileName??null),l=ne(()=>t(a)?r.getSecretByName(t(a)):null),c=Ze(""),p=Ze(null),u=Ze(null),g=Ze(null),R=Ze(null),N=Ze(null),F=Ze(!1),j=Ze(null),h=Ze(!1),w=Ze(!1),$=ne(()=>t(a)!==null),P=ne(()=>{let T=t(c).trim().replace(/^\/+/,"");return T=T.replace(/\/+/g,"/"),T=T.replace(/\/+$/,""),T}),k=ne(()=>t(P)||""),y=ne(()=>{const T=t($)?t(p)||t(g):t(p);return t(c).trim()!==""&&T&&!t(R)&&!t(N)}),G=ne(()=>{const T=t(p)?.name??t(g);return T&&T.length>30?`${T.slice(0,27)}...`:T}),C=ne(()=>t($)?`Edit: ${t(a)}`:"New Mounted File"),A=ne(()=>t($)?"Update Secret":"Create Secret");const _=`file-input-${Date.now()}`;let z=Ze(null);function H(T){return T.trim()?/^[a-zA-Z0-9._\-/]+$/.test(T)?null:"Mount path can only contain letters, numbers, dots, dashes, underscores, and slashes.":"Required field."}async function b(T){if(m(N,null),T.size>16384)m(N,"File size exceeds 16KB limit.");else try{const O=await function(Y){return new Promise((x,ie)=>{const Z=new FileReader;Z.onload=Ce=>{const be=Ce.target?.result;if(typeof be=="string"){const he=be.indexOf(",");x(he>=0?be.slice(he+1):be)}else ie(new Error("Failed to read file as base64"))},Z.onerror=()=>{ie(new Error("Failed to read file"))},Z.readAsDataURL(Y)})}(T);m(p,T,!0),m(u,O,!0),t($)||t(c).trim()||m(c,T.name,!0),t($)&&t(w)&&(m(g,T.name,!0),m(w,!1))}catch{m(N,"Failed to read file. Please try again.")}}function q(T){T.preventDefault(),m(h,!0)}function J(T){T.preventDefault(),m(h,!1)}function W(T){T.preventDefault(),m(h,!1);const O=T.dataTransfer?.files;O?.[0]&&b(O[0])}function I(){t(z)?.click()}function M(){t($)?m(w,!0):(m(p,null),m(u,null),m(c,""))}async function L(){if(m(R,H(t(c)),!0),!t(p)&&!t(g))return void m(N,"Please select a file.");const T=r.validateSecretName(t(k),t(a)??void 0);if(T)m(N,T,!0);else if(!t(R)&&(t(u)||t(g))){m(F,!0),m(j,null);try{const O={"augment:mount_point":t(c).trim()};if(t(u)&&(O["augment:encoding"]="base64"),t($)&&t(l)){const Y=await tn(e.msgBroker,{name:t(l).name,...t(u)&&{value:t(u)},tags:O,description:"",expectedVersion:t(l).version}),x={...t(l),tags:O,updated_at:Y.updatedAt,version:Y.version,value_size_bytes:Y.valueSizeBytes||t(l).value_size_bytes};r.updateSecretOptimistically(x)}else{const Y=await en(e.msgBroker,{name:t(k),value:t(u)??"",tags:O,description:""});r.addSecretOptimistically(Y)}r.closeModal()}catch(O){m(j,O instanceof Error?O.message:"Failed to submit secret",!0),console.error(`Failed to ${t($)?"update":"create"} file secret:`,O)}finally{m(F,!1)}}}function K(){r.closeModal()}Qt(()=>{t(c)&&m(R,H(t(c)),!0)}),Qt(()=>{t($)?(m(c,t(n)??"",!0),m(g,t(o)??null,!0)):(m(c,""),m(g,null)),m(p,null),m(u,null),m(R,null),m(N,null),m(F,!1),m(j,null),m(h,!1),m(w,!1)}),ka(i,{show:!0,cardSize:2,maxWidth:"450px",oncancel:K,get preventEscapeClose(){return t(F)},preventBackdropClose:!0,header:x=>{var ie=ou(),Z=d(ie);Q(Z,{size:3,weight:"bold",color:"primary",children:(be,he)=>{var fe=S();te(()=>de(fe,t(C))),s(be,fe)},$$slots:{default:!0}});var Ce=v(Z,2);It(Ce,{variant:"ghost",color:"neutral",size:1,title:"Close",onclick:K,get disabled(){return t(F)},children:(be,he)=>{_e(be,{name:"x",size:1})},$$slots:{default:!0}}),s(x,ie)},body:x=>{var ie=vu(),Z=V(ie),Ce=ee=>{var B=lu(),U=d(B);let oe;var ue=d(U);_e(ue,{name:"upload",size:2});var Ae=v(ue,2);Q(Ae,{size:2,weight:"medium",children:(re,ze)=>{var we=S("Drag & Drop");s(re,we)},$$slots:{default:!0}});var Ee=v(Ae,2);Q(Ee,{size:1,color:"neutral",children:(re,ze)=>{var we=S("or");s(re,we)},$$slots:{default:!0}});var Oe=v(Ee,2);We(Oe,{variant:"solid",color:"neutral",onclick:I,children:(re,ze)=>{var we=S("Browse Files");s(re,we)},$$slots:{default:!0}});var Re=v(Oe,2);Re.__change=[iu,b],wr(Re,re=>m(z,re),()=>t(z));var le=v(U,2),ye=re=>{Q(re,{size:1,color:"error",children:(ze,we)=>{var ae=S();te(()=>de(ae,t(N))),s(ze,ae)},$$slots:{default:!0}})};E(le,re=>{t(N)&&re(ye)}),te(re=>{oe=Ut(U,1,"c-drag-drop-zone svelte-1q9v4po",null,oe,re),Jt(Re,"id",_),Re.disabled=t(F)},[()=>({"is-dragging":t(h)})]),Dt("dragover",U,q),Dt("dragleave",U,J),Dt("drop",U,W),s(ee,B)},be=ee=>{var B=uu(),U=d(B),oe=d(U);Q(oe,{size:2,color:"neutral",children:(ae,ke)=>{var se=S("Mount Path");s(ae,se)},$$slots:{default:!0}});var ue=v(oe,2),Ae=d(ue);Q(Ae,{size:1,class:"c-mount-path-prefix",color:"secondary",children:(ae,ke)=>{var se=S("/run/augment_secrets/");s(ae,se)},$$slots:{default:!0}});var Ee=v(Ae,2);{let ae=ne(()=>t(R)?"error":void 0);zt(Ee,{placeholder:"filename.txt",get disabled(){return t(F)},get color(){return t(ae)},get value(){return t(c)},set value(ke){m(c,ke,!0)}})}var Oe=v(ue,2),Re=ae=>{Q(ae,{size:1,color:"error",children:(ke,se)=>{var X=S();te(()=>de(X,t(R))),s(ke,X)},$$slots:{default:!0}})};E(Oe,ae=>{t(R)&&ae(Re)});var le=v(U,2),ye=d(le),re=ae=>{var ke=du(),se=d(ke);We(se,{variant:"surface",color:"neutral",size:1,onclick:M,iconLeft:ce=>{var Be=cu(),Ne=V(Be);_e(Ne,{name:"file",class:"c-file-badge-icon-default"});var je=v(Ne,2);_e(je,{name:"refresh-ccw",class:"c-file-badge-icon-hover"}),s(ce,Be)},children:(ce,Be)=>{var Ne=S();te(()=>de(Ne,t(G))),s(ce,Ne)},$$slots:{iconLeft:!0,default:!0}}),s(ae,ke)};E(ye,ae=>{(t(p)||t(g))&&ae(re)});var ze=v(ye,2),we=ae=>{Q(ae,{size:1,color:"error",children:(ke,se)=>{var X=S();te(()=>de(X,t(N))),s(ke,X)},$$slots:{default:!0}})};E(ze,ae=>{t(N)&&ae(we)}),s(ee,B)};E(Z,ee=>{!t($)&&!t(p)||t($)&&t(w)?ee(Ce):ee(be,!1)});var he=v(Z,2),fe=ee=>{Vt(ee,{color:"error",variant:"soft",size:2,icon:U=>{_e(U,{name:"circle-alert"})},children:(U,oe)=>{var ue=S();te(()=>de(ue,t(j))),s(U,ue)},$$slots:{icon:!0,default:!0}})};E(he,ee=>{t(j)&&ee(fe)}),s(x,ie)},footer:x=>{var ie=ge(),Z=V(ie),Ce=be=>{var he=hu(),fe=d(he);We(fe,{variant:"ghost",color:"neutral",get disabled(){return t(F)},onclick:K,children:(B,U)=>{var oe=S("Cancel");s(B,oe)},$$slots:{default:!0}});var ee=v(fe,2);{let B=ne(()=>!t(y)||t(F));We(ee,{variant:"solid",color:"accent",get disabled(){return t(B)},get loading(){return t(F)},onclick:L,children:(U,oe)=>{var ue=S();te(()=>de(ue,t(A))),s(U,ue)},$$slots:{default:!0}})}s(be,he)};E(Z,be=>{(t($)&&!t(w)||!t($)&&t(p))&&be(Ce)}),s(x,ie)},$$slots:{header:!0,body:!0,footer:!0}}),Je()}ba(["change"]);var pu=f('<div class="c-secret-manager-container"><div class="l-section svelte-jt0bx6"><!></div> <div class="l-section svelte-jt0bx6"><!></div> <!> <!></div>');const mu=function(i,e){qe(e,!0);const r=function(){let g=Ze(Nr([])),R=Ze(!0),N=Ze(null),F=Ze(null),j=Ze(null),h=Ze(null);const w={get secrets(){return t(g)},get loading(){return t(R)},get error(){return t(N)},get visibleModal(){return t(F)},get editingEnv(){return t(j)},get editingFile(){return t(h)},addSecretOptimistically($){m(g,[$,...t(g)],!0)},updateSecretOptimistically($){const P=t(g).findIndex(k=>k.name===$.name);P!==-1&&(t(g)[P]=$,m(g,[...t(g)],!0))},deleteSecretOptimistically($){m(g,t(g).filter(P=>P.name!==$),!0)},validateSecretName:($,P)=>t(g).find(k=>k.name===$&&k.name!==P)?"A secret with this name already exists.":null,getSecretByName:$=>t(g).find(P=>P.name===$),setSecrets($){m(g,$,!0)},setLoading($){m(R,$,!0)},setError($){m(N,$,!0)},launchAddSecretEnv(){m(F,Yt.env,!0)},launchAddSecretFile(){m(F,Yt.file,!0)},editSecret($,P){const k=t(g).find(y=>y.name===$);if(P===Yt.env)m(j,{name:$},!0),m(F,Yt.env,!0);else{const y=k?.tags["augment:mount_point"]||"";m(h,{name:$,mountPath:y,fileName:$},!0),m(F,Yt.file,!0)}},closeModal(){m(F,null),m(j,null),m(h,null)}};return Rr(rn,w),w}();var a=pu(),n=d(a);(function(g,R){qe(R,!1);const N=Yr();tr();var F=Xd(),j=d(F);We(j,{size:1,get onclick(){return N.launchAddSecretEnv},iconLeft:$=>{_e($,{name:"plus"})},children:($,P)=>{var k=S("Environment Variable");s($,k)},$$slots:{iconLeft:!0,default:!0}});var h=v(j,2);We(h,{size:1,get onclick(){return N.launchAddSecretFile},iconLeft:$=>{_e($,{name:"plus"})},children:($,P)=>{var k=S("Mounted File");s($,k)},$$slots:{iconLeft:!0,default:!0}}),s(g,F),Je()})(d(n),{});var o=v(n,2);Yd(d(o),{get msgBroker(){return e.msgBroker}});var l=v(o,2),c=g=>{nu(g,{get msgBroker(){return e.msgBroker}})};E(l,g=>{r.visibleModal===Yt.env&&g(c)});var p=v(l,2),u=g=>{gu(g,{get msgBroker(){return e.msgBroker}})};E(p,g=>{r.visibleModal===Yt.file&&g(u)}),s(i,a),Je()};function fu(i,e){qe(e,!0);const r=()=>Le(T,"$guidelines",l),a=()=>Le(G,"$settingsComponentSupported",l),n=()=>Le(C,"$enableAgentMode",l),o=()=>Le(z,"$terminalSettingsStore",l),[l,c]=Lt(),p=new Or(_t),u=new Oi(_t),g=new Hn(_t),R=Sr("enableRules"),N=Sr("enablePersonalities"),F=Sr("enableExternalSourcesInChat"),j=Sr("retryChatStreamTimeouts"),h=Sr("enableCreditsInSettings"),w=new On(_t,g,{enableRules:Le(R,"$enableRules",l),enablePersonalities:Le(N,"$enablePersonalities",l),enableExternalSourcesInChat:Le(F,"$enableExternalSourcesInChat",l),retryChatStreamTimeouts:Le(j,"$retryChatStreamTimeouts",l)}),$=new Ha(g),P=new Kr(g),k=new ea(_t,w);Rr(Ha.key,$),Rr(Kr.key,P),Rr(Or.key,p),ri(w),function(X){Rr(js,X)}(k);const{controller:y}=function(X){const ce=new _r,Be=new nd(ce,X);return _r.setInContext(ce,Be),{model:ce,controller:Be}}(w),G=p.getSettingsComponentSupported(),C=p.getEnableAgentMode(),A=p.getEnableAgentSwarmMode(),_=p.getHasEverUsedRemoteAgent();g.registerConsumer(p),g.registerConsumer(k),g.registerConsumer(u);const z=u.getTerminalSettings();let H=Ze(void 0);const b=window.augmentFlags?.navigateToSettingsSection,q=[];let J=!0;function W(X,ce){const Be=window.setTimeout(()=>{J&&X()},ce);return q.push(Be),Be}const I={handleMessageFromExtension(X){return X.data&&X.data.type===Xe.navigateToSettingsSection?(X.data.data&&typeof X.data.data=="string"&&L(X.data.data),!0):!1}};function M(){const X=window.location.hash.substring(1);X&&L(X)}function L(X){const ce=t(le).find(Be=>Be?.id===X);ce?m(H,ce.id,!0):(m(H,t(le)[0]?.id??"tools",!0),function Be(Ne=0,je=20){const Me=document.getElementById(X);Me?(Me.scrollIntoView({behavior:"smooth",block:"center"}),W(()=>{Me.classList.remove("settings-section-highlight"),Me.offsetHeight,Me.classList.add("settings-section-highlight"),W(()=>{Me.classList.remove("settings-section-highlight")},1050)},500)):Ne<je&&W(()=>Be(Ne+1,je),200)}())}g.registerConsumer(I),Lr(()=>{W(M,100);const X=()=>{M()};return window.addEventListener("hashchange",X),()=>{J=!1,q.forEach(clearTimeout),window.removeEventListener("hashchange",X)}});const K=p.getDisplayableTools(),T=p.getGuidelines(),O=ne(()=>r().userGuidelines?.contents),Y=ne(()=>r().userGuidelines?.lengthLimit),x=ne(()=>r().workspaceGuidelines?.[0]?.lengthLimit),ie=ne(()=>r().workspaceGuidelines?.[0]?.contents||"");function Z(X){const ce=X.trim();return!(t(Y)&&ce.length>t(Y))&&(p.updateLocalUserGuidelines(ce),_t.postMessage({type:Xe.updateUserGuidelines,data:X}),!0)}function Ce(X){_t.postMessage({type:Xe.toolConfigStartOAuth,data:X}),p.startPolling()}async function be(X){await w.openConfirmationModal({title:"Revoke Access",message:`Are you sure you want to revoke access for ${X.displayName}? This will disconnect the tool and you'll need to reconnect it to use it again.`,confirmButtonText:"Revoke Access",cancelButtonText:"Cancel"})&&_t.postMessage({type:Xe.toolConfigRevokeAccess,data:{toolId:X.identifier}})}function he(X){u.updateSelectedShell(X)}function fe(X){u.updateStartupScript(X)}function ee(X,ce){_t.postMessage({type:Xe.toolApprovalConfigSetRequest,data:{toolId:X,approvalConfig:ce}})}function B(){_t.postMessage({type:Xe.signOut})}Fa(()=>{p.dispose(),$.dispose(),P.dispose(),k.dispose()}),p.notifyLoaded(),_t.postMessage({type:Xe.getOrientationStatus});const U=ne(()=>a().remoteTools?yr({name:"Tools",description:"",icon:"wrench",id:"section-tools"}):void 0),oe=ne(()=>a().userGuidelines&&!a().rules?yr({name:"User Guidelines",description:"Guidelines for Augment Chat to follow.",icon:"album",id:"guidelines"}):void 0),ue=ne(()=>a().rules?yr({name:"Rules and User Guidelines",description:"",icon:"album",id:"guidelines"}):void 0),Ae=ne(()=>a().workspaceContext?yr({name:"Context",description:"",icon:"folders",id:"context"}):void 0),Ee=yr({name:"Account",description:"",icon:"user-round",id:"account"}),Oe=ne(()=>a().allowFeatureFlagOverrides?yr({name:"Feature Flags",description:"",icon:"flag",id:"feature-flags"}):void 0),Re=ne(()=>a().secretsManagerEnabled?yr({name:"Secret Manager",description:"Securely store sensitive information like API keys, passwords, and tokens. Use secrets with remote agents and additional Augment features.",icon:"key-round",id:"secret-manager",fullWidth:!0}):void 0),le=ne(()=>[t(U),t(oe),t(ue),t(Ae),Ee,t(Oe),t(Re)].filter(X=>X!==void 0)),ye=X=>{_t.postMessage({type:Xe.updateFeatureFlagOverrides,data:X})},re=ne(()=>t(le).length>1),ze=ne(()=>t(le)[0]?.id),we=ne(()=>t(H)!==void 0);Qt(()=>{b&&t(re)?m(H,b,!0):t(re)&&!t(we)&&m(H,t(ze),!0)}),Qt(()=>{Le(h,"$enableCreditsInSettings",l)?t(H)==="account"?y.foregroundPoll():y.backgroundPoll():y.stop()});let ae=Nr(new Set);Qt(()=>{t(H)===void 0||ae.has(t(H))||(w.track(zr.SETTINGS_TAB_VIEWED,{tab:t(H)}),ae.add(t(H)))}),Lr(()=>{w.track(zr.SETTINGS_PAGE_OPENED,{})}),_t.postMessage({type:Xe.settingsPanelLoaded});var ke=ge();Dt("message",rs,function(...X){g.onMessageFromExtension?.apply(this,X)});var se=V(ke);et(se,()=>vi.Root,(X,ce)=>{ce(X,{children:(Be,Ne)=>{bo(Be,{get items(){return t(le)},mode:"tree",class:"c-settings-navigation",get selectedId(){return t(H)},set selectedId(Me){m(H,Me,!0)},content:(Me,rt)=>{let Fe=()=>rt?.().item;var ve=ge(),$e=V(ve),Te=Se=>{},xe=Se=>{var Ie=ge(),it=V(Ie),Ve=He=>{ao(He,{})},yt=He=>{var Qe=ge(),Ke=V(Qe),ht=Ge=>{var Ye=ge(),dt=V(Ye),wt=pt=>{ad(pt,{get userGuidelines(){return t(O)},get userGuidelinesLengthLimit(){return t(Y)},get workspaceGuidelinesLengthLimit(){return t(x)},get workspaceGuidelinesContent(){return t(ie)},updateUserGuideline:Z})},xt=pt=>{Qs(pt,{get userGuidelines(){return t(O)},get userGuidelinesLengthLimit(){return t(Y)},updateUserGuideline:Z})};E(dt,pt=>{a().rules?pt(wt):pt(xt,!1)}),s(Ge,Ye)},De=Ge=>{var Ye=ge(),dt=V(Ye),wt=pt=>{$d(pt,{onSignOut:B})},xt=pt=>{var Rt=ge(),Wt=V(Rt),Dr=bt=>{(function(mt,Mt){qe(Mt,!0);const St=(Ft,ft)=>{Mt.onUpdateFlags({flagName:Ft,value:ft})};ns(mt,{title:"Update Feature Flags",children:(Ft,ft)=>{Td(Ft,{onFlagToggle:St})},$$slots:{default:!0}}),Je()})(bt,{onUpdateFlags:ye})},$t=bt=>{var mt=ge(),Mt=V(mt),St=ft=>{mu(ft,{get msgBroker(){return g}})},Ft=ft=>{{let vr=ne(()=>n()&&a().mcpServerList),hr=ne(()=>n()&&a().mcpServerImport);Uc(ft,{get tools(){return Le(K,"$displayableTools",l)},onAuthenticate:Ce,onRevokeAccess:be,onToolApprovalConfigChange:ee,onMCPServerAdd:(Bt,Pt)=>k.addServer(Bt,Pt),onMCPServerSave:(Bt,Pt)=>k.updateServer(Bt,Pt),onMCPServerDelete:Bt=>k.deleteServer(Bt),onMCPServerToggleDisable:Bt=>k.toggleDisabledServer(Bt),onMCPServerJSONImport:Bt=>k.importServersFromJSON(Bt),get isMCPEnabled(){return t(vr)},get isMCPImportEnabled(){return t(hr)},get supportedShells(){return o().supportedShells},get selectedShell(){return o().selectedShell},get startupScript(){return o().startupScript},onShellSelect:he,onStartupScriptChange:fe,get isTerminalEnabled(){return a().terminal},isSoundCategoryEnabled:!0,get isAgentCategoryEnabled(){return n()},get isSwarmModeFeatureFlagEnabled(){return Le(A,"$enableAgentSwarmMode",l)},get hasEverUsedRemoteAgent(){return Le(_,"$hasEverUsedRemoteAgent",l)}})}};E(Mt,ft=>{Fe()?.id==="secret-manager"?ft(St):ft(Ft,!1)},!0),s(bt,mt)};E(Wt,bt=>{Fe()?.id==="feature-flags"?bt(Dr):bt($t,!1)},!0),s(pt,Rt)};E(dt,pt=>{Fe()?.id==="account"?pt(wt):pt(xt,!1)},!0),s(Ge,Ye)};E(Ke,Ge=>{Fe()?.id==="guidelines"?Ge(ht):Ge(De,!1)},!0),s(He,Qe)};E(it,He=>{Fe()?.id==="context"?He(Ve):He(yt,!1)},!0),s(Se,Ie)};E($e,Se=>{Vs(Fe())?Se(xe,!1):Se(Te)}),s(Me,ve)},$$slots:{content:!0}})},$$slots:{default:!0}})}),s(i,ke),Je(),c()}function yu(i){Dn(i,{children:(e,r)=>{Fn(e,{fetch:!0,children:(a,n)=>{fu(a,{})},$$slots:{default:!0}})},$$slots:{default:!0}})}(async function(){_t?.initialize&&await _t.initialize(),yn(yu,{target:document.getElementById("app")})})();
//# sourceMappingURL=settings-w--y3aYZ.js.map
