const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./dagre-6UL2VRFP-Ib7HcRG8.js","./graph-DDuBh4w2.js","./_baseUniq-uDqqXzFx.js","./TextAugment-CCgoKCVh.js","./TextAugment-DrPtHmV8.css","./layout-UrDMVz7U.js","./_basePickBy-iiVghp6f.js","./clone-GIaI6k5A.js","./index-B9uIMiyK.js","./preload-helper-iZIsTGZK.js","./await-Bft3-TRy.js","./index-B4NDmpYR.js","./IconButtonAugment-CsdawHyK.js","./IconButtonAugment-Bv0WDkJ_.css","./Store-CzuxPCq8.js","./CardAugment-Bqwu5ahx.js","./CardAugment-DamY0RJT.css","./focusTrapStack-9JCo5vKi.js","./Chevron-Cl2ZClCm.js","./Chevron-BvwCR8GX.css","./BaseTextInput-CKEk7GUD.js","./BaseTextInput-DRN2HXtk.css","./message-broker-CppRv-qk.js","./index-BuNY6jLF.js","./index-CicAFC3Z.css","./Store-DT0mrlF8.css","./BadgeRoot-Do4WQCrW.css","./index-Bz1AJAWu.js","./chat-model-DaVfYv7o.js","./file-type-utils-CBkYZ4gj.js","./CalloutAugment-BUb-HAQ6.js","./CalloutAugment-VvLaGQMh.css","./types-DGsjtdxm.js","./chat-model-context-DwFUhpQk.js","./Markdown-F1hzawoT.js","./CollapseButtonAugment-CdECN-QQ.js","./CollapseButtonAugment-CNgvQjXU.css","./toggleHighContrast-BIKVVoPO.js","./toggleHighContrast-C5ZQUaPo.css","./Markdown-CurHx-yt.css","./ButtonAugment-dm8Gq3Cq.js","./ButtonAugment-Bl_W38L4.css","./Filespan-DQTy5qup.js","./Filespan-DBFcC0Za.css","./OpenFileButton-DcM9qoQQ.js","./index-Czcl53hR.js","./remote-agents-client-3ykFyqEs.js","./SuccessfulButton-CqblPP5m.js","./SuccessfulButton-BDZRP7A9.css","./OpenFileButton-Dz9EvsKp.css","./CopyButton-CYoKSKPU.js","./CopyButton-CejWQ-s8.css","./LanguageIcon-BRHvdy0u.js","./LanguageIcon-6rdAPCNm.css","./keypress-fD7XHdyk.js","./TextAreaAugment-Pjr5jpcU.js","./TextAreaAugment-C3YgGx7o.css","./partner-mcp-utils-8KSbNsEE.js","./augment-logo-CnRinIIJ.js","./utils-BOGwHecm.js","./cose-bilkent-S5V4N54A-DZ-Sj5Cw.js","./cytoscape.esm-B0joLj6_.js","./c4Diagram-YG6GDRKO-DkjzBJGl.js","./chunk-TZMSLE5B--XT4X51-.js","./flowDiagram-NV44I4VS-BzxdmGsm.js","./chunk-FMBD7UC4-DyHbQPsW.js","./chunk-55IACEB6-CxCjPgYh.js","./chunk-QN33PNHL-DJcFsNO3.js","./channel-BQNrzIJw.js","./erDiagram-Q2GNP2WA-CaZ0zaA3.js","./gitGraphDiagram-NY62KEGX-DYtX5RNf.js","./chunk-4BX2VUAB-DFnrP50b.js","./chunk-QZHKN3VN-CRIi2JPx.js","./treemap-KMMF4GRG-BWWKpPk0.js","./ganttDiagram-LVOFAZNH-CLGAHSzz.js","./linear-zugye4zL.js","./init-CpIN3PJq.js","./defaultLocale-BkQPifPF.js","./infoDiagram-F6ZHWCRC-Cd2EZuEM.js","./pieDiagram-ADFJNKIX-Bfdmy7zO.js","./arc-BTMcSefQ.js","./ordinal-PkyRlZ8Q.js","./quadrantDiagram-AYHSOK5B-C6vUUFAm.js","./xychartDiagram-PRI3JC2R-CqggVp-i.js","./requirementDiagram-UZGBJVZJ-CpNijE83.js","./sequenceDiagram-WL72ISMW-DFVOir4V.js","./classDiagram-2ON5EDUG-COyElPW6.js","./chunk-B4BG7PRW-DaL7sHXr.js","./classDiagram-v2-WZHVMYZB-CB6JShNa.js","./stateDiagram-FKZM4ZOC-BfODEK3X.js","./chunk-DI55MBZ5-BjRNBqoo.js","./stateDiagram-v2-4FDKWEC3-WRMyPFw7.js","./journeyDiagram-XKPGCS4Q-DiUHC3ew.js","./timeline-definition-IT6M3QCI-BC1eOj30.js","./mindmap-definition-VGOIOE7T-CD-Rou7R.js","./kanban-definition-3W4ZIXB7-t8j3Qfes.js","./sankeyDiagram-TZEHDZUN-CF8ZSBcM.js","./diagram-S2PKOQOG-BD5by_mA.js","./diagram-QEK2KX5R-B1sLKHWs.js","./blockDiagram-VD42YOAC-CiLdYStC.js","./architectureDiagram-VXUJARFQ-2HP4w1Lb.js","./diagram-PSM6KHXK-BrFiGYNA.js"])))=>i.map(i=>d[i]);
import{aS as nw,at as Bh,y as Ft,w as Be,W as kr,aU as Le,t as ut,P as _e,aF as uu,F as pt,u as G,x as P,J as Y,E as R,C as d,Q as O,K as et,n as b,z as J,A as W,I as z,a0 as at,N as $s,Z as ke,_ as Ue,Y as Kr,O as yt,L as Me,M as $e,G as X,aR as pa,ag as ys,l as is,R as vs,ab as me,H as Zn,aY as Ai,ac as Qr,aX as li,b$ as io,c0 as os,bh as ga,c1 as sw,a5 as st,o as O0,B as cr,$ as Pr,D as he,a8 as Ne,ah as Ye,S as pu,aa as ve,am as ri,m as _t,a1 as qt,a2 as xt,a3 as Ms,v as pr,a7 as dc,a4 as se,a6 as Tt,aD as gs,ak as fa,a9 as pn,bc as iw,bR as ow,V as aw,X as lw,T as ht,b6 as Sn,bO as Ma,b3 as ma,b9 as gu,af as zp,aA as fu,aG as Zo,bl as R0,aB as cw,c2 as hw,ba as Up}from"./TextAugment-CCgoKCVh.js";import{t as rs,b as dw,s as Ih,a as mu,f as P0}from"./index-B9uIMiyK.js";import{_ as Ie}from"./preload-helper-iZIsTGZK.js";import{a as yu}from"./await-Bft3-TRy.js";import{s as uw,d as pw}from"./index-B4NDmpYR.js";import{e as ge,i as Re,b as tr,c as de,I as vt,d as Jr}from"./IconButtonAugment-CsdawHyK.js";/* empty css                                                */import{bQ as gw,bR as fw,bt as Et,c5 as qc,c6 as lr,c7 as mw,c8 as yw,c9 as qp,ca as vw,cb as Fh,cc as jp,a4 as Aa,v as _l,h as bw,br as mi,a as xw,bs as Tr,T as kw,D as ce,i as je,o as Yi,cd as _w,ce as N0,g as bs,aH as ww,ab as Cw,C as Xe,cf as Sw,m as Wp,n as Hp,R as Tw,cg as z0,ch as jc,L as ze,W as U0,by as $w,c3 as Mw,z as Aw}from"./Store-CzuxPCq8.js";import"./index-Bz1AJAWu.js";import{x as Ew,q as vu,B as bu,G as Lw,H as Bw,I as Iw,J as Fw}from"./chat-model-DaVfYv7o.js";import{e as Dh,C as q0,M as Oh,f as Dw,d as Ow,c as Rw,D as Vp}from"./Markdown-F1hzawoT.js";import{B as Nr}from"./ButtonAugment-dm8Gq3Cq.js";import{T as fe,a as Pe,o as j0,H as W0,b as H0,C as un,h as Pw}from"./CardAugment-Bqwu5ahx.js";import{F as Zi}from"./Filespan-DQTy5qup.js";import{C as wr,i as xu,E as ur,v as Gp,g as No,r as Nw,a as zw,w as Uw,d as V0,l as Xa,f as qw}from"./message-broker-CppRv-qk.js";import{t as Rh,g as ku,S as wl,b as jw,M as Ww}from"./index-BuNY6jLF.js";import{O as _u,R as xs}from"./OpenFileButton-DcM9qoQQ.js";import{C as ks}from"./CopyButton-CYoKSKPU.js";import{S as wu}from"./SuccessfulButton-CqblPP5m.js";import{C as Hw}from"./Chevron-Cl2ZClCm.js";import{L as G0}from"./LanguageIcon-BRHvdy0u.js";import{n as Vw}from"./focusTrapStack-9JCo5vKi.js";import{h as Xi,b as Gw,C as uc,g as Yw,k as Zw,a as Xw}from"./CollapseButtonAugment-CdECN-QQ.js";import{o as Cr}from"./keypress-fD7XHdyk.js";import{T as dt,a as Kw,g as ci}from"./chat-model-context-DwFUhpQk.js";import{C as Yp}from"./types-DGsjtdxm.js";import{T as Fi}from"./TextAreaAugment-Pjr5jpcU.js";import{b as xr,i as Qw,a as Jw,L as t2,N as e2,S as r2,G as n2,R as Un,g as s2}from"./partner-mcp-utils-8KSbNsEE.js";import{A as i2}from"./augment-logo-CnRinIIJ.js";import{m as o2,j as a2,n as Wc,k as Zp,o as l2,p as c2}from"./utils-BOGwHecm.js";import{e as go,U as Xp}from"./toggleHighContrast-BIKVVoPO.js";import{a as Ka,B as Qa,C as h2}from"./CalloutAugment-BUb-HAQ6.js";try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9bd3efb1-56a1-449e-a8eb-249e52dc1ec2",e._sentryDebugIdIdentifier="sentry-dbid-9bd3efb1-56a1-449e-a8eb-249e52dc1ec2")})()}catch{}function Y0(e,t){nw(()=>{var r=t();for(var n in r){var s=r[n];s?e.style.setProperty(n,s):e.style.removeProperty(n)}})}class Cu{#t=new WeakMap;#e;#r;static entries=new WeakMap;constructor(t){this.#r=t}observe(t,r){var n=this.#t.get(t)||new Set;return n.add(r),this.#t.set(t,n),this.#n().observe(t,this.#r),()=>{var s=this.#t.get(t);s.delete(r),s.size===0&&(this.#t.delete(t),this.#e.unobserve(t))}}#n(){return this.#e??(this.#e=new ResizeObserver(t=>{for(var r of t)for(var n of(Cu.entries.set(r.target,r),this.#t.get(r.target)||[]))n(r)}))}}var d2=new Cu({box:"border-box"});function Kp(e,t,r){var n=d2.observe(e,()=>r(e[t]));Bh(()=>(Ft(()=>r(e[t])),n))}function Ir(e,t){return e==null?t:typeof e=="string"?e:t}function u2(e){return e.type===wr.AGENT_MEMORY||e.type===wr.TOOL_USE&&e.tool_use?.tool_name==="remember"}function p2(e){return e.type===wr.TOOL_USE&&e.tool_use?.tool_name==="view"}function g2(e){return e.type===wr.TOOL_USE&&e.tool_use?.tool_name==="str-replace-editor"||e.tool_use?.tool_name==="save-file"}function Qp(e){const t=new Set;for(const r of e)if(r.type===wr.TOOL_USE&&r.tool_use?.input_json)try{const n=JSON.parse(r.tool_use.input_json);t.add(n.path)}catch{}return t.delete(void 0),t.size}const f2=Symbol("undefined"),m2=Symbol("null");function Z0(e){const t=new WeakMap;return r=>{const n=(i=f2,o=m2,(s=r)===void 0?i:s===null?o:s);var s,i,o;return t.has(n)||t.set(n,e(r)),((a,h)=>{const l=a.get(h);if(!l)throw new Error("Value not found in cache");return l})(t,n)}}function GR(e,t){const r=function(s){if(!s)return;const i=s.findLast(o=>Gp(o.turn));return i?i.turn:void 0}(e);return r?.status===ur.success||r?.status===ur.failed||r?.status===ur.cancelled?function(s){return s?s.findLast(o=>!o.turn.request_id?.startsWith(Ew)&&Gp(o.turn)):void 0}(e)?.turn.request_id===t.request_id:!1}const y2=Z0(function(e){if(!e)return;const t=e.filter(r=>xu(r.turn)).map(r=>{return"response_text"in(n=r.turn)?n.response_text??"":"";var n}).filter(r=>r.length>0);return t.length>0?t.join(`
`):void 0}),v2=Z0(function(e){let t=[];if(!e)return t;for(const r of e){const n=r.turn;xu(n)&&n.structured_output_nodes&&(t=t.concat(n.structured_output_nodes))}return t});class b2{constructor(t){this._asyncMsgSender=t}static key="gitReferenceModel";_githubTimeoutMs=9e4;_currentRepositoryUrl=Be(void 0);async listUserRepos(t){try{const r=await this._asyncMsgSender.send({type:kr.listGithubReposForAuthenticatedUserRequest,data:{page:t}},this._githubTimeoutMs);return{repos:r.data.repos,hasNextPage:r.data.hasNextPage,nextPage:r.data.nextPage,error:r.data.error,isDevDeploy:r.data.isDevDeploy}}catch(r){return console.error("Failed to list user repos:",r),{repos:[],hasNextPage:!1,nextPage:0,error:`Error: ${r instanceof Error?r.message:String(r)}`}}}async listRepoBranches(t,r){try{const n=await this._asyncMsgSender.send({type:kr.listGithubRepoBranchesRequest,data:{repo:t,page:r}},this._githubTimeoutMs);return{branches:n.data.branches,hasNextPage:n.data.hasNextPage,nextPage:n.data.nextPage,error:n.data.error,isDevDeploy:n.data.isDevDeploy}}catch(n){return console.error("Failed to list repo branches:",n),{branches:[],hasNextPage:!1,nextPage:0,error:`Error: ${n instanceof Error?n.message:String(n)}`}}}async getGithubRepo(t){try{const r=await this._asyncMsgSender.send({type:kr.getGithubRepoRequest,data:{repo:t}},this._githubTimeoutMs);return{repo:r.data.repo,error:r.data.error,isDevDeploy:r.data.isDevDeploy}}catch(r){return console.error("Failed to get GitHub repo:",r),{repo:t,error:`Error: ${r instanceof Error?r.message:String(r)}`}}}async getCurrentLocalBranch(){try{return(await this._asyncMsgSender.send({type:kr.getCurrentLocalBranchRequest},1e4)).data.branch}catch(t){return void console.error("Failed to get current local branch:",t)}}async listBranches(t=""){try{return{branches:(await this._asyncMsgSender.send({type:kr.getGitBranchesRequest,data:{prefix:t}},1e4)).data.branches}}catch(r){return console.error("Failed to fetch branches:",r),{branches:[]}}}async getWorkspaceDiff(t){try{return(await this._asyncMsgSender.send({type:kr.getWorkspaceDiffRequest,data:{branchName:t}},1e4)).data.diff}catch(r){return console.error("Failed to get workspace diff:",r),""}}get currentRepositoryUrl(){return this._currentRepositoryUrl}async getRemoteUrl(){const t=Le(this._currentRepositoryUrl);if(t)return{remoteUrl:t};try{const r=await this._asyncMsgSender.send({type:kr.getRemoteUrlRequest},1e4);return r.data.error?this._currentRepositoryUrl.set(void 0):this._currentRepositoryUrl.set(r.data.remoteUrl),{remoteUrl:r.data.remoteUrl}}catch(r){return console.error("Failed to get remote url:",r),{remoteUrl:"",error:`Error: ${r instanceof Error?r.message:String(r)}`}}}async fetch(){try{await this._asyncMsgSender.send({type:kr.gitFetchRequest},1e4)}catch(t){console.error("Failed to fetch remote branch:",t)}}async isGitRepository(){try{return(await this._asyncMsgSender.send({type:kr.isGitRepositoryRequest},1e4)).data.isGitRepository}catch(t){return console.error("Failed to check if is git repository:",t),!1}}async isGithubAuthenticated(){try{return(await this._asyncMsgSender.send({type:kr.isGithubAuthenticatedRequest},this._githubTimeoutMs)).data.isAuthenticated}catch(t){return console.error("Failed to check GitHub authentication status:",t),!1}}async authenticateGithub(){try{const t=await this._asyncMsgSender.send({type:kr.authenticateGithubRequest},this._githubTimeoutMs);return{success:t.data.success,message:t.data.message,url:t.data.url}}catch(t){return console.error("Failed to authenticate with GitHub:",t),{success:!1,message:`Error: ${t instanceof Error?t.message:String(t)}`}}}async revokeGithubAccess(){try{const t=await this._asyncMsgSender.send({type:kr.revokeGithubAccessRequest},1e4);return{success:t.data.success,message:t.data.message}}catch(t){return console.error("Failed to revoke GitHub access:",t),{success:!1,message:`Error: ${t instanceof Error?t.message:String(t)}`}}}}const X0=[{key:"enter",name:"Focus Chat Input",description:"Focuses main chat input textarea",commandName:"focusChatInput"},{key:"enter",name:"Send Message",description:"Send message to agent or chat",commandName:"sendChatAction"},{key:"command+enter",name:"Send Message",description:"Send message to agent or chat",commandName:"sendChatAction"},{key:"ctrl+enter",name:"Send Message",description:"Send message to agent or chat",commandName:"sendChatAction"},{key:"enter",name:"Send Message edit",description:"Send edited message to agent or chat",commandName:"submitMessageEdit"},{key:"escape",name:"Cancel message edit",description:"Cancels current agent or chat response generation",commandName:"cancelMessageEdit"},{key:"escape",name:"Close",description:"Closes full size overlay",commandName:"closeFullSizeOverlay"},{key:"escape",name:"Cancel generation",description:"Cancels current agent or chat response generation",commandName:"cancelGeneration"},{key:"command+shift+backspace",name:"Cancel generation",description:"Cancels current agent or chat response generation",commandName:"cancelGeneration"},{key:"option+enter",name:"Resend Message",description:"Resend message after interruption",commandName:"resendMessage"},{key:"command+.",name:"Toggle Agent Chat Auto Mode",description:"Toggle chat agent mode and focus input",commandName:"toggleAgentMode"},{key:"command+n",name:"New Conversation",description:"Create a new conversation thread of current type",commandName:"newConversation, closeThreadsPanel"},{key:"command+up",name:"Scroll Conversation Up",description:"Scrolls conversation to previous message",commandName:"scrollConversationUp"},{key:"command+down",name:"Scroll Conversation Down",description:"Scrolls conversation to next message",commandName:"scrollConversationDown"},{key:"command+option+'",name:"Toggle Threads",description:"Toggle the threads panel open/closed (debug feature)",commandName:"toggleThreadsPanel"},{key:"option+'",name:"Close Threads Panel",description:"Close the threads panel (debug feature)",commandName:"closeThreadsPanel"},{key:"command+]",name:"Next Conversation",description:"Switch to next conversation (debug feature)",commandName:"goToNextConversation"},{key:"command+[",name:"Previous Conversation",description:"Switch to previous conversation (debug feature)",commandName:"goToPreviousConversation"},{key:"command+/",name:"Enhance Prompt",description:"Enhance the current prompt",commandName:"enhancePrompt"},{key:"command+option+/",name:"Toggle Ask Mode",description:"Toggle ask mode",commandName:"toggleAskMode"},{key:"command+shift+enter",name:"Allow tool",description:"Allow tool to run",commandName:"allowTool"},{key:"command+option+A",name:"Open Context Menu",description:"Open context menu",commandName:"openContextMenu"},{key:"command+option+,",name:"Open Guidelines Settings",description:"Open guidelines settings",commandName:"openRulesAndGuidelinesSettings"},{key:"command+shift+,",name:"Open Agent Memories",description:"Open Agent Memories",commandName:"openAgentMemories"},{key:"command+option+.",name:"Open Model Picker",description:"Open Model Picker",commandName:"openModalPicker"}];X0.reduce((e,t)=>e.concat(t.commandName.split(/,\s*/g)),[]);const Ph=X0,Nh=new Set;let _i;const Cl=".",zh=e=>e.replace(/\/+/g,Cl).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x2=(e,t=()=>{})=>{if(e.length===0)throw new Error("Scope must not be empty");const r={handler:t,scope:zh(e.join(Cl))};return Nh.add(r),()=>{Nh.delete(r)}},k2=e=>{let t=!1;const r=((s,i,o)=>{const a=zh(o),h=new RegExp(`^[\\.\\w-]*${a}$`),l=i?new RegExp(`^.*${zh(i)}.*$`):void 0;return[...s.values()].filter(c=>!(l&&!l.test(c.scope))&&h.test(c.scope)).sort((c,u)=>c.scope.length-u.scope.length)})(Nh,_i,e),n=new Event("keybinding-handling",{cancelable:!0});for(const s of r)if(s.handler(n),t=!0,n.defaultPrevented)break;return t},YR=e=>{const t=Ph.filter(r=>r.key===e);for(const r of t)k2(r.commandName)},ZR=e=>{if(_i)throw new Error(`Scope ${_i} is currently focused. Unfocus before focusing another scope.`);return _i=e.join(Cl),()=>{_i===e.join(Cl)&&(_i=void 0)}};function Uh(e,t){ut(t,!0);const r=n=>{const s=gw(),i=fw(s);return x2(i.concat(t.name),n)};_e(()=>{if(!t.isDisabled&&t.handler)return t.debounce?r(uu(t.handler,typeof t.debounce=="number"?t.debounce:300,{leading:!0,trailing:!0})):r(t.handler)}),pt()}const K0=navigator.platform.toUpperCase().indexOf("MAC")>=0,_2={command:"ctrl",option:"alt"},Q0=e=>K0?e:e.split("+").map(t=>_2[t]||t).join("+"),XR=e=>{if(K0)return e;const t=[];for(const r of e){const n=Q0(r.key);n!==r.key?t.push({...r,key:n}):t.push(r)}return t},w2={ctrl:"Ctrl",control:"Ctrl",option:"⌥",cmd:"⌘",command:"⌘",shift:"⇧",plus:"+",minus:"-",at:"@",up:"↑",down:"↓",enter:"⏎",esc:"⎋",escape:"⎋",backspace:"⌫",period:"."},C2=e=>e&&e.icon,S2=e=>e.split(/,\s+/).reduce((t,r,n)=>(n>0&&t.push("|"),t.concat(r.split("+").map(s=>({icon:w2[s]||s.toUpperCase()})))),[]);var T2=P('<span class="c-shortcut-hint__icon svelte-1mrhglx"> </span>'),$2=P('<span class="c-shortcut-hint__icon-delimeter svelte-1mrhglx"></span>'),M2=P('<span> <span class="c-shortcut-hint svelte-1mrhglx"></span></span>');function qh(e,t){ut(t,!0);let r=G(t,"keysOnly",3,!1);const n=O(()=>{const l=t.keybinding||Ph.filter(c=>{const u=c.commandName;if(!t.commandName||!u)return!1;const[p]=u.split(/,\s*/);return p===t.commandName})?.map(c=>c.key).sort().join(", ");return l?Q0(l):void 0}),s=O(()=>d(n)?S2(d(n)):[]),i=O(()=>d(n)&&Ph.find(l=>l.key===d(n))?.name||"");var o=M2(),a=R(o),h=Y(a);ge(h,21,()=>d(s),Re,(l,c)=>{var u=J(),p=W(u),g=m=>{var y=T2(),v=R(y);et(()=>at(v,d(c).icon)),b(m,y)},f=m=>{var y=$2();y.textContent=" or ",b(m,y)};z(p,m=>{C2(d(c))?m(g):m(f,!1)}),b(l,u)}),et(()=>at(a,`${(r()?"":d(i))??""} `)),b(e,o),pt()}const A2=new Intl.PluralRules("en-US");function J0(e,t,r){return A2.select(e)==="one"?t:r||`${t}s`}function on(e,t,r){return`${e} ${J0(e,t,r)}`}function ty(e){if(!e)return"";const t=e instanceof Date?e:new Date(e),r=new Date().getTime()-t.getTime(),n=Math.floor(r/1e3),s=Math.floor(n/60);return Math.floor(s/60)<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString([],{month:"short",day:"numeric"})+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function ey(e){if(!e)return"";const t=e instanceof Date?e:new Date(e);return t.toLocaleDateString([],{year:"numeric",month:"short",day:"numeric"})+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function KR(e,t){const r=e.getTime()-t.getTime();return Math.floor(r/864e5)}var E2=P("<div><!></div>");function L2(e,t){ut(t,!0);let r=G(t,"hasOverflow",15,!1),n=G(t,"stretch",3,!1),s=G(t,"containerElement",15),i=yt(!1),o=yt(!1);function a(){if(!s()||!r())return X(i,!1),void X(o,!1);const{scrollLeft:p,scrollWidth:g,clientWidth:f}=s(),m=g-f-2;X(i,p>0),X(o,m>0&&p<m,!0)}async function h(){if(await pa(),!s())return;const{scrollWidth:p,clientWidth:g}=s();r(p>g),a()}$s(()=>{h();const p=new ResizeObserver(()=>h());return s()&&p.observe(s()),()=>{p.disconnect()}});var l=E2();let c;var u=R(l);ke(u,()=>t.children??Ue),Kr(l,p=>s(p),()=>s()),et(p=>c=Me(l,1,"c-overflow-box__container svelte-3dmjsn",null,c,p),[()=>({"show-left-mask":d(i),"show-right-mask":d(o),stretch:n()})]),$e("wheel",l,function(p){p.deltaY&&p.currentTarget instanceof HTMLElement&&(p.currentTarget.scrollLeft+=p.deltaY+p.deltaX,p.preventDefault())}),$e("scroll",l,a),b(e,l),pt()}const B2={doHideStatusBars:!1,doHideSlashActions:!1,doHideAtMentions:!1,doHideNewThreadButton:!1,doHideMultimodalActions:!1,doHideContextBar:!1,doShowTurnSelector:!1},I2={doHideStatusBars:!0,doHideSlashActions:!0,doHideAtMentions:!0,doHideNewThreadButton:!0,doHideMultimodalActions:!0,doHideContextBar:!0,doShowTurnSelector:!0},F2="selectedTurnIndex";function D2(e){let t=B2;return e?.isActive&&(t=I2,e.isRemoteAgentSshWindow&&(t.doHideAtMentions=!1)),t}async function O2(e,t=1024){return new Promise((r,n)=>{const s=document.createElement("canvas"),i=s.getContext("2d"),o=new Image;o.onload=()=>{let a=o.width,h=o.height;a>h?a>t&&(h=Math.round(h*(t/a)),a=t):h>t&&(a=Math.round(a*(t/h)),h=t),s.width=a,s.height=h,i?(i.drawImage(o,0,0,a,h),s.toBlob(l=>{l!=null?r(l):n(new Error("Failed to create blob"))})):n(new Error("Could not get canvas context"))},o.onerror=()=>n(new Error("Failed to load image")),o.src=URL.createObjectURL(e)})}var R2=is("<svg><!></svg>");function P2(e,t){const r=ys(t,["children","$$slots","$$events","$$legacy"]);var n=R2();vs(n,()=>({xmlns:"http://www.w3.org/2000/svg","data-ds-icon":"fa",viewBox:"0 0 512 512",...r}));var s=R(n);Xi(s,()=>'<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416m0 464a256 256 0 1 0 0-512 256 256 0 1 0 0 512m113-303c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-111 111-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0z"/>',!0),b(e,n)}var N2=is("<svg><!></svg>");function z2(e,t){const r=ys(t,["children","$$slots","$$events","$$legacy"]);var n=N2();vs(n,()=>({xmlns:"http://www.w3.org/2000/svg","data-ds-icon":"fa",viewBox:"0 0 512 512",...r}));var s=R(n);Xi(s,()=>'<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M464 256c0-114.9-93.1-208-208-208v416c114.9 0 208-93.1 208-208M0 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0"/>',!0),b(e,n)}var U2=is("<svg><!></svg>");function q2(e,t){const r=ys(t,["children","$$slots","$$events","$$legacy"]);var n=U2();vs(n,()=>({xmlns:"http://www.w3.org/2000/svg","data-ds-icon":"fa",viewBox:"0 0 512 512",...r}));var s=R(n);Xi(s,()=>'<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416m0 464a256 256 0 1 0 0-512 256 256 0 1 0 0 512m-81-337c-9.4 9.4-9.4 24.6 0 33.9l47 47-47 47c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l47-47 47 47c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-47-47 47-47c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-47 47-47-47c-9.4-9.4-24.6-9.4-33.9 0"/>',!0),b(e,n)}var j2=is("<svg><!></svg>");function W2(e,t){const r=ys(t,["children","$$slots","$$events","$$legacy"]);var n=j2();vs(n,()=>({xmlns:"http://www.w3.org/2000/svg","data-ds-icon":"fa",viewBox:"0 0 512 512",...r}));var s=R(n);Xi(s,()=>'<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M464 256a208 208 0 1 0-416 0 208 208 0 1 0 416 0M0 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0"/>',!0),b(e,n)}function ry(e){switch(e){case Et.IN_PROGRESS:return"info";case Et.COMPLETE:return"success";case Et.CANCELLED:return"error";case Et.NOT_STARTED:default:return"neutral"}}function Jp(e){switch(e){case Et.IN_PROGRESS:return"In Progress";case Et.COMPLETE:return"Completed";case Et.CANCELLED:return"Cancelled";case Et.NOT_STARTED:default:return"Not Started"}}function ny(e){switch(e){case Et.IN_PROGRESS:return z2;case Et.COMPLETE:return P2;case Et.CANCELLED:return q2;case Et.NOT_STARTED:default:return W2}}function tg(e){if(!e)return;let t,r,n=-1;return function s(i,o){if(o>0&&i.state===Et.IN_PROGRESS&&((!i.subTasksData||i.subTasksData.length===0)&&(t=i),o>=n&&(r=i,n=o)),i.subTasksData&&i.subTasksData.length>0)for(const a of i.subTasksData)s(a,o+1)}(e,0),t||r}function eg(e){if(!e)return{completed:0,total:0};let t=0,r=0;return function n(s,i=0){if(i>0&&(r++,s.state===Et.COMPLETE&&t++),s.subTasksData&&s.subTasksData.length>0)for(const o of s.subTasksData)n(o,i+1)}(e),{completed:t,total:r}}function QR(e){if(!e)return{notStarted:0,inProgress:0,completed:0,cancelled:0};const t={notStarted:0,inProgress:0,completed:0,cancelled:0};return e.subTasksData&&e.subTasksData.forEach(function r(n){switch(n.state){case Et.NOT_STARTED:t.notStarted++;break;case Et.IN_PROGRESS:t.inProgress++;break;case Et.COMPLETE:t.completed++;break;case Et.CANCELLED:t.cancelled++}n.subTasksData&&n.subTasksData.forEach(r)}),t}class zo extends Event{constructor(t){super(zo.type),this.task=t}static type="task-added"}class Fn{constructor(t,r,n,s,i){this._chatModel=t,this._extensionClient=r,this._conversationModel=n,this._agentConversationModel=s,this._config=i,this.refreshTasksThrottled=Rh(()=>{this.refreshTasks().catch(console.error)},Fn.REFRESH_THROTTLE_MS),this.rootTaskUuid=Zn(this._conversationModel,o=>o.rootTaskUuid),this._disposables.push({dispose:this.rootTaskUuid.subscribe(async o=>{o?(this._extensionClient.setCurrentRootTaskUuid(o),await this.refreshTasks()):(this._rootTask.set(void 0),this._isLoadingTasks.set(!1),this._taskLoadError.set(null))})}),this._disposables.push({dispose:this._conversationModel.onNewConversation(async()=>{await this._maybeInitializeConversationRootTask()})}),this.canShowTaskList=Zn([this._config.enableTaskList,this._agentConversationModel.isCurrConversationAgentic],([o,a])=>o&&a),this._disposables.push({dispose:this._conversationModel.subscribe(()=>{this._handleConversationTaskToolUpdates()})}),t.isInitialized.then(async()=>{await this._maybeInitializeConversationRootTask();const o=Le(this._rootTask);o&&await this.cleanupCorruptedRootTasks(o)})}static key="currentConversationTaskStore";_eventTarget=new EventTarget;_lastSeenTaskToolKey=void 0;static createReadOnlyStore(t){const r=Be(t),n=new Map;if(t){const s=[t];for(;s.length>0;){const i=s.pop();n.set(i.uuid,i),i.subTasksData&&s.push(...i.subTasksData)}}return{rootTaskUuid:Be(t?.uuid),rootTask:r,activeTask:Be(tg(t)),taskProgress:Be(eg(t)),canShowTaskList:Be(!0),uuidToTask:Be(n),isLoadingTasks:Be(!1),taskLoadError:Be(null),createTask:()=>Promise.resolve(""),updateTask:()=>Promise.resolve(),getHydratedTask:()=>Promise.resolve(void 0),cloneHydratedTask:()=>Promise.resolve(void 0),cloneHydratedRootTask:()=>Promise.resolve(void 0),refreshTasks:()=>Promise.resolve(),refreshTasksThrottled:()=>{},updateTaskListStatuses:()=>Promise.resolve(),syncTaskListWithConversation:()=>Promise.resolve(),deleteTask:()=>Promise.resolve(),clearCompletedTasks:()=>Promise.resolve(),clearTaskList:()=>Promise.resolve(),getParentTask:()=>{},addNewTaskAfter:()=>Promise.resolve(void 0),saveHydratedTask:()=>Promise.resolve(),runHydratedTask:()=>Promise.resolve(),dispose:()=>{},handleMessageFromExtension:()=>!1,runAllTasks:()=>Promise.resolve(),exportTask:()=>Promise.resolve(),exportTasksToMarkdown:()=>Promise.resolve(),importTasksFromMarkdown:()=>Promise.resolve(),runTaskInSubAgent:()=>Promise.resolve(),isImportingExporting:Be(!1),onTaskAdded:()=>()=>{}}}_disposables=[];rootTaskUuid;_rootTask=Be(void 0);rootTask=Ai(this._rootTask);_isLoadingTasks=Be(!1);isLoadingTasks=Ai(this._isLoadingTasks);_taskLoadError=Be(null);taskLoadError=Ai(this._taskLoadError);activeTask=Zn(this._rootTask,t=>tg(t));taskProgress=Zn(this._rootTask,t=>eg(t));_isImportingExporting=Be(!1);isImportingExporting=Ai(this._isImportingExporting);_lastPendingOperation=Promise.resolve();canShowTaskList;static REFRESH_THROTTLE_MS=2e3;refreshTasksThrottled;_backlinks=Be({});uuidToTask=Zn(this._rootTask,t=>{const r=new Map;if(!t)return r;const n={},s=t?[t]:[];for(;s.length>0;){const i=s.pop();if(r.set(i.uuid,i),i.subTasksData){s.push(...i.subTasksData);for(const o of i.subTasks)n[o]=i.uuid}}return this._backlinks.set(n),r});dispose(){for(const t of this._disposables)t.dispose();this._disposables=[],this._lastSeenTaskToolKey=void 0}handleMessageFromExtension(t){return!1}async createTask(t="",r="",n=Le(this.rootTaskUuid),s){return this.withPendingState(async()=>{const i=await this._extensionClient.createTask(t,r,n,s);await this.refreshTasks();const o=Le(this.rootTask);return o&&this._eventTarget.dispatchEvent(new zo(o)),i})}async withPendingState(t){await this._lastPendingOperation;const r=t();return this._lastPendingOperation=r.then(()=>{}).catch(()=>{}),r}async updateTask(t,r,n){return this.withPendingState(async()=>{await this._extensionClient.updateTask(t,r,n),await this.refreshTasks()})}async getHydratedTask(t){return this._extensionClient.getHydratedTask(t)}async cleanupCorruptedRootTasks(t){if(!t||t.name!==qc)return!1;let r=!1;const n=[],s=[];if(t.subTasksData)for(const i of t.subTasksData)i.name===qc&&(r=!0,n.push(i.uuid));if(r){const i=[...t.subTasks.filter(o=>!n.includes(o)),...s];return await this._extensionClient.updateTask(t.uuid,{subTasks:i},lr.AGENT),await this.refreshTasks(),!0}return!1}async refreshTasks(){const t=Le(this.rootTaskUuid);this._isLoadingTasks.set(!0),this._taskLoadError.set(null);try{if(t){const r=await this._extensionClient.getHydratedTask(t);this._rootTask.set(r)}else this._rootTask.set(void 0)}catch(r){console.error("Failed to load tasks:",r),this._taskLoadError.set(r instanceof Error?r.message:"Failed to load tasks"),this._rootTask.set(void 0)}finally{this._isLoadingTasks.set(!1)}}async syncTaskListWithConversation(t){await this._updateTaskList(t,"Update the task list to reflect the current state of the conversation. Add any new tasks that have been created, update the status of existing tasks, and remove any tasks that are no longer relevant. The updated task list should reflect the current state of the conversation. If the tasks are not detailed enough, please add new tasks to fill in the steps you think are necessary, provide more details by adding more information to the description, or add sub-tasks",["You should add new tasks if any tasks are missing.","You should update the details of tasks if their details are outdated.","You should update the status of tasks if their status is outdated.","You should remove any tasks that are no longer relevant by not including them in the task list."])}async updateTaskListStatuses(t){await this._updateTaskList(t,"Update the status of each task in the list to reflect the current state of the conversation.",["You may update the status of tasks if necessary.","Do not add any new tasks.","Do not remove any tasks.","Do not update the details of any tasks."])}async _maybeInitializeConversationRootTask(){const t=Le(this.rootTaskUuid);if(t)return t;if(this._conversationModel.rootTaskUuid){const o=await this._extensionClient.getHydratedTask(this._conversationModel.rootTaskUuid);if(o)return this._rootTask.set(o),this._conversationModel.rootTaskUuid}const r=Le(this._conversationModel).id,n=qc,s=`${mw} ${r}`,i=await this._extensionClient.createTask(n,s);return this._conversationModel.rootTaskUuid=i,this._extensionClient.setCurrentRootTaskUuid(i),i}_handleConversationTaskToolUpdates(){const t=this._conversationModel.lastExchange;if(!t?.structured_output_nodes||!t.request_id)return;const r=t.structured_output_nodes.findLast(i=>i.type===wr.TOOL_USE&&i.tool_use&&this._isTaskToolName(i.tool_use.tool_name)),n=r?.tool_use?.tool_use_id;if(!n||n===this._lastSeenTaskToolKey)return;const s=this._conversationModel.getToolUseState(t.request_id,n);[dt.completed,dt.error,dt.cancelled].includes(s.phase)&&(this._lastSeenTaskToolKey=n,this.refreshTasks().catch(console.error))}_isTaskToolName(t){return[xr.addTasks,xr.updateTasks,xr.reorganizeTaskList].includes(t)}async _updateTaskList(t,r="",n=[]){try{const s=Le(this._rootTask);if(!s)return;const i=yw(s,t);if(!i)return;const o=qp(i),a=r+`
Follow these rules when updating the task list:
`+n?.join(`
`)+`
Maintain the hierarchical structure, given by the \`Example task list structure\`, with proper indentation. If a task is new, give it a UUID of "NEW_UUID". Always structure each task with [ ] for not started, [/] for in progress, [x] for completed, and [-] for cancelled. 
Example task list structure: 
`+vw+`

Current working task list - This is ACTUAL working task list to use, read from, and modify:
`+o+`

Only output the updated markdown without any additional explanation. Do not include any sentences before or after the markdown, ONLY the markdown itself. Do not use a tool call, just return the markdown in plaintext, without tools, or anything else. Just plaintext markdown.`,{responseText:h}=await this._conversationModel.sendSilentExchange({request_message:a,disableSelectedCodeDetails:!0});console.log("Updating task list for conversation",Le(this._conversationModel).id),console.log({instructions:a,currentTaskListMarkdown:o,enhancedTaskList:h});const l=Fh(h);l.uuid=i.uuid;const{created:c,updated:u,deleted:p}=await this._extensionClient.updateHydratedTask(l,lr.AGENT);console.log("Task tree update results:",{created:c,updated:u,deleted:p})}finally{await this.refreshTasks()}}getParentTask(t){const r=Le(this._backlinks)[t];if(r)return Le(this.uuidToTask).get(r)}async addNewTaskAfter(t){await this._lastPendingOperation;const r=this.getParentTask(t);if(r)return await this.createTask("","",r.uuid,t)}async deleteTask(t){await this._lastPendingOperation;const r=Le(this._backlinks)[t];if(r){const n=await this.getHydratedTask(r);if(!n)return;n.subTasks=n.subTasks.filter(s=>s!==t),n.subTasksData=n.subTasksData?.filter(s=>s.uuid!==t),await this.updateTask(n.uuid,{subTasks:n.subTasks},lr.USER)}else{const n=Le(this._rootTask);if(!n||!n.subTasks.includes(t))return;const s=n.subTasks.filter(i=>i!==t);await this.updateTask(n.uuid,{subTasks:s},lr.USER)}}async clearCompletedTasks(){await this._lastPendingOperation;const t=Le(this._rootTask);if(!t)return;const r=async n=>{if(!n.subTasksData||n.subTasksData.length===0)return;const s=n.subTasksData.filter(i=>i.state!==Et.COMPLETE);for(const i of s)await r(i);s.length!==n.subTasksData.length&&(n.subTasks=s.map(i=>i.uuid),n.subTasksData=s,await this.updateTask(n.uuid,{subTasks:n.subTasks},lr.USER))};await r(t),await this.refreshTasks()}async clearTaskList(){await this._lastPendingOperation;const t=Le(this._rootTask);t&&t.subTasks&&t.subTasks.length>0&&(await this.updateTask(t.uuid,{subTasks:[]},lr.USER),t.subTasks=[],t.subTasksData=[],await this.refreshTasks())}async saveHydratedTask(t){await this._extensionClient.updateHydratedTask(t,lr.USER),await this.refreshTasks()}async cloneHydratedRootTask(){const t=Le(this._rootTask);if(t)return await this.cloneHydratedTask(t)}async cloneHydratedTask(t){const r=jp(t),n=await this.createTask(r.name,r.description);if(n)return r.uuid=n,await this._extensionClient.updateHydratedTask(r,lr.USER),await this.getHydratedTask(n)}async runAllTasks(){const t=Le(this._rootTask);t&&this.runHydratedTask(t,{message:"Please run all tasks in the current task list to completion",includeTaskMention:!1})}async runHydratedTask(t,r){const n=this._chatModel.currentConversationId;if(await this._agentConversationModel.interruptAgent(),n!==this._chatModel.currentConversationId)return;if(r?.newConversation){const a=await this.cloneHydratedTask(t);if(!a)return;const h=await this.createTask(t.name,t.description);if(await this.saveHydratedTask({uuid:h,name:t.name,description:t.description,state:Et.NOT_STARTED,subTasks:[a.uuid],subTasksData:[a],lastUpdated:Date.now(),lastUpdatedBy:lr.USER}),n!==this._chatModel.currentConversationId)return;await this._chatModel.setCurrentConversation(void 0,!0,{newTaskUuid:h})}const s=[{type:"text",text:r?.message??"Please shift focus to work on the following task, and mark it as completed when you are done: "}],{includeTaskMention:i=!0}=r??{};i&&s.push({type:"mention",attrs:{id:`UUID:${t.uuid} NAME:${t.name} DESCRIPTION:${t.description}`,label:t.name,data:{...t,id:`UUID:${t.uuid} NAME:${t.name} DESCRIPTION:${t.description}`,label:t.name}}});const o={type:"doc",content:[{type:"paragraph",content:s}]};await this._chatModel.currentConversationModel.sendExchangeWithScroll({request_message:"",rich_text_json_repr:o,structured_request_nodes:this._chatModel.currentConversationModel.createStructuredRequestNodes(o),status:ur.draft,model_id:this._chatModel.currentConversationModel.selectedModelId??void 0}),await this.refreshTasks()}async exportTask(t,r){try{this._isImportingExporting.set(!0);const n=r?.format||"markdown";let s,i,o;if(n!=="markdown")throw new Error(`Unsupported export format: ${n}`);s=qp(t,{excludeUuid:!0,shallow:r?.shallow}),i="md",r?.fileName?o=r.fileName:o=`${(r?.baseName||t.name||"Task").replace(/[/:*?"<>|\s]/g,"_")}_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}.${i}`,this._extensionClient.createFile(s,o)}catch(n){console.error("Error exporting task:",n)}finally{this._isImportingExporting.set(!1)}}async exportTasksToMarkdown(){const t=Le(this._rootTask);if(!t)return;const r=Le(this._conversationModel).name||"Tasks";await this.exportTask(t,{baseName:r,format:"markdown"})}async importTasksFromMarkdown(){try{this._isImportingExporting.set(!0);const t=document.createElement("input");t.type="file",t.accept=".md,text/markdown",t.style.display="none";const r=new Promise(s=>{t.onchange=()=>{s(t.files?t.files[0]:null)},t.oncancel=()=>{s(null)}});document.body.appendChild(t),t.click();const n=await r;if(document.body.removeChild(t),n){const s=await n.text();await this._processImportedFileContent(s)}}catch(t){console.error("Error importing tasks from markdown:",t)}finally{this._isImportingExporting.set(!1)}}async _processImportedFileContent(t){try{if(!t.trim())return void console.error("Empty file content");const r=Fh(t,{excludeUuid:!0});if(!r)return void console.error("Failed to parse task tree from markdown");const n=Le(this._rootTask);if(!n)return void console.error("No root task found");const s=(r.subTasksData||[]).map(c=>jp(c,{keepUuid:!1})),i=n.subTasksData||[],o=n.subTasks||[],a=[...i,...s],h=[...o,...s.map(c=>c.uuid)],l={...n,subTasks:h,subTasksData:a};await this._extensionClient.updateHydratedTask(l,lr.USER),await this.refreshTasks()}catch(r){console.error("Error processing imported file content:",r)}}onTaskAdded(t){const r=n=>t(n);return this._eventTarget.addEventListener(zo.type,r),()=>{this._eventTarget.removeEventListener(zo.type,r)}}async runTaskInSubAgent(t){try{const r=Le(this.uuidToTask).get(t);if(!r)return void console.warn("Task not found:",t);const n=Le(this.rootTask);if(!n)return void console.warn("Root task not found");const s=[],i=(l,c,u)=>{if(l.uuid===c)return s.push(...u,l.name),!0;if(l.subTasksData){for(const p of l.subTasksData)if(i(p,c,[...u,l.name]))return!0}return!1};i(n,t,[]);const o={taskUuid:t,taskTree:r,surroundingContext:{rootTask:n,targetTaskPath:s.slice(1)}},a={id:Aa.getTaskMentionId(o),label:Aa.getTaskMentionLabel(o),name:Aa.getTaskMentionId(o),task:o},h={type:"doc",content:[{type:"paragraph",content:[{type:"text",text:`Please delegate this task${r.subTasksData?.length?` (includes ${on(r.subTasksData.length,"subtask")})`:""} to a sub-agent: `},{type:"mention",attrs:{id:a.id,label:a.label,name:a.name,data:a}},{type:"text",text:". Once the sub-agent has completed this work, you will integrate the results into our current workspace."}]}]};await this._conversationModel.sendExchangeWithScroll({request_message:Aa.getTaskOrchestratorPrompt(o),rich_text_json_repr:h,status:ur.draft,mentioned_items:[a]})}catch(r){console.error("Error creating task mention:",r)}}}function Dn(){return me(Fn.key)}function sy(e){Qr(Fn.key,e)}async function H2(e,t,r,n=1024){try{const s=function(o,a,h){const l=atob(o);let c=l.length;const u=new Uint8Array(c);for(;c--;)u[c]=l.charCodeAt(c);return new File([u],a,{type:h})}(e,t,r),i=await O2(s,n);return new Promise((o,a)=>{const h=new FileReader;h.onloadend=()=>{if(typeof h.result=="string"){const l=h.result.split(","),c=l.length>1?l[1]:h.result;o({dataUrl:c,mimeType:"image/png"})}else a(new Error("Failed to convert blob to data URL"))},h.onerror=l=>{a(new Error("FileReader error"))},h.readAsDataURL(i)})}catch(s){return console.error("Error scaling image:",s),{dataUrl:e,mimeType:r}}}async function V2(e,t=!0){if(!e.contentNodes||e.contentNodes.length===0)return e;const r=await async function(n,s=!0){const i=[];for(const o of n)if(o.type===_l.ContentImage&&o.image_content&&o.image_content.image_data){if(!s)continue;const a=o.image_content.image_data,h=o.image_content.media_type||"image/png",l=`image.${h.split("/")[1]||"png"}`,c=await H2(a,l,h);i.push({type:_l.ContentImage,image_content:{image_data:c.dataUrl,media_type:c.mimeType}})}else i.push(o);return i}(e.contentNodes,t);return{...e,contentNodes:r}}const G2={"save-file":`save-file tool call generation failed because tool input exceeded the token limit.
Please try again by limiting the file content to at most 300 lines. If more content needs to be added call save-file tool to edit the file after it has been created.
`,"str-replace-edit":`edit tool call generation failed because tool input exceeded the token limit.
Please try again by breaking down the edits into smaller chunks of at most 300 lines each. Then put as many of these chunks in a single tool call as possible up to the total limit of 300 lines.
`};class Ja{constructor(t,r,n,s,i,o){this._conversationModel=t,this._extensionClient=r,this._chatModel=n,this._config=s,this._soundModel=i,this._remoteAgentsModel=o;const a=this._conversationModel.subscribe(u=>{const p=u.lastExchange;if(p){const g=p.request_id;this._processLastExchange(g)}}),h=this._conversationModel.onNewConversation(()=>{this._extensionClient.closeAllToolProcesses(),this._enteredNewConversation=!0,this._sentExchanges.clear()}),l=this._conversationModel.onHistoryDelete(()=>{this.cancelActiveToolRun()}),c=this._conversationModel.onSendExchange(()=>{this._enteredNewConversation=!1});this._disposables.push({dispose:a},{dispose:h},{dispose:l},{dispose:c})}_disposables=[];static maxResultBytes=65536;static maxAllResultBytes=2*Ja.maxResultBytes;_activeTool=void 0;_activelyProcessingExchanges=new Set;_queuedProcessingRequests=new Set;_enteredNewConversation=!0;_sentExchanges=new Set;_processLastExchange=async t=>{if(this._activelyProcessingExchanges.has(t))this._queuedProcessingRequests.add(t);else do{this._queuedProcessingRequests.delete(t),this._activelyProcessingExchanges.add(t);try{await this._processLastExchangeInternal(t)}finally{this._activelyProcessingExchanges.delete(t)}}while(this._queuedProcessingRequests.has(t))};_processLastExchangeInternal=async t=>{let r=this._conversationModel.lastExchange;if(r==null||r.request_id!==t)return;let n=this._conversationModel.lastExchange?.structured_output_nodes?.filter(a=>a.type===wr.TOOL_USE)??[],s=this._conversationModel.lastExchange?.request_id;if(r.stop_reason===Yp.MAX_TOKENS&&this._handleMaxTokensRetry(t,r))return;const i=this._tryFindNextToolUseNodeToRun(n,t),o=this._mustRemoveToolsForMaxBytes(t,n);if(o!==void 0)return this._removeRemainingTools(t,n,o),void(this._shouldSendToolResultExchange(t)&&await this._sendToolResultExchange(t));if(i!==void 0&&t===s){const a=i.tool_use;if(a!=null){if(this._enteredNewConversation)return this._conversationModel.updateToolUseState({requestId:t,toolUseId:a.tool_use_id,phase:dt.runnable}),void(this._enteredNewConversation=!1);if(!await this._validateAndCheckTool(t,a.tool_use_id,a.tool_name,JSON.parse(a.input_json),this._conversationModel.chatHistory.reduce((h,l)=>(No(l)&&h.push(vu(l)),h),[])))return}}for(const a of bu(t,n,this._conversationModel,this._remoteAgentsModel)){const h=a.tool_use;if(h==null)continue;const l=this._conversationModel.getToolUseState(t,h.tool_use_id);this._markCancelledIfStale(t,h.tool_use_id,l.phase)}this._shouldSendToolResultExchange(t)&&await this._sendToolResultExchange(t)};_tryFindNextToolUseNodeToRun(t,r){for(const n of t){const s=n.tool_use;if(s==null)continue;const i=this._conversationModel.getToolUseState(r,s.tool_use_id);if(i.phase===dt.new)return n;if(i.phase===dt.runnable||i.phase===dt.checkingSafety||i.phase===dt.cancelling||i.phase===dt.running)return}}_shouldSendToolResultExchange(t){const r=this._sentExchanges.has(t),n=No(this._conversationModel.lastExchange),s=this._activeTool===void 0,i=this._conversationModel.lastExchange!==null&&Nw(this._conversationModel.lastExchange),o=this.allToolUsesResolved(t);return!r&&n&&s&&i&&o}allToolUsesResolved(t){const r=this._conversationModel.exchangeWithRequestId(t);if(!r)return!0;const n=r.structured_output_nodes?.filter(s=>s.type===wr.TOOL_USE)??[];for(const s of n){const i=s.tool_use;if(!i)continue;const o=this._conversationModel.getToolUseState(t,i.tool_use_id);if(o.phase!==dt.completed&&o.phase!==dt.cancelled&&o.phase!==dt.error)return!1}return!0}_mustRemoveToolsForMaxBytes(t,r){let n=0;for(let s=0;s<r.length;s++){const i=r[s].tool_use;if(i==null)continue;const o=this._conversationModel.getToolUseState(t,i.tool_use_id);if(o.result?.text&&(n+=new TextEncoder().encode(o.result.text).length,n>Ja.maxAllResultBytes))return s}}_removeRemainingTools(t,r,n){this._conversationModel.updateChatItem(t,{...this._conversationModel.lastExchange,structured_output_nodes:r.slice(0,n)})}_handleMaxTokensRetry=(t,r)=>{const n=Lw(r.structured_output_nodes),s=n?.tool_use;if(!s||n?.type!==wr.TOOL_USE_START)return!1;const i=this._conversationModel.chatHistory.filter(No).slice(-6).filter(h=>h.stop_reason===Yp.MAX_TOKENS&&h.structured_output_nodes?.some(l=>l.type===wr.TOOL_USE_START));if(i.length>2)return this._conversationModel.updateChatItem(t,{...r,response_text:"",display_error_message:`We encountered difficulties running the ${s.tool_name} tool after attempting ${i.length} different approaches.`,status:ur.failed}),this._conversationModel.updateToolUseState({requestId:t,toolUseId:s.tool_use_id,phase:dt.error}),!0;const o=s.tool_use_id;if(!this._conversationModel.getToolUseState(t,o).result?.isError){const h=function(l,c=0){const u=G2[l];if(!u)return"";switch(c){case 0:return u;case 1:return u+", be better this time.";default:return`${l} tool call generation failed because tool input exceeded the token limit. Take some care in making smaller chunks`}}(s.tool_name,i.length);this._conversationModel.updateToolUseState({requestId:t,toolUseId:o,phase:dt.error,result:{text:h,isError:!0}}),this._sendToolResultExchange(t)}return!0};_validateAndCheckTool=async(t,r,n,s,i)=>{if(this._activeTool!==void 0)return console.error("_validateAndCheckTool called while another tool is active",this._activeTool),!1;this._activeTool={id:r,requestId:t,phase:dt.checkingSafety},this._conversationModel.updateToolUseState({requestId:t,toolUseId:r,phase:dt.checkingSafety});const o=await this._extensionClient.getToolIdentifier(n);if(!o.found)return this._activeTool=void 0,this._reportToolError(t,r,`Tool "${n}" does not exist`),!1;if(o.toolIdentifier.hostName===bw.mcpHost){const l=this._conversationModel.lastExchange;if(l?.structured_output_nodes){const c=l.structured_output_nodes.find(u=>u.type===wr.TOOL_USE&&u.tool_use?.tool_use_id===r);c?.tool_use&&o.mcpToolName&&o.mcpServerName&&(c.tool_use.mcp_server_name=o.mcpServerName,c.tool_use.mcp_tool_name=o.mcpToolName)}}const a={toolName:n,input:s,agentMode:Le(this._chatModel.agentExecutionMode)},h=(await this._extensionClient.checkSafe(a)).isSafe;if(this._activeTool=void 0,h)return await this.callTool(t,r,n,s,i,this._conversationModel.id);this._conversationModel.updateToolUseState({requestId:t,toolUseId:r,phase:dt.runnable});try{await this._soundModel.refreshSettings(),await this._soundModel.playAgentComplete()}catch(l){console.warn("Failed to play tool approval sound:",l)}return!1};_reportToolError=(t,r,n)=>{this._conversationModel.updateToolUseState({requestId:t,toolUseId:r,phase:dt.error,result:{isError:!0,text:n}})};_generateToolResultNodesFromState(t){let r=this._conversationModel.lastExchange?.structured_output_nodes?.filter(i=>i.type===wr.TOOL_USE)??[],n=r.map(i=>this._conversationModel.getToolUseState(t,i.tool_use?.tool_use_id)),s=[];for(let i=0;i<n.length;i++){const o=n[i],a=r[i].tool_use?.tool_use_id,h=r[i].id;if(a===void 0||o.phase!==dt.cancelled&&o.phase!==dt.completed&&o.phase!==dt.error)continue;const l=Bw(o,a,this._config.enableDebugFeatures);l&&s.push({toolResult:l,toolUseNodeId:h})}return s}_sendToolResultExchange=async t=>{this._sentExchanges.add(t);const r=this._conversationModel.lastExchange?.request_id,n=this._generateToolResultNodesFromState(t);r===t&&n&&n.length>0?await this._conversationModel.sendExchange({request_message:"",status:ur.draft,structured_request_nodes:n.map(({toolResult:s,toolUseNodeId:i})=>({id:i,type:zw.TOOL_RESULT,tool_result_node:s})),model_id:this._conversationModel.selectedModelId??void 0}):n?this._extensionClient.reportError({originalRequestId:t,sanitizedMessage:"Tried to send tool result after conversation advanced",stackTrace:"",diagnostics:[{key:"tool_use_id",value:""}]}):this._extensionClient.reportError({originalRequestId:t,sanitizedMessage:"Tried to send tool result, but no tool result found",stackTrace:"",diagnostics:[{key:"tool_use_id",value:""},{key:"request_id",value:t}]})};approveTool=async(t,r,n,s,i,o)=>{this._conversationModel.lastExchange||console.error("Tried to run a tool for an exchange that is no longer available"),await this.callTool(t,r,n,s,i,o),await this._processLastExchange(t)};callTool=async(t,r,n,s,i,o)=>{if(this._activeTool!==void 0)return console.error("callTool called while another tool is active","tried to run:",r,"active tool:",this._activeTool),!1;this._activeTool={id:r,requestId:t,phase:dt.running},this._conversationModel.updateToolUseState({requestId:t,toolUseId:r,phase:dt.running});try{const a=Iw(await this._extensionClient.callTool(t,r,n,s,i,o),Ja.maxResultBytes),h=await V2(a,this._config.enableDebugFeatures),l=this._conversationModel.getToolUseState(t,r);if(l.phase===dt.new||l.phase===dt.cancelled)return!1;if(l.phase===dt.cancelling)return this._conversationModel.updateToolUseState({requestId:t,toolUseId:r,phase:dt.cancelled,result:h}),!1;let c=h.isError?dt.error:dt.completed;return this._conversationModel.updateToolUseState({requestId:t,toolUseId:r,phase:c,result:h}),!0}catch(a){const h=this._conversationModel.getToolUseState(t,r);if(h.phase===dt.new||h.phase===dt.cancelled)return!1;const l=a instanceof Error?a.message:String(a);return h.phase===dt.cancelling?(this._conversationModel.updateToolUseState({requestId:t,toolUseId:r,phase:dt.cancelled,result:{isError:!0,text:l}}),!1):(this._conversationModel.updateToolUseState({requestId:t,toolUseId:r,phase:dt.error,result:{isError:!0,text:l}}),!1)}finally{this._activeTool?.id===r&&this._activeTool?.requestId===t&&(this._activeTool=void 0)}};cancelToolRun=async(t,r)=>{this._remoteAgentsModel&&this._remoteAgentsModel.isActive&&await this._remoteAgentsModel.interruptAgent(),this._activeTool!==void 0&&this._activeTool.requestId===t&&this._activeTool.id===r?(this._activeTool={id:r,requestId:t,phase:dt.cancelling},this._conversationModel.updateToolUseState({requestId:t,toolUseId:r,phase:dt.cancelling}),await this._extensionClient.cancelToolRun(t,r),this._activeTool?.id===r&&this._activeTool?.requestId===t&&(this._activeTool=void 0),await this._processLastExchange(t)):console.error("cancelToolRun called while another tool is active","tried to cancel:",r,"active tool:",this._activeTool)};skipToolRun=async(t,r)=>{this._activeTool===void 0?(this._conversationModel.updateToolUseState({requestId:t,toolUseId:r,phase:dt.cancelled,result:{isError:!0,text:"Tool did not run. User clicked `Skip` to cancel."}}),await this._processLastExchange(t)):console.error("skipToolRun called while another tool is active","tried to cancel:",r,"active tool:",this._activeTool)};_markCancelledIfStale=(t,r,n)=>{this._activeTool!==void 0&&this._activeTool.id===r&&this._activeTool.requestId===t||n!==dt.new&&n!==dt.checkingSafety&&n!==dt.cancelling&&n!==dt.running||this._conversationModel.updateToolUseState({requestId:t,toolUseId:r,phase:dt.cancelled})};cancelActiveToolRun=async()=>{this._activeTool!==void 0&&await this.cancelToolRun(this._activeTool.requestId,this._activeTool.id)};interruptAllTools=async()=>{Fw(this._conversationModel),await this.cancelActiveToolRun();const t=this._conversationModel.lastExchange;t&&!Uw(t)&&this._conversationModel.addChatItem({request_id:crypto.randomUUID(),status:ur.cancelled,chatItemType:V0.agenticTurnDelimiter})};interruptToolsConversation=async()=>{await this._conversationModel.cancelMessage(),await this.interruptAllTools()};async getToolCallCheckpoint(t){try{return await this._extensionClient.getToolCallCheckpoint(t)}catch(r){return void console.error("Failed to get tool call checkpoint:",r)}}dispose=()=>{this._disposables.forEach(t=>t.dispose())}}function JR(e,t=100){setTimeout(()=>{const r=document?.getElementById(`task-${e}`);r&&r.scrollIntoView({behavior:"smooth",block:"center"})},t)}function tl(e,t=0,r=250){setTimeout(()=>{const n=document?.getElementById(`task-${e}`);n&&(n.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{n?.querySelector("input")?.focus()},r))},t)}var rg,ng,Y2=function(){if(ng)return rg;ng=1;var e=new Error("Element already at target scroll position"),t=new Error("Scroll cancelled"),r=Math.min,n=Date.now;function s(a){return function(h,l,c,u){typeof(c=c||{})=="function"&&(u=c,c={}),typeof u!="function"&&(u=o);var p=n(),g=h[a],f=c.ease||i,m=isNaN(c.duration)?350:+c.duration,y=!1;return g===l?u(e,h[a]):requestAnimationFrame(function v(x){if(y)return u(t,h[a]);var k=n(),_=r(1,(k-p)/m),w=f(_);h[a]=w*(l-g)+g,_<1?requestAnimationFrame(v):requestAnimationFrame(function(){u(null,h[a])})}),function(){y=!0}}}function i(a){return .5*(1-Math.cos(Math.PI*a))}function o(){}return rg={left:s("scrollLeft"),top:s("scrollTop")}}();const Z2=ku(Y2);function X2(e,{reversed:t=!0}={}){const{scrollTop:r,clientHeight:n,scrollHeight:s}=e;return t?Math.abs(r):s-r-n}function tP(e,{buffer:t=40,reversed:r=!0}={}){return X2(e,{reversed:r})<=t}const K2=350;function sg(e,t={}){const{bottom:r,topBuffer:n}=t,s=n??0;return r?e.offsetTop+e.offsetHeight+s:e.offsetTop+s}function ig(e,t,r={}){if(function(n,s,i={}){const{disableScrollUp:o,disableScrollDown:a}=i,h=sg(s,i);return!(o&&h<n.scrollTop||a&&h>n.scrollTop)}(e,t,r))return iy(e,sg(t,r),r)}function eP(e,t={}){return iy(e,function(r,{reversed:n=!0}={}){return n?0:r.scrollHeight}(e,{reversed:t.reversed??!1}),t)}function iy(e,t,r={}){if(r.smooth)return Z2.top(e,t,{duration:r.scrollDuration??K2},r.onScrollFinish);e.scroll({top:t,behavior:"instant"}),r.onScrollFinish?.()}var Sl=Array.isArray;function oy(e){return e}var Q2="[object AsyncFunction]",J2="[object Function]",tC="[object GeneratorFunction]",eC="[object Proxy]";function Su(e){if(!li(e))return!1;var t=io(e);return t==J2||t==tC||t==Q2||t==eC}var og,Hc=os["__core-js_shared__"],ag=(og=/[^.]+$/.exec(Hc&&Hc.keys&&Hc.keys.IE_PROTO||""))?"Symbol(src)_1."+og:"",rC=Function.prototype.toString;function hi(e){if(e!=null){try{return rC.call(e)}catch{}try{return e+""}catch{}}return""}var nC=/^\[object .+?Constructor\]$/,sC=Function.prototype,iC=Object.prototype,oC=sC.toString,aC=iC.hasOwnProperty,lC=RegExp("^"+oC.call(aC).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cC(e){return!(!li(e)||(t=e,ag&&ag in t))&&(Su(e)?lC:nC).test(hi(e));var t}function di(e,t){var r=function(n,s){return n?.[s]}(e,t);return cC(r)?r:void 0}var jh=di(os,"WeakMap"),lg=Object.create,hC=function(){function e(){}return function(t){if(!li(t))return{};if(lg)return lg(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function qs(){}function dC(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var uC=Date.now;function pC(e){return function(){return e}}var cg,Vc,Gc,Tl=function(){try{var e=di(Object,"defineProperty");return e({},"",{}),e}catch{}}(),gC=Tl?function(e,t){return Tl(e,"toString",{configurable:!0,enumerable:!1,value:pC(t),writable:!0})}:oy,fC=(cg=gC,Vc=0,Gc=0,function(){var e=uC(),t=16-(e-Gc);if(Gc=e,t>0){if(++Vc>=800)return arguments[0]}else Vc=0;return cg.apply(void 0,arguments)}),mC=9007199254740991,yC=/^(?:0|[1-9]\d*)$/;function ay(e,t){var r=typeof e;return!!(t=t??mC)&&(r=="number"||r!="symbol"&&yC.test(e))&&e>-1&&e%1==0&&e<t}function Tu(e,t,r){t=="__proto__"&&Tl?Tl(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function pc(e,t){return e===t||e!=e&&t!=t}var vC=Object.prototype.hasOwnProperty;function bC(e,t,r){var n=e[t];vC.call(e,t)&&pc(n,r)&&(r!==void 0||t in e)||Tu(e,t,r)}function xC(e,t,r,n){var s=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],h=void 0;h===void 0&&(h=e[a]),s?Tu(r,a,h):bC(r,a,h)}return r}var hg=Math.max;function kC(e,t,r){return t=hg(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=hg(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=n[s];return a[t]=r(o),function(h,l,c){switch(c.length){case 0:return h.call(l);case 1:return h.call(l,c[0]);case 2:return h.call(l,c[0],c[1]);case 3:return h.call(l,c[0],c[1],c[2])}return h.apply(l,c)}(e,this,a)}}function _C(e,t){return fC(kC(e,t,oy),e+"")}var wC=9007199254740991;function ly(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=wC}function gc(e){return e!=null&&ly(e.length)&&!Su(e)}function CC(e,t,r){if(!li(r))return!1;var n=typeof t;return!!(n=="number"?gc(r)&&ay(t,r.length):n=="string"&&t in r)&&pc(r[t],e)}function SC(e){return _C(function(t,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(s--,i):void 0,o&&CC(r[0],r[1],o)&&(i=s<3?void 0:i,s=1),t=Object(t);++n<s;){var a=r[n];a&&e(t,a,n,i)}return t})}var TC=Object.prototype;function fc(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||TC)}function dg(e){return ga(e)&&io(e)=="[object Arguments]"}var cy=Object.prototype,$C=cy.hasOwnProperty,MC=cy.propertyIsEnumerable,$l=dg(function(){return arguments}())?dg:function(e){return ga(e)&&$C.call(e,"callee")&&!MC.call(e,"callee")},hy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ug=hy&&typeof module=="object"&&module&&!module.nodeType&&module,pg=ug&&ug.exports===hy?os.Buffer:void 0,$u=(pg?pg.isBuffer:void 0)||function(){return!1},qe={};function AC(e){return function(t){return e(t)}}qe["[object Float32Array]"]=qe["[object Float64Array]"]=qe["[object Int8Array]"]=qe["[object Int16Array]"]=qe["[object Int32Array]"]=qe["[object Uint8Array]"]=qe["[object Uint8ClampedArray]"]=qe["[object Uint16Array]"]=qe["[object Uint32Array]"]=!0,qe["[object Arguments]"]=qe["[object Array]"]=qe["[object ArrayBuffer]"]=qe["[object Boolean]"]=qe["[object DataView]"]=qe["[object Date]"]=qe["[object Error]"]=qe["[object Function]"]=qe["[object Map]"]=qe["[object Number]"]=qe["[object Object]"]=qe["[object RegExp]"]=qe["[object Set]"]=qe["[object String]"]=qe["[object WeakMap]"]=!1;var dy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Uo=dy&&typeof module=="object"&&module&&!module.nodeType&&module,Yc=Uo&&Uo.exports===dy&&sw.process,gg=function(){try{var e=Uo&&Uo.require&&Uo.require("util").types;return e||Yc&&Yc.binding&&Yc.binding("util")}catch{}}(),fg=gg&&gg.isTypedArray,Mu=fg?AC(fg):function(e){return ga(e)&&ly(e.length)&&!!qe[io(e)]},EC=Object.prototype.hasOwnProperty;function LC(e,t){var r=Sl(e),n=!r&&$l(e),s=!r&&!n&&$u(e),i=!r&&!n&&!s&&Mu(e),o=r||n||s||i,a=o?function(c,u){for(var p=-1,g=Array(c);++p<c;)g[p]=u(p);return g}(e.length,String):[],h=a.length;for(var l in e)!t&&!EC.call(e,l)||o&&(l=="length"||s&&(l=="offset"||l=="parent")||i&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||ay(l,h))||a.push(l);return a}function uy(e,t){return function(r){return e(t(r))}}var BC=uy(Object.keys,Object),IC=Object.prototype.hasOwnProperty;function FC(e){if(!fc(e))return BC(e);var t=[];for(var r in Object(e))IC.call(e,r)&&r!="constructor"&&t.push(r);return t}var DC=Object.prototype.hasOwnProperty;function OC(e){if(!li(e))return function(s){var i=[];if(s!=null)for(var o in Object(s))i.push(o);return i}(e);var t=fc(e),r=[];for(var n in e)(n!="constructor"||!t&&DC.call(e,n))&&r.push(n);return r}function py(e){return gc(e)?LC(e,!0):OC(e)}var fo=di(Object,"create"),RC=Object.prototype.hasOwnProperty,PC=Object.prototype.hasOwnProperty;function js(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ea(e,t){for(var r=e.length;r--;)if(pc(e[r][0],t))return r;return-1}js.prototype.clear=function(){this.__data__=fo?fo(null):{},this.size=0},js.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},js.prototype.get=function(e){var t=this.__data__;if(fo){var r=t[e];return r==="__lodash_hash_undefined__"?void 0:r}return RC.call(t,e)?t[e]:void 0},js.prototype.has=function(e){var t=this.__data__;return fo?t[e]!==void 0:PC.call(t,e)},js.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=fo&&t===void 0?"__lodash_hash_undefined__":t,this};var NC=Array.prototype.splice;function Xn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Xn.prototype.clear=function(){this.__data__=[],this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,r=Ea(t,e);return!(r<0)&&(r==t.length-1?t.pop():NC.call(t,r,1),--this.size,!0)},Xn.prototype.get=function(e){var t=this.__data__,r=Ea(t,e);return r<0?void 0:t[r][1]},Xn.prototype.has=function(e){return Ea(this.__data__,e)>-1},Xn.prototype.set=function(e,t){var r=this.__data__,n=Ea(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var Xo=di(os,"Map");function La(e,t){var r=e.__data__;return function(n){var s=typeof n;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?n!=="__proto__":n===null}(t)?r[typeof t=="string"?"string":"hash"]:r.map}function us(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}us.prototype.clear=function(){this.size=0,this.__data__={hash:new js,map:new(Xo||Xn),string:new js}},us.prototype.delete=function(e){var t=La(this,e).delete(e);return this.size-=t?1:0,t},us.prototype.get=function(e){return La(this,e).get(e)},us.prototype.has=function(e){return La(this,e).has(e)},us.prototype.set=function(e,t){var r=La(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function ya(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var o=e.apply(this,n);return r.cache=i.set(s,o)||i,o};return r.cache=new(ya.Cache||us),r}ya.Cache=us;var gy=uy(Object.getPrototypeOf,Object),zC="[object Object]",UC=Function.prototype,qC=Object.prototype,fy=UC.toString,jC=qC.hasOwnProperty,WC=fy.call(Object);function wi(e){var t=this.__data__=new Xn(e);this.size=t.size}wi.prototype.clear=function(){this.__data__=new Xn,this.size=0},wi.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},wi.prototype.get=function(e){return this.__data__.get(e)},wi.prototype.has=function(e){return this.__data__.has(e)},wi.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Xn){var n=r.__data__;if(!Xo||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new us(n)}return r.set(e,t),this.size=r.size,this};var my=typeof exports=="object"&&exports&&!exports.nodeType&&exports,mg=my&&typeof module=="object"&&module&&!module.nodeType&&module,yg=mg&&mg.exports===my?os.Buffer:void 0,vg=yg?yg.allocUnsafe:void 0;function HC(e,t){if(t)return e.slice();var r=e.length,n=vg?vg(r):new e.constructor(r);return e.copy(n),n}var Wh=di(os,"DataView"),Hh=di(os,"Promise"),Vh=di(os,"Set"),bg="[object Map]",xg="[object Promise]",kg="[object Set]",_g="[object WeakMap]",wg="[object DataView]",VC=hi(Wh),GC=hi(Xo),YC=hi(Hh),ZC=hi(Vh),XC=hi(jh),Rs=io;(Wh&&Rs(new Wh(new ArrayBuffer(1)))!=wg||Xo&&Rs(new Xo)!=bg||Hh&&Rs(Hh.resolve())!=xg||Vh&&Rs(new Vh)!=kg||jh&&Rs(new jh)!=_g)&&(Rs=function(e){var t=io(e),r=t=="[object Object]"?e.constructor:void 0,n=r?hi(r):"";if(n)switch(n){case VC:return wg;case GC:return bg;case YC:return xg;case ZC:return kg;case XC:return _g}return t});var Cg=os.Uint8Array;function KC(e){var t=new e.constructor(e.byteLength);return new Cg(t).set(new Cg(e)),t}function QC(e,t){var r=t?KC(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function JC(e){return typeof e.constructor!="function"||fc(e)?{}:hC(gy(e))}var tS=function(e,t,r){for(var n=-1,s=Object(e),i=r(e),o=i.length;o--;){var a=i[++n];if(t(s[a],a,s)===!1)break}return e};function Gh(e,t,r){(r!==void 0&&!pc(e[t],r)||r===void 0&&!(t in e))&&Tu(e,t,r)}function eS(e){return ga(e)&&gc(e)}function Yh(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]}function rS(e,t,r,n,s,i,o){var a=Yh(e,r),h=Yh(t,r),l=o.get(h);if(l)Gh(e,r,l);else{var c,u=i?i(a,h,r+"",e,t,o):void 0,p=u===void 0;if(p){var g=Sl(h),f=!g&&$u(h),m=!g&&!f&&Mu(h);u=h,g||f||m?Sl(a)?u=a:eS(a)?u=dC(a):f?(p=!1,u=HC(h,!0)):m?(p=!1,u=QC(h,!0)):u=[]:function(y){if(!ga(y)||io(y)!=zC)return!1;var v=gy(y);if(v===null)return!0;var x=jC.call(v,"constructor")&&v.constructor;return typeof x=="function"&&x instanceof x&&fy.call(x)==WC}(h)||$l(h)?(u=a,$l(a)?u=xC(c=a,py(c)):li(a)&&!Su(a)||(u=JC(h))):p=!1}p&&(o.set(h,u),s(u,h,n,i,o),o.delete(h)),Gh(e,r,u)}}function yy(e,t,r,n,s){e!==t&&tS(t,function(i,o){if(s||(s=new wi),li(i))rS(e,t,o,r,yy,n,s);else{var a=n?n(Yh(e,o),i,o+"",e,t,s):void 0;a===void 0&&(a=i),Gh(e,o,a)}},py)}var nS=Object.prototype.hasOwnProperty;function Sg(e){if(e==null)return!0;if(gc(e)&&(Sl(e)||typeof e=="string"||typeof e.splice=="function"||$u(e)||Mu(e)||$l(e)))return!e.length;var t=Rs(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(fc(e))return!FC(e).length;for(var r in e)if(nS.call(e,r))return!1;return!0}var sS=SC(function(e,t,r){yy(e,t,r)}),iS=P('<div class="c-edit-change-summary svelte-10rin2e"><!> <!></div>'),oS=P('<div class="c-edit-change-summary svelte-10rin2e"><!></div>');function Au(e,t){ut(t,!0);const r=f=>{Ka(f,{color:"success",get size(){return o()},variant:"soft",children:(m,y)=>{var v=st();et(()=>at(v,`+${s()??""}`)),b(m,v)},$$slots:{default:!0}})},n=f=>{Ka(f,{color:"error",get size(){return o()},variant:"soft",children:(m,y)=>{var v=st();et(()=>at(v,`-${i()??""}`)),b(m,v)},$$slots:{default:!0}})};let s=G(t,"totalAddedLines",3,0),i=G(t,"totalRemovedLines",3,0),o=G(t,"size",3,0),a=G(t,"tooltips",3,!1),h=G(t,"loading",3,!1);function l(f,m){return m===0?"":`${on(m,"line")} ${f}`}var c=J(),u=W(c),p=f=>{},g=f=>{var m=J(),y=W(m),v=k=>{var _=iS(),w=R(_),S=F=>{var A=J(),B=W(A),M=E=>{{let D=O(()=>l("added",s()));fe(E,{get content(){return d(D)},children:(I,N)=>{r(I)},$$slots:{default:!0}})}},$=E=>{r(E)};z(B,E=>{a()?E(M):E($,!1)}),b(F,A)};z(w,F=>{s()>0&&F(S)});var T=Y(w,2),L=F=>{var A=J(),B=W(A),M=E=>{{let D=O(()=>l("removed",i()));fe(E,{get content(){return d(D)},children:(I,N)=>{n(I)},$$slots:{default:!0}})}},$=E=>{n(E)};z(B,E=>{a()?E(M):E($,!1)}),b(F,A)};z(T,F=>{i()>0&&F(L)}),rs(3,_,()=>dw,()=>({duration:150,start:.9})),b(k,_)},x=k=>{var _=oS(),w=R(_);Ka(w,{color:"neutral",get size(){return o()},variant:"soft",children:(S,T)=>{var L=st("No changes");b(S,L)},$$slots:{default:!0}}),b(k,_)};z(y,k=>{s()>0||i()>0?k(v):k(x,!1)},!0),b(f,m)};z(u,f=>{h()?f(p):f(g,!1)}),b(e,c),pt()}function Mo(e){switch(e){case Et.IN_PROGRESS:return"In Progress";case Et.COMPLETE:return"Completed";case Et.CANCELLED:return"Cancelled";case Et.NOT_STARTED:default:return"Not Started"}}function rP(e){if(!e)return{[Et.NOT_STARTED]:0,[Et.IN_PROGRESS]:0,[Et.COMPLETE]:0,[Et.CANCELLED]:0};const t={[Et.NOT_STARTED]:0,[Et.IN_PROGRESS]:0,[Et.COMPLETE]:0,[Et.CANCELLED]:0};return e.subTasksData&&e.subTasksData.forEach(function r(n){switch(n.state){case Et.NOT_STARTED:t[Et.NOT_STARTED]++;break;case Et.IN_PROGRESS:t[Et.IN_PROGRESS]++;break;case Et.COMPLETE:t[Et.COMPLETE]++;break;case Et.CANCELLED:t[Et.CANCELLED]++}n.subTasksData&&n.subTasksData.forEach(r)}),t}const vy="taskMetricsContext";var Zc,aS=((Zc=aS||{}).v1="v1",Zc.v2="v2",Zc);class nP{chatModel;taskStore;reportedMetrics=new Set;version;constructor(t){this.chatModel=t.chatModel,this.taskStore=t.taskStore,this.version=t.version||"v2"}getConversationId(){const t=this.chatModel.currentConversationModel.chatHistory;return t.length>0&&t[t.length-1].request_id||this.chatModel.currentConversationModel.id}getRootTask(){const t=this.taskStore.rootTask;return Le(t)}buildTaskListUsageData(t,r=mi.user){const n=this.getRootTask();return{action:t,totalTasksCount:(n?function(s){if(!s)return{completed:0,total:0};let i=0,o=0;return function a(h,l=0){if(l>0&&(o++,h.state===Et.COMPLETE&&i++),h.subTasksData&&h.subTasksData.length>0)for(const c of h.subTasksData)a(c,l+1)}(s),{completed:i,total:o}}(n):{total:0}).total,triggeredBy:r}}reportMetric(t,r=mi.user,n){try{const s={...this.buildTaskListUsageData(t,r),taskListVersion:this.version,...n},i=this.getConversationId(),o={taskListUsageData:s};this.chatModel.currentConversationModel.extensionClient.reportAgentSessionEvent({eventName:xw.taskListUsage,conversationId:i,eventData:o})}catch(s){console.error("Failed to report task metric:",s)}}reportViewTaskList(t=!0){const r="viewTaskList";t&&this.reportedMetrics.has(r)||(this.reportMetric(Tr.viewTaskList),t&&this.reportedMetrics.add(r))}reportUpdateTaskStatus(){this.reportMetric(Tr.updateTaskStatus)}reportUpdateTaskName(){this.reportMetric(Tr.updateTaskName)}reportUpdateTaskDescription(){this.reportMetric(Tr.updateTaskDescription)}reportAddTask(){this.reportMetric(Tr.addTask)}reportAddSubtask(){this.reportMetric(Tr.addSubtask)}reportDeleteTask(){this.reportMetric(Tr.deleteTask)}reportReorganizeTaskList(){this.reportMetric(Tr.reorganizeTaskList)}reportRunSingleTask(){this.reportMetric(Tr.runSingleTask)}reportRunAllTasks(){this.reportMetric(Tr.runAllTasks)}reportExportTaskList(){this.reportMetric(Tr.exportTaskList)}reportImportTaskList(){this.reportMetric(Tr.importTaskList)}reportSyncTaskList(){this.reportMetric(Tr.syncTaskList)}reportClearCompletedTasks(){this.reportMetric(Tr.clearCompletedTasks,mi.user)}reportClearAllTasks(){this.reportMetric(Tr.clearAllTasks,mi.user)}reportContinueTasksInNewChat(){this.reportMetric(Tr.continueTasksInNewChat,mi.user)}reportCustomAction(t,r=mi.user,n){this.reportMetric(t,r,n)}resetReportedMetrics(){this.reportedMetrics.clear()}getVersion(){return this.version}}function ui(){return me(vy)}function sP(e){return Qr(vy,e),e}var lS=P('<div class="c-draggable-list-item__handle svelte-hpsiq9"><!></div>'),cS=P('<div data-testid="draggable-list-item" tabindex="0" role="button"><div class="c-draggable-list-item__content svelte-hpsiq9"><!> <!> <div class="c-draggable-list-item__main svelte-hpsiq9"><!></div> <div class="c-draggable-list-item__actions"><!></div></div> <div><!></div></div>'),hS=P("<div><!></div>");function by(e,t){ut(t,!0);let r=G(t,"value",15,""),n=G(t,"disabled",3,!1),s=G(t,"placeholder",3,""),i=G(t,"clickToEdit",3,!1),o=G(t,"variant",3,"surface"),a=G(t,"size",3,2),h=G(t,"color",19,()=>{}),l=G(t,"class",3,""),c=G(t,"outline",3,!0),u=G(t,"editing",15,!1),p=pu(t,["$$slots","$$events","$$legacy","value","disabled","placeholder","clickToEdit","variant","size","color","class","outline","editing","onstartEdit","onacceptEdit","oncancelEdit","onkeydown","onclick","onblur","onfocus","onchange"]),g=yt(Ne(r())),f=yt(void 0),m=yt(void 0);async function y(S){n()||!d(f)||u()||(X(g,r(),!0),t.onstartEdit?.({value:r()}),d(f).focus(),S?.selectAll&&(await pa(),d(f)?.select()),u(!0))}function v(){const S=r(),T=d(g).trim();S!==T?(r(T),t.onacceptEdit?.({oldValue:S,newValue:T}),document.activeElement===d(f)&&d(f)?.blur(),u(!1)):x()}function x(){X(g,r(),!0),t.oncancelEdit?.({value:r()}),document.activeElement===d(f)&&d(f)?.blur(),u(!1)}_e(()=>{u()&&t.onchange?.({value:d(g)})});var k={startEdit:y,acceptEdit:v,cancelEdit:x},_=hS(),w=R(_);return kw(w,Ye({get size(){return a()},get variant(){return o()},get color(){return h()},get placeholder(){return s()},get disabled(){return n()},get outline(){return c()}},()=>p,{onkeydown:function(S){const T=S;T.key==="Enter"?v():T.key==="Escape"&&x(),t.onkeydown?.(T)},onfocus:function(S){!i()||n()||u()||y(),t.onfocus?.(S)},onblur:function(S){v(),t.onblur?.(S)},onclick:function(S){t.onclick?.(S)},get textInput(){return d(f)},set textInput(S){X(f,S,!0)},get value(){return d(g)},set value(S){X(g,S,!0)}})),Kr(_,S=>X(m,S),()=>d(m)),et(()=>Me(_,1,`c-editable-text ${l()??""}`,"svelte-1ujyjwr")),b(e,_),pt(k)}var dS=P('<span class="c-task-icon svelte-18fzpe8"><!></span>');function uS(e,t){ut(t,!0);let r=G(t,"size",3,1),n=O(()=>({1:"14px",2:"16px",3:"18px",4:"20px"})[Math.max(1,r())]),s=O(()=>d(n)),i=O(()=>ny(t.taskState));var o=dS(),a=R(o);ve(a,()=>d(i),(h,l)=>{l(h,{get width(){return d(n)},get height(){return d(s)}})}),et(h=>ri(o,`--icon-color: var(--ds-color-${h??""}-9); --icon-size: ${d(n)??""};`),[()=>ry(t.taskState)]),b(e,o),pt()}var pS=P("<!> <!>",1);function gS(e,t){const r=ys(t,["children","$$slots","$$events","$$legacy"]),n=ys(r,["taskState","size","taskUuid","taskStore","interactive","disabled","initialDropdownOpen"]);ut(t,!1);const s=_t(),i=_t(),o=_t(),a=_t();let h=G(t,"taskState",8),l=G(t,"size",8,1),c=G(t,"taskUuid",24,()=>{}),u=G(t,"taskStore",24,()=>{}),p=G(t,"interactive",8,!0),g=G(t,"disabled",8,!1),f=G(t,"initialDropdownOpen",8,!1);const m=ui();let y=_t(f());qt(()=>xt(h()),()=>{X(s,ny(h()))}),qt(()=>xt(h()),()=>{X(i,ry(h()))}),qt(()=>{},()=>{X(o,"Change Status")}),qt(()=>Et,()=>{X(a,Object.values(Et))}),Ms(),pr();var v=J(),x=W(v),k=w=>{{let S=he(()=>(xt(Pe),Ft(()=>[Pe.Click])));ce.Root(w,{get triggerOn(){return d(S)},get open(){return d(y)},onOpenChange:T=>X(y,T),children:(T,L)=>{var F=pS(),A=W(F);ce.Trigger(A,{children:(M,$)=>{{let E=he(()=>(xt(Pe),Ft(()=>[Pe.Hover])));fe(M,{get content(){return d(o)},get triggerOn(){return d(E)},children:(D,I)=>{de(D,Ye({get size(){return l()},variant:"ghost",get color(){return d(i)},get disabled(){return g()}},()=>n,{$$events:{click:()=>X(y,!d(y))},children:(N,q)=>{var K=J(),Z=W(K);ve(Z,()=>d(s),(U,H)=>{H(U,{get size(){return l()}})}),b(N,K)},$$slots:{default:!0}}))},$$slots:{default:!0}})}},$$slots:{default:!0}});var B=Y(A,2);ce.Content(B,{size:1,side:"bottom",align:"start",children:(M,$)=>{var E=J(),D=W(E);ge(D,1,()=>d(a),Re,(I,N)=>{{let q=he(()=>d(N)===h()),K=he(()=>!p()||d(N)===h());ce.Item(I,{onSelect:()=>async function(Z){c()&&u()&&!g()&&Z!==h()&&(m?.reportUpdateTaskStatus(),await u().updateTask(c(),{state:Z},lr.USER),X(y,!1))}(d(N)),get highlight(){return d(q)},get disabled(){return d(K)},children:(Z,U)=>{var H=st();et(j=>at(H,j),[()=>(xt(Jp),d(N),Ft(()=>Jp(d(N))))]),b(Z,H)},$$slots:{default:!0,iconLeft:(Z,U)=>{uS(Z,{slot:"iconLeft",get taskState(){return d(N)},size:1})}}})}}),b(M,E)},$$slots:{default:!0}}),b(T,F)},$$slots:{default:!0}})}},_=w=>{de(w,Ye({get size(){return l()},variant:"ghost",get color(){return d(i)}},()=>n,{$$events:{click(S){tr.call(this,t,S)},keyup(S){tr.call(this,t,S)},keydown(S){tr.call(this,t,S)},mousedown(S){tr.call(this,t,S)},mouseover(S){tr.call(this,t,S)},focus(S){tr.call(this,t,S)},mouseleave(S){tr.call(this,t,S)},blur(S){tr.call(this,t,S)},contextmenu(S){tr.call(this,t,S)}},children:(S,T)=>{var L=J(),F=W(L);ve(F,()=>d(s),(A,B)=>{B(A,{get size(){return l()}})}),b(S,L)},$$slots:{default:!0}}))};z(x,w=>{p()&&c()&&u()&&!g()?w(k):w(_,!1)}),b(e,v),pt()}function Eu(e,t=new Set(Object.values(Et))){const r={...e,isVisible:!1,subTasksData:[]};let n=!1;if(e.subTasksData&&e.subTasksData.length>0){const i=[];for(const o of e.subTasksData){const a=Eu(o,t);i.push(a),a.isVisible&&(n=!0)}r.subTasksData=i}const s=function(i,o){return o.size!==0&&o.has(i.state)}(e,t);return r.isVisible=s||n,r}function xy(e){return e.subTasksData?.filter(t=>t.isVisible)||[]}var _s=(e=>(e.agentEdits="agent-edits",e.tasks="tasks",e.messageHistory="message-history",e.agentGitEdits="agent-git-edits",e.memory="memory",e))(_s||{});class Kn{static CTX_KEY=Symbol("chat-thread-body-model");static setInContext(t){return Qr(Kn.CTX_KEY,t),t}static getFromContext(){const t=me(Kn.CTX_KEY);if(!t)throw new Error("ChatThreadBodyModel not found in context. Did you forget to set it?");return t}static tryGetFromContext(){try{return me(Kn.CTX_KEY)}catch{return}}_activeTab;_config;activeTab;config;availableTabs;shouldShowTabs;constructor(t){const{initialConfig:r,enableAgentGitTracker:n,externalState:s,isAgentConversation:i}=t;this._config=Be(r),this._activeTab=Be(r.defaultTab),this.activeTab=Ai(this._activeTab),this.config=Ai(this._config),this.availableTabs=Zn([s,n,i],([o,a,h])=>{const l=[];return o.showMessageHistory&&l.push("message-history"),o.showTasks&&l.push("tasks"),o.showAgentEdits&&l.push("agent-edits"),h&&a&&l.push("agent-git-edits"),l}),this.shouldShowTabs=Zn(this.availableTabs,o=>o.length>0),this.setupTabAutoSelection()}setActiveTab(t){this._activeTab.set(t)}getCurrentActiveTab(){let t;return this.activeTab.subscribe(r=>t=r)(),t}getCurrentAvailableTabs(){let t=[];return this.availableTabs.subscribe(r=>t=r)(),t}switchToNextTab(){const t=this.getCurrentActiveTab(),r=this.getCurrentAvailableTabs();if(r.length===0)return void this.setActiveTab(void 0);const n=((t?r.indexOf(t):-1)+1)%r.length;this.setActiveTab(r[n])}switchToPreviousTab(){const t=this.getCurrentActiveTab(),r=this.getCurrentAvailableTabs();if(r.length===0)return void this.setActiveTab(void 0);const n=t?r.indexOf(t):-1,s=n<=0?r.length-1:n-1;this.setActiveTab(r[s])}selectDefaultTab(t){if(t.length!==0)return t.includes("message-history")?"message-history":t.find(r=>r!=="agent-git-edits")||void 0}setupTabAutoSelection(){Zn([this.availableTabs,this.activeTab],([t,r])=>({available:t,active:r})).subscribe(({available:t,active:r})=>{r&&!t.includes(r)?t.length>0?this.setActiveTab(this.selectDefaultTab(t)):this.setActiveTab(void 0):!r&&t.length>0&&this.setActiveTab(this.selectDefaultTab(t))})}destroy(){}}function iP(e,t,r,n={}){const s={defaultTab:"message-history",...n};return new Kn({initialConfig:s,enableAgentGitTracker:e,externalState:t,isAgentConversation:r})}var fS=P("<!> Run with sub-agent",1),mS=P("<!> <!>",1),yS=P('<div class="c-task-action-buttons svelte-p2oslq"><!> <!> <!></div>');function vS(e,t){ut(t,!1);const r=()=>Tt(d(i),"$uuidToTask",n),[n,s]=se(),i=_t(),o=_t(),a=_t();let h=G(t,"taskUuid",8),l=G(t,"taskStore",8),c=G(t,"editable",8,!0);const u=ui(),p=Kn.tryGetFromContext(),g=je("enableAgentSwarmMode");async function f(){c()&&(u?.reportDeleteTask(),await l().deleteTask(h()))}async function m(){d(o)&&c()&&d(o).state===Et.NOT_STARTED&&(p&&p.setActiveTab(_s.messageHistory),u?.reportRunSingleTask(),await l().updateTask(h(),{state:Et.IN_PROGRESS},lr.USER),await l().runHydratedTask(d(o)))}let y=_t(!1);async function v(){try{p&&p.setActiveTab(_s.messageHistory),await l().runTaskInSubAgent(h())}catch(L){console.error("Error running task with sub-agent:",L)}X(y,!1)}qt(()=>xt(l()),()=>{dc(X(i,l().uuidToTask),"$uuidToTask",n)}),qt(()=>(r(),xt(h())),()=>{X(o,r().get(h()))}),qt(()=>(d(o),Et),()=>{X(a,d(o)?.state===Et.NOT_STARTED)}),Ms(),pr();var x=yS(),k=R(x),_=L=>{{let F=he(()=>(xt(Pe),Ft(()=>[Pe.Hover])));fe(L,{content:"Run Task",get triggerOn(){return d(F)},children:(A,B)=>{{let M=he(()=>!c());de(A,{size:1,variant:"ghost",color:"neutral",get disabled(){return d(M)},class:"c-task-action-button c-task-action-button--play",$$events:{click:m},children:($,E)=>{vt($,{name:"play"})},$$slots:{default:!0}})}},$$slots:{default:!0}})}};z(k,L=>{d(a)&&L(_)});var w=Y(k,2);{let L=he(()=>(xt(Pe),Ft(()=>[Pe.Hover])));fe(w,{content:"Delete Task",get triggerOn(){return d(L)},children:(F,A)=>{{let B=he(()=>!c());de(F,{size:1,variant:"ghost",color:"error",get disabled(){return d(B)},class:"c-task-action-button c-task-action-button--delete",$$events:{click:f},children:(M,$)=>{vt(M,{name:"trash"})},$$slots:{default:!0}})}},$$slots:{default:!0}})}var S=Y(w,2),T=L=>{{let F=he(()=>(xt(Pe),Ft(()=>[Pe.Hover,Pe.Click])));ce.Root(L,{get triggerOn(){return d(F)},get open(){return d(y)},onOpenChange:A=>X(y,A),onHoverEnd:()=>X(y,!1),children:(A,B)=>{var M=mS(),$=W(M);ce.Trigger($,{children:(D,I)=>{{let N=he(()=>(xt(Pe),Ft(()=>[Pe.Hover])));fe(D,{content:"More actions",get triggerOn(){return d(N)},children:(q,K)=>{{let Z=he(()=>!c());de(q,{size:1,variant:"ghost",color:"neutral",get disabled(){return d(Z)},class:"c-task-action-button c-task-action-button--more",$$events:{click:()=>X(y,!d(y))},children:(U,H)=>{vt(U,{name:"ellipsis-vertical"})},$$slots:{default:!0}})}},$$slots:{default:!0}})}},$$slots:{default:!0}});var E=Y($,2);ce.Content(E,{size:1,side:"bottom",align:"end",children:(D,I)=>{ce.Item(D,{onSelect:v,children:(N,q)=>{var K=fS(),Z=W(K);vt(Z,{name:"git-branch"}),b(N,K)},$$slots:{default:!0}})},$$slots:{default:!0}}),b(A,M)},$$slots:{default:!0}})}};z(S,L=>{Tt(g,"$enableAgentSwarmMode",n)&&L(T)}),b(e,x),pt(),s()}var bS=P('<div class="c-task-details svelte-1wefg47"><div class="c-task-details__content svelte-1wefg47"><div class="c-task-details__section c-task-details__description-contents svelte-1wefg47"><!></div></div></div>');function xS(e,t){ut(t,!0);let r=G(t,"editable",3,!0),n=yt(Ne(t.task.description)),s=yt(void 0);function i(){d(n).trim()!==t.task.description&&t.taskStore.updateTask(t.task.uuid,{description:d(n).trim()},lr.USER),d(s)?.blur()}var o=bS(),a=R(o),h=R(a),l=R(h);{let c=O(()=>!r());Fi(l,{size:1,variant:"surface",placeholder:"Add task description...",onkeydown:function(u){u.key!=="Enter"||u.shiftKey||u.ctrlKey||u.metaKey?u.key==="Escape"&&(u.preventDefault(),u.stopPropagation(),X(n,t.task.description,!0),d(s)?.blur()):(u.preventDefault(),u.stopPropagation(),i())},onblur:i,get disabled(){return d(c)},rows:1,resize:"vertical",get textInput(){return d(s)},set textInput(u){X(s,u,!0)},get value(){return d(n)},set value(u){X(n,u,!0)}})}b(e,o),pt()}var kS=P('<div class="c-task-tree-root-children svelte-iklsm9"></div>'),_S=P('<div slot="header-contents" class="c-task-tree-item__header svelte-iklsm9"><div class="c-task-tree-item__status-cell svelte-iklsm9"><!></div> <div><!></div></div>'),wS=P('<div class="c-task-tree-item__action-buttons svelte-iklsm9" slot="actions"><!></div>'),CS=P('<div class="c-task-tree-item__subtasks svelte-iklsm9"></div>'),SS=P('<div class="c-task-tree-item__details svelte-iklsm9"><!></div> <!>',1);function Di(e,t){ut(t,!1);const r=_t(),n=_t();let s=G(t,"task",8),i=G(t,"taskStore",24,()=>me(Fn.key)),o=G(t,"editable",8,!0),a=G(t,"isRootTask",8,!0);const h=ui();let l=_t(),c=_t(),u=_t(void 0);async function p(k){const _=k.trim();_!==s().name&&_&&(h?.reportUpdateTaskName(),await i().updateTask(s().uuid,{name:_},lr.USER))}async function g(k){const _=k.target?.value;await p(_||"")}async function f(k){if(!(k.shiftKey||k.ctrlKey||k.metaKey))switch(k.key){case"Enter":{const _=k.target?.value;await p(_||"");const w=await i().addNewTaskAfter(s().uuid);if(!w)return;await pa();const S=document.getElementById(`task-${w}`);if(!S)return;const T=S.querySelector(".c-task-tree-item__name-editable");if(!T)return;const L=T.querySelector("input");if(!L)return;L.focus(),L.select();break}case"Tab":{const _=k.target?.value;await p(_||"");break}}}qt(()=>(xt(s()),Et),()=>{X(r,s().state===Et.CANCELLED)}),qt(()=>xt(s()),()=>{X(n,xy(s()))}),Ms(),pr();var m=J(),y=W(m),v=k=>{var _=kS();ge(_,5,()=>d(n),w=>w.uuid,(w,S)=>{var T=J();Di(W(T),{get taskStore(){return i()},get task(){return d(S)},get editable(){return o()},isRootTask:!1}),b(w,T)}),b(k,_)},x=k=>{var _=J(),w=W(_),S=T=>{{let L=he(()=>(xt(s()),Ft(()=>`task-${s().uuid}`))),F=he(()=>(xt(s()),Ft(()=>!!s().subTasksData&&s().subTasksData.length>0))),A=he(()=>!o());(function(B,M){const $=O0(M);let E=G(M,"class",8,""),D=G(M,"id",8),I=G(M,"item",8),N=G(M,"disabled",8,!1),q=G(M,"hasNestedItems",8,!1),K=G(M,"expanded",12,!0),Z=G(M,"selected",8,!1),U=G(M,"showConnectors",8,!0),H=G(M,"element",28,()=>{});function j(){K(!K())}var V=cS();let rt;var tt=R(V),it=R(tt),nt=bt=>{var It=lS(),Yt=R(It);cr(Yt,M,"handle",{get item(){return I()}},null),b(bt,It)};z(it,bt=>{Ft(()=>$.handle)&&bt(nt)});var ct=Y(it,2),mt=bt=>{{let It=he(()=>K()?"Collapse":"Expand");de(bt,{class:"c-draggable-list-item__expand-collapse-button",size:1,variant:"ghost",color:"neutral",get"aria-expanded"(){return K()},get"aria-label"(){return d(It)},$$events:{click:j},children:(Yt,Xt)=>{var Ht=J(),Qt=W(Ht),ee=Wt=>{vt(Wt,{name:"chevron-down"})},$t=Wt=>{vt(Wt,{name:"chevron-right"})};z(Qt,Wt=>{K()?Wt(ee):Wt($t,!1)}),b(Yt,Ht)},$$slots:{default:!0}})}};z(ct,bt=>{q()&&bt(mt)});var lt=Y(ct,2),gt=R(lt);cr(gt,M,"header-contents",{get item(){return I()}},null);var Ct=Y(lt,2),St=R(Ct);cr(St,M,"actions",{get item(){return I()}},null);var Lt=Y(tt,2);let kt;var wt=R(Lt);cr(wt,M,"contents",{get item(){return I()}},null),Kr(V,bt=>H(bt),()=>H()),et((bt,It)=>{rt=Me(V,1,`c-draggable-list-item ${E()??""}`,"svelte-hpsiq9",rt,bt),Pr(V,"id",D()),Pr(V,"data-item-id",D()),kt=Me(Lt,1,"c-draggable-list-item__contents",null,kt,It)},[()=>({"is-disabled":N(),"has-nested-items":q(),"is-expanded":K(),"is-selected":Z()}),()=>({"c-draggable-list-item__show-connectors":U(),"c-draggable-list-item__has-handle":$.handle})]),$e("mousedown",V,function(bt){tr.call(this,M,bt)}),$e("click",V,function(bt){tr.call(this,M,bt)}),$e("keydown",V,function(bt){tr.call(this,M,bt)}),$e("keyup",V,function(bt){tr.call(this,M,bt)}),$e("keypress",V,function(bt){tr.call(this,M,bt)}),$e("focus",V,function(bt){tr.call(this,M,bt)}),$e("blur",V,function(bt){tr.call(this,M,bt)}),$e("focusin",V,function(bt){tr.call(this,M,bt)}),$e("focusout",V,function(bt){tr.call(this,M,bt)}),b(B,V)})(T,{class:"c-task-tree-item",get item(){return s()},get id(){return d(L)},get hasNestedItems(){return d(F)},get disabled(){return d(A)},get element(){return d(c)},set element(B){X(c,B)},get expanded(){return d(u)},set expanded(B){X(u,B)},$$slots:{"header-contents":(B,M)=>{var $=_S(),E=R($),D=R(E);{let K=he(()=>!o());gS(D,{get taskState(){return xt(s()),Ft(()=>s().state)},get taskUuid(){return xt(s()),Ft(()=>s().uuid)},get taskStore(){return i()},get disabled(){return d(K)},size:1})}var I=Y(E,2);let N;var q=R(I);{let K=he(()=>!o());Kr(by(q,{class:"c-task-tree-item__name-editable",get value(){return xt(s()),Ft(()=>s().name)},placeholder:"Name this task...",size:1,get disabled(){return d(K)},clickToEdit:!0,onkeydown:f,onblur:g,$$legacy:!0}),Z=>X(l,Z),()=>d(l))}et(K=>N=Me(I,1,"c-task-tree-item__name svelte-iklsm9",null,N,K),[()=>({"c-task-tree-item__text--cancelled":d(r)})]),b(B,$)},actions:(B,M)=>{var $=wS();vS(R($),{get taskUuid(){return xt(s()),Ft(()=>s().uuid)},get taskStore(){return i()},get editable(){return o()}}),b(B,$)},contents:(B,M)=>{var $=SS(),E=W($);xS(R(E),{get task(){return s()},get taskStore(){return i()},get editable(){return o()}});var D=Y(E,2),I=N=>{var q=CS();ge(q,5,()=>d(n),K=>K.uuid,(K,Z)=>{var U=J();Di(W(U),{get taskStore(){return i()},get task(){return d(Z)},get editable(){return o()},isRootTask:!1}),b(K,U)}),b(N,q)};z(D,N=>{d(n),d(u),Ft(()=>d(n)&&d(n).length>0&&d(u))&&N(I)}),b(B,$)}},$$legacy:!0})}};z(w,T=>{xt(s()),Ft(()=>s().isVisible)&&T(S)},!0),b(k,_)};z(y,k=>{a()?k(v):k(x,!1)}),b(e,m),pt()}function ae(e,t){let r=G(t,"color",3,"neutral"),n=G(t,"size",3,0);var s=J(),i=W(s);ve(i,()=>Qa.Root,(o,a)=>{a(o,{get color(){return r()},get size(){return n()},children:(h,l)=>{var c=J(),u=W(c);ke(u,()=>t.children),b(h,c)},$$slots:{default:!0}})}),b(e,s)}var TS=P("<div><!></div>");function Xc(e,t){var r=TS(),n=R(r),s=o=>{gs(o,{size:1})},i=o=>{var a=J(),h=W(a),l=u=>{vt(u,{name:"circle-check"})},c=u=>{var p=J(),g=W(p),f=y=>{vt(y,{name:"circle-x"})},m=y=>{var v=J(),x=W(v),k=_=>{vt(_,{name:"ban"})};z(x,_=>{t.commandResult==="skipped"&&_(k)},!0),b(y,v)};z(g,y=>{t.commandResult==="error"?y(f):y(m,!1)},!0),b(u,p)};z(h,u=>{t.commandResult==="success"?u(l):u(c,!1)},!0),b(o,a)};z(n,o=>{t.commandResult==="loading"?o(s):o(i,!1)}),et(()=>Me(r,1,`c-setup-script-command-status c-setup-script-command-status--${t.commandResult??""}`,"svelte-n0cgm1")),b(e,r)}function Tg(e,t){ut(t,!0);let r=G(t,"size",3,1);const n={[Et.NOT_STARTED]:"circle-dashed",[Et.IN_PROGRESS]:"circle-dot-dashed",[Et.COMPLETE]:"circle-check-big",[Et.CANCELLED]:"circle-minus"};vt(e,{get name(){return n[t.taskState]},get size(){return r()}}),pt()}var $S=P("<!> <!>",1);function MS(e,t){ut(t,!0);const r=y=>{{let v=O(()=>!s());de(y,{size:.5,get variant(){return d(l)},get color(){return d(h)},get readonly(){return d(v)},onclick:()=>{s()&&X(c,!d(c))},children:(x,k)=>{Tg(x,{get taskState(){return t.taskState},size:2})},$$slots:{default:!0}})}},n=G(t,"taskUuid",19,()=>{}),s=G(t,"interactive",3,!0),i=G(t,"initialDropdownOpen",3,!1),o=s()&&n()?Dn():void 0,a=ui(),h=O(()=>t.taskState===Et.COMPLETE?"info":"neutral"),l=O(()=>t.taskState===Et.COMPLETE?"soft":"ghost-block");let c=yt(Ne(i()));const u=Object.values(Et);var p=J(),g=W(p),f=y=>{var v=J(),x=W(v);{let k=O(()=>[Pe.Click]);ve(x,()=>ce.Root,(_,w)=>{w(_,{get triggerOn(){return d(k)},get open(){return d(c)},onOpenChange:S=>X(c,S,!0),children:(S,T)=>{var L=$S(),F=W(L);ve(F,()=>ce.Trigger,(B,M)=>{M(B,{children:($,E)=>{{let D=O(()=>[Pe.Hover]);fe($,{content:"Change Status",get triggerOn(){return d(D)},children:(I,N)=>{r(I)},$$slots:{default:!0}})}},$$slots:{default:!0}})});var A=Y(F,2);ve(A,()=>ce.Content,(B,M)=>{M(B,{size:1,side:"bottom",align:"start",children:($,E)=>{var D=J(),I=W(D);ge(I,17,()=>u,Re,(N,q)=>{var K=J(),Z=W(K);{let U=O(()=>d(q)===t.taskState);ve(Z,()=>ce.Item,(H,j)=>{j(H,{onSelect:()=>async function(V){n()&&o&&s()&&V!==t.taskState&&(a?.reportUpdateTaskStatus(),await o.updateTask(n(),{state:V},lr.USER),X(c,!1))}(d(q)),get highlight(){return d(U)},children:(V,rt)=>{var tt=st();et(it=>at(tt,it),[()=>Mo(d(q))]),b(V,tt)},$$slots:{default:!0,iconLeft:(V,rt)=>{Tg(V,{slot:"iconLeft",get taskState(){return d(q)},size:1})}}})})}b(N,K)}),b($,D)},$$slots:{default:!0}})}),b(S,L)},$$slots:{default:!0}})})}b(y,v)},m=y=>{r(y)};z(g,y=>{s()?y(f):y(m,!1)}),b(e,p),pt()}var AS=is('<svg width="15" height="15" viewBox="-1 0 15 15" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M11.45 7.25C11.9167 7.68333 12.15 8.21667 12.15 8.85C12.15 9.45 11.95 9.98333 11.55 10.45C11.15 10.8833 10.65 11.1333 10.05 11.2C9.45 11.2333 8.9 11.0833 8.4 10.75C7.93333 10.3833 7.63333 9.9 7.5 9.3C6.83333 9.26667 6.18333 9.08333 5.55 8.75C4.81667 8.38333 4.2 7.85 3.7 7.15V9.4C4.06667 9.46667 4.4 9.63333 4.7 9.9C5 10.1333 5.21667 10.4167 5.35 10.75C5.51667 11.0833 5.58333 11.4 5.55 11.7C5.55 12.2 5.41667 12.65 5.15 13.05C4.91667 13.4167 4.56667 13.7 4.1 13.9C3.66667 14.0667 3.21667 14.1 2.75 14C2.28333 13.9 1.88333 13.6833 1.55 13.35C1.21667 13.0167 1 12.6333 0.9 12.2C0.833333 11.7333 0.883333 11.2833 1.05 10.85C1.25 10.3833 1.53333 10.0167 1.9 9.75C2.16667 9.58333 2.45 9.46667 2.75 9.4V4.65C2.28333 4.55 1.88333 4.33333 1.55 4C1.21667 3.66667 1 3.26667 0.9 2.8C0.833333 2.33333 0.883333 1.88333 1.05 1.45C1.25 1.01667 1.53333 0.666666 1.9 0.4C2.3 0.133333 2.73333 0 3.2 0C3.53333 0 3.85 0.0666666 4.15 0.2C4.75 0.433333 5.16667 0.849999 5.4 1.45C5.53333 1.75 5.6 2.06667 5.6 2.4C5.6 2.86667 5.46667 3.3 5.2 3.7C4.93333 4.06667 4.58333 4.35 4.15 4.55C4.01667 4.61667 3.88333 4.65 3.75 4.65C3.85 5.65 4.25 6.5 4.95 7.2C5.65 7.9 6.5 8.3 7.5 8.4C7.53333 8.26667 7.56667 8.13333 7.6 8C7.8 7.56667 8.1 7.21667 8.5 6.95C8.96667 6.65 9.46667 6.53333 10 6.6C10.5667 6.63333 11.05 6.85 11.45 7.25ZM3.75 10.4C3.48333 10.3 3.21667 10.2833 2.95 10.35C2.68333 10.3833 2.43333 10.5167 2.2 10.75C2 10.95 1.86667 11.1833 1.8 11.45C1.76667 11.7167 1.8 11.9833 1.9 12.25C2.03333 12.5167 2.21667 12.7333 2.45 12.9C2.71667 13.0667 3.01667 13.1333 3.35 13.1C3.68333 13.0667 3.96667 12.9333 4.2 12.7C4.43333 12.4667 4.56667 12.1833 4.6 11.85C4.63333 11.5167 4.56667 11.2333 4.4 11C4.23333 10.7333 4.01667 10.5333 3.75 10.4ZM3.2 3.75C3.56667 3.75 3.86667 3.65 4.1 3.45C4.36667 3.21667 4.53333 2.93333 4.6 2.6C4.66667 2.26667 4.61667 1.96667 4.45 1.7C4.28333 1.4 4.05 1.2 3.75 1.1C3.48333 0.966667 3.21667 0.933333 2.95 1C2.68333 1.03333 2.43333 1.15 2.2 1.35C2 1.55 1.86667 1.8 1.8 2.1C1.76667 2.36667 1.8 2.63333 1.9 2.9C2.03333 3.13333 2.21667 3.33333 2.45 3.5C2.68333 3.66667 2.93333 3.75 3.2 3.75ZM10.8 9.9C10.9667 9.73333 11.0833 9.53333 11.15 9.3C11.2167 9.06667 11.2167 8.85 11.15 8.65C11.1167 8.41667 11.0167 8.21667 10.85 8.05C10.7167 7.85 10.5333 7.7 10.3 7.6C10.0667 7.5 9.8 7.48333 9.5 7.55C9.23333 7.58333 9 7.7 8.8 7.9C8.6 8.1 8.46667 8.35 8.4 8.65C8.33333 8.91667 8.35 9.16667 8.45 9.4C8.55 9.63333 8.68333 9.83333 8.85 10C9.05 10.1333 9.26667 10.2333 9.5 10.3C9.73333 10.3333 9.96667 10.3167 10.2 10.25C10.4333 10.1833 10.6333 10.0667 10.8 9.9Z"></path></svg>'),ES=P("<!> <!>",1),LS=P('<div class="c-task-action-buttons svelte-1raumhf"><!> <!> <!></div>');function BS(e,t){ut(t,!0);const[r,n]=se();let s=G(t,"editable",3,!0);const i=Dn(),o=ui(),a=Kn.tryGetFromContext(),h=i.uuidToTask,l=O(()=>Tt(h,"$uuidToTaskStore",r).get(t.taskUuid)),c=je("enableAgentSwarmMode");async function u(){s()&&(o?.reportDeleteTask(),await i.deleteTask(t.taskUuid))}async function p(){d(l)&&s()&&d(l).state===Et.NOT_STARTED&&(a&&a.setActiveTab(_s.messageHistory),o?.reportRunSingleTask(),await i.updateTask(t.taskUuid,{state:Et.IN_PROGRESS},lr.USER),await i.runHydratedTask(d(l)))}const g=O(()=>d(l)?.state===Et.NOT_STARTED);let f=yt(!1);async function m(){o?.reportRunSingleTask();try{a&&a.setActiveTab(_s.messageHistory),await i.runTaskInSubAgent(t.taskUuid)}catch(S){console.error("Error running task with sub-agent:",S)}X(f,!1)}var y=LS(),v=R(y),x=S=>{{let T=O(()=>[Pe.Hover]);fe(S,{content:"Run Task",get triggerOn(){return d(T)},children:(L,F)=>{de(L,{size:.5,variant:"ghost-block",color:"neutral",onclick:p,title:"Run task",class:"c-task-action-button c-task-action-button--play",children:(A,B)=>{vt(A,{name:"circle-play",size:2})},$$slots:{default:!0}})},$$slots:{default:!0}})}};z(v,S=>{d(g)&&S(x)});var k=Y(v,2);{let S=O(()=>[Pe.Hover]);fe(k,{content:"Delete Task",get triggerOn(){return d(S)},children:(T,L)=>{de(T,{size:.5,variant:"ghost-block",color:"neutral",onclick:u,title:"Delete task",class:"c-task-action-button c-task-action-button--delete",children:(F,A)=>{vt(F,{name:"trash-2",size:2})},$$slots:{default:!0}})},$$slots:{default:!0}})}var _=Y(k,2),w=S=>{var T=J(),L=W(T);{let F=O(()=>[Pe.Hover,Pe.Click]);ve(L,()=>ce.Root,(A,B)=>{B(A,{get triggerOn(){return d(F)},get open(){return d(f)},onOpenChange:M=>X(f,M,!0),onHoverEnd:()=>X(f,!1),children:(M,$)=>{var E=ES(),D=W(E);ve(D,()=>ce.Trigger,(N,q)=>{q(N,{children:(K,Z)=>{{let U=O(()=>[Pe.Hover]);fe(K,{content:"More actions",get triggerOn(){return d(U)},children:(H,j)=>{{let V=O(()=>!s());de(H,{size:.5,variant:"ghost-block",color:"neutral",get disabled(){return d(V)},class:"c-task-action-button c-task-action-button--more",onclick:()=>X(f,!d(f)),children:(rt,tt)=>{vt(rt,{name:"ellipsis-vertical",size:1})},$$slots:{default:!0}})}},$$slots:{default:!0}})}},$$slots:{default:!0}})});var I=Y(D,2);ve(I,()=>ce.Content,(N,q)=>{q(N,{size:1,side:"bottom",align:"end",children:(K,Z)=>{var U=J(),H=W(U);ve(H,()=>ce.Item,(j,V)=>{V(j,{onSelect:m,children:(rt,tt)=>{var it=st("Run with sub-agent");b(rt,it)},$$slots:{default:!0,iconLeft:(rt,tt)=>{(function(it){var nt=AS();b(it,nt)})(rt)}}})}),b(K,U)},$$slots:{default:!0}})}),b(M,E)},$$slots:{default:!0}})})}b(S,T)};z(_,S=>{Tt(c,"$enableAgentSwarmMode",r)&&S(w)}),b(e,y),pt(),n()}const ky=Symbol("task-focus-context");class IS{#t=yt(null);get _focusedTaskId(){return d(this.#t)}set _focusedTaskId(t){X(this.#t,t,!0)}_deletionTimeout=null;#e=yt(null);get _pendingDeletionTaskId(){return d(this.#e)}set _pendingDeletionTaskId(t){X(this.#e,t,!0)}#r=yt(null);get _lastTopLevelTaskId(){return d(this.#r)}set _lastTopLevelTaskId(t){X(this.#r,t,!0)}get focusedTaskId(){return this._focusedTaskId}get deletionTimeout(){return this._deletionTimeout}setFocusedTask(t){this._focusedTaskId=t,this._pendingDeletionTaskId===t&&this._deletionTimeout&&(clearTimeout(this._deletionTimeout),this._deletionTimeout=null,this._pendingDeletionTaskId=null)}clearFocusedTask(t){this._focusedTaskId===t&&(this._focusedTaskId=null)}scheduleDeletion(t,r){this._deletionTimeout&&clearTimeout(this._deletionTimeout),this._pendingDeletionTaskId=t,this._deletionTimeout=setTimeout(async()=>{this._focusedTaskId!==t&&await r(),this._deletionTimeout=null,this._pendingDeletionTaskId=null},500)}cancelDeletion(){this._deletionTimeout&&(clearTimeout(this._deletionTimeout),this._deletionTimeout=null,this._pendingDeletionTaskId=null)}isTaskFocused(t){return this._focusedTaskId===t}isLastTopLevelTask(t){return t===this._lastTopLevelTaskId}setLastTopLevelTask(t){this._lastTopLevelTaskId=t}cleanup(){this._deletionTimeout&&(clearTimeout(this._deletionTimeout),this._deletionTimeout=null,this._pendingDeletionTaskId=null)}delayBlur(){return new Promise(t=>setTimeout(t,10))}}function Zh(){return me(ky)}var FS=P('<div class="c-task-details svelte-a83104"><!></div>');function DS(e,t){ut(t,!0);let r=G(t,"editable",3,!0),n=G(t,"showIfEmpty",3,!1),s=G(t,"hasFocus",15,!1);const i=Dn(),o=ui(),a=Zh();let h=yt(Ne(t.task.description)),l=yt(void 0);const c=O(()=>!t.task.description.trim()),u=O(()=>!d(c)||s()||n());function p(){s(!0),a?.setFocusedTask(t.task.uuid)}async function g(){r()&&(d(h).trim()!==t.task.description?(o?.reportUpdateTaskDescription(),i.updateTask(t.task.uuid,{description:d(h).trim()},lr.USER)):d(h).trim()||t.task.name.trim()||(a?.isLastTopLevelTask(t.task.uuid)?a.scheduleDeletion(t.task.uuid,async()=>{await i.deleteTask(t.task.uuid)}):i.deleteTask(t.task.uuid)),d(l)?.blur()),await a?.delayBlur(),s(!1),a?.clearFocusedTask(t.task.uuid)}async function f(x){if(x.key==="Escape"&&(x.preventDefault(),x.stopPropagation(),X(h,t.task.description,!0),d(l)?.blur()),x.key==="Enter"&&!x.shiftKey&&!x.ctrlKey&&!x.metaKey){x.preventDefault(),x.stopPropagation();const k=await i.addNewTaskAfter(t.task.uuid);k&&tl(k)}}var m=J(),y=W(m),v=x=>{var k=FS(),_=R(k);{let w=O(()=>!r());Fi(_,{size:1,variant:"ghost",placeholder:"Add task description...",onkeydown:f,onfocus:p,onblur:g,get disabled(){return d(w)},resize:"none",outline:!1,maxHeight:"10lh",get textInput(){return d(l)},set textInput(S){X(l,S,!0)},get value(){return d(h)},set value(S){X(h,S,!0)}})}rs(3,k,()=>Ih,()=>({duration:150})),b(x,k)};z(y,x=>{d(u)&&x(v)}),b(e,m),pt()}var OS=P('<div class="c-draggable-list-item__handle svelte-1oucz2t"><!></div>'),RS=P('<div data-testid="draggable-list-item" tabindex="0" role="button"><div class="c-draggable-list-item__content svelte-1oucz2t"><!> <!> <div class="c-draggable-list-item__main svelte-1oucz2t"><!></div> <div class="c-draggable-list-item__actions"><!></div></div> <div><!></div></div>');function _y(e,t){ut(t,!0);let r=G(t,"class",3,""),n=G(t,"disabled",3,!1),s=G(t,"hasNestedItems",3,!1),i=G(t,"expanded",15,!0),o=G(t,"selected",3,!1),a=G(t,"showConnectors",19,s),h=G(t,"expandable",19,s),l=G(t,"element",15);function c(){i(!i())}var u=RS();let p;u.__mousedown=function(...M){t.onmousedown?.apply(this,M)},u.__click=function(...M){t.onclick?.apply(this,M)},u.__keydown=function(...M){t.onkeydown?.apply(this,M)},u.__keyup=function(...M){t.onkeyup?.apply(this,M)},u.__focusin=function(...M){t.onfocusin?.apply(this,M)},u.__focusout=function(...M){t.onfocusout?.apply(this,M)};var g=R(u),f=R(g),m=M=>{var $=OS(),E=R($);ke(E,()=>t.handle,()=>t.item),b(M,$)};z(f,M=>{t.handle&&M(m)});var y=Y(f,2),v=M=>{{let $=O(()=>i()?"Collapse":"Expand");de(M,{class:"c-draggable-list-item__expand-collapse-button",size:.5,variant:"ghost-block",color:"neutral",onclick:c,get"aria-expanded"(){return i()},get"aria-label"(){return d($)},children:(E,D)=>{{let I=O(()=>i()?"chevron-down":"chevron-right");vt(E,{get name(){return d(I)},size:2})}},$$slots:{default:!0}})}};z(y,M=>{h()&&s()&&M(v)});var x=Y(y,2),k=R(x),_=M=>{var $=J(),E=W($);ke(E,()=>t.headerContents,()=>t.item),b(M,$)};z(k,M=>{t.headerContents&&M(_)});var w=Y(x,2),S=R(w),T=M=>{var $=J(),E=W($);ke(E,()=>t.actions,()=>t.item),b(M,$)};z(S,M=>{t.actions&&M(T)});var L=Y(g,2);let F;var A=R(L),B=M=>{var $=J(),E=W($);ke(E,()=>t.contents,()=>t.item),b(M,$)};z(A,M=>{t.contents&&M(B)}),Kr(u,M=>l(M),()=>l()),et((M,$)=>{p=Me(u,1,`c-draggable-list-item ${r()??""}`,"svelte-1oucz2t",p,M),Pr(u,"id",t.id),Pr(u,"data-item-id",t.id),F=Me(L,1,"c-draggable-list-item__contents",null,F,$)},[()=>({"is-disabled":n(),"has-nested-items":s(),"is-expanded":i(),"is-selected":o()}),()=>({"c-draggable-list-item__show-connectors":a(),"c-draggable-list-item__has-handle":t.handle})]),$e("keypress",u,function(...M){t.onkeypress?.apply(this,M)}),$e("focus",u,function(...M){t.onfocus?.apply(this,M)}),$e("blur",u,function(...M){t.onblur?.apply(this,M)}),b(e,u),pt()}fa(["mousedown","click","keydown","keyup","focusin","focusout"]);const Lu="taskFilterContext";class oP{#t=yt(Ne(new Set(Object.values(Et))));get activeFilters(){return d(this.#t)}set activeFilters(t){X(this.#t,t,!0)}allStates=Object.values(Et);#e=yt(Ne({[Et.NOT_STARTED]:0,[Et.IN_PROGRESS]:0,[Et.COMPLETE]:0,[Et.CANCELLED]:0}));get taskCounts(){return d(this.#e)}set taskCounts(t){X(this.#e,t,!0)}#r=O(()=>[{value:Et.NOT_STARTED,label:Mo(Et.NOT_STARTED)},{value:Et.IN_PROGRESS,label:Mo(Et.IN_PROGRESS)},{value:Et.COMPLETE,label:Mo(Et.COMPLETE)},{value:Et.CANCELLED,label:Mo(Et.CANCELLED)}]);get taskFilters(){return d(this.#r)}set taskFilters(t){X(this.#r,t)}#n=O(()=>this.activeFilters.size<this.allStates.length);get hasActiveFilters(){return d(this.#n)}set hasActiveFilters(t){X(this.#n,t)}#s=O(()=>this.activeFilters.size===this.allStates.length);get allSelected(){return d(this.#s)}set allSelected(t){X(this.#s,t)}#i=O(()=>this.activeFilters.size>0&&this.activeFilters.size<this.allStates.length);get isIndeterminate(){return d(this.#i)}set isIndeterminate(t){X(this.#i,t)}constructor(t){t&&(this.activeFilters=t)}toggleFilter(t){const r=new Set(this.activeFilters);r.has(t)?r.delete(t):r.add(t),this.activeFilters=r}toggleAll(){const t=this.activeFilters.size===this.allStates.length,r=this.activeFilters.size>0;this.activeFilters=r&&!t?new Set(this.allStates):t?new Set:new Set(this.allStates)}resetFilters(){this.activeFilters=new Set(this.allStates)}clearAll(){this.activeFilters=new Set}selectAll(){this.activeFilters=new Set(this.allStates)}isFilterActive(t){return this.activeFilters.has(t)}}function aP(){const e=me(Lu);if(!e)throw new Error("TaskFilterContext not found. Make sure to call setTaskFilterContext first.");return e}function PS(){return me(Lu)}function lP(e){return Qr(Lu,e),e}var NS=P('<div class="c-task-tree__item-animation-wrapper svelte-1gknqtu"><!></div>'),zS=P('<div class="c-task-tree__spacer svelte-1gknqtu"><!></div>'),US=P('<div class="c-task-tree__root-children svelte-1gknqtu"><!> <!></div>'),qS=P('<div class="c-task-tree__item-action-buttons svelte-1gknqtu"><!></div>'),jS=P('<div class="c-task-tree__item-header svelte-1gknqtu"><div class="c-task-tree__item-status-cell svelte-1gknqtu"><!></div> <div><!></div></div>'),WS=P('<div class="c-task-tree__item-animation-wrapper svelte-1gknqtu"><!></div>'),HS=P('<div class="c-task-tree__item-subtasks svelte-1gknqtu"></div>'),VS=P('<div class="c-task-tree__item-details svelte-1gknqtu"><!></div> <!>',1);function Ml(e,t){ut(t,!0);let r=G(t,"editable",3,!0),n=G(t,"isRootTask",3,!0);const s=Dn(),i=PS();let o=Zh();n()&&!o&&(o=new IS,Qr(ky,o)),n()&&o&&pn(()=>{o?.cleanup()});let a=yt(!0),h=yt(!1),l=yt(!1),c=yt(!0);const u=O(()=>d(h)||d(l)),p=O(()=>t.task.state===Et.CANCELLED),g=O(()=>xy(t.task));_e(()=>{if(n()&&o&&d(g).length>0){const k=d(g).at(-1);k&&o.setLastTopLevelTask(k.uuid)}});const f=O(()=>!t.task.name.trim()&&!t.task.description.trim());var m=J(),y=W(m),v=k=>{var _=US(),w=R(_);ge(w,17,()=>d(g),L=>L.uuid,(L,F)=>{var A=NS();Ml(R(A),{get task(){return d(F)},get editable(){return r()},isRootTask:!1}),rs(3,A,()=>Ih,()=>({duration:150})),b(L,A)});var S=Y(w,2),T=L=>{var F=zS(),A=R(F);Nr(A,{variant:"soft",color:"neutral",size:.5,$$events:{click:()=>async function(B){if(i?.resetFilters(),n()){const $=d(g).at(-1);if($&&!$.name.trim()&&!$.description.trim())return void tl($.uuid)}const M=await s.createTask();M&&tl(M)}()},children:(B,M)=>{var $=st("Add Task");b(B,$)},$$slots:{default:!0,iconLeft:(B,M)=>{vt(B,{name:"circle-fading-plus",slot:"iconLeft"})}}}),b(L,F)};z(S,L=>{r()&&L(T)}),b(k,_)},x=k=>{var _=J(),w=W(_),S=T=>{const L=(F,A=Ue)=>{var B=qS();BS(R(B),{get taskUuid(){return A().uuid},get editable(){return r()}}),b(F,B)};{const F=(D,I=Ue)=>{var N=jS(),q=R(N);MS(R(q),{get taskState(){return I().state},get taskUuid(){return I().uuid},get interactive(){return r()}});var K=Y(q,2);let Z;(function(U,H){ut(H,!0);let j=G(H,"editable",3,!0),V=G(H,"hasFocus",15,!1),rt=G(H,"isEmpty",31,()=>!H.task.name.trim());const tt=Dn(),it=ui(),nt=Zh();let ct=yt(Ne(H.task.name));{let mt=O(()=>!j());by(U,{class:"c-task-name-editor",variant:"ghost",placeholder:"Name this task...",size:1,get disabled(){return d(mt)},clickToEdit:!0,outline:!1,onchange:function({value:lt}){rt(!lt.trim())},onacceptEdit:async function(lt){if(!j())return;const gt=lt.newValue.trim();gt||H.task.description.trim()?gt!==H.task.name&&gt&&(it?.reportUpdateTaskName(),await tt.updateTask(H.task.uuid,{name:gt},lr.USER)):nt?.isLastTopLevelTask(H.task.uuid)?nt.scheduleDeletion(H.task.uuid,async()=>{await tt.deleteTask(H.task.uuid)}):await tt.deleteTask(H.task.uuid)},oncancelEdit:async function({value:lt}){await nt?.delayBlur(),V(!1),nt?.clearFocusedTask(H.task.uuid),lt.trim()||H.task.description.trim()||(nt?.isLastTopLevelTask(H.task.uuid)?nt.scheduleDeletion(H.task.uuid,async()=>{await tt.deleteTask(H.task.uuid)}):await tt.deleteTask(H.task.uuid))},onfocus:function(){V(!0),nt?.setFocusedTask(H.task.uuid)},onblur:async function(){await nt?.delayBlur(),V(!1),nt?.clearFocusedTask(H.task.uuid)},onkeydown:async function(lt){if(lt.key==="Enter"&&!lt.shiftKey&&!lt.ctrlKey&&!lt.metaKey){if(await pa(),!d(ct).trim())return;const gt=await tt.addNewTaskAfter(H.task.uuid);gt&&tl(gt),lt.preventDefault(),lt.stopPropagation()}},get value(){return d(ct)},set value(lt){X(ct,lt,!0)}})}pt()})(R(K),{get task(){return I()},get editable(){return r()},get hasFocus(){return d(h)},set hasFocus(U){X(h,U,!0)},get isEmpty(){return d(c)},set isEmpty(U){X(c,U,!0)}}),et(U=>Z=Me(K,1,"c-task-tree__item-name svelte-1gknqtu",null,Z,U),[()=>({"c-task-tree__item-text--cancelled":d(p)})]),b(D,N)},A=(D,I=Ue)=>{var N=VS(),q=W(N),K=R(q);{let H=O(()=>d(u)&&!d(c));DS(K,{get task(){return I()},get editable(){return r()},get showIfEmpty(){return d(H)},get hasFocus(){return d(l)},set hasFocus(j){X(l,j,!0)}})}var Z=Y(q,2),U=H=>{var j=HS();ge(j,21,()=>d(g),V=>V.uuid,(V,rt)=>{var tt=WS();Ml(R(tt),{get task(){return d(rt)},get editable(){return r()},isRootTask:!1}),rs(3,tt,()=>Ih,()=>({duration:150})),b(V,tt)}),b(H,j)};z(Z,H=>{d(g)&&d(g).length>0&&d(a)&&H(U)}),b(D,N)};let B=O(()=>`task-${t.task.uuid}`),M=O(()=>!!t.task.subTasksData?.length),$=O(()=>!r()),E=O(()=>r()&&!d(f)?L:void 0);_y(T,{class:"c-task-tree__item",get item(){return t.task},get id(){return d(B)},get hasNestedItems(){return d(M)},get disabled(){return d($)},expandable:!1,get actions(){return d(E)},get expanded(){return d(a)},set expanded(D){X(a,D,!0)},headerContents:F,contents:A,$$slots:{headerContents:!0,contents:!0}})}};z(w,T=>{t.task.isVisible&&T(S)},!0),b(k,_)};z(y,k=>{n()?k(v):k(x,!1)}),b(e,m),pt()}const wy=Symbol("transient-data-manager-context");function Bu(){return me(wy)||(console.warn("TransientDataManager not found in context. Call setTransientDataManagerContext first."),new Map)}function cP(){const e=Qr(wy,new Map);return pn(()=>{e.clear()}),e}function el(e){if(!e)return 0;if(e.nodeType===Node.TEXT_NODE)return 1;if(e.nodeType===Node.ELEMENT_NODE){let t=1;return e.childNodes.forEach(r=>{t+=el(r)}),t}return 0}class Cy{constructor({enabled:t=!0,...r}={},n){this.onChange=n,this.enabled.set(t),this.enabled.subscribe(s=>{console.warn("IntersectionObserverManager: "+(s?"enabled":"disabled"))}),this.config=r}observers=new Map;_intersectionObserver=void 0;_isIntersection=new Map;enabled=Be(!0);config={};isEnabled(){return Le(this.enabled)}get intersectionObserver(){return this._intersectionObserver||this.setConfig(this.config),this._intersectionObserver}setConfig({enabled:t,...r}){const n=!uw(this.config,r),s=t??this.isEnabled(),i=s!==this.isEnabled();if(n||i||!this._intersectionObserver)if(this.config={root:void 0,rootMargin:void 0,threshold:void 0,...r},this._intersectionObserver?.disconnect(),this.enabled.set(s),this.isEnabled()){this._intersectionObserver=new IntersectionObserver(this.handleIntersection,r);for(const o of this.observers.keys())this._intersectionObserver.observe(o)}else this._intersectionObserver=void 0}handleIntersection=t=>{for(const r of t){const n=this.observers.get(r.target);if(this._isIntersection.set(r.target,r.isIntersecting),n)for(const s of n)s(r)}this.onChange?.(this.stats())};stats(){let t=0;for(const n of this._isIntersection.values())n&&t++;let r=0;for(const n of this.observers.values())r+=n.size;return{visible:t,total:this.observers.size,totalListeners:r,domNodes:this.countNodes()}}observe(t,r){if(!this.isEnabled())return()=>{};let n=this.observers.get(t);return n&&this._intersectionObserver?n.add(r):(this.observers.set(t,n=new Set),n.add(r),this.intersectionObserver.observe(t)),()=>{const s=this.observers.get(t);s?.delete(r)&&(s?.size||(this.observers.delete(t),this._intersectionObserver?.unobserve(t)))}}once(t,r){const n=this.observe(t,s=>{s.isIntersecting&&(r(s),n())});return n}onVisibilityChange=(t,r)=>{let n=this.observe(t,r);return{destroy(){n()},update:s=>{n(),n=this.observe(t,s)}}};destroy(){if(this._intersectionObserver){for(const t of this.observers.keys())this._intersectionObserver?.unobserve(t);this._intersectionObserver.disconnect(),this._intersectionObserver=void 0}this.observers.clear(),this._isIntersection.clear()}countNodes(){const t=this.config.root??document?.documentElement;return t instanceof HTMLElement?el(t):t instanceof Document?el(t.body):t?el(t):0}}const Xh=Symbol("intersection-observer-manager-context");function hP(e,t){const r=me(Xh);if(r)return r.setConfig(e),r;const n=new Cy(e,t);return Qr(Xh,n),pn(()=>{n.destroy()}),n}function mc(){return me(Xh)||(console.warn("IntersectionObserverManager not found in context.  Call setIntersectionObserverManagerContext first."),{enabled:iw(!1)})}const Al=Symbol("intersection-display-context");function $g(e=crypto.randomUUID(),t=Bu()){if(!e)return console.warn("intersectionId key not provided.  Using default context, this will not work if you have multiple IntersectionDisplay components in the hierarchy."),Qr(Al,[void 0,Be()]);const r=Be(t?.has(e)?t.get(e):void 0);return t?r.subscribe(n=>{t.set(e,n)}):console.warn("No transient data manager found.  Intersection state will not be persisted."),Qr(Al,r),r}function Sy(e){const t=me(Al);return t?(Le(t)||t.update(r=>r??e),t):(console.warn("IntersectionDisplay context not found.  Call setIntersectionContext first."),Be(e))}function Ty(e,t,r=pw,n=Bu()){return(...s)=>{const i=n.get(t);if(i&&r(i.args,s))return i.result;const o=e(...s);return n.set(t,{args:s,result:o}),o}}var GS=P("<div><!></div>");const YS=Object.freeze(Object.defineProperty({__proto__:null,default:function(e,t){ut(t,!0);let r=G(t,"minHeight",3,"0px"),n=G(t,"className",3,""),s=G(t,"debounceMeasureMs",3,100),i=G(t,"fixedHeight",3,!1),o=pu(t,["$$slots","$$events","$$legacy","minHeight","className","debounceMeasureMs","value","estimatedHeight","children","intersectionId","fixedHeight"]);$g(`intersection-display-${t.intersectionId}`);let a,h=yt(!1),l=yt(!1),c=yt(void 0),u=mc()?.onVisibilityChange;function p(S){X(h,S.isIntersecting,!0)}_e(()=>{return S=d(h),clearTimeout(a),void(a=setTimeout(()=>{X(l,S,!0)},s()));var S}),pn(()=>{clearTimeout(a)}),ow(()=>{d(l)&&X(c,d(v),!0)});let g,f=yt(0),m=O(()=>t.estimatedHeight?.(t.value,d(f))),y=O(()=>Math.round(d(c)??d(m)??(S=>S==null?void 0:Number(S))(r()?.replace("px",""))??0)),v=yt(0),x=O(()=>i()&&d(c)?`height:${d(c)}px`:d(l)?"":`height:${d(y)}px;min-height:0px`);var k=GS();vs(k,(S,T)=>({...o,class:`c-intersection-display ${n()??""}`,style:d(x),"data-intersection-estimated":d(m),"data-intersection-height":d(y),"data-intersection-id":t.intersectionId,"data-intersection-visible":d(l),[lw]:S,[aw]:T}),[()=>({"c-intersection-display__visible":d(h),"c-intersection-display__hidden":!d(h)}),()=>({"--intersection-height":`${d(y)??""}px`,"--intersection-cache-height":d(c)??"100px"})],void 0,"svelte-1fhs4v0");var _=R(k),w=S=>{var T=J(),L=W(T);ke(L,()=>t.children??Ue),b(S,T)};z(_,S=>{d(l)&&S(w)}),Bh(()=>Kp(k,"offsetHeight",S=>X(v,S))),Jr(k,(S,T)=>u?.(S,T),()=>p),Kr(k,S=>g=S,()=>g),Bh(()=>Kp(k,"clientWidth",S=>X(f,S))),b(e,k),pt()},getIntersectionStoreContext:Sy,getTransientContextMemo:Ty,intersectionContextKey:Al,setIntersectionContext:$g},Symbol.toStringTag,{value:"Module"}));var ZS=P('<div class="c-lazy-loading-error"><!></div>');function Iu(e,t){ut(t,!0);const[r,n]=se();let s=pu(t,["$$slots","$$events","$$legacy","children"]);const i=mc(),o=i?.enabled??Be(!1);var a=J(),h=W(a),l=u=>{var p=J(),g=W(p);yu(g,()=>Ie(()=>Promise.resolve().then(()=>YS),void 0,import.meta.url),f=>{},(f,m)=>{var y=O(()=>{var{default:_}=d(m);return{IntersectionDisplay:_}}),v=O(()=>d(y).IntersectionDisplay),x=J(),k=W(x);ve(k,()=>d(v),(_,w)=>{w(_,Ye(()=>s,{children:(S,T)=>{var L=J(),F=W(L);ke(F,()=>t.children??Ue),b(S,L)},$$slots:{default:!0}}))}),b(f,x)},(f,m)=>{var y=ZS(),v=R(y);ht(v,{size:1,color:"error",type:"monospace",children:(x,k)=>{var _=st();et(()=>at(_,d(m)+"")),b(x,_)},$$slots:{default:!0}}),b(f,y)}),b(u,p)},c=u=>{var p=J(),g=W(p);ke(g,()=>t.children??Ue),b(u,p)};z(h,u=>{Tt(o,"$enabled",r)?u(l):u(c,!1)}),b(e,a),pt(),n()}var Wn=(e=>(e.SUCCESS="SUCCESS",e.SKIPPED="SKIPPED",e.FAILED="FAILED",e))(Wn||{}),XS=P('<div><!> <div class="c-codeblocks__action-bar-status svelte-191e2kt"> </div></div>');function Mg(e,t){ut(t,!1);let r,n=G(t,"location",8,"bottomBar"),s=G(t,"align",8,"right"),i=_t("");Qr("augment-codeblock-actions-message",{setMessageText:u=>{X(i,u),r&&clearTimeout(r),r=setTimeout(()=>{X(i,"")},2500)}}),pr();var o=XS();let a;var h=R(o);cr(h,t,"default",{},null);var l=Y(h,2),c=R(l);et(u=>{a=Me(o,1,"c-codeblocks__action-bar svelte-191e2kt",null,a,u),at(c,d(i)||"")},[()=>({"c-codeblocks__loc-top-bar":n()==="topBar","c-codeblocks__loc-bottom-bar":n()==="bottomBar","c-codeblocks__loc-left-align":s()==="left"})]),b(e,o),pt()}function $y(e){return e?[".ipynb",".rmd",".qmd",".jl",".zmd"].some(t=>e.toLowerCase().endsWith(t)):!1}function My(e){navigator.clipboard.writeText(e)}function Ay(e,t,r){t.createFile(e,r||void 0),t.reportWebviewClientEvent(Sn.chatCodeblockCreate)}var KS=P("<!> ",1);function Ag(e,t){ut(t,!1);const r=_t(),n=_t(),s=_t(),i=_t(),o=_t(),a=_t(),h=_t(),l=_t(),c=_t(),u=_t();let p,g=G(t,"data",8),f=_t(void 0),m=_t(()=>{});function y(v){v.stopPropagation(),d(n)(),X(f,d(s)),clearTimeout(p),p=setTimeout(d(m),1500)}qt(()=>(d(r),d(n),d(s),d(i),d(o),d(a),d(h),d(l),d(c),d(u),xt(g())),()=>{var v;v=g(),X(r,v.title),X(n,v.onClick),X(s,v.onSuccessMessage),X(i,v.iconName),X(o,v.buttonText),X(a,v.onMouseDown),X(h,v.onMouseLeave),X(l,v.onMouseOver),X(c,v.onBlur),X(u,v.onFocus)}),Ms();{let v=he(()=>d(f)??d(r));fe(e,{onOpenChange:function(x){x||(clearTimeout(p),X(f,void 0),p=void 0)},get content(){return d(v)},get requestClose(){return d(m)},set requestClose(x){X(m,x)},children:(x,k)=>{Nr(x,{variant:"ghost-block",color:"neutral",size:1,$$events:{click:y,mouseover(..._){(d(l)||qs)?.apply(this,_)},mouseleave(..._){(d(h)||qs)?.apply(this,_)},blur(..._){(d(c)||qs)?.apply(this,_)},focus(..._){(d(u)||qs)?.apply(this,_)},mousedown(..._){(d(a)||qs)?.apply(this,_)}},children:(_,w)=>{var S=J(),T=W(S);cr(T,t,"default",{},L=>{var F=J(),A=W(F),B=M=>{ht(M,{size:1,children:($,E)=>{var D=KS(),I=W(D),N=K=>{vt(K,{get name(){return d(i)}})};z(I,K=>{d(i)&&K(N)});var q=Y(I);et(()=>at(q,` ${d(o)??""??""}`)),b($,D)},$$slots:{default:!0}})};z(A,M=>{(d(i)||d(o))&&M(B)}),b(L,F)}),b(_,S)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})}pt()}var pe=(e=>(e[e.copy=0]="copy",e[e.insert=1]="insert",e[e.smartPaste=2]="smartPaste",e[e.goTo=3]="goTo",e[e.directApply=4]="directApply",e))(pe||{});function Ey(e,t){return{codeblockActionType:pe.copy,title:"Copy to clipboard",onClick:function(){const r=e();r&&My(r)},onSuccessMessage:"Copied",iconName:"files",buttonText:"Copy",primary:!!t}}function Ly(e,t,r,n){return{codeblockActionType:pe.insert,title:t?.relPath?`Create new file at ${t.relPath}`:"Create new file",onClick:function(){const s=e();s&&r?.extensionClient&&Ay(s,r.extensionClient,t?.relPath)},onSuccessMessage:"Creating new file...",iconName:"file-plus",buttonText:"Create",primary:!!n}}function By(e,t,r,n,s){return{codeblockActionType:pe.goTo,title:`Go to ${r?.relPath}`,onClick:function(){r?.relPath&&(n?.extensionClient.reportWebviewClientEvent(Sn.chatCodeblockGoToFile),s(Yi({repoRoot:"",pathName:r?.relPath??"",snippet:t?e:void 0})))},onSuccessMessage:"Opening file...",iconName:"external-link",buttonText:"Go to",primary:!1}}function Iy(e,t){const{onVisible:r,onHidden:n,scrollTarget:s,threshold:i=.25,visibilityDuration:o=250,throttleDuration:a=100,ignoreScroll:h=!1}=t;let l=!1,c=null,u=!1,p=null;const g=new IntersectionObserver(v=>{v.forEach(x=>{l=x.isIntersecting,m()})},{threshold:i}),f=()=>{c!==null&&(clearTimeout(c),c=null),p!==null&&(clearTimeout(p),p=null)},m=Rh(()=>{l&&!u?c===null&&(c=setTimeout(()=>{r?.(),c=null},o)):(n?.(),f())},a),y=Rh(()=>{h||(u=!0,f(),p=setTimeout(()=>{u=!1,m()},a))},a);return g.observe(e),s.addEventListener("scroll",y,!0),{destroy(){g.disconnect(),s.removeEventListener("scroll",y),c!==null&&clearTimeout(c),p!==null&&clearTimeout(p)}}}function As(e,t){const r=Iy(e,{...t,onVisible:()=>{t.onVisible&&(t.onVisible(),r.destroy())},onHidden:()=>{t.onHidden&&(t.onHidden(),r.destroy())}});return{destroy:()=>{r.destroy()}}}function Fy(e,t,r,n,s,i,o,a,h,l,c){const u=!!t?.relPath,p=!!t?.mode&&t?.mode==="EDIT",{enableDirectApply:g,enableSmartPaste:f,smartPastePrecomputeMode:m}=(e?.selectFromReduxStore(_w.select).length,c);function y(){return!!f&&!!s&&!!(u&&p&&i)}function v(){if(!y()||!p)return!1;switch(m){case Ma.off:return!1;case Ma.visible:return o;case Ma.visibleHover:return o&&a;case Ma.on:return!0;default:return!1}}function x(S){S.dryRun&&!v()||r.text&&n&&e?.smartPaste(n,r.text,t?.relPath,{...S,requireFileConfirmation:!u})}const k=S=>({...S,iconName:"check",onMouseDown:T=>T.preventDefault(),onMouseOver:()=>x({dryRun:!0}),onFocus:()=>x({dryRun:!0})});let _,w;return g?(_=k({codeblockActionType:pe.smartPaste,title:"Review changes before applying",stateTitle:{neutral:"Review changes before applying",success:"Opened",failure:"Failed to apply"},onClick:()=>{l(!0),x({})},onSuccessMessage:"Opening diff view...",buttonText:"Review"}),w=k({codeblockActionType:pe.directApply,title:"Apply changes directly to file",stateTitle:{neutral:"Apply changes directly to file",success:"Applied",failure:"Failed to apply"},onClick:()=>{l(!0),x({instantApply:!0})},onSuccessMessage:"Applying changes directly...",buttonText:"Apply"})):_=k({codeblockActionType:pe.smartPaste,title:"Apply changes",stateTitle:{neutral:"Apply changes",success:"Applied",failure:"Failed to apply"},onClick:()=>{l(!0),x({})},onSuccessMessage:"Opening diff view...",buttonText:"Apply"}),{smartPaste:x,canTriggerSmartPaste:y(),canPrecomputeSmartPaste:v(),smartPasteButton:_,directApplyButton:w}}function Kh(e,t,r){let n,s;return n?.destroy(),n=Iy(e,{onVisible:()=>t(!0),onHidden:()=>t(!1),scrollTarget:document.body,threshold:.1}),s?.destroy(),s=j0(e,new W0({onHoverStart:()=>r(!0),onHoverEnd:()=>{},hoverTriggerDuration:600})),()=>{n?.destroy(),s?.destroy()}}var QS=P("<span></span>"),JS=P('<div class="c-codeblock__buttons-container svelte-p0xryu"><!></div>'),tT=P("<!> <!>",1),eT=P('<div class="c-codeblock__buttons-container svelte-p0xryu"><!> <!></div>');function rT(e,t){ut(t,!1);const r=()=>Tt(nt,"$requestIdModel",h),n=()=>Tt(it,"$chatModel",h),s=()=>Tt(Ct,"$enableDirectApply",h),i=()=>Tt(St,"$enableSmartPaste",h),o=()=>Tt(Lt,"$smartPastePrecomputeMode",h),a=()=>Tt(d(u),"$conversationModel",h),[h,l]=se(),c=_t(),u=_t(),p=_t(),g=_t(),f=_t(),m=_t(),y=_t(),v=_t(),x=_t(),k=_t(),_=_t(),w=_t(),S=_t(),T=_t(),L=_t(),F=_t(),A=_t(),B=_t(),M=_t(),$=_t(),E=_t(),D=_t(),I=_t(),N=_t(),q=_t(),K=_t(),Z=_t();let U=G(t,"token",8),H=G(t,"actionButtons",24,()=>{}),j=G(t,"removeDefaultButtons",8,!1),V=G(t,"codeblockMetadata",8),rt=G(t,"height",24,()=>{}),tt=_t(void 0);const it=me("chatModel"),nt=me("requestId");it||console.warn("ChatModel not found in context -- should you be using this component?");let ct=_t(void 0),mt=_t(!1),lt,gt=_t(!1);pn(()=>{lt?.destroy()});const Ct=je("enableDirectApply"),St=je("enableSmartPaste"),Lt=N0(),kt=Be(!1);let wt=_t(),bt=_t(!1),It=_t(!1),Yt=_t();pn(()=>{d(Yt)?.()});let Xt=_t(()=>{});qt(()=>r(),()=>{X(c,r())}),qt(()=>n(),()=>{dc(X(u,n()?.currentConversationModel),"$conversationModel",h)}),qt(()=>(d(gt),d(wt)),()=>{var Ht;!d(gt)&&d(wt)&&(Ht=d(wt),lt?.destroy(),lt=As(Ht,{scrollTarget:document.body,threshold:.25,visibilityDuration:250,onVisible:()=>X(gt,!0)}))}),qt(()=>(d(gt),xt(V())),()=>{d(gt)&&V()?.relPath&&async function(){V()?.relPath&&d(gt)&&!d(mt)&&(X(ct,await it?.extensionClient.resolvePath({rootPath:"",relPath:V()?.relPath})),X(mt,!0))}()}),qt(()=>xt(H()),()=>{X(p,H()?.find(Ht=>Ht.primary))}),qt(()=>xt(V()),()=>{X(A,!!V()?.relPath)}),qt(()=>(d(p),d(A),d(mt),d(ct)),()=>{X(g,!d(p)&&d(A)&&d(mt)&&!d(ct))}),qt(()=>(a(),d(c),ur),()=>{X(E,a()?.exchangeWithRequestId(d(c))?.status===ur.success)}),qt(()=>(d(wt),d(E),Kh),()=>{d(wt)&&d(E)&&X(Yt,Kh(d(wt),Ht=>X(bt,Ht),Ht=>X(It,Ht)))}),qt(()=>(d(w),d(S),d(T),d(L),d(F),xt(V()),xt(U()),d(c),d(E),d(ct),d(bt),d(It),s(),i(),o()),()=>{var Ht;Ht=Fy(it,V(),U(),d(c),d(E),!!d(ct),d(bt),d(It),0,Qt=>ma(kt,Qt),{enableDirectApply:s(),enableSmartPaste:i(),smartPastePrecomputeMode:o()}),X(w,Ht.smartPaste),X(S,Ht.canTriggerSmartPaste),X(T,Ht.canPrecomputeSmartPaste),X(L,Ht.smartPasteButton),X(F,Ht.directApplyButton)}),qt(()=>xt(V()),()=>{X(B,$y(V()?.relPath??""))}),qt(()=>(d(p),d(S),d(B)),()=>{X(f,!d(p)&&d(S)&&!d(B))}),qt(()=>(d(g),d(f),d(p)),()=>{X(m,d(g)||d(f)||d(p))}),qt(()=>d(tt),()=>{X(y,()=>d(tt)?.getContents())}),qt(()=>(d(y),d(m)),()=>{X(v,Ey(d(y),!d(m)))}),qt(()=>(d(y),xt(V()),d(g)),()=>{X(x,Ly(d(y),V(),it,d(g)))}),qt(()=>(d(A),d(ct)),()=>{X(k,d(A)&&d(ct))}),qt(()=>xt(V()),()=>{X(M,!!V()?.mode)}),qt(()=>(d(M),xt(V())),()=>{X($,d(M)&&V()?.mode==="EXCERPT")}),qt(()=>(xt(U()),d($),xt(V()),bs),()=>{X(_,By(U().text,d($),V(),it,bs()))}),qt(()=>(d(T),d(w)),()=>{d(T)&&d(w)({dryRun:!0})}),qt(()=>(d(v),d(x),d(F),d(f),d(L)),()=>{X(D,[d(v),d(x),...d(F)?[{...d(F),primary:d(f)}]:[],{...d(L),primary:!d(F)&&d(f)}])}),qt(()=>(xt(H()),d(k),d(_),xt(j()),d(D)),()=>{X(I,[...H()??[],...d(k)?[d(_)]:[],...j()?[]:d(D)])}),qt(()=>(d(N),d(q),d(I)),()=>{var Ht,Qt;Ht=d(I).reduce(([ee,$t],Wt)=>Wt.primary?[[...ee,Wt],$t]:[ee,[...$t,Wt]],[[],[]]),Qt=gu(Ht,2),X(N,Qt[0]),X(q,Qt[1])}),qt(()=>{},()=>{X(K,{top:30,bottom:8})}),qt(()=>(xt(V()),xt(U())),()=>{X(Z,V()?.language??U().lang)}),Ms(),pr(),Kr(Dh(e,{get token(){return U()},get padding(){return d(K)},get language(){return d(Z)},get height(){return rt()},get element(){return d(wt)},set element(ee){X(wt,ee)},topBarLeft:ee=>{Mg(ee,{location:"topBar",children:($t,Wt)=>{var Jt=JS(),Vt=R(Jt),ie=oe=>{{let ne=he(()=>(xt(pe),xt(V()),d(_),Ft(()=>({codeblockActionType:pe.goTo,title:`Go to ${V().relPath}`,onClick:d(_).onClick,onSuccessMessage:"Opening file..."}))));Ag(oe,{get data(){return d(ne)},children:(Ae,er)=>{Zi(Ae,{get filepath(){return xt(V()),Ft(()=>V().relPath)},leftIcon:We=>{var rr=QS();b(We,rr)},$$slots:{leftIcon:!0}})},$$slots:{default:!0}})}};z(Vt,oe=>{xt(V()),Ft(()=>!!V()?.relPath)&&oe(ie)}),b($t,Jt)},$$slots:{default:!0}})},topBarRight:ee=>{Mg(ee,{location:"topBar",align:"left",children:($t,Wt)=>{var Jt=eT(),Vt=R(Jt);ge(Vt,1,()=>d(N),Re,(ne,Ae)=>{Ag(ne,{get data(){return d(Ae)}})});var ie=Y(Vt,2),oe=ne=>{ce.Root(ne,{nested:!1,get requestClose(){return d(Xt)},set requestClose(Ae){X(Xt,Ae)},children:(Ae,er)=>{var Ke=tT(),We=W(Ke);ce.Trigger(We,{children:(ln,tn)=>{de(ln,{variant:"ghost-block",color:"neutral",size:1,children:(jr,sr)=>{vt(jr,{name:"ellipsis-vertical"})},$$slots:{default:!0}})},$$slots:{default:!0}});var rr=Y(We,2);ce.Content(rr,{side:"bottom",align:"end",children:(ln,tn)=>{var jr=J(),sr=W(jr);ge(sr,1,()=>d(q),Re,(fr,cn)=>{(function(yr,Qe){ut(Qe,!0);let be,He=O(()=>Qe.data.onClick),Wr=O(()=>Qe.data.onSuccessMessage),Ve=O(()=>Qe.data.iconName),ir=O(()=>Qe.data.buttonText),Hr=O(()=>Qe.data.onMouseDown),hn=O(()=>Qe.data.onMouseLeave),Ce=O(()=>Qe.data.onMouseOver),Ze=O(()=>Qe.data.onBlur),en=O(()=>Qe.data.onFocus),yn=yt(void 0);function rn(){be||(d(He)(),X(yn,d(Wr),!0),be=setTimeout(()=>{X(yn,void 0),be=void 0,Qe.closeDropdown()},1500))}var zn=J(),nn=W(zn);{const Is=fi=>{var Fs=J(),Sr=W(Fs),$a=Q=>{vt(Q,{get name(){return d(Ve)}})};z(Sr,Q=>{d(Ve)&&Q($a)}),b(fi,Fs)};ve(nn,()=>ce.Item,(fi,Fs)=>{Fs(fi,{onSelect:rn,$$events:{mouseover:Sr=>d(Ce)?.(Sr.detail),mouseleave:Sr=>d(hn)?.(Sr.detail),blur:Sr=>d(Ze)?.(Sr.detail),focus:Sr=>d(en)?.(Sr.detail),mousedown:Sr=>d(Hr)?.(Sr.detail)},iconLeft:Is,children:(Sr,$a)=>{var Q=st();et(()=>at(Q,d(yn)??d(ir))),b(Sr,Q)},$$slots:{iconLeft:!0,default:!0}})})}b(yr,zn),pt()})(fr,{get data(){return d(cn)},get closeDropdown(){return d(Xt)}})}),b(ln,jr)},$$slots:{default:!0}}),b(Ae,Ke)},$$slots:{default:!0},$$legacy:!0})};z(ie,ne=>{d(q),Ft(()=>d(q).length)&&ne(oe)}),b($t,Jt)},$$slots:{default:!0}})},$$slots:{topBarLeft:!0,topBarRight:!0},$$legacy:!0}),ee=>X(tt,ee),()=>d(tt)),pt(),l()}var Eg,Lg={name:"mermaid",version:"11.12.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},Bg={exports:{}},nT=(Eg||(Eg=1,Bg.exports=function(){var e=1e3,t=6e4,r=36e5,n="millisecond",s="second",i="minute",o="hour",a="day",h="week",l="month",c="quarter",u="year",p="date",g="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var $=["th","st","nd","rd"],E=M%100;return"["+M+($[(E-20)%10]||$[E]||$[0])+"]"}},v=function(M,$,E){var D=String(M);return!D||D.length>=$?M:""+Array($+1-D.length).join(E)+M},x={s:v,z:function(M){var $=-M.utcOffset(),E=Math.abs($),D=Math.floor(E/60),I=E%60;return($<=0?"+":"-")+v(D,2,"0")+":"+v(I,2,"0")},m:function M($,E){if($.date()<E.date())return-M(E,$);var D=12*(E.year()-$.year())+(E.month()-$.month()),I=$.clone().add(D,l),N=E-I<0,q=$.clone().add(D+(N?-1:1),l);return+(-(D+(E-I)/(N?I-q:q-I))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:l,y:u,w:h,d:a,D:p,h:o,m:i,s,ms:n,Q:c}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},k="en",_={};_[k]=y;var w="$isDayjsObject",S=function(M){return M instanceof A||!(!M||!M[w])},T=function M($,E,D){var I;if(!$)return k;if(typeof $=="string"){var N=$.toLowerCase();_[N]&&(I=N),E&&(_[N]=E,I=N);var q=$.split("-");if(!I&&q.length>1)return M(q[0])}else{var K=$.name;_[K]=$,I=K}return!D&&I&&(k=I),I||!D&&k},L=function(M,$){if(S(M))return M.clone();var E=typeof $=="object"?$:{};return E.date=M,E.args=arguments,new A(E)},F=x;F.l=T,F.i=S,F.w=function(M,$){return L(M,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var A=function(){function M(E){this.$L=T(E.locale,null,!0),this.parse(E),this.$x=this.$x||E.x||{},this[w]=!0}var $=M.prototype;return $.parse=function(E){this.$d=function(D){var I=D.date,N=D.utc;if(I===null)return new Date(NaN);if(F.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var q=I.match(f);if(q){var K=q[2]-1||0,Z=(q[7]||"0").substring(0,3);return N?new Date(Date.UTC(q[1],K,q[3]||1,q[4]||0,q[5]||0,q[6]||0,Z)):new Date(q[1],K,q[3]||1,q[4]||0,q[5]||0,q[6]||0,Z)}}return new Date(I)}(E),this.init()},$.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},$.$utils=function(){return F},$.isValid=function(){return this.$d.toString()!==g},$.isSame=function(E,D){var I=L(E);return this.startOf(D)<=I&&I<=this.endOf(D)},$.isAfter=function(E,D){return L(E)<this.startOf(D)},$.isBefore=function(E,D){return this.endOf(D)<L(E)},$.$g=function(E,D,I){return F.u(E)?this[D]:this.set(I,E)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(E,D){var I=this,N=!!F.u(D)||D,q=F.p(E),K=function(it,nt){var ct=F.w(I.$u?Date.UTC(I.$y,nt,it):new Date(I.$y,nt,it),I);return N?ct:ct.endOf(a)},Z=function(it,nt){return F.w(I.toDate()[it].apply(I.toDate("s"),(N?[0,0,0,0]:[23,59,59,999]).slice(nt)),I)},U=this.$W,H=this.$M,j=this.$D,V="set"+(this.$u?"UTC":"");switch(q){case u:return N?K(1,0):K(31,11);case l:return N?K(1,H):K(0,H+1);case h:var rt=this.$locale().weekStart||0,tt=(U<rt?U+7:U)-rt;return K(N?j-tt:j+(6-tt),H);case a:case p:return Z(V+"Hours",0);case o:return Z(V+"Minutes",1);case i:return Z(V+"Seconds",2);case s:return Z(V+"Milliseconds",3);default:return this.clone()}},$.endOf=function(E){return this.startOf(E,!1)},$.$set=function(E,D){var I,N=F.p(E),q="set"+(this.$u?"UTC":""),K=(I={},I[a]=q+"Date",I[p]=q+"Date",I[l]=q+"Month",I[u]=q+"FullYear",I[o]=q+"Hours",I[i]=q+"Minutes",I[s]=q+"Seconds",I[n]=q+"Milliseconds",I)[N],Z=N===a?this.$D+(D-this.$W):D;if(N===l||N===u){var U=this.clone().set(p,1);U.$d[K](Z),U.init(),this.$d=U.set(p,Math.min(this.$D,U.daysInMonth())).$d}else K&&this.$d[K](Z);return this.init(),this},$.set=function(E,D){return this.clone().$set(E,D)},$.get=function(E){return this[F.p(E)]()},$.add=function(E,D){var I,N=this;E=Number(E);var q=F.p(D),K=function(H){var j=L(N);return F.w(j.date(j.date()+Math.round(H*E)),N)};if(q===l)return this.set(l,this.$M+E);if(q===u)return this.set(u,this.$y+E);if(q===a)return K(1);if(q===h)return K(7);var Z=(I={},I[i]=t,I[o]=r,I[s]=e,I)[q]||1,U=this.$d.getTime()+E*Z;return F.w(U,this)},$.subtract=function(E,D){return this.add(-1*E,D)},$.format=function(E){var D=this,I=this.$locale();if(!this.isValid())return I.invalidDate||g;var N=E||"YYYY-MM-DDTHH:mm:ssZ",q=F.z(this),K=this.$H,Z=this.$m,U=this.$M,H=I.weekdays,j=I.months,V=I.meridiem,rt=function(nt,ct,mt,lt){return nt&&(nt[ct]||nt(D,N))||mt[ct].slice(0,lt)},tt=function(nt){return F.s(K%12||12,nt,"0")},it=V||function(nt,ct,mt){var lt=nt<12?"AM":"PM";return mt?lt.toLowerCase():lt};return N.replace(m,function(nt,ct){return ct||function(mt){switch(mt){case"YY":return String(D.$y).slice(-2);case"YYYY":return F.s(D.$y,4,"0");case"M":return U+1;case"MM":return F.s(U+1,2,"0");case"MMM":return rt(I.monthsShort,U,j,3);case"MMMM":return rt(j,U);case"D":return D.$D;case"DD":return F.s(D.$D,2,"0");case"d":return String(D.$W);case"dd":return rt(I.weekdaysMin,D.$W,H,2);case"ddd":return rt(I.weekdaysShort,D.$W,H,3);case"dddd":return H[D.$W];case"H":return String(K);case"HH":return F.s(K,2,"0");case"h":return tt(1);case"hh":return tt(2);case"a":return it(K,Z,!0);case"A":return it(K,Z,!1);case"m":return String(Z);case"mm":return F.s(Z,2,"0");case"s":return String(D.$s);case"ss":return F.s(D.$s,2,"0");case"SSS":return F.s(D.$ms,3,"0");case"Z":return q}return null}(nt)||q.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(E,D,I){var N,q=this,K=F.p(D),Z=L(E),U=(Z.utcOffset()-this.utcOffset())*t,H=this-Z,j=function(){return F.m(q,Z)};switch(K){case u:N=j()/12;break;case l:N=j();break;case c:N=j()/3;break;case h:N=(H-U)/6048e5;break;case a:N=(H-U)/864e5;break;case o:N=H/r;break;case i:N=H/t;break;case s:N=H/e;break;default:N=H}return I?N:F.a(N)},$.daysInMonth=function(){return this.endOf(l).$D},$.$locale=function(){return _[this.$L]},$.locale=function(E,D){if(!E)return this.$L;var I=this.clone(),N=T(E,D,!0);return N&&(I.$L=N),I},$.clone=function(){return F.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},M}(),B=A.prototype;return L.prototype=B,[["$ms",n],["$s",s],["$m",i],["$H",o],["$W",a],["$M",l],["$y",u],["$D",p]].forEach(function(M){B[M[1]]=function($){return this.$g($,M[0],M[1])}}),L.extend=function(M,$){return M.$i||(M($,A,L),M.$i=!0),L},L.locale=T,L.isDayjs=S,L.unix=function(M){return L(1e3*M)},L.en=_[k],L.Ls=_,L.p={},L}()),Bg.exports);const sT=ku(nT);var Dy=Object.defineProperty,C=(e,t)=>Dy(e,"name",{value:t,configurable:!0}),iT=(e,t)=>{for(var r in t)Dy(e,r,{get:t[r],enumerable:!0})},qn={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},ft={trace:C((...e)=>{},"trace"),debug:C((...e)=>{},"debug"),info:C((...e)=>{},"info"),warn:C((...e)=>{},"warn"),error:C((...e)=>{},"error"),fatal:C((...e)=>{},"fatal")},Fu=C(function(e="fatal"){let t=qn.fatal;typeof e=="string"?e.toLowerCase()in qn&&(t=qn[e]):typeof e=="number"&&(t=e),ft.trace=()=>{},ft.debug=()=>{},ft.info=()=>{},ft.warn=()=>{},ft.error=()=>{},ft.fatal=()=>{},t<=qn.fatal&&(ft.fatal=console.error?console.error.bind(console,dn("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",dn("FATAL"))),t<=qn.error&&(ft.error=console.error?console.error.bind(console,dn("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",dn("ERROR"))),t<=qn.warn&&(ft.warn=console.warn?console.warn.bind(console,dn("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",dn("WARN"))),t<=qn.info&&(ft.info=console.info?console.info.bind(console,dn("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",dn("INFO"))),t<=qn.debug&&(ft.debug=console.debug?console.debug.bind(console,dn("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",dn("DEBUG"))),t<=qn.trace&&(ft.trace=console.debug?console.debug.bind(console,dn("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",dn("TRACE")))},"setLogLevel"),dn=C(e=>`%c${sT().format("ss.SSS")} : ${e} : `,"format");const rl={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e),hsl2rgb:({h:e,s:t,l:r},n)=>{if(!t)return 2.55*r;e/=360,t/=100;const s=(r/=100)<.5?r*(1+t):r+t-r*t,i=2*r-s;switch(n){case"r":return 255*rl.hue2rgb(i,s,e+1/3);case"g":return 255*rl.hue2rgb(i,s,e);case"b":return 255*rl.hue2rgb(i,s,e-1/3)}},rgb2hsl:({r:e,g:t,b:r},n)=>{e/=255,t/=255,r/=255;const s=Math.max(e,t,r),i=Math.min(e,t,r),o=(s+i)/2;if(n==="l")return 100*o;if(s===i)return 0;const a=s-i;if(n==="s")return 100*(o>.5?a/(2-s-i):a/(s+i));switch(s){case e:return 60*((t-r)/a+(t<r?6:0));case t:return 60*((r-e)/a+2);case r:return 60*((e-t)/a+4);default:return-1}}},oT={clamp:(e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e)),round:e=>Math.round(1e10*e)/1e10},aT={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},re={channel:rl,lang:oT,unit:aT},ls={};for(let e=0;e<=255;e++)ls[e]=re.unit.dec2hex(e);const Qh=0,yi=1,Ps=2;class lT{constructor(){this.type=Qh}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=Qh}is(t){return this.type===t}}const yc=new class{constructor(e,t){this.color=t,this.changed=!1,this.data=e,this.type=new lT}set(e,t){return this.color=t,this.changed=!1,this.data=e,this.type.type=Qh,this}_ensureHSL(){const e=this.data,{h:t,s:r,l:n}=e;t===void 0&&(e.h=re.channel.rgb2hsl(e,"h")),r===void 0&&(e.s=re.channel.rgb2hsl(e,"s")),n===void 0&&(e.l=re.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:t,g:r,b:n}=e;t===void 0&&(e.r=re.channel.hsl2rgb(e,"r")),r===void 0&&(e.g=re.channel.hsl2rgb(e,"g")),n===void 0&&(e.b=re.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,t=e.r;return this.type.is(Ps)||t===void 0?(this._ensureHSL(),re.channel.hsl2rgb(e,"r")):t}get g(){const e=this.data,t=e.g;return this.type.is(Ps)||t===void 0?(this._ensureHSL(),re.channel.hsl2rgb(e,"g")):t}get b(){const e=this.data,t=e.b;return this.type.is(Ps)||t===void 0?(this._ensureHSL(),re.channel.hsl2rgb(e,"b")):t}get h(){const e=this.data,t=e.h;return this.type.is(yi)||t===void 0?(this._ensureRGB(),re.channel.rgb2hsl(e,"h")):t}get s(){const e=this.data,t=e.s;return this.type.is(yi)||t===void 0?(this._ensureRGB(),re.channel.rgb2hsl(e,"s")):t}get l(){const e=this.data,t=e.l;return this.type.is(yi)||t===void 0?(this._ensureRGB(),re.channel.rgb2hsl(e,"l")):t}get a(){return this.data.a}set r(e){this.type.set(yi),this.changed=!0,this.data.r=e}set g(e){this.type.set(yi),this.changed=!0,this.data.g=e}set b(e){this.type.set(yi),this.changed=!0,this.data.b=e}set h(e){this.type.set(Ps),this.changed=!0,this.data.h=e}set s(e){this.type.set(Ps),this.changed=!0,this.data.s=e}set l(e){this.type.set(Ps),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}({r:0,g:0,b:0,a:0},"transparent"),Oi={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(Oi.re);if(!t)return;const r=t[1],n=parseInt(r,16),s=r.length,i=s%4==0,o=s>4,a=o?1:17,h=o?8:4,l=i?0:-1,c=o?255:15;return yc.set({r:(n>>h*(l+3)&c)*a,g:(n>>h*(l+2)&c)*a,b:(n>>h*(l+1)&c)*a,a:i?(n&c)*a/255:1},e)},stringify:e=>{const{r:t,g:r,b:n,a:s}=e;return s<1?`#${ls[Math.round(t)]}${ls[Math.round(r)]}${ls[Math.round(n)]}${ls[Math.round(255*s)]}`:`#${ls[Math.round(t)]}${ls[Math.round(r)]}${ls[Math.round(n)]}`}},Hs={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(Hs.hueRe);if(t){const[,r,n]=t;switch(n){case"grad":return re.channel.clamp.h(.9*parseFloat(r));case"rad":return re.channel.clamp.h(180*parseFloat(r)/Math.PI);case"turn":return re.channel.clamp.h(360*parseFloat(r))}}return re.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const r=e.match(Hs.re);if(!r)return;const[,n,s,i,o,a]=r;return yc.set({h:Hs._hue2deg(n),s:re.channel.clamp.s(parseFloat(s)),l:re.channel.clamp.l(parseFloat(i)),a:o?re.channel.clamp.a(a?parseFloat(o)/100:parseFloat(o)):1},e)},stringify:e=>{const{h:t,s:r,l:n,a:s}=e;return s<1?`hsla(${re.lang.round(t)}, ${re.lang.round(r)}%, ${re.lang.round(n)}%, ${s})`:`hsl(${re.lang.round(t)}, ${re.lang.round(r)}%, ${re.lang.round(n)}%)`}},qo={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=qo.colors[e];if(t)return Oi.parse(t)},stringify:e=>{const t=Oi.stringify(e);for(const r in qo.colors)if(qo.colors[r]===t)return r}},Ao={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const r=e.match(Ao.re);if(!r)return;const[,n,s,i,o,a,h,l,c]=r;return yc.set({r:re.channel.clamp.r(s?2.55*parseFloat(n):parseFloat(n)),g:re.channel.clamp.g(o?2.55*parseFloat(i):parseFloat(i)),b:re.channel.clamp.b(h?2.55*parseFloat(a):parseFloat(a)),a:l?re.channel.clamp.a(c?parseFloat(l)/100:parseFloat(l)):1},e)},stringify:e=>{const{r:t,g:r,b:n,a:s}=e;return s<1?`rgba(${re.lang.round(t)}, ${re.lang.round(r)}, ${re.lang.round(n)}, ${re.lang.round(s)})`:`rgb(${re.lang.round(t)}, ${re.lang.round(r)}, ${re.lang.round(n)})`}},On={format:{keyword:qo,hex:Oi,rgb:Ao,rgba:Ao,hsl:Hs,hsla:Hs},parse:e=>{if(typeof e!="string")return e;const t=Oi.parse(e)||Ao.parse(e)||Hs.parse(e)||qo.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(Ps)||e.data.r===void 0?Hs.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Ao.stringify(e):Oi.stringify(e)},Oy=(e,t)=>{const r=On.parse(e);for(const n in t)r[n]=re.channel.clamp[n](t[n]);return On.stringify(r)},jo=(e,t,r=0,n=1)=>{if(typeof e!="number")return Oy(e,{a:t});const s=yc.set({r:re.channel.clamp.r(e),g:re.channel.clamp.g(t),b:re.channel.clamp.b(r),a:re.channel.clamp.a(n)});return On.stringify(s)},cT=e=>(t=>{const{r,g:n,b:s}=On.parse(t),i=.2126*re.channel.toLinear(r)+.7152*re.channel.toLinear(n)+.0722*re.channel.toLinear(s);return re.lang.round(i)})(e)>=.5,va=e=>!cT(e),Ry=(e,t,r)=>{const n=On.parse(e),s=n[t],i=re.channel.clamp[t](s+r);return s!==i&&(n[t]=i),On.stringify(n)},Dt=(e,t)=>Ry(e,"l",t),jt=(e,t)=>Ry(e,"l",-t),ot=(e,t)=>{const r=On.parse(e),n={};for(const s in t)t[s]&&(n[s]=r[s]+t[s]);return Oy(e,n)},Mt=(e,t=100)=>{const r=On.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,((n,s,i=50)=>{const{r:o,g:a,b:h,a:l}=On.parse(n),{r:c,g:u,b:p,a:g}=On.parse(s),f=i/100,m=2*f-1,y=l-g,v=((m*y==-1?m:(m+y)/(1+m*y))+1)/2,x=1-v;return jo(o*v+c*x,a*v+u*x,h*v+p*x,l*f+g*(1-f))})(r,e,t)},{entries:Py,setPrototypeOf:Ig,isFrozen:hT,getPrototypeOf:dT,getOwnPropertyDescriptor:uT}=Object;let{freeze:zr,seal:gn,create:Jh}=Object,{apply:td,construct:ed}=typeof Reflect<"u"&&Reflect;zr||(zr=function(e){return e}),gn||(gn=function(e){return e}),td||(td=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];return e.apply(t,n)}),ed||(ed=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new e(...r)});const Ba=Ur(Array.prototype.forEach),pT=Ur(Array.prototype.lastIndexOf),Fg=Ur(Array.prototype.pop),mo=Ur(Array.prototype.push),gT=Ur(Array.prototype.splice),nl=Ur(String.prototype.toLowerCase),Kc=Ur(String.prototype.toString),Qc=Ur(String.prototype.match),yo=Ur(String.prototype.replace),fT=Ur(String.prototype.indexOf),mT=Ur(String.prototype.trim),bn=Ur(Object.prototype.hasOwnProperty),Br=Ur(RegExp.prototype.test),vo=(Dg=TypeError,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ed(Dg,t)});var Dg;function Ur(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return td(e,t,n)}}function ue(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nl;Ig&&Ig(e,null);let n=t.length;for(;n--;){let s=t[n];if(typeof s=="string"){const i=r(s);i!==s&&(hT(t)||(t[n]=i),s=i)}e[s]=!0}return e}function yT(e){for(let t=0;t<e.length;t++)bn(e,t)||(e[t]=null);return e}function Hn(e){const t=Jh(null);for(const[r,n]of Py(e))bn(e,r)&&(Array.isArray(n)?t[r]=yT(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=Hn(n):t[r]=n);return t}function bo(e,t){for(;e!==null;){const r=uT(e,t);if(r){if(r.get)return Ur(r.get);if(typeof r.value=="function")return Ur(r.value)}e=dT(e)}return function(){return null}}const Og=zr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Jc=zr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),th=zr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),vT=zr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),eh=zr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),bT=zr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Rg=zr(["#text"]),Pg=zr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),rh=zr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ng=zr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ia=zr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),xT=gn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),kT=gn(/<%[\w\W]*|[\w\W]*%>/gm),_T=gn(/\$\{[\w\W]*/gm),wT=gn(/^data-[\-\w.\u00B7-\uFFFF]+$/),CT=gn(/^aria-[\-\w]+$/),Ny=gn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ST=gn(/^(?:\w+script|data):/i),TT=gn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zy=gn(/^html$/i),$T=gn(/^[a-z][.\w]*(-[.\w]+)+$/i);var zg=Object.freeze({__proto__:null,ARIA_ATTR:CT,ATTR_WHITESPACE:TT,CUSTOM_ELEMENT:$T,DATA_ATTR:wT,DOCTYPE_NAME:zy,ERB_EXPR:kT,IS_ALLOWED_URI:Ny,IS_SCRIPT_OR_DATA:ST,MUSTACHE_EXPR:xT,TMPLIT_EXPR:_T});const MT=1,AT=3,ET=7,LT=8,BT=9,IT=function(){return typeof window>"u"?null:window};var El,Ki=function e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:IT();const r=Q=>e(Q);if(r.version="3.3.0",r.removed=[],!t||!t.document||t.document.nodeType!==BT||!t.Element)return r.isSupported=!1,r;let{document:n}=t;const s=n,i=s.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:h,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:g,trustedTypes:f}=t,m=l.prototype,y=bo(m,"cloneNode"),v=bo(m,"remove"),x=bo(m,"nextSibling"),k=bo(m,"childNodes"),_=bo(m,"parentNode");if(typeof a=="function"){const Q=n.createElement("template");Q.content&&Q.content.ownerDocument&&(n=Q.content.ownerDocument)}let w,S="";const{implementation:T,createNodeIterator:L,createDocumentFragment:F,getElementsByTagName:A}=n,{importNode:B}=s;let M={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};r.isSupported=typeof Py=="function"&&typeof _=="function"&&T&&T.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:$,ERB_EXPR:E,TMPLIT_EXPR:D,DATA_ATTR:I,ARIA_ATTR:N,IS_SCRIPT_OR_DATA:q,ATTR_WHITESPACE:K,CUSTOM_ELEMENT:Z}=zg;let{IS_ALLOWED_URI:U}=zg,H=null;const j=ue({},[...Og,...Jc,...th,...eh,...Rg]);let V=null;const rt=ue({},[...Pg,...rh,...Ng,...Ia]);let tt=Object.seal(Jh(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),it=null,nt=null;const ct=Object.seal(Jh(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let mt=!0,lt=!0,gt=!1,Ct=!0,St=!1,Lt=!0,kt=!1,wt=!1,bt=!1,It=!1,Yt=!1,Xt=!1,Ht=!0,Qt=!1,ee=!0,$t=!1,Wt={},Jt=null;const Vt=ue({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ie=null;const oe=ue({},["audio","video","img","source","image","track"]);let ne=null;const Ae=ue({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),er="http://www.w3.org/1998/Math/MathML",Ke="http://www.w3.org/2000/svg",We="http://www.w3.org/1999/xhtml";let rr=We,ln=!1,tn=null;const jr=ue({},[er,Ke,We],Kc);let sr=ue({},["mi","mo","mn","ms","mtext"]),fr=ue({},["annotation-xml"]);const cn=ue({},["title","style","font","a","script"]);let yr=null;const Qe=["application/xhtml+xml","text/html"];let be=null,He=null;const Wr=n.createElement("form"),Ve=function(Q){return Q instanceof RegExp||Q instanceof Function},ir=function(){let Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!He||He!==Q){if(Q&&typeof Q=="object"||(Q={}),Q=Hn(Q),yr=Qe.indexOf(Q.PARSER_MEDIA_TYPE)===-1?"text/html":Q.PARSER_MEDIA_TYPE,be=yr==="application/xhtml+xml"?Kc:nl,H=bn(Q,"ALLOWED_TAGS")?ue({},Q.ALLOWED_TAGS,be):j,V=bn(Q,"ALLOWED_ATTR")?ue({},Q.ALLOWED_ATTR,be):rt,tn=bn(Q,"ALLOWED_NAMESPACES")?ue({},Q.ALLOWED_NAMESPACES,Kc):jr,ne=bn(Q,"ADD_URI_SAFE_ATTR")?ue(Hn(Ae),Q.ADD_URI_SAFE_ATTR,be):Ae,ie=bn(Q,"ADD_DATA_URI_TAGS")?ue(Hn(oe),Q.ADD_DATA_URI_TAGS,be):oe,Jt=bn(Q,"FORBID_CONTENTS")?ue({},Q.FORBID_CONTENTS,be):Vt,it=bn(Q,"FORBID_TAGS")?ue({},Q.FORBID_TAGS,be):Hn({}),nt=bn(Q,"FORBID_ATTR")?ue({},Q.FORBID_ATTR,be):Hn({}),Wt=!!bn(Q,"USE_PROFILES")&&Q.USE_PROFILES,mt=Q.ALLOW_ARIA_ATTR!==!1,lt=Q.ALLOW_DATA_ATTR!==!1,gt=Q.ALLOW_UNKNOWN_PROTOCOLS||!1,Ct=Q.ALLOW_SELF_CLOSE_IN_ATTR!==!1,St=Q.SAFE_FOR_TEMPLATES||!1,Lt=Q.SAFE_FOR_XML!==!1,kt=Q.WHOLE_DOCUMENT||!1,It=Q.RETURN_DOM||!1,Yt=Q.RETURN_DOM_FRAGMENT||!1,Xt=Q.RETURN_TRUSTED_TYPE||!1,bt=Q.FORCE_BODY||!1,Ht=Q.SANITIZE_DOM!==!1,Qt=Q.SANITIZE_NAMED_PROPS||!1,ee=Q.KEEP_CONTENT!==!1,$t=Q.IN_PLACE||!1,U=Q.ALLOWED_URI_REGEXP||Ny,rr=Q.NAMESPACE||We,sr=Q.MATHML_TEXT_INTEGRATION_POINTS||sr,fr=Q.HTML_INTEGRATION_POINTS||fr,tt=Q.CUSTOM_ELEMENT_HANDLING||{},Q.CUSTOM_ELEMENT_HANDLING&&Ve(Q.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(tt.tagNameCheck=Q.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Q.CUSTOM_ELEMENT_HANDLING&&Ve(Q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(tt.attributeNameCheck=Q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Q.CUSTOM_ELEMENT_HANDLING&&typeof Q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(tt.allowCustomizedBuiltInElements=Q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),St&&(lt=!1),Yt&&(It=!0),Wt&&(H=ue({},Rg),V=[],Wt.html===!0&&(ue(H,Og),ue(V,Pg)),Wt.svg===!0&&(ue(H,Jc),ue(V,rh),ue(V,Ia)),Wt.svgFilters===!0&&(ue(H,th),ue(V,rh),ue(V,Ia)),Wt.mathMl===!0&&(ue(H,eh),ue(V,Ng),ue(V,Ia))),Q.ADD_TAGS&&(typeof Q.ADD_TAGS=="function"?ct.tagCheck=Q.ADD_TAGS:(H===j&&(H=Hn(H)),ue(H,Q.ADD_TAGS,be))),Q.ADD_ATTR&&(typeof Q.ADD_ATTR=="function"?ct.attributeCheck=Q.ADD_ATTR:(V===rt&&(V=Hn(V)),ue(V,Q.ADD_ATTR,be))),Q.ADD_URI_SAFE_ATTR&&ue(ne,Q.ADD_URI_SAFE_ATTR,be),Q.FORBID_CONTENTS&&(Jt===Vt&&(Jt=Hn(Jt)),ue(Jt,Q.FORBID_CONTENTS,be)),ee&&(H["#text"]=!0),kt&&ue(H,["html","head","body"]),H.table&&(ue(H,["tbody"]),delete it.tbody),Q.TRUSTED_TYPES_POLICY){if(typeof Q.TRUSTED_TYPES_POLICY.createHTML!="function")throw vo('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Q.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw vo('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=Q.TRUSTED_TYPES_POLICY,S=w.createHTML("")}else w===void 0&&(w=function(Rt,At){if(typeof Rt!="object"||typeof Rt.createPolicy!="function")return null;let xe=null;const Ee="data-tt-policy-suffix";At&&At.hasAttribute(Ee)&&(xe=At.getAttribute(Ee));const le="dompurify"+(xe?"#"+xe:"");try{return Rt.createPolicy(le,{createHTML:ar=>ar,createScriptURL:ar=>ar})}catch{return console.warn("TrustedTypes policy "+le+" could not be created."),null}}(f,i)),w!==null&&typeof S=="string"&&(S=w.createHTML(""));zr&&zr(Q),He=Q}},Hr=ue({},[...Jc,...th,...vT]),hn=ue({},[...eh,...bT]),Ce=function(Q){mo(r.removed,{element:Q});try{_(Q).removeChild(Q)}catch{v(Q)}},Ze=function(Q,Rt){try{mo(r.removed,{attribute:Rt.getAttributeNode(Q),from:Rt})}catch{mo(r.removed,{attribute:null,from:Rt})}if(Rt.removeAttribute(Q),Q==="is")if(It||Yt)try{Ce(Rt)}catch{}else try{Rt.setAttribute(Q,"")}catch{}},en=function(Q){let Rt=null,At=null;if(bt)Q="<remove></remove>"+Q;else{const le=Qc(Q,/^[\r\n\t ]+/);At=le&&le[0]}yr==="application/xhtml+xml"&&rr===We&&(Q='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Q+"</body></html>");const xe=w?w.createHTML(Q):Q;if(rr===We)try{Rt=new g().parseFromString(xe,yr)}catch{}if(!Rt||!Rt.documentElement){Rt=T.createDocument(rr,"template",null);try{Rt.documentElement.innerHTML=ln?S:xe}catch{}}const Ee=Rt.body||Rt.documentElement;return Q&&At&&Ee.insertBefore(n.createTextNode(At),Ee.childNodes[0]||null),rr===We?A.call(Rt,kt?"html":"body")[0]:kt?Rt.documentElement:Ee},yn=function(Q){return L.call(Q.ownerDocument||Q,Q,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},rn=function(Q){return Q instanceof p&&(typeof Q.nodeName!="string"||typeof Q.textContent!="string"||typeof Q.removeChild!="function"||!(Q.attributes instanceof u)||typeof Q.removeAttribute!="function"||typeof Q.setAttribute!="function"||typeof Q.namespaceURI!="string"||typeof Q.insertBefore!="function"||typeof Q.hasChildNodes!="function")},zn=function(Q){return typeof h=="function"&&Q instanceof h};function nn(Q,Rt,At){Ba(Q,xe=>{xe.call(r,Rt,At,He)})}const Is=function(Q){let Rt=null;if(nn(M.beforeSanitizeElements,Q,null),rn(Q))return Ce(Q),!0;const At=be(Q.nodeName);if(nn(M.uponSanitizeElement,Q,{tagName:At,allowedTags:H}),Lt&&Q.hasChildNodes()&&!zn(Q.firstElementChild)&&Br(/<[/\w!]/g,Q.innerHTML)&&Br(/<[/\w!]/g,Q.textContent)||Q.nodeType===ET||Lt&&Q.nodeType===LT&&Br(/<[/\w]/g,Q.data))return Ce(Q),!0;if(!(ct.tagCheck instanceof Function&&ct.tagCheck(At))&&(!H[At]||it[At])){if(!it[At]&&Fs(At)&&(tt.tagNameCheck instanceof RegExp&&Br(tt.tagNameCheck,At)||tt.tagNameCheck instanceof Function&&tt.tagNameCheck(At)))return!1;if(ee&&!Jt[At]){const xe=_(Q)||Q.parentNode,Ee=k(Q)||Q.childNodes;if(Ee&&xe)for(let le=Ee.length-1;le>=0;--le){const ar=y(Ee[le],!0);ar.__removalCount=(Q.__removalCount||0)+1,xe.insertBefore(ar,x(Q))}}return Ce(Q),!0}return Q instanceof l&&!function(xe){let Ee=_(xe);Ee&&Ee.tagName||(Ee={namespaceURI:rr,tagName:"template"});const le=nl(xe.tagName),ar=nl(Ee.tagName);return!!tn[xe.namespaceURI]&&(xe.namespaceURI===Ke?Ee.namespaceURI===We?le==="svg":Ee.namespaceURI===er?le==="svg"&&(ar==="annotation-xml"||sr[ar]):!!Hr[le]:xe.namespaceURI===er?Ee.namespaceURI===We?le==="math":Ee.namespaceURI===Ke?le==="math"&&fr[ar]:!!hn[le]:xe.namespaceURI===We?!(Ee.namespaceURI===Ke&&!fr[ar])&&!(Ee.namespaceURI===er&&!sr[ar])&&!hn[le]&&(cn[le]||!Hr[le]):!(yr!=="application/xhtml+xml"||!tn[xe.namespaceURI]))}(Q)?(Ce(Q),!0):At!=="noscript"&&At!=="noembed"&&At!=="noframes"||!Br(/<\/no(script|embed|frames)/i,Q.innerHTML)?(St&&Q.nodeType===AT&&(Rt=Q.textContent,Ba([$,E,D],xe=>{Rt=yo(Rt,xe," ")}),Q.textContent!==Rt&&(mo(r.removed,{element:Q.cloneNode()}),Q.textContent=Rt)),nn(M.afterSanitizeElements,Q,null),!1):(Ce(Q),!0)},fi=function(Q,Rt,At){if(Ht&&(Rt==="id"||Rt==="name")&&(At in n||At in Wr))return!1;if(!(lt&&!nt[Rt]&&Br(I,Rt))){if(!(mt&&Br(N,Rt))){if(!(ct.attributeCheck instanceof Function&&ct.attributeCheck(Rt,Q))){if(!V[Rt]||nt[Rt]){if(!(Fs(Q)&&(tt.tagNameCheck instanceof RegExp&&Br(tt.tagNameCheck,Q)||tt.tagNameCheck instanceof Function&&tt.tagNameCheck(Q))&&(tt.attributeNameCheck instanceof RegExp&&Br(tt.attributeNameCheck,Rt)||tt.attributeNameCheck instanceof Function&&tt.attributeNameCheck(Rt,Q))||Rt==="is"&&tt.allowCustomizedBuiltInElements&&(tt.tagNameCheck instanceof RegExp&&Br(tt.tagNameCheck,At)||tt.tagNameCheck instanceof Function&&tt.tagNameCheck(At))))return!1}else if(!ne[Rt]){if(!Br(U,yo(At,K,""))){if((Rt!=="src"&&Rt!=="xlink:href"&&Rt!=="href"||Q==="script"||fT(At,"data:")!==0||!ie[Q])&&!(gt&&!Br(q,yo(At,K,"")))){if(At)return!1}}}}}}return!0},Fs=function(Q){return Q!=="annotation-xml"&&Qc(Q,Z)},Sr=function(Q){nn(M.beforeSanitizeAttributes,Q,null);const{attributes:Rt}=Q;if(!Rt||rn(Q))return;const At={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:V,forceKeepAttr:void 0};let xe=Rt.length;for(;xe--;){const Ee=Rt[xe],{name:le,namespaceURI:ar,value:as}=Ee,vn=be(le),Uc=as;let vr=le==="value"?Uc:mT(Uc);if(At.attrName=vn,At.attrValue=vr,At.keepAttr=!0,At.forceKeepAttr=void 0,nn(M.uponSanitizeAttribute,Q,At),vr=At.attrValue,!Qt||vn!=="id"&&vn!=="name"||(Ze(le,Q),vr="user-content-"+vr),Lt&&Br(/((--!?|])>)|<\/(style|title|textarea)/i,vr)){Ze(le,Q);continue}if(vn==="attributename"&&Qc(vr,"href")){Ze(le,Q);continue}if(At.forceKeepAttr)continue;if(!At.keepAttr){Ze(le,Q);continue}if(!Ct&&Br(/\/>/i,vr)){Ze(le,Q);continue}St&&Ba([$,E,D],Np=>{vr=yo(vr,Np," ")});const Pp=be(Q.nodeName);if(fi(Pp,vn,vr)){if(w&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!ar)switch(f.getAttributeType(Pp,vn)){case"TrustedHTML":vr=w.createHTML(vr);break;case"TrustedScriptURL":vr=w.createScriptURL(vr)}if(vr!==Uc)try{ar?Q.setAttributeNS(ar,le,vr):Q.setAttribute(le,vr),rn(Q)?Ce(Q):Fg(r.removed)}catch{Ze(le,Q)}}else Ze(le,Q)}nn(M.afterSanitizeAttributes,Q,null)},$a=function Q(Rt){let At=null;const xe=yn(Rt);for(nn(M.beforeSanitizeShadowDOM,Rt,null);At=xe.nextNode();)nn(M.uponSanitizeShadowNode,At,null),Is(At),Sr(At),At.content instanceof o&&Q(At.content);nn(M.afterSanitizeShadowDOM,Rt,null)};return r.sanitize=function(Q){let Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},At=null,xe=null,Ee=null,le=null;if(ln=!Q,ln&&(Q="<!-->"),typeof Q!="string"&&!zn(Q)){if(typeof Q.toString!="function")throw vo("toString is not a function");if(typeof(Q=Q.toString())!="string")throw vo("dirty is not a string, aborting")}if(!r.isSupported)return Q;if(wt||ir(Rt),r.removed=[],typeof Q=="string"&&($t=!1),$t){if(Q.nodeName){const vn=be(Q.nodeName);if(!H[vn]||it[vn])throw vo("root node is forbidden and cannot be sanitized in-place")}}else if(Q instanceof h)At=en("<!---->"),xe=At.ownerDocument.importNode(Q,!0),xe.nodeType===MT&&xe.nodeName==="BODY"||xe.nodeName==="HTML"?At=xe:At.appendChild(xe);else{if(!It&&!St&&!kt&&Q.indexOf("<")===-1)return w&&Xt?w.createHTML(Q):Q;if(At=en(Q),!At)return It?null:Xt?S:""}At&&bt&&Ce(At.firstChild);const ar=yn($t?Q:At);for(;Ee=ar.nextNode();)Is(Ee),Sr(Ee),Ee.content instanceof o&&$a(Ee.content);if($t)return Q;if(It){if(Yt)for(le=F.call(At.ownerDocument);At.firstChild;)le.appendChild(At.firstChild);else le=At;return(V.shadowroot||V.shadowrootmode)&&(le=B.call(s,le,!0)),le}let as=kt?At.outerHTML:At.innerHTML;return kt&&H["!doctype"]&&At.ownerDocument&&At.ownerDocument.doctype&&At.ownerDocument.doctype.name&&Br(zy,At.ownerDocument.doctype.name)&&(as="<!DOCTYPE "+At.ownerDocument.doctype.name+`>
`+as),St&&Ba([$,E,D],vn=>{as=yo(as,vn," ")}),w&&Xt?w.createHTML(as):as},r.setConfig=function(){ir(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),wt=!0},r.clearConfig=function(){He=null,wt=!1},r.isValidAttribute=function(Q,Rt,At){He||ir({});const xe=be(Q),Ee=be(Rt);return fi(xe,Ee,At)},r.addHook=function(Q,Rt){typeof Rt=="function"&&mo(M[Q],Rt)},r.removeHook=function(Q,Rt){if(Rt!==void 0){const At=pT(M[Q],Rt);return At===-1?void 0:gT(M[Q],At,1)[0]}return Fg(M[Q])},r.removeHooks=function(Q){M[Q]=[]},r.removeAllHooks=function(){M={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},r}(),Uy=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Wo=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,FT=/\s*%%.*\n/gm,zi,qy=(zi=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},C(zi,"UnknownDiagramError"),zi),ni={},Du=C(function(e,t){e=e.replace(Uy,"").replace(Wo,"").replace(FT,`
`);for(const[r,{detector:n}]of Object.entries(ni))if(n(e,t))return r;throw new qy(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),rd=C((...e)=>{for(const{id:t,detector:r,loader:n}of e)jy(t,r,n)},"registerLazyLoadedDiagrams"),jy=C((e,t,r)=>{ni[e]&&ft.warn(`Detector with key ${e} already exists. Overwriting.`),ni[e]={detector:t,loader:r},ft.debug(`Detector with key ${e} added${r?" with loader":""}`)},"addDetector"),DT=C(e=>ni[e].loader,"getDiagramLoader"),nd=C((e,t,{depth:r=2,clobber:n=!1}={})=>{const s={depth:r,clobber:n};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(i=>nd(e,i,s)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(i=>{e.includes(i)||e.push(i)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(i=>{typeof t[i]!="object"||e[i]!==void 0&&typeof e[i]!="object"?(n||typeof e[i]!="object"&&typeof t[i]!="object")&&(e[i]=t[i]):(e[i]===void 0&&(e[i]=Array.isArray(t[i])?[]:{}),e[i]=nd(e[i],t[i],{depth:r-1,clobber:n}))}),e)},"assignWithDepth"),hr=nd,vc="#ffffff",bc="#f2f2f2",Dr=C((e,t)=>ot(e,t?{s:-40,l:10}:{s:-40,l:-10}),"mkBorder"),Ui,OT=(Ui=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||ot(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||ot(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Dr(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Dr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Dr(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Dr(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||Mt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||Mt(this.tertiaryColor),this.lineColor=this.lineColor||Mt(this.background),this.arrowheadColor=this.arrowheadColor||Mt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?jt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||jt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||Mt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Dt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||jt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||jt(this.mainBkg,10)):(this.rowOdd=this.rowOdd||Dt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Dt(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ot(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ot(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ot(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ot(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ot(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ot(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||ot(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ot(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ot(this.primaryColor,{h:330}),this.darkMode)for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=jt(this["cScale"+r],75);else for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=jt(this["cScale"+r],25);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleInv"+r]=this["cScaleInv"+r]||Mt(this["cScale"+r]);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this.darkMode?this["cScalePeer"+r]=this["cScalePeer"+r]||Dt(this["cScale"+r],10):this["cScalePeer"+r]=this["cScalePeer"+r]||jt(this["cScale"+r],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleLabel"+r]=this["cScaleLabel"+r]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let r=0;r<5;r++)this["surface"+r]=this["surface"+r]||ot(this.mainBkg,{h:180,s:-15,l:t*(5+3*r)}),this["surfacePeer"+r]=this["surfacePeer"+r]||ot(this.mainBkg,{h:180,s:-15,l:t*(8+3*r)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||ot(this.primaryColor,{h:64}),this.fillType3=this.fillType3||ot(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||ot(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||ot(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||ot(this.primaryColor,{h:128}),this.fillType7=this.fillType7||ot(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ot(this.primaryColor,{l:-10}),this.pie5=this.pie5||ot(this.secondaryColor,{l:-10}),this.pie6=this.pie6||ot(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||ot(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ot(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ot(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ot(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||ot(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||ot(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ot(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ot(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ot(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ot(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ot(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ot(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||va(this.quadrant1Fill)?Dt(this.quadrant1Fill):jt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?jt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ot(this.primaryColor,{h:-30}),this.git4=this.git4||ot(this.primaryColor,{h:-60}),this.git5=this.git5||ot(this.primaryColor,{h:-90}),this.git6=this.git6||ot(this.primaryColor,{h:60}),this.git7=this.git7||ot(this.primaryColor,{h:120}),this.darkMode?(this.git0=Dt(this.git0,25),this.git1=Dt(this.git1,25),this.git2=Dt(this.git2,25),this.git3=Dt(this.git3,25),this.git4=Dt(this.git4,25),this.git5=Dt(this.git5,25),this.git6=Dt(this.git6,25),this.git7=Dt(this.git7,25)):(this.git0=jt(this.git0,25),this.git1=jt(this.git1,25),this.git2=jt(this.git2,25),this.git3=jt(this.git3,25),this.git4=jt(this.git4,25),this.git5=jt(this.git5,25),this.git6=jt(this.git6,25),this.git7=jt(this.git7,25)),this.gitInv0=this.gitInv0||Mt(this.git0),this.gitInv1=this.gitInv1||Mt(this.git1),this.gitInv2=this.gitInv2||Mt(this.git2),this.gitInv3=this.gitInv3||Mt(this.git3),this.gitInv4=this.gitInv4||Mt(this.git4),this.gitInv5=this.gitInv5||Mt(this.git5),this.gitInv6=this.gitInv6||Mt(this.git6),this.gitInv7=this.gitInv7||Mt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||vc,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||bc}calculate(t){if(typeof t!="object")return void this.updateColors();const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},C(Ui,"Theme"),Ui),RT=C(e=>{const t=new OT;return t.calculate(e),t},"getThemeVariables"),qi,PT=(qi=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Dt(this.primaryColor,16),this.tertiaryColor=ot(this.primaryColor,{h:-160}),this.primaryBorderColor=Mt(this.background),this.secondaryBorderColor=Dr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Dr(this.tertiaryColor,this.darkMode),this.primaryTextColor=Mt(this.primaryColor),this.secondaryTextColor=Mt(this.secondaryColor),this.tertiaryTextColor=Mt(this.tertiaryColor),this.lineColor=Mt(this.background),this.textColor=Mt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Dt(Mt("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=jo(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=jt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=jt(this.sectionBkgColor,10),this.taskBorderColor=jo(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=jo(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Dt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||jt(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=Dt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Dt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Dt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ot(this.primaryColor,{h:64}),this.fillType3=ot(this.secondaryColor,{h:64}),this.fillType4=ot(this.primaryColor,{h:-64}),this.fillType5=ot(this.secondaryColor,{h:-64}),this.fillType6=ot(this.primaryColor,{h:128}),this.fillType7=ot(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ot(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ot(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ot(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ot(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ot(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ot(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ot(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ot(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ot(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||Mt(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||Dt(this["cScale"+t],10);for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ot(this.mainBkg,{h:30,s:-30,l:-(4*t-10)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ot(this.mainBkg,{h:30,s:-30,l:-(4*t-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ot(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ot(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ot(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ot(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ot(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ot(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||va(this.quadrant1Fill)?Dt(this.quadrant1Fill):jt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?jt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Dt(this.secondaryColor,20),this.git1=Dt(this.pie2||this.secondaryColor,20),this.git2=Dt(this.pie3||this.tertiaryColor,20),this.git3=Dt(this.pie4||ot(this.primaryColor,{h:-30}),20),this.git4=Dt(this.pie5||ot(this.primaryColor,{h:-60}),20),this.git5=Dt(this.pie6||ot(this.primaryColor,{h:-90}),10),this.git6=Dt(this.pie7||ot(this.primaryColor,{h:60}),10),this.git7=Dt(this.pie8||ot(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||Mt(this.git0),this.gitInv1=this.gitInv1||Mt(this.git1),this.gitInv2=this.gitInv2||Mt(this.git2),this.gitInv3=this.gitInv3||Mt(this.git3),this.gitInv4=this.gitInv4||Mt(this.git4),this.gitInv5=this.gitInv5||Mt(this.git5),this.gitInv6=this.gitInv6||Mt(this.git6),this.gitInv7=this.gitInv7||Mt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Mt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Mt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Dt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Dt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object")return void this.updateColors();const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},C(qi,"Theme"),qi),NT=C(e=>{const t=new PT;return t.calculate(e),t},"getThemeVariables"),ji,zT=(ji=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=ot(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=ot(this.primaryColor,{h:-160}),this.primaryBorderColor=Dr(this.primaryColor,this.darkMode),this.secondaryBorderColor=Dr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Dr(this.tertiaryColor,this.darkMode),this.primaryTextColor=Mt(this.primaryColor),this.secondaryTextColor=Mt(this.secondaryColor),this.tertiaryTextColor=Mt(this.tertiaryColor),this.lineColor=Mt(this.background),this.textColor=Mt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=jo(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ot(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ot(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ot(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ot(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ot(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ot(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ot(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ot(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ot(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||jt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||jt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=jt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||jt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ot(this["cScale"+t],{h:180});for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ot(this.mainBkg,{h:30,l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ot(this.mainBkg,{h:30,l:-(7+5*t)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||Mt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||Mt(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Dt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Dt(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||Dt(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ot(this.primaryColor,{h:64}),this.fillType3=ot(this.secondaryColor,{h:64}),this.fillType4=ot(this.primaryColor,{h:-64}),this.fillType5=ot(this.secondaryColor,{h:-64}),this.fillType6=ot(this.primaryColor,{h:128}),this.fillType7=ot(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||ot(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||ot(this.primaryColor,{l:-10}),this.pie5=this.pie5||ot(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ot(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||ot(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||ot(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||ot(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||ot(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||ot(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||ot(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ot(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ot(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ot(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ot(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ot(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ot(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||va(this.quadrant1Fill)?Dt(this.quadrant1Fill):jt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ot(this.primaryColor,{h:-30}),this.git4=this.git4||ot(this.primaryColor,{h:-60}),this.git5=this.git5||ot(this.primaryColor,{h:-90}),this.git6=this.git6||ot(this.primaryColor,{h:60}),this.git7=this.git7||ot(this.primaryColor,{h:120}),this.darkMode?(this.git0=Dt(this.git0,25),this.git1=Dt(this.git1,25),this.git2=Dt(this.git2,25),this.git3=Dt(this.git3,25),this.git4=Dt(this.git4,25),this.git5=Dt(this.git5,25),this.git6=Dt(this.git6,25),this.git7=Dt(this.git7,25)):(this.git0=jt(this.git0,25),this.git1=jt(this.git1,25),this.git2=jt(this.git2,25),this.git3=jt(this.git3,25),this.git4=jt(this.git4,25),this.git5=jt(this.git5,25),this.git6=jt(this.git6,25),this.git7=jt(this.git7,25)),this.gitInv0=this.gitInv0||jt(Mt(this.git0),25),this.gitInv1=this.gitInv1||Mt(this.git1),this.gitInv2=this.gitInv2||Mt(this.git2),this.gitInv3=this.gitInv3||Mt(this.git3),this.gitInv4=this.gitInv4||Mt(this.git4),this.gitInv5=this.gitInv5||Mt(this.git5),this.gitInv6=this.gitInv6||Mt(this.git6),this.gitInv7=this.gitInv7||Mt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Mt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Mt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||vc,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||bc}calculate(t){if(Object.keys(this).forEach(n=>{this[n]==="calculated"&&(this[n]=void 0)}),typeof t!="object")return void this.updateColors();const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},C(ji,"Theme"),ji),UT=C(e=>{const t=new zT;return t.calculate(e),t},"getThemeVariables"),Wi,qT=(Wi=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Dt("#cde498",10),this.primaryBorderColor=Dr(this.primaryColor,this.darkMode),this.secondaryBorderColor=Dr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Dr(this.tertiaryColor,this.darkMode),this.primaryTextColor=Mt(this.primaryColor),this.secondaryTextColor=Mt(this.secondaryColor),this.tertiaryTextColor=Mt(this.primaryColor),this.lineColor=Mt(this.background),this.textColor=Mt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=jt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ot(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ot(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ot(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ot(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ot(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ot(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ot(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ot(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ot(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||jt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||jt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=jt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||jt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ot(this["cScale"+t],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ot(this.mainBkg,{h:30,s:-30,l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ot(this.mainBkg,{h:30,s:-30,l:-(8+5*t)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Dt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Dt(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ot(this.primaryColor,{h:64}),this.fillType3=ot(this.secondaryColor,{h:64}),this.fillType4=ot(this.primaryColor,{h:-64}),this.fillType5=ot(this.secondaryColor,{h:-64}),this.fillType6=ot(this.primaryColor,{h:128}),this.fillType7=ot(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ot(this.primaryColor,{l:-30}),this.pie5=this.pie5||ot(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ot(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||ot(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ot(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ot(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ot(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||ot(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||ot(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ot(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ot(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ot(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ot(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ot(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ot(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||va(this.quadrant1Fill)?Dt(this.quadrant1Fill):jt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ot(this.primaryColor,{h:-30}),this.git4=this.git4||ot(this.primaryColor,{h:-60}),this.git5=this.git5||ot(this.primaryColor,{h:-90}),this.git6=this.git6||ot(this.primaryColor,{h:60}),this.git7=this.git7||ot(this.primaryColor,{h:120}),this.darkMode?(this.git0=Dt(this.git0,25),this.git1=Dt(this.git1,25),this.git2=Dt(this.git2,25),this.git3=Dt(this.git3,25),this.git4=Dt(this.git4,25),this.git5=Dt(this.git5,25),this.git6=Dt(this.git6,25),this.git7=Dt(this.git7,25)):(this.git0=jt(this.git0,25),this.git1=jt(this.git1,25),this.git2=jt(this.git2,25),this.git3=jt(this.git3,25),this.git4=jt(this.git4,25),this.git5=jt(this.git5,25),this.git6=jt(this.git6,25),this.git7=jt(this.git7,25)),this.gitInv0=this.gitInv0||Mt(this.git0),this.gitInv1=this.gitInv1||Mt(this.git1),this.gitInv2=this.gitInv2||Mt(this.git2),this.gitInv3=this.gitInv3||Mt(this.git3),this.gitInv4=this.gitInv4||Mt(this.git4),this.gitInv5=this.gitInv5||Mt(this.git5),this.gitInv6=this.gitInv6||Mt(this.git6),this.gitInv7=this.gitInv7||Mt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Mt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Mt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||vc,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||bc}calculate(t){if(typeof t!="object")return void this.updateColors();const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},C(Wi,"Theme"),Wi),jT=C(e=>{const t=new qT;return t.calculate(e),t},"getThemeVariables"),Hi,WT=(Hi=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Dt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=ot(this.primaryColor,{h:-160}),this.primaryBorderColor=Dr(this.primaryColor,this.darkMode),this.secondaryBorderColor=Dr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Dr(this.tertiaryColor,this.darkMode),this.primaryTextColor=Mt(this.primaryColor),this.secondaryTextColor=Mt(this.secondaryColor),this.tertiaryTextColor=Mt(this.tertiaryColor),this.lineColor=Mt(this.background),this.textColor=Mt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Dt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=Dt(this.contrast,55),this.border2=this.contrast,this.actorBorder=Dt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||Mt(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||Dt(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||jt(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ot(this.mainBkg,{l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ot(this.mainBkg,{l:-(8+5*t)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Dt(this.contrast,30),this.sectionBkgColor2=Dt(this.contrast,30),this.taskBorderColor=jt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Dt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=jt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ot(this.primaryColor,{h:64}),this.fillType3=ot(this.secondaryColor,{h:64}),this.fillType4=ot(this.primaryColor,{h:-64}),this.fillType5=ot(this.secondaryColor,{h:-64}),this.fillType6=ot(this.primaryColor,{h:128}),this.fillType7=ot(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ot(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ot(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ot(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ot(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ot(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ot(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||va(this.quadrant1Fill)?Dt(this.quadrant1Fill):jt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=jt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||ot(this.primaryColor,{h:-30}),this.git4=this.pie5||ot(this.primaryColor,{h:-60}),this.git5=this.pie6||ot(this.primaryColor,{h:-90}),this.git6=this.pie7||ot(this.primaryColor,{h:60}),this.git7=this.pie8||ot(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||Mt(this.git0),this.gitInv1=this.gitInv1||Mt(this.git1),this.gitInv2=this.gitInv2||Mt(this.git2),this.gitInv3=this.gitInv3||Mt(this.git3),this.gitInv4=this.gitInv4||Mt(this.git4),this.gitInv5=this.gitInv5||Mt(this.git5),this.gitInv6=this.gitInv6||Mt(this.git6),this.gitInv7=this.gitInv7||Mt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||vc,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||bc}calculate(t){if(typeof t!="object")return void this.updateColors();const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},C(Hi,"Theme"),Hi),Qn={base:{getThemeVariables:RT},dark:{getThemeVariables:NT},default:{getThemeVariables:UT},forest:{getThemeVariables:jT},neutral:{getThemeVariables:C(e=>{const t=new WT;return t.calculate(e),t},"getThemeVariables")}},Mn={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},Wy={...Mn,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:Qn.default.getThemeVariables(),sequence:{...Mn.sequence,messageFont:C(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:C(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:C(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Mn.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Mn.c4,useWidth:void 0,personFont:C(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...Mn.flowchart,inheritDir:!1},external_personFont:C(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:C(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:C(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:C(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:C(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:C(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:C(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:C(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:C(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:C(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:C(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:C(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:C(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:C(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:C(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:C(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:C(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:C(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:C(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:C(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:C(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Mn.pie,useWidth:984},xyChart:{...Mn.xyChart,useWidth:void 0},requirement:{...Mn.requirement,useWidth:void 0},packet:{...Mn.packet},radar:{...Mn.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},Hy=C((e,t="")=>Object.keys(e).reduce((r,n)=>Array.isArray(e[n])?r:typeof e[n]=="object"&&e[n]!==null?[...r,t+n,...Hy(e[n],"")]:[...r,t+n],[]),"keyify"),HT=new Set(Hy(Wy,"")),Vy=Wy,Ll=C(e=>{if(ft.debug("sanitizeDirective called with",e),typeof e=="object"&&e!=null)if(Array.isArray(e))e.forEach(t=>Ll(t));else{for(const t of Object.keys(e)){if(ft.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!HT.has(t)||e[t]==null){ft.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){ft.debug("sanitizing object",t),Ll(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const n of r)t.includes(n)&&(ft.debug("sanitizing css option",t),e[t]=VT(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r?.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}ft.debug("After sanitization",e)}},"sanitizeDirective"),VT=C(e=>{let t=0,r=0;for(const n of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";n==="{"?t++:n==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),Qi=Object.freeze(Vy),Yr=hr({},Qi),Ji=[],Bl=hr({},Qi),xc=C((e,t)=>{let r=hr({},e),n={};for(const s of t)Zy(s),n=hr(n,s);if(r=hr(r,n),n.theme&&n.theme in Qn){const s=hr({},El),i=hr(s.themeVariables||{},n.themeVariables);r.theme&&r.theme in Qn&&(r.themeVariables=Qn[r.theme].getThemeVariables(i))}return Xy(Bl=r),Bl},"updateCurrentConfig"),GT=C(e=>(Yr=hr({},Qi),Yr=hr(Yr,e),e.theme&&Qn[e.theme]&&(Yr.themeVariables=Qn[e.theme].getThemeVariables(e.themeVariables)),xc(Yr,Ji),Yr),"setSiteConfig"),YT=C(e=>{El=hr({},e)},"saveConfigFromInitialize"),ZT=C(e=>(Yr=hr(Yr,e),xc(Yr,Ji),Yr),"updateSiteConfig"),Gy=C(()=>hr({},Yr),"getSiteConfig"),Yy=C(e=>(Xy(e),hr(Bl,e),Ar()),"setConfig"),Ar=C(()=>hr({},Bl),"getConfig"),Zy=C(e=>{e&&(["secure",...Yr.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(ft.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&Zy(e[t])}))},"sanitize"),XT=C(e=>{Ll(e),e.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),Ji.push(e),xc(Yr,Ji)},"addDirective"),Il=C((e=Yr)=>{xc(e,Ji=[])},"reset"),KT={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},Ug={},QT=C(e=>{Ug[e]||(ft.warn(KT[e]),Ug[e]=!0)},"issueWarning"),Xy=C(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&QT("LAZY_LOAD_DEPRECATED")},"checkConfig"),dP=C(()=>{let e={};El&&(e=hr(e,El));for(const t of Ji)e=hr(e,t);return e},"getUserDefinedConfig"),ba=/<br\s*\/?>/gi,JT=C(e=>e?Jy(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),t$=(()=>{let e=!1;return()=>{e||(Ky(),e=!0)}})();function Ky(){const e="data-temp-href-target";Ki.addHook("beforeSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),Ki.addHook("afterSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}C(Ky,"setupDompurifyHooks");var Qy=C(e=>(t$(),Ki.sanitize(e)),"removeScript"),qg=C((e,t)=>{if(t.flowchart?.htmlLabels!==!1){const r=t.securityLevel;r==="antiscript"||r==="strict"?e=Qy(e):r!=="loose"&&(e=(e=(e=Jy(e)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),e=s$(e))}return e},"sanitizeMore"),fn=C((e,t)=>e&&(e=t.dompurifyConfig?Ki.sanitize(qg(e,t),t.dompurifyConfig).toString():Ki.sanitize(qg(e,t),{FORBID_TAGS:["style"]}).toString()),"sanitizeText"),e$=C((e,t)=>typeof e=="string"?fn(e,t):e.flat().map(r=>fn(r,t)),"sanitizeTextOrArray"),r$=C(e=>ba.test(e),"hasBreaks"),n$=C(e=>e.split(ba),"splitBreaks"),s$=C(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),Jy=C(e=>e.replace(ba,"#br#"),"breakToPlaceholder"),i$=C(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=CSS.escape(t)),t},"getUrl"),gr=C(e=>e!==!1&&!["false","null","0"].includes(String(e).trim().toLowerCase()),"evaluate"),o$=C(function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},"getMax"),a$=C(function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},"getMin"),jg=C(function(e){const t=e.split(/(,)/),r=[];for(let n=0;n<t.length;n++){let s=t[n];if(s===","&&n>0&&n+1<t.length){const i=t[n-1],o=t[n+1];l$(i,o)&&(s=i+","+o,n++,r.pop())}r.push(c$(s))}return r.join("")},"parseGenericTypes"),sd=C((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),l$=C((e,t)=>{const r=sd(e,"~"),n=sd(t,"~");return r===1&&n===1},"shouldCombineSets"),c$=C(e=>{const t=sd(e,"~");let r=!1;if(t<=1)return e;t%2!=0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const n=[...e];let s=n.indexOf("~"),i=n.lastIndexOf("~");for(;s!==-1&&i!==-1&&s!==i;)n[s]="<",n[i]=">",s=n.indexOf("~"),i=n.lastIndexOf("~");return r&&n.unshift("~"),n.join("")},"processSet"),Wg=C(()=>window.MathMLElement!==void 0,"isMathMLSupported"),id=/\$\$(.*)\$\$/g,to=C(e=>(e.match(id)?.length??0)>0,"hasKatex"),uP=C(async(e,t)=>{const r=document.createElement("div");r.innerHTML=await Ou(e,t),r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",r);const s={width:r.clientWidth,height:r.clientHeight};return r.remove(),s},"calculateMathMLDimensions"),h$=C(async(e,t)=>{if(!to(e))return e;if(!(Wg()||t.legacyMathML||t.forceLegacyMathML))return e.replace(id,"MathML is unsupported in this environment.");{const{default:r}=await Ie(async()=>{const{default:s}=await import("./katex-DjOLXI2c.js");return{default:s}},[],import.meta.url),n=t.forceLegacyMathML||!Wg()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(ba).map(s=>to(s)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${s}</div>`:`<div>${s}</div>`).join("").replace(id,(s,i)=>r.renderToString(i,{throwOnError:!0,displayMode:!0,output:n}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),Ou=C(async(e,t)=>fn(await h$(e,t),t),"renderKatexSanitized"),oo={getRows:JT,sanitizeText:fn,sanitizeTextOrArray:e$,hasBreaks:r$,splitBreaks:n$,lineBreakRegex:ba,removeScript:Qy,getUrl:i$,evaluate:gr,getMax:o$,getMin:a$},d$=C(function(e,t){for(let r of t)e.attr(r[0],r[1])},"d3Attrs"),u$=C(function(e,t,r){let n=new Map;return r?(n.set("width","100%"),n.set("style",`max-width: ${t}px;`)):(n.set("height",e),n.set("width",t)),n},"calculateSvgSizeAttrs"),tv=C(function(e,t,r,n){const s=u$(t,r,n);d$(e,s)},"configureSvgSize"),p$=C(function(e,t,r,n){const s=t.node().getBBox(),i=s.width,o=s.height;ft.info(`SVG bounds: ${i}x${o}`,s);let a=0,h=0;ft.info(`Graph bounds: ${a}x${h}`,e),a=i+2*r,h=o+2*r,ft.info(`Calculated bounds: ${a}x${h}`),tv(t,h,a,n);const l=`${s.x-r} ${s.y-r} ${s.width+2*r} ${s.height+2*r}`;t.attr("viewBox",l)},"setupGraphViewbox"),sl={},g$=C((e,t,r)=>{let n="";return e in sl&&sl[e]?n=sl[e](r):ft.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${n}

  ${t}
`},"getStyles"),f$=C((e,t)=>{t!==void 0&&(sl[e]=t)},"addStylesForDiagram"),m$=g$,ev={};iT(ev,{clear:()=>y$,getAccDescription:()=>k$,getAccTitle:()=>b$,getDiagramTitle:()=>w$,setAccDescription:()=>x$,setAccTitle:()=>v$,setDiagramTitle:()=>_$});var Ru="",Pu="",Nu="",zu=C(e=>fn(e,Ar()),"sanitizeText"),y$=C(()=>{Ru="",Nu="",Pu=""},"clear"),v$=C(e=>{Ru=zu(e).replace(/^\s+/g,"")},"setAccTitle"),b$=C(()=>Ru,"getAccTitle"),x$=C(e=>{Nu=zu(e).replace(/\n\s+/g,`
`)},"setAccDescription"),k$=C(()=>Nu,"getAccDescription"),_$=C(e=>{Pu=zu(e)},"setDiagramTitle"),w$=C(()=>Pu,"getDiagramTitle"),Hg=ft,C$=Fu,Oe=Ar,pP=Yy,gP=Qi,Uu=C(e=>fn(e,Oe()),"sanitizeText"),S$=p$,T$=C(()=>ev,"getCommonDb"),Fl={},Dl=C((e,t,r)=>{Fl[e]&&Hg.warn(`Diagram with id ${e} already registered. Overwriting.`),Fl[e]=t,r&&jy(e,r),f$(e,t.styles),t.injectUtils?.(Hg,C$,Oe,Uu,S$,T$(),()=>{})},"registerDiagram"),od=C(e=>{if(e in Fl)return Fl[e];throw new $$(e)},"getDiagram"),Vi,$$=(Vi=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},C(Vi,"DiagramNotFoundError"),Vi),M$={value:()=>{}};function rv(){for(var e,t=0,r=arguments.length,n={};t<r;++t){if(!(e=arguments[t]+"")||e in n||/[\s.]/.test(e))throw new Error("illegal type: "+e);n[e]=[]}return new il(n)}function il(e){this._=e}function A$(e,t){for(var r,n=0,s=e.length;n<s;++n)if((r=e[n]).name===t)return r.value}function Vg(e,t,r){for(var n=0,s=e.length;n<s;++n)if(e[n].name===t){e[n]=M$,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}il.prototype=rv.prototype={constructor:il,on:function(e,t){var r,n,s=this._,i=(n=s,(e+"").trim().split(/^|\s+/).map(function(h){var l="",c=h.indexOf(".");if(c>=0&&(l=h.slice(c+1),h=h.slice(0,c)),h&&!n.hasOwnProperty(h))throw new Error("unknown type: "+h);return{type:h,name:l}})),o=-1,a=i.length;if(!(arguments.length<2)){if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(r=(e=i[o]).type)s[r]=Vg(s[r],e.name,t);else if(t==null)for(r in s)s[r]=Vg(s[r],e.name,null);return this}for(;++o<a;)if((r=(e=i[o]).type)&&(r=A$(s[r],e.name)))return r},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new il(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var r,n,s=new Array(r),i=0;i<r;++i)s[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,r=(n=this._[e]).length;i<r;++i)n[i].value.apply(t,s)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],s=0,i=n.length;s<i;++s)n[s].value.apply(t,r)}};var ad="http://www.w3.org/1999/xhtml";const Gg={svg:"http://www.w3.org/2000/svg",xhtml:ad,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ol(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Gg.hasOwnProperty(t)?{space:Gg[t],local:e}:e}function E$(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===ad&&t.documentElement.namespaceURI===ad?t.createElement(e):t.createElementNS(r,e)}}function L$(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Yg(e){var t=Ol(e);return(t.local?L$:E$)(t)}function B$(){}function ld(e){return e==null?B$:function(){return this.querySelector(e)}}function I$(){return[]}function nv(e){return e==null?I$:function(){return this.querySelectorAll(e)}}function F$(e){return function(){return function(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}(e.apply(this,arguments))}}function sv(e){return function(){return this.matches(e)}}function Zg(e){return function(t){return t.matches(e)}}var D$=Array.prototype.find;function O$(){return this.firstElementChild}var R$=Array.prototype.filter;function P$(){return Array.from(this.children)}function Xg(e){return new Array(e.length)}function Rl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function N$(e,t,r,n,s,i){for(var o,a=0,h=t.length,l=i.length;a<l;++a)(o=t[a])?(o.__data__=i[a],n[a]=o):r[a]=new Rl(e,i[a]);for(;a<h;++a)(o=t[a])&&(s[a]=o)}function z$(e,t,r,n,s,i,o){var a,h,l,c=new Map,u=t.length,p=i.length,g=new Array(u);for(a=0;a<u;++a)(h=t[a])&&(g[a]=l=o.call(h,h.__data__,a,t)+"",c.has(l)?s[a]=h:c.set(l,h));for(a=0;a<p;++a)l=o.call(e,i[a],a,i)+"",(h=c.get(l))?(n[a]=h,h.__data__=i[a],c.delete(l)):r[a]=new Rl(e,i[a]);for(a=0;a<u;++a)(h=t[a])&&c.get(g[a])===h&&(s[a]=h)}function U$(e){return e.__data__}function q$(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function j$(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function W$(e){return function(){this.removeAttribute(e)}}function H$(e){return function(){this.removeAttributeNS(e.space,e.local)}}function V$(e,t){return function(){this.setAttribute(e,t)}}function G$(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Y$(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Z$(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function iv(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function X$(e){return function(){this.style.removeProperty(e)}}function K$(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Q$(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function Ci(e,t){return e.style.getPropertyValue(t)||iv(e).getComputedStyle(e,null).getPropertyValue(t)}function J$(e){return function(){delete this[e]}}function t3(e,t){return function(){this[e]=t}}function e3(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function ov(e){return e.trim().split(/^|\s+/)}function qu(e){return e.classList||new av(e)}function av(e){this._node=e,this._names=ov(e.getAttribute("class")||"")}function lv(e,t){for(var r=qu(e),n=-1,s=t.length;++n<s;)r.add(t[n])}function cv(e,t){for(var r=qu(e),n=-1,s=t.length;++n<s;)r.remove(t[n])}function r3(e){return function(){lv(this,e)}}function n3(e){return function(){cv(this,e)}}function s3(e,t){return function(){(t.apply(this,arguments)?lv:cv)(this,e)}}function i3(){this.textContent=""}function o3(e){return function(){this.textContent=e}}function a3(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function l3(){this.innerHTML=""}function c3(e){return function(){this.innerHTML=e}}function h3(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function d3(){this.nextSibling&&this.parentNode.appendChild(this)}function u3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function p3(){return null}function g3(){var e=this.parentNode;e&&e.removeChild(this)}function f3(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function m3(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function y3(e){return function(){var t=this.__on;if(t){for(var r,n=0,s=-1,i=t.length;n<i;++n)r=t[n],e.type&&r.type!==e.type||r.name!==e.name?t[++s]=r:this.removeEventListener(r.type,r.listener,r.options);++s?t.length=s:delete this.__on}}}function v3(e,t,r){return function(){var n,s=this.__on,i=function(h){return function(l){h.call(this,l,this.__data__)}}(t);if(s){for(var o=0,a=s.length;o<a;++o)if((n=s[o]).type===e.type&&n.name===e.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=i,n.options=r),void(n.value=t)}this.addEventListener(e.type,i,r),n={type:e.type,name:e.name,value:t,listener:i,options:r},s?s.push(n):this.__on=[n]}}function hv(e,t,r){var n=iv(e),s=n.CustomEvent;typeof s=="function"?s=new s(t,r):(s=n.document.createEvent("Event"),r?(s.initEvent(t,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function b3(e,t){return function(){return hv(this,e,t)}}function x3(e,t){return function(){return hv(this,e,t.apply(this,arguments))}}Rl.prototype={constructor:Rl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},av.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var dv=[null];function an(e,t){this._groups=e,this._parents=t}function Ko(){return new an([[document.documentElement]],dv)}function we(e){return typeof e=="string"?new an([[document.querySelector(e)]],[document.documentElement]):new an([[e]],dv)}function nh(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Kg(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Ho(){}an.prototype=Ko.prototype={constructor:an,select:function(e){typeof e!="function"&&(e=ld(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var i,o,a=t[s],h=a.length,l=n[s]=new Array(h),c=0;c<h;++c)(i=a[c])&&(o=e.call(i,i.__data__,c,a))&&("__data__"in i&&(o.__data__=i.__data__),l[c]=o);return new an(n,this._parents)},selectAll:function(e){e=typeof e=="function"?F$(e):nv(e);for(var t=this._groups,r=t.length,n=[],s=[],i=0;i<r;++i)for(var o,a=t[i],h=a.length,l=0;l<h;++l)(o=a[l])&&(n.push(e.call(o,o.__data__,l,a)),s.push(o));return new an(n,s)},selectChild:function(e){return this.select(e==null?O$:function(t){return function(){return D$.call(this.children,t)}}(typeof e=="function"?e:Zg(e)))},selectChildren:function(e){return this.selectAll(e==null?P$:function(t){return function(){return R$.call(this.children,t)}}(typeof e=="function"?e:Zg(e)))},filter:function(e){typeof e!="function"&&(e=sv(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var i,o=t[s],a=o.length,h=n[s]=[],l=0;l<a;++l)(i=o[l])&&e.call(i,i.__data__,l,o)&&h.push(i);return new an(n,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,U$);var r=t?z$:N$,n=this._parents,s=this._groups;typeof e!="function"&&(e=function(w){return function(){return w}}(e));for(var i=s.length,o=new Array(i),a=new Array(i),h=new Array(i),l=0;l<i;++l){var c=n[l],u=s[l],p=u.length,g=q$(e.call(c,c&&c.__data__,l,n)),f=g.length,m=a[l]=new Array(f),y=o[l]=new Array(f);r(c,u,m,y,h[l]=new Array(p),g,t);for(var v,x,k=0,_=0;k<f;++k)if(v=m[k]){for(k>=_&&(_=k+1);!(x=y[_])&&++_<f;);v._next=x||null}}return(o=new an(o,n))._enter=a,o._exit=h,o},enter:function(){return new an(this._enter||this._groups.map(Xg),this._parents)},exit:function(){return new an(this._exit||this._groups.map(Xg),this._parents)},join:function(e,t,r){var n=this.enter(),s=this,i=this.exit();return typeof e=="function"?(n=e(n))&&(n=n.selection()):n=n.append(e+""),t!=null&&(s=t(s))&&(s=s.selection()),r==null?i.remove():r(i),n&&s?n.merge(s).order():s},merge:function(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,s=r.length,i=n.length,o=Math.min(s,i),a=new Array(s),h=0;h<o;++h)for(var l,c=r[h],u=n[h],p=c.length,g=a[h]=new Array(p),f=0;f<p;++f)(l=c[f]||u[f])&&(g[f]=l);for(;h<s;++h)a[h]=r[h];return new an(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n,s=e[t],i=s.length-1,o=s[i];--i>=0;)(n=s[i])&&(o&&4^n.compareDocumentPosition(o)&&o.parentNode.insertBefore(n,o),o=n);return this},sort:function(e){function t(u,p){return u&&p?e(u.__data__,p.__data__):!u-!p}e||(e=j$);for(var r=this._groups,n=r.length,s=new Array(n),i=0;i<n;++i){for(var o,a=r[i],h=a.length,l=s[i]=new Array(h),c=0;c<h;++c)(o=a[c])&&(l[c]=o);l.sort(t)}return new an(s,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],s=0,i=n.length;s<i;++s){var o=n[s];if(o)return o}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var s,i=t[r],o=0,a=i.length;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this},attr:function(e,t){var r=Ol(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?H$:W$:typeof t=="function"?r.local?Z$:Y$:r.local?G$:V$)(r,t))},style:function(e,t,r){return arguments.length>1?this.each((t==null?X$:typeof t=="function"?Q$:K$)(e,t,r??"")):Ci(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((t==null?J$:typeof t=="function"?e3:t3)(e,t)):this.node()[e]},classed:function(e,t){var r=ov(e+"");if(arguments.length<2){for(var n=qu(this.node()),s=-1,i=r.length;++s<i;)if(!n.contains(r[s]))return!1;return!0}return this.each((typeof t=="function"?s3:t?r3:n3)(r,t))},text:function(e){return arguments.length?this.each(e==null?i3:(typeof e=="function"?a3:o3)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(e==null?l3:(typeof e=="function"?h3:c3)(e)):this.node().innerHTML},raise:function(){return this.each(d3)},lower:function(){return this.each(u3)},append:function(e){var t=typeof e=="function"?e:Yg(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var r=typeof e=="function"?e:Yg(e),n=t==null?p3:typeof t=="function"?t:ld(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})},remove:function(){return this.each(g3)},clone:function(e){return this.select(e?m3:f3)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,r){var n,s,i=function(u){return u.trim().split(/^|\s+/).map(function(p){var g="",f=p.indexOf(".");return f>=0&&(g=p.slice(f+1),p=p.slice(0,f)),{type:p,name:g}})}(e+""),o=i.length;if(!(arguments.length<2)){for(a=t?v3:y3,n=0;n<o;++n)this.each(a(i[n],t,r));return this}var a=this.node().__on;if(a){for(var h,l=0,c=a.length;l<c;++l)for(n=0,h=a[l];n<o;++n)if((s=i[n]).type===h.type&&s.name===h.name)return h.value}},dispatch:function(e,t){return this.each((typeof t=="function"?x3:b3)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n,s=e[t],i=0,o=s.length;i<o;++i)(n=s[i])&&(yield n)}};var Eo=.7,Fa=1/Eo,Ri="\\s*([+-]?\\d+)\\s*",Qo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",k3=/^#([0-9a-f]{3,8})$/,_3=new RegExp(`^rgb\\(${Ri},${Ri},${Ri}\\)$`),w3=new RegExp(`^rgb\\(${Rn},${Rn},${Rn}\\)$`),C3=new RegExp(`^rgba\\(${Ri},${Ri},${Ri},${Qo}\\)$`),S3=new RegExp(`^rgba\\(${Rn},${Rn},${Rn},${Qo}\\)$`),T3=new RegExp(`^hsl\\(${Qo},${Rn},${Rn}\\)$`),$3=new RegExp(`^hsla\\(${Qo},${Rn},${Rn},${Qo}\\)$`),Qg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Jg(){return this.rgb().formatHex()}function tf(){return this.rgb().formatRgb()}function Jo(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=k3.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?ef(t):r===3?new Zr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):r===8?Da(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):r===4?Da(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=_3.exec(e))?new Zr(t[1],t[2],t[3],1):(t=w3.exec(e))?new Zr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=C3.exec(e))?Da(t[1],t[2],t[3],t[4]):(t=S3.exec(e))?Da(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=T3.exec(e))?sf(t[1],t[2]/100,t[3]/100,1):(t=$3.exec(e))?sf(t[1],t[2]/100,t[3]/100,t[4]):Qg.hasOwnProperty(e)?ef(Qg[e]):e==="transparent"?new Zr(NaN,NaN,NaN,0):null}function ef(e){return new Zr(e>>16&255,e>>8&255,255&e,1)}function Da(e,t,r,n){return n<=0&&(e=t=r=NaN),new Zr(e,t,r,n)}function M3(e){return e instanceof Ho||(e=Jo(e)),e?new Zr((e=e.rgb()).r,e.g,e.b,e.opacity):new Zr}function cd(e,t,r,n){return arguments.length===1?M3(e):new Zr(e,t,r,n??1)}function Zr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function rf(){return`#${Vs(this.r)}${Vs(this.g)}${Vs(this.b)}`}function nf(){const e=ol(this.opacity);return`${e===1?"rgb(":"rgba("}${Qs(this.r)}, ${Qs(this.g)}, ${Qs(this.b)}${e===1?")":`, ${e})`}`}function ol(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Qs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vs(e){return((e=Qs(e))<16?"0":"")+e.toString(16)}function sf(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new wn(e,t,r,n)}function of(e){if(e instanceof wn)return new wn(e.h,e.s,e.l,e.opacity);if(e instanceof Ho||(e=Jo(e)),!e)return new wn;if(e instanceof wn)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,a=i-s,h=(i+s)/2;return a?(o=t===i?(r-n)/a+6*(r<n):r===i?(n-t)/a+2:(t-r)/a+4,a/=h<.5?i+s:2-i-s,o*=60):a=h>0&&h<1?0:o,new wn(o,a,h,e.opacity)}function wn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function af(e){return(e=(e||0)%360)<0?e+360:e}function Oa(e){return Math.max(0,Math.min(1,e||0))}function sh(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}nh(Ho,Jo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jg,formatHex:Jg,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return of(this).formatHsl()},formatRgb:tf,toString:tf}),nh(Zr,cd,Kg(Ho,{brighter(e){return e=e==null?Fa:Math.pow(Fa,e),new Zr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Eo:Math.pow(Eo,e),new Zr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zr(Qs(this.r),Qs(this.g),Qs(this.b),ol(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rf,formatHex:rf,formatHex8:function(){return`#${Vs(this.r)}${Vs(this.g)}${Vs(this.b)}${Vs(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:nf,toString:nf})),nh(wn,function(e,t,r,n){return arguments.length===1?of(e):new wn(e,t,r,n??1)},Kg(Ho,{brighter(e){return e=e==null?Fa:Math.pow(Fa,e),new wn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Eo:Math.pow(Eo,e),new wn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Zr(sh(e>=240?e-240:e+120,s,n),sh(e,s,n),sh(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new wn(af(this.h),Oa(this.s),Oa(this.l),ol(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ol(this.opacity);return`${e===1?"hsl(":"hsla("}${af(this.h)}, ${100*Oa(this.s)}%, ${100*Oa(this.l)}%${e===1?")":`, ${e})`}`}}));const ju=e=>()=>e;function uv(e,t){return function(r){return e+r*t}}function fP(e,t){var r=t-e;return r?uv(e,r>180||r<-180?r-360*Math.round(r/360):r):ju(isNaN(e)?t:e)}function A3(e){return(e=+e)==1?pv:function(t,r){return r-t?function(n,s,i){return n=Math.pow(n,i),s=Math.pow(s,i)-n,i=1/i,function(o){return Math.pow(n+o*s,i)}}(t,r,e):ju(isNaN(t)?r:t)}}function pv(e,t){var r=t-e;return r?uv(e,r):ju(isNaN(e)?t:e)}const lf=function e(t){var r=A3(t);function n(s,i){var o=r((s=cd(s)).r,(i=cd(i)).r),a=r(s.g,i.g),h=r(s.b,i.b),l=pv(s.opacity,i.opacity);return function(c){return s.r=o(c),s.g=a(c),s.b=h(c),s.opacity=l(c),s+""}}return n.gamma=e,n}(1);function ds(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var hd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ih=new RegExp(hd.source,"g");function E3(e,t){var r,n,s,i=hd.lastIndex=ih.lastIndex=0,o=-1,a=[],h=[];for(e+="",t+="";(r=hd.exec(e))&&(n=ih.exec(t));)(s=n.index)>i&&(s=t.slice(i,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(n=n[0])?a[o]?a[o]+=n:a[++o]=n:(a[++o]=null,h.push({i:o,x:ds(r,n)})),i=ih.lastIndex;return i<t.length&&(s=t.slice(i),a[o]?a[o]+=s:a[++o]=s),a.length<2?h[0]?function(l){return function(c){return l(c)+""}}(h[0].x):function(l){return function(){return l}}(t):(t=h.length,function(l){for(var c,u=0;u<t;++u)a[(c=h[u]).i]=c.x(l);return a.join("")})}var Ra,cf=180/Math.PI,dd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gv(e,t,r,n,s,i){var o,a,h;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(h=e*r+t*n)&&(r-=e*h,n-=t*h),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,h/=a),e*n<t*r&&(e=-e,t=-t,h=-h,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*cf,skewX:Math.atan(h)*cf,scaleX:o,scaleY:a}}function fv(e,t,r,n){function s(i){return i.length?i.pop()+" ":""}return function(i,o){var a=[],h=[];return i=e(i),o=e(o),function(l,c,u,p,g,f){if(l!==u||c!==p){var m=g.push("translate(",null,t,null,r);f.push({i:m-4,x:ds(l,u)},{i:m-2,x:ds(c,p)})}else(u||p)&&g.push("translate("+u+t+p+r)}(i.translateX,i.translateY,o.translateX,o.translateY,a,h),function(l,c,u,p){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),p.push({i:u.push(s(u)+"rotate(",null,n)-2,x:ds(l,c)})):c&&u.push(s(u)+"rotate("+c+n)}(i.rotate,o.rotate,a,h),function(l,c,u,p){l!==c?p.push({i:u.push(s(u)+"skewX(",null,n)-2,x:ds(l,c)}):c&&u.push(s(u)+"skewX("+c+n)}(i.skewX,o.skewX,a,h),function(l,c,u,p,g,f){if(l!==u||c!==p){var m=g.push(s(g)+"scale(",null,",",null,")");f.push({i:m-4,x:ds(l,u)},{i:m-2,x:ds(c,p)})}else u===1&&p===1||g.push(s(g)+"scale("+u+","+p+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,a,h),i=o=null,function(l){for(var c,u=-1,p=h.length;++u<p;)a[(c=h[u]).i]=c.x(l);return a.join("")}}}var al,Lo,L3=fv(function(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?dd:gv(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),B3=fv(function(e){return e==null?dd:(Ra||(Ra=document.createElementNS("http://www.w3.org/2000/svg","g")),Ra.setAttribute("transform",e),(e=Ra.transform.baseVal.consolidate())?gv((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):dd)},", ",")",")"),Ei=0,Bo=0,xo=0,mv=1e3,Pl=0,Js=0,kc=0,ta=typeof performance=="object"&&performance.now?performance:Date,yv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Wu(){return Js||(yv(I3),Js=ta.now()+kc)}function I3(){Js=0}function Nl(){this._call=this._time=this._next=null}function vv(e,t,r){var n=new Nl;return n.restart(e,t,r),n}function hf(){Js=(Pl=ta.now())+kc,Ei=Bo=0;try{(function(){Wu(),++Ei;for(var e,t=al;t;)(e=Js-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ei})()}finally{Ei=0,function(){for(var e,t,r=al,n=1/0;r;)r._call?(n>r._time&&(n=r._time),e=r,r=r._next):(t=r._next,r._next=null,r=e?e._next=t:al=t);Lo=e,ud(n)}(),Js=0}}function F3(){var e=ta.now(),t=e-Pl;t>mv&&(kc-=t,Pl=e)}function ud(e){Ei||(Bo&&(Bo=clearTimeout(Bo)),e-Js>24?(e<1/0&&(Bo=setTimeout(hf,e-ta.now()-kc)),xo&&(xo=clearInterval(xo))):(xo||(Pl=ta.now(),xo=setInterval(F3,mv)),Ei=1,yv(hf)))}function df(e,t,r){var n=new Nl;return t=t==null?0:+t,n.restart(s=>{n.stop(),e(s+t)},t,r),n}Nl.prototype=vv.prototype={constructor:Nl,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Wu():+r)+(t==null?0:+t),this._next||Lo===this||(Lo?Lo._next=this:al=this,Lo=this),this._call=e,this._time=r,ud()},stop:function(){this._call&&(this._call=null,this._time=1/0,ud())}};var D3=rv("start","end","cancel","interrupt"),O3=[],bv=0,uf=1,pd=2,ll=3,pf=4,gd=5,cl=6;function hl(e,t,r,n,s,i){var o=e.__transition;if(o){if(r in o)return}else e.__transition={};(function(a,h,l){var c,u=a.__transition;function p(y){l.state=uf,l.timer.restart(g,l.delay,l.time),l.delay<=y&&g(y-l.delay)}function g(y){var v,x,k,_;if(l.state!==uf)return m();for(v in u)if((_=u[v]).name===l.name){if(_.state===ll)return df(g);_.state===pf?(_.state=cl,_.timer.stop(),_.on.call("interrupt",a,a.__data__,_.index,_.group),delete u[v]):+v<h&&(_.state=cl,_.timer.stop(),_.on.call("cancel",a,a.__data__,_.index,_.group),delete u[v])}if(df(function(){l.state===ll&&(l.state=pf,l.timer.restart(f,l.delay,l.time),f(y))}),l.state=pd,l.on.call("start",a,a.__data__,l.index,l.group),l.state===pd){for(l.state=ll,c=new Array(k=l.tween.length),v=0,x=-1;v<k;++v)(_=l.tween[v].value.call(a,a.__data__,l.index,l.group))&&(c[++x]=_);c.length=x+1}}function f(y){for(var v=y<l.duration?l.ease.call(null,y/l.duration):(l.timer.restart(m),l.state=gd,1),x=-1,k=c.length;++x<k;)c[x].call(a,v);l.state===gd&&(l.on.call("end",a,a.__data__,l.index,l.group),m())}function m(){for(var y in l.state=cl,l.timer.stop(),delete u[h],u)return;delete a.__transition}u[h]=l,l.timer=vv(p,0,l.time)})(e,r,{name:t,index:n,group:s,on:D3,tween:O3,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:bv})}function Hu(e,t){var r=xn(e,t);if(r.state>bv)throw new Error("too late; already scheduled");return r}function In(e,t){var r=xn(e,t);if(r.state>ll)throw new Error("too late; already running");return r}function xn(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function R3(e,t){var r,n;return function(){var s=In(this,e),i=s.tween;if(i!==r){for(var o=0,a=(n=r=i).length;o<a;++o)if(n[o].name===t){(n=n.slice()).splice(o,1);break}}s.tween=n}}function P3(e,t,r){var n,s;if(typeof r!="function")throw new Error;return function(){var i=In(this,e),o=i.tween;if(o!==n){s=(n=o).slice();for(var a={name:t,value:r},h=0,l=s.length;h<l;++h)if(s[h].name===t){s[h]=a;break}h===l&&s.push(a)}i.tween=s}}function oh(e,t,r){var n=e._id;return e.each(function(){var s=In(this,n);(s.value||(s.value={}))[t]=r.apply(this,arguments)}),function(s){return xn(s,n).value[t]}}function gf(e,t){var r;return(typeof t=="number"?ds:t instanceof Jo?lf:(r=Jo(t))?(t=r,lf):E3)(e,t)}function N3(e){return function(){this.removeAttribute(e)}}function z3(e){return function(){this.removeAttributeNS(e.space,e.local)}}function U3(e,t,r){var n,s,i=r+"";return function(){var o=this.getAttribute(e);return o===i?null:o===n?s:s=t(n=o,r)}}function q3(e,t,r){var n,s,i=r+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===n?s:s=t(n=o,r)}}function j3(e,t,r){var n,s,i;return function(){var o,a,h=r(this);if(h!=null)return(o=this.getAttribute(e))===(a=h+"")?null:o===n&&a===s?i:(s=a,i=t(n=o,h));this.removeAttribute(e)}}function W3(e,t,r){var n,s,i;return function(){var o,a,h=r(this);if(h!=null)return(o=this.getAttributeNS(e.space,e.local))===(a=h+"")?null:o===n&&a===s?i:(s=a,i=t(n=o,h));this.removeAttributeNS(e.space,e.local)}}function H3(e,t){var r,n;function s(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&function(o,a){return function(h){this.setAttributeNS(o.space,o.local,a.call(this,h))}}(e,i)),r}return s._value=t,s}function V3(e,t){var r,n;function s(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&function(o,a){return function(h){this.setAttribute(o,a.call(this,h))}}(e,i)),r}return s._value=t,s}function G3(e,t){return function(){Hu(this,e).delay=+t.apply(this,arguments)}}function Y3(e,t){return t=+t,function(){Hu(this,e).delay=t}}function Z3(e,t){return function(){In(this,e).duration=+t.apply(this,arguments)}}function X3(e,t){return t=+t,function(){In(this,e).duration=t}}var K3=Ko.prototype.constructor;function ff(e){return function(){this.style.removeProperty(e)}}var Q3=0;function Yn(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function xv(){return++Q3}var jn=Ko.prototype;Yn.prototype={constructor:Yn,select:function(e){var t=this._name,r=this._id;typeof e!="function"&&(e=ld(e));for(var n=this._groups,s=n.length,i=new Array(s),o=0;o<s;++o)for(var a,h,l=n[o],c=l.length,u=i[o]=new Array(c),p=0;p<c;++p)(a=l[p])&&(h=e.call(a,a.__data__,p,l))&&("__data__"in a&&(h.__data__=a.__data__),u[p]=h,hl(u[p],t,r,p,u,xn(a,r)));return new Yn(i,this._parents,t,r)},selectAll:function(e){var t=this._name,r=this._id;typeof e!="function"&&(e=nv(e));for(var n=this._groups,s=n.length,i=[],o=[],a=0;a<s;++a)for(var h,l=n[a],c=l.length,u=0;u<c;++u)if(h=l[u]){for(var p,g=e.call(h,h.__data__,u,l),f=xn(h,r),m=0,y=g.length;m<y;++m)(p=g[m])&&hl(p,t,r,m,g,f);i.push(g),o.push(h)}return new Yn(i,o,t,r)},selectChild:jn.selectChild,selectChildren:jn.selectChildren,filter:function(e){typeof e!="function"&&(e=sv(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var i,o=t[s],a=o.length,h=n[s]=[],l=0;l<a;++l)(i=o[l])&&e.call(i,i.__data__,l,o)&&h.push(i);return new Yn(n,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,s=r.length,i=Math.min(n,s),o=new Array(n),a=0;a<i;++a)for(var h,l=t[a],c=r[a],u=l.length,p=o[a]=new Array(u),g=0;g<u;++g)(h=l[g]||c[g])&&(p[g]=h);for(;a<n;++a)o[a]=t[a];return new Yn(o,this._parents,this._name,this._id)},selection:function(){return new K3(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,r=xv(),n=this._groups,s=n.length,i=0;i<s;++i)for(var o,a=n[i],h=a.length,l=0;l<h;++l)if(o=a[l]){var c=xn(o,t);hl(o,e,r,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Yn(n,this._parents,e,r)},call:jn.call,nodes:jn.nodes,node:jn.node,size:jn.size,empty:jn.empty,each:jn.each,on:function(e,t){var r=this._id;return arguments.length<2?xn(this.node(),r).on.on(e):this.each(function(n,s,i){var o,a,h=function(l){return(l+"").trim().split(/^|\s+/).every(function(c){var u=c.indexOf(".");return u>=0&&(c=c.slice(0,u)),!c||c==="start"})}(s)?Hu:In;return function(){var l=h(this,n),c=l.on;c!==o&&(a=(o=c).copy()).on(s,i),l.on=a}}(r,e,t))},attr:function(e,t){var r=Ol(e),n=r==="transform"?B3:gf;return this.attrTween(e,typeof t=="function"?(r.local?W3:j3)(r,n,oh(this,"attr."+e,t)):t==null?(r.local?z3:N3)(r):(r.local?q3:U3)(r,n,t))},attrTween:function(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Ol(e);return this.tween(r,(n.local?H3:V3)(n,t))},style:function(e,t,r){var n=(e+="")=="transform"?L3:gf;return t==null?this.styleTween(e,function(s,i){var o,a,h;return function(){var l=Ci(this,s),c=(this.style.removeProperty(s),Ci(this,s));return l===c?null:l===o&&c===a?h:h=i(o=l,a=c)}}(e,n)).on("end.style."+e,ff(e)):typeof t=="function"?this.styleTween(e,function(s,i,o){var a,h,l;return function(){var c=Ci(this,s),u=o(this),p=u+"";return u==null&&(this.style.removeProperty(s),p=u=Ci(this,s)),c===p?null:c===a&&p===h?l:(h=p,l=i(a=c,u))}}(e,n,oh(this,"style."+e,t))).each(function(s,i){var o,a,h,l,c="style."+i,u="end."+c;return function(){var p=In(this,s),g=p.on,f=p.value[c]==null?l||(l=ff(i)):void 0;g===o&&h===f||(a=(o=g).copy()).on(u,h=f),p.on=a}}(this._id,e)):this.styleTween(e,function(s,i,o){var a,h,l=o+"";return function(){var c=Ci(this,s);return c===l?null:c===a?h:h=i(a=c,o)}}(e,n,t),r).on("end.style."+e,null)},styleTween:function(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,function(s,i,o){var a,h;function l(){var c=i.apply(this,arguments);return c!==h&&(a=(h=c)&&function(u,p,g){return function(f){this.style.setProperty(u,p.call(this,f),g)}}(s,c,o)),a}return l._value=i,l}(e,t,r??""))},text:function(e){return this.tween("text",typeof e=="function"?function(t){return function(){var r=t(this);this.textContent=r??""}}(oh(this,"text",e)):function(t){return function(){this.textContent=t}}(e==null?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,function(r){var n,s;function i(){var o=r.apply(this,arguments);return o!==s&&(n=(s=o)&&function(a){return function(h){this.textContent=a.call(this,h)}}(o)),n}return i._value=r,i}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n,s=xn(this.node(),r).tween,i=0,o=s.length;i<o;++i)if((n=s[i]).name===e)return n.value;return null}return this.each((t==null?R3:P3)(r,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?G3:Y3)(t,e)):xn(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Z3:X3)(t,e)):xn(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(r,n){if(typeof n!="function")throw new Error;return function(){In(this,r).ease=n}}(t,e)):xn(this.node(),t).ease},easeVarying:function(e){if(typeof e!="function")throw new Error;return this.each(function(t,r){return function(){var n=r.apply(this,arguments);if(typeof n!="function")throw new Error;In(this,t).ease=n}}(this._id,e))},end:function(){var e,t,r=this,n=r._id,s=r.size();return new Promise(function(i,o){var a={value:o},h={value:function(){--s==0&&i()}};r.each(function(){var l=In(this,n),c=l.on;c!==e&&((t=(e=c).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(h)),l.on=t}),s===0&&i()})},[Symbol.iterator]:jn[Symbol.iterator]};var J3={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function tM(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}Ko.prototype.interrupt=function(e){return this.each(function(){(function(t,r){var n,s,i,o=t.__transition,a=!0;if(o){for(i in r=r==null?null:r+"",o)(n=o[i]).name===r?(s=n.state>pd&&n.state<gd,n.state=cl,n.timer.stop(),n.on.call(s?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}})(this,e)})},Ko.prototype.transition=function(e){var t,r;e instanceof Yn?(t=e._id,e=e._name):(t=xv(),(r=J3).time=Wu(),e=e==null?null:e+"");for(var n=this._groups,s=n.length,i=0;i<s;++i)for(var o,a=n[i],h=a.length,l=0;l<h;++l)(o=a[l])&&hl(o,e,t,l,a,r||tM(o,t));return new Yn(n,this._parents,e,t)};const fd=Math.PI,md=2*fd,Ns=1e-6,eM=md-Ns;function mf(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class rM{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?mf:function(r){let n=Math.floor(r);if(!(n>=0))throw new Error(`invalid digits: ${r}`);if(n>15)return mf;const s=10**n;return function(i){this._+=i[0];for(let o=1,a=i.length;o<a;++o)this._+=Math.round(arguments[o]*s)/s+i[o]}}(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,h=n-t,l=s-r,c=o-t,u=a-r,p=c*c+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Ns)if(Math.abs(u*h-l*c)>Ns&&i){let g=n-o,f=s-a,m=h*h+l*l,y=g*g+f*f,v=Math.sqrt(m),x=Math.sqrt(p),k=i*Math.tan((fd-Math.acos((m+p-y)/(2*v*x)))/2),_=k/x,w=k/v;Math.abs(_-1)>Ns&&this._append`L${t+_*c},${r+_*u}`,this._append`A${i},${i},0,0,${+(u*g>c*f)},${this._x1=t+w*h},${this._y1=r+w*l}`}else this._append`L${this._x1=t},${this._y1=r}`}arc(t,r,n,s,i,o){if(t=+t,r=+r,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(s),h=n*Math.sin(s),l=t+a,c=r+h,u=1^o,p=o?s-i:i-s;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Ns||Math.abs(this._y1-c)>Ns)&&this._append`L${l},${c}`,n&&(p<0&&(p=p%md+md),p>eM?this._append`A${n},${n},0,1,${u},${t-a},${r-h}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:p>Ns&&this._append`A${n},${n},0,${+(p>=fd)},${u},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function vi(e){return function(){return e}}const mP=Math.abs,yP=Math.atan2,vP=Math.cos,bP=Math.max,xP=Math.min,kP=Math.sin,_P=Math.sqrt,yf=1e-12,Vu=Math.PI,vf=Vu/2,wP=2*Vu;function CP(e){return e>1?0:e<-1?Vu:Math.acos(e)}function SP(e){return e>=1?vf:e<=-1?-vf:Math.asin(e)}function nM(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new rM(t)}function sM(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kv(e){this._context=e}function zl(e){return new kv(e)}function iM(e){return e[0]}function oM(e){return e[1]}function aM(e,t){var r=vi(!0),n=null,s=zl,i=null,o=nM(a);function a(h){var l,c,u,p=(h=sM(h)).length,g=!1;for(n==null&&(i=s(u=o())),l=0;l<=p;++l)!(l<p&&r(c=h[l],l,h))===g&&((g=!g)?i.lineStart():i.lineEnd()),g&&i.point(+e(c,l,h),+t(c,l,h));if(u)return i=null,u+""||null}return e=typeof e=="function"?e:e===void 0?iM:vi(e),t=typeof t=="function"?t:t===void 0?oM:vi(t),a.x=function(h){return arguments.length?(e=typeof h=="function"?h:vi(+h),a):e},a.y=function(h){return arguments.length?(t=typeof h=="function"?h:vi(+h),a):t},a.defined=function(h){return arguments.length?(r=typeof h=="function"?h:vi(!!h),a):r},a.curve=function(h){return arguments.length?(s=h,n!=null&&(i=s(n)),a):s},a.context=function(h){return arguments.length?(h==null?n=i=null:i=s(n=h),a):n},a}kv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class _v{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r)}this._x0=t,this._y0=r}}function wv(e){return new _v(e,!0)}function Cv(e){return new _v(e,!1)}function ws(){}function Pa(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function _c(e){this._context=e}function yd(e){return new _c(e)}function Sv(e){this._context=e}function Tv(e){this._context=e}function $v(e,t){this._basis=new _c(e),this._beta=t}_c.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pa(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Sv.prototype={areaStart:ws,areaEnd:ws,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Pa(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Tv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Pa(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},$v.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var n,s=e[0],i=t[0],o=e[r]-s,a=t[r]-i,h=-1;++h<=r;)n=h/r,this._basis.point(this._beta*e[h]+(1-this._beta)*(s+n*o),this._beta*t[h]+(1-this._beta)*(i+n*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const lM=function e(t){function r(n){return t===1?new _c(n):new $v(n,t)}return r.beta=function(n){return e(+n)},r}(.85);function Ul(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function Gu(e,t){this._context=e,this._k=(1-t)/6}Gu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ul(this,this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Ul(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Mv=function e(t){function r(n){return new Gu(n,t)}return r.tension=function(n){return e(+n)},r}(0);function Yu(e,t){this._context=e,this._k=(1-t)/6}Yu.prototype={areaStart:ws,areaEnd:ws,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ul(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const cM=function e(t){function r(n){return new Yu(n,t)}return r.tension=function(n){return e(+n)},r}(0);function Zu(e,t){this._context=e,this._k=(1-t)/6}Zu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ul(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const hM=function e(t){function r(n){return new Zu(n,t)}return r.tension=function(n){return e(+n)},r}(0);function Xu(e,t,r){var n=e._x1,s=e._y1,i=e._x2,o=e._y2;if(e._l01_a>yf){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,h=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/h,s=(s*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/h}if(e._l23_a>yf){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-r*e._l12_2a)/c}e._context.bezierCurveTo(n,s,i,o,e._x2,e._y2)}function Av(e,t){this._context=e,this._alpha=t}Av.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Xu(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ev=function e(t){function r(n){return t?new Av(n,t):new Gu(n,0)}return r.alpha=function(n){return e(+n)},r}(.5);function Lv(e,t){this._context=e,this._alpha=t}Lv.prototype={areaStart:ws,areaEnd:ws,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Xu(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const dM=function e(t){function r(n){return t?new Lv(n,t):new Yu(n,0)}return r.alpha=function(n){return e(+n)},r}(.5);function Bv(e,t){this._context=e,this._alpha=t}Bv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xu(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const uM=function e(t){function r(n){return t?new Bv(n,t):new Zu(n,0)}return r.alpha=function(n){return e(+n)},r}(.5);function Iv(e){this._context=e}function bf(e){return e<0?-1:1}function xf(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),a=(i*s+o*n)/(n+s);return(bf(i)+bf(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function kf(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function ah(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,a=(i-n)/3;e._context.bezierCurveTo(n+a,s+a*t,i-a,o-a*r,i,o)}function dl(e){this._context=e}function Fv(e){this._context=new Dv(e)}function Dv(e){this._context=e}function Ov(e){return new dl(e)}function Rv(e){return new Fv(e)}function Pv(e){this._context=e}function _f(e){var t,r,n=e.length-1,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=s[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(s[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function Nv(e){return new Pv(e)}function wc(e,t){this._context=e,this._t=t}function zv(e){return new wc(e,.5)}function Uv(e){return new wc(e,0)}function qv(e){return new wc(e,1)}function ko(e,t,r){this.k=e,this.x=t,this.y=r}Iv.prototype={areaStart:ws,areaEnd:ws,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},dl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ah(this,this._t0,kf(this,this._t0))}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ah(this,kf(this,r=xf(this,e,t)),r);break;default:ah(this,this._t0,r=xf(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(Fv.prototype=Object.create(dl.prototype)).point=function(e,t){dl.prototype.point.call(this,t,e)},Dv.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}},Pv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=_f(e),s=_f(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},wc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}},ko.prototype={constructor:ko,scale:function(e){return e===1?this:new ko(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ko(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},ko.prototype;var pM=C(e=>{const{securityLevel:t}=Oe();let r=we("body");if(t==="sandbox"){const n=we(`#i${e}`);r=we((n.node()?.contentDocument??document).body)}return r.select(`#${e}`)},"selectSvgElement");function Ku(e){return e==null}function jv(e){return typeof e=="object"&&e!==null}function Wv(e){return Array.isArray(e)?e:Ku(e)?[]:[e]}function Hv(e,t){var r,n,s,i;if(t)for(r=0,n=(i=Object.keys(t)).length;r<n;r+=1)e[s=i[r]]=t[s];return e}function Vv(e,t){var r,n="";for(r=0;r<t;r+=1)n+=e;return n}function Gv(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}C(Ku,"isNothing"),C(jv,"isObject"),C(Wv,"toArray"),C(Hv,"extend"),C(Vv,"repeat"),C(Gv,"isNegativeZero");var dr={isNothing:Ku,isObject:jv,toArray:Wv,repeat:Vv,isNegativeZero:Gv,extend:Hv};function vd(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function Si(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=vd(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}C(vd,"formatError"),C(Si,"YAMLException$1"),Si.prototype=Object.create(Error.prototype),Si.prototype.constructor=Si,Si.prototype.toString=C(function(e){return this.name+": "+vd(this,e)},"toString");var Xr=Si;function ul(e,t,r,n,s){var i="",o="",a=Math.floor(s/2)-1;return n-t>a&&(t=n-a+(i=" ... ").length),r-n>a&&(r=n+a-(o=" ...").length),{str:i+e.slice(t,r).replace(/\t/g,"→")+o,pos:n-t+i.length}}function pl(e,t){return dr.repeat(" ",t-e.length)+e}function Yv(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r,n=/\r?\n|\r|\0/g,s=[0],i=[],o=-1;r=n.exec(e.buffer);)i.push(r.index),s.push(r.index+r[0].length),e.position<=r.index&&o<0&&(o=s.length-2);o<0&&(o=s.length-1);var a,h,l="",c=Math.min(e.line+t.linesAfter,i.length).toString().length,u=t.maxLength-(t.indent+c+3);for(a=1;a<=t.linesBefore&&!(o-a<0);a++)h=ul(e.buffer,s[o-a],i[o-a],e.position-(s[o]-s[o-a]),u),l=dr.repeat(" ",t.indent)+pl((e.line-a+1).toString(),c)+" | "+h.str+`
`+l;for(h=ul(e.buffer,s[o],i[o],e.position,u),l+=dr.repeat(" ",t.indent)+pl((e.line+1).toString(),c)+" | "+h.str+`
`,l+=dr.repeat("-",t.indent+c+3+h.pos)+`^
`,a=1;a<=t.linesAfter&&!(o+a>=i.length);a++)h=ul(e.buffer,s[o+a],i[o+a],e.position-(s[o]-s[o+a]),u),l+=dr.repeat(" ",t.indent)+pl((e.line+a+1).toString(),c)+" | "+h.str+`
`;return l.replace(/\n$/,"")}C(ul,"getLine"),C(pl,"padStart"),C(Yv,"makeSnippet");var gM=Yv,fM=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],mM=["scalar","sequence","mapping"];function Zv(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function Xv(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(fM.indexOf(r)===-1)throw new Xr('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Zv(t.styleAliases||null),mM.indexOf(this.kind)===-1)throw new Xr('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}C(Zv,"compileStyleAliases"),C(Xv,"Type$1");var Er=Xv;function lh(e,t){var r=[];return e[t].forEach(function(n){var s=r.length;r.forEach(function(i,o){i.tag===n.tag&&i.kind===n.kind&&i.multi===n.multi&&(s=o)}),r[s]=n}),r}function wf(){var e,t,r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function n(s){s.multi?(r.multi[s.kind].push(s),r.multi.fallback.push(s)):r[s.kind][s.tag]=r.fallback[s.tag]=s}for(C(n,"collectType"),e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}function gl(e){return this.extend(e)}C(lh,"compileList"),C(wf,"compileMap"),C(gl,"Schema$1"),gl.prototype.extend=C(function(e){var t=[],r=[];if(e instanceof Er)r.push(e);else if(Array.isArray(e))r=r.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new Xr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit))}t.forEach(function(s){if(!(s instanceof Er))throw new Xr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Xr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Xr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof Er))throw new Xr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(gl.prototype);return n.implicit=(this.implicit||[]).concat(t),n.explicit=(this.explicit||[]).concat(r),n.compiledImplicit=lh(n,"implicit"),n.compiledExplicit=lh(n,"explicit"),n.compiledTypeMap=wf(n.compiledImplicit,n.compiledExplicit),n},"extend");var yM=new gl({explicit:[new Er("tag:yaml.org,2002:str",{kind:"scalar",construct:C(function(e){return e!==null?e:""},"construct")}),new Er("tag:yaml.org,2002:seq",{kind:"sequence",construct:C(function(e){return e!==null?e:[]},"construct")}),new Er("tag:yaml.org,2002:map",{kind:"mapping",construct:C(function(e){return e!==null?e:{}},"construct")})]});function Kv(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Qv(){return null}function Jv(e){return e===null}C(Kv,"resolveYamlNull"),C(Qv,"constructYamlNull"),C(Jv,"isNull");var vM=new Er("tag:yaml.org,2002:null",{kind:"scalar",resolve:Kv,construct:Qv,predicate:Jv,represent:{canonical:C(function(){return"~"},"canonical"),lowercase:C(function(){return"null"},"lowercase"),uppercase:C(function(){return"NULL"},"uppercase"),camelcase:C(function(){return"Null"},"camelcase"),empty:C(function(){return""},"empty")},defaultStyle:"lowercase"});function t1(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function e1(e){return e==="true"||e==="True"||e==="TRUE"}function r1(e){return Object.prototype.toString.call(e)==="[object Boolean]"}C(t1,"resolveYamlBoolean"),C(e1,"constructYamlBoolean"),C(r1,"isBoolean");var bM=new Er("tag:yaml.org,2002:bool",{kind:"scalar",resolve:t1,construct:e1,predicate:r1,represent:{lowercase:C(function(e){return e?"true":"false"},"lowercase"),uppercase:C(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:C(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function n1(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function s1(e){return 48<=e&&e<=55}function i1(e){return 48<=e&&e<=57}function o1(e){if(e===null)return!1;var t,r=e.length,n=0,s=!1;if(!r)return!1;if((t=e[n])!=="-"&&t!=="+"||(t=e[++n]),t==="0"){if(n+1===r)return!0;if((t=e[++n])==="b"){for(n++;n<r;n++)if((t=e[n])!=="_"){if(t!=="0"&&t!=="1")return!1;s=!0}return s&&t!=="_"}if(t==="x"){for(n++;n<r;n++)if((t=e[n])!=="_"){if(!n1(e.charCodeAt(n)))return!1;s=!0}return s&&t!=="_"}if(t==="o"){for(n++;n<r;n++)if((t=e[n])!=="_"){if(!s1(e.charCodeAt(n)))return!1;s=!0}return s&&t!=="_"}}if(t==="_")return!1;for(;n<r;n++)if((t=e[n])!=="_"){if(!i1(e.charCodeAt(n)))return!1;s=!0}return!(!s||t==="_")}function a1(e){var t,r=e,n=1;if(r.indexOf("_")!==-1&&(r=r.replace(/_/g,"")),(t=r[0])!=="-"&&t!=="+"||(t==="-"&&(n=-1),t=(r=r.slice(1))[0]),r==="0")return 0;if(t==="0"){if(r[1]==="b")return n*parseInt(r.slice(2),2);if(r[1]==="x")return n*parseInt(r.slice(2),16);if(r[1]==="o")return n*parseInt(r.slice(2),8)}return n*parseInt(r,10)}function l1(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1==0&&!dr.isNegativeZero(e)}C(n1,"isHexCode"),C(s1,"isOctCode"),C(i1,"isDecCode"),C(o1,"resolveYamlInteger"),C(a1,"constructYamlInteger"),C(l1,"isInteger");var xM=new Er("tag:yaml.org,2002:int",{kind:"scalar",resolve:o1,construct:a1,predicate:l1,represent:{binary:C(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:C(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:C(function(e){return e.toString(10)},"decimal"),hexadecimal:C(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),kM=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function c1(e){return e!==null&&!(!kM.test(e)||e[e.length-1]==="_")}function h1(e){var t,r;return r=(t=e.replace(/_/g,"").toLowerCase())[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}C(c1,"resolveYamlFloat"),C(h1,"constructYamlFloat");var _M=/^[-+]?[0-9]+e/;function d1(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(dr.isNegativeZero(e))return"-0.0";return r=e.toString(10),_M.test(r)?r.replace("e",".e"):r}function u1(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!=0||dr.isNegativeZero(e))}C(d1,"representYamlFloat"),C(u1,"isFloat");var wM=new Er("tag:yaml.org,2002:float",{kind:"scalar",resolve:c1,construct:h1,predicate:u1,represent:d1,defaultStyle:"lowercase"}),p1=yM.extend({implicit:[vM,bM,xM,wM]}),CM=p1,g1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),f1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function m1(e){return e!==null&&(g1.exec(e)!==null||f1.exec(e)!==null)}function y1(e){var t,r,n,s,i,o,a,h,l=0,c=null;if((t=g1.exec(e))===null&&(t=f1.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(r,n,s));if(i=+t[4],o=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(c=6e4*(60*+t[10]+ +(t[11]||0)),t[9]==="-"&&(c=-c)),h=new Date(Date.UTC(r,n,s,i,o,a,l)),c&&h.setTime(h.getTime()-c),h}function v1(e){return e.toISOString()}C(m1,"resolveYamlTimestamp"),C(y1,"constructYamlTimestamp"),C(v1,"representYamlTimestamp");var SM=new Er("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:m1,construct:y1,instanceOf:Date,represent:v1});function b1(e){return e==="<<"||e===null}C(b1,"resolveYamlMerge");var TM=new Er("tag:yaml.org,2002:merge",{kind:"scalar",resolve:b1}),Qu=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function x1(e){if(e===null)return!1;var t,r,n=0,s=e.length,i=Qu;for(r=0;r<s;r++)if(!((t=i.indexOf(e.charAt(r)))>64)){if(t<0)return!1;n+=6}return n%8==0}function k1(e){var t,r,n=e.replace(/[\r\n=]/g,""),s=n.length,i=Qu,o=0,a=[];for(t=0;t<s;t++)t%4==0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)),o=o<<6|i.indexOf(n.charAt(t));return(r=s%4*6)===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function _1(e){var t,r,n="",s=0,i=e.length,o=Qu;for(t=0;t<i;t++)t%3==0&&t&&(n+=o[s>>18&63],n+=o[s>>12&63],n+=o[s>>6&63],n+=o[63&s]),s=(s<<8)+e[t];return(r=i%3)===0?(n+=o[s>>18&63],n+=o[s>>12&63],n+=o[s>>6&63],n+=o[63&s]):r===2?(n+=o[s>>10&63],n+=o[s>>4&63],n+=o[s<<2&63],n+=o[64]):r===1&&(n+=o[s>>2&63],n+=o[s<<4&63],n+=o[64],n+=o[64]),n}function w1(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}C(x1,"resolveYamlBinary"),C(k1,"constructYamlBinary"),C(_1,"representYamlBinary"),C(w1,"isBinary");var $M=new Er("tag:yaml.org,2002:binary",{kind:"scalar",resolve:x1,construct:k1,predicate:w1,represent:_1}),MM=Object.prototype.hasOwnProperty,AM=Object.prototype.toString;function C1(e){if(e===null)return!0;var t,r,n,s,i,o=[],a=e;for(t=0,r=a.length;t<r;t+=1){if(n=a[t],i=!1,AM.call(n)!=="[object Object]")return!1;for(s in n)if(MM.call(n,s)){if(i)return!1;i=!0}if(!i||o.indexOf(s)!==-1)return!1;o.push(s)}return!0}function S1(e){return e!==null?e:[]}C(C1,"resolveYamlOmap"),C(S1,"constructYamlOmap");var EM=new Er("tag:yaml.org,2002:omap",{kind:"sequence",resolve:C1,construct:S1}),LM=Object.prototype.toString;function T1(e){if(e===null)return!0;var t,r,n,s,i,o=e;for(i=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],LM.call(n)!=="[object Object]"||(s=Object.keys(n)).length!==1)return!1;i[t]=[s[0],n[s[0]]]}return!0}function $1(e){if(e===null)return[];var t,r,n,s,i,o=e;for(i=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],s=Object.keys(n),i[t]=[s[0],n[s[0]]];return i}C(T1,"resolveYamlPairs"),C($1,"constructYamlPairs");var BM=new Er("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:T1,construct:$1}),IM=Object.prototype.hasOwnProperty;function M1(e){if(e===null)return!0;var t,r=e;for(t in r)if(IM.call(r,t)&&r[t]!==null)return!1;return!0}function A1(e){return e!==null?e:{}}C(M1,"resolveYamlSet"),C(A1,"constructYamlSet");var FM=new Er("tag:yaml.org,2002:set",{kind:"mapping",resolve:M1,construct:A1}),E1=CM.extend({implicit:[SM,TM],explicit:[$M,EM,BM,FM]}),Cs=Object.prototype.hasOwnProperty,ql=1,L1=2,B1=3,jl=4,ch=1,DM=2,Cf=3,OM=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,RM=/[\x85\u2028\u2029]/,PM=/[,\[\]\{\}]/,I1=/^(?:!|!!|![a-z\-]+!)$/i,F1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function bd(e){return Object.prototype.toString.call(e)}function Tn(e){return e===10||e===13}function fs(e){return e===9||e===32}function Or(e){return e===9||e===32||e===10||e===13}function Gs(e){return e===44||e===91||e===93||e===123||e===125}function D1(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function O1(e){return e===120?2:e===117?4:e===85?8:0}function R1(e){return 48<=e&&e<=57?e-48:-1}function xd(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function P1(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}C(bd,"_class"),C(Tn,"is_EOL"),C(fs,"is_WHITE_SPACE"),C(Or,"is_WS_OR_EOL"),C(Gs,"is_FLOW_INDICATOR"),C(D1,"fromHexCode"),C(O1,"escapedHexLen"),C(R1,"fromDecimalCode"),C(xd,"simpleEscapeSequence"),C(P1,"charFromCodepoint");var Ds,N1=new Array(256),z1=new Array(256);for(Ds=0;Ds<256;Ds++)N1[Ds]=xd(Ds)?1:0,z1[Ds]=xd(Ds);function U1(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||E1,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Ju(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=gM(r),new Xr(t,r)}function Ut(e,t){throw Ju(e,t)}function ea(e,t){e.onWarning&&e.onWarning.call(null,Ju(e,t))}C(U1,"State$1"),C(Ju,"generateError"),C(Ut,"throwError"),C(ea,"throwWarning");var Sf={YAML:C(function(e,t,r){var n,s,i;e.version!==null&&Ut(e,"duplication of %YAML directive"),r.length!==1&&Ut(e,"YAML directive accepts exactly one argument"),(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))===null&&Ut(e,"ill-formed argument of the YAML directive"),s=parseInt(n[1],10),i=parseInt(n[2],10),s!==1&&Ut(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=i<2,i!==1&&i!==2&&ea(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:C(function(e,t,r){var n,s;r.length!==2&&Ut(e,"TAG directive accepts exactly two arguments"),n=r[0],s=r[1],I1.test(n)||Ut(e,"ill-formed tag handle (first argument) of the TAG directive"),Cs.call(e.tagMap,n)&&Ut(e,'there is a previously declared suffix for "'+n+'" tag handle'),F1.test(s)||Ut(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{Ut(e,"tag prefix is malformed: "+s)}e.tagMap[n]=s},"handleTagDirective")};function Jn(e,t,r,n){var s,i,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(s=0,i=a.length;s<i;s+=1)(o=a.charCodeAt(s))===9||32<=o&&o<=1114111||Ut(e,"expected valid JSON character");else OM.test(a)&&Ut(e,"the stream contains non-printable characters");e.result+=a}}function kd(e,t,r,n){var s,i,o,a;for(dr.isObject(r)||Ut(e,"cannot merge mappings; the provided source object is unacceptable"),o=0,a=(s=Object.keys(r)).length;o<a;o+=1)i=s[o],Cs.call(t,i)||(t[i]=r[i],n[i]=!0)}function Ys(e,t,r,n,s,i,o,a,h){var l,c;if(Array.isArray(s))for(l=0,c=(s=Array.prototype.slice.call(s)).length;l<c;l+=1)Array.isArray(s[l])&&Ut(e,"nested arrays are not supported inside keys"),typeof s=="object"&&bd(s[l])==="[object Object]"&&(s[l]="[object Object]");if(typeof s=="object"&&bd(s)==="[object Object]"&&(s="[object Object]"),s=String(s),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(l=0,c=i.length;l<c;l+=1)kd(e,t,i[l],r);else kd(e,t,i,r);else e.json||Cs.call(r,s)||!Cs.call(t,s)||(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=h||e.position,Ut(e,"duplicated mapping key")),s==="__proto__"?Object.defineProperty(t,s,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[s]=i,delete r[s];return t}function Cc(e){var t;(t=e.input.charCodeAt(e.position))===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Ut(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function nr(e,t,r){for(var n=0,s=e.input.charCodeAt(e.position);s!==0;){for(;fs(s);)s===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),s=e.input.charCodeAt(++e.position);if(t&&s===35)do s=e.input.charCodeAt(++e.position);while(s!==10&&s!==13&&s!==0);if(!Tn(s))break;for(Cc(e),s=e.input.charCodeAt(e.position),n++,e.lineIndent=0;s===32;)e.lineIndent++,s=e.input.charCodeAt(++e.position)}return r!==-1&&n!==0&&e.lineIndent<r&&ea(e,"deficient indentation"),n}function xa(e){var t,r=e.position;return!((t=e.input.charCodeAt(r))!==45&&t!==46||t!==e.input.charCodeAt(r+1)||t!==e.input.charCodeAt(r+2)||(r+=3,(t=e.input.charCodeAt(r))!==0&&!Or(t)))}function Sc(e,t){t===1?e.result+=" ":t>1&&(e.result+=dr.repeat(`
`,t-1))}function q1(e,t,r){var n,s,i,o,a,h,l,c,u=e.kind,p=e.result;if(Or(c=e.input.charCodeAt(e.position))||Gs(c)||c===35||c===38||c===42||c===33||c===124||c===62||c===39||c===34||c===37||c===64||c===96||(c===63||c===45)&&(Or(n=e.input.charCodeAt(e.position+1))||r&&Gs(n)))return!1;for(e.kind="scalar",e.result="",s=i=e.position,o=!1;c!==0;){if(c===58){if(Or(n=e.input.charCodeAt(e.position+1))||r&&Gs(n))break}else if(c===35){if(Or(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&xa(e)||r&&Gs(c))break;if(Tn(c)){if(a=e.line,h=e.lineStart,l=e.lineIndent,nr(e,!1,-1),e.lineIndent>=t){o=!0,c=e.input.charCodeAt(e.position);continue}e.position=i,e.line=a,e.lineStart=h,e.lineIndent=l;break}}o&&(Jn(e,s,i,!1),Sc(e,e.line-a),s=i=e.position,o=!1),fs(c)||(i=e.position+1),c=e.input.charCodeAt(++e.position)}return Jn(e,s,i,!1),!!e.result||(e.kind=u,e.result=p,!1)}function j1(e,t){var r,n,s;if((r=e.input.charCodeAt(e.position))!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=s=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39){if(Jn(e,n,e.position,!0),(r=e.input.charCodeAt(++e.position))!==39)return!0;n=e.position,e.position++,s=e.position}else Tn(r)?(Jn(e,n,s,!0),Sc(e,nr(e,!1,t)),n=s=e.position):e.position===e.lineStart&&xa(e)?Ut(e,"unexpected end of the document within a single quoted scalar"):(e.position++,s=e.position);Ut(e,"unexpected end of the stream within a single quoted scalar")}function W1(e,t){var r,n,s,i,o,a;if((a=e.input.charCodeAt(e.position))!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Jn(e,r,e.position,!0),e.position++,!0;if(a===92){if(Jn(e,r,e.position,!0),Tn(a=e.input.charCodeAt(++e.position)))nr(e,!1,t);else if(a<256&&N1[a])e.result+=z1[a],e.position++;else if((o=O1(a))>0){for(s=o,i=0;s>0;s--)(o=D1(a=e.input.charCodeAt(++e.position)))>=0?i=(i<<4)+o:Ut(e,"expected hexadecimal character");e.result+=P1(i),e.position++}else Ut(e,"unknown escape sequence");r=n=e.position}else Tn(a)?(Jn(e,r,n,!0),Sc(e,nr(e,!1,t)),r=n=e.position):e.position===e.lineStart&&xa(e)?Ut(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}Ut(e,"unexpected end of the stream within a double quoted scalar")}function H1(e,t){var r,n,s,i,o,a,h,l,c,u,p,g,f=!0,m=e.tag,y=e.anchor,v=Object.create(null);if((g=e.input.charCodeAt(e.position))===91)o=93,l=!1,i=[];else{if(g!==123)return!1;o=125,l=!0,i={}}for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),g=e.input.charCodeAt(++e.position);g!==0;){if(nr(e,!0,t),(g=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=m,e.anchor=y,e.kind=l?"mapping":"sequence",e.result=i,!0;f?g===44&&Ut(e,"expected the node content, but found ','"):Ut(e,"missed comma between flow collection entries"),p=null,a=h=!1,g===63&&Or(e.input.charCodeAt(e.position+1))&&(a=h=!0,e.position++,nr(e,!0,t)),r=e.line,n=e.lineStart,s=e.position,si(e,t,ql,!1,!0),u=e.tag,c=e.result,nr(e,!0,t),g=e.input.charCodeAt(e.position),!h&&e.line!==r||g!==58||(a=!0,g=e.input.charCodeAt(++e.position),nr(e,!0,t),si(e,t,ql,!1,!0),p=e.result),l?Ys(e,i,v,u,c,p,r,n,s):a?i.push(Ys(e,null,v,u,c,p,r,n,s)):i.push(c),nr(e,!0,t),(g=e.input.charCodeAt(e.position))===44?(f=!0,g=e.input.charCodeAt(++e.position)):f=!1}Ut(e,"unexpected end of the stream within a flow collection")}function V1(e,t){var r,n,s,i,o=ch,a=!1,h=!1,l=t,c=0,u=!1;if((i=e.input.charCodeAt(e.position))===124)n=!1;else{if(i!==62)return!1;n=!0}for(e.kind="scalar",e.result="";i!==0;)if((i=e.input.charCodeAt(++e.position))===43||i===45)ch===o?o=i===43?Cf:DM:Ut(e,"repeat of a chomping mode identifier");else{if(!((s=R1(i))>=0))break;s===0?Ut(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):h?Ut(e,"repeat of an indentation width identifier"):(l=t+s-1,h=!0)}if(fs(i)){do i=e.input.charCodeAt(++e.position);while(fs(i));if(i===35)do i=e.input.charCodeAt(++e.position);while(!Tn(i)&&i!==0)}for(;i!==0;){for(Cc(e),e.lineIndent=0,i=e.input.charCodeAt(e.position);(!h||e.lineIndent<l)&&i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);if(!h&&e.lineIndent>l&&(l=e.lineIndent),Tn(i))c++;else{if(e.lineIndent<l){o===Cf?e.result+=dr.repeat(`
`,a?1+c:c):o===ch&&a&&(e.result+=`
`);break}for(n?fs(i)?(u=!0,e.result+=dr.repeat(`
`,a?1+c:c)):u?(u=!1,e.result+=dr.repeat(`
`,c+1)):c===0?a&&(e.result+=" "):e.result+=dr.repeat(`
`,c):e.result+=dr.repeat(`
`,a?1+c:c),a=!0,h=!0,c=0,r=e.position;!Tn(i)&&i!==0;)i=e.input.charCodeAt(++e.position);Jn(e,r,e.position,!1)}}return!0}function _d(e,t){var r,n,s=e.tag,i=e.anchor,o=[],a=!1;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),n=e.input.charCodeAt(e.position);n!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Ut(e,"tab characters must not be used in indentation")),n===45)&&Or(e.input.charCodeAt(e.position+1));)if(a=!0,e.position++,nr(e,!0,-1)&&e.lineIndent<=t)o.push(null),n=e.input.charCodeAt(e.position);else if(r=e.line,si(e,t,B1,!1,!0),o.push(e.result),nr(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&n!==0)Ut(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!a&&(e.tag=s,e.anchor=i,e.kind="sequence",e.result=o,!0)}function G1(e,t,r){var n,s,i,o,a,h,l,c=e.tag,u=e.anchor,p={},g=Object.create(null),f=null,m=null,y=null,v=!1,x=!1;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=p),l=e.input.charCodeAt(e.position);l!==0;){if(v||e.firstTabInLine===-1||(e.position=e.firstTabInLine,Ut(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),i=e.line,l!==63&&l!==58||!Or(n)){if(o=e.line,a=e.lineStart,h=e.position,!si(e,r,L1,!1,!0))break;if(e.line===i){for(l=e.input.charCodeAt(e.position);fs(l);)l=e.input.charCodeAt(++e.position);if(l===58)Or(l=e.input.charCodeAt(++e.position))||Ut(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(Ys(e,p,g,f,m,null,o,a,h),f=m=y=null),x=!0,v=!1,s=!1,f=e.tag,m=e.result;else{if(!x)return e.tag=c,e.anchor=u,!0;Ut(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!x)return e.tag=c,e.anchor=u,!0;Ut(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else l===63?(v&&(Ys(e,p,g,f,m,null,o,a,h),f=m=y=null),x=!0,v=!0,s=!0):v?(v=!1,s=!0):Ut(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,l=n;if((e.line===i||e.lineIndent>t)&&(v&&(o=e.line,a=e.lineStart,h=e.position),si(e,t,jl,!0,s)&&(v?m=e.result:y=e.result),v||(Ys(e,p,g,f,m,y,o,a,h),f=m=y=null),nr(e,!0,-1),l=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&l!==0)Ut(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&Ys(e,p,g,f,m,null,o,a,h),x&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=p),x}function Y1(e){var t,r,n,s,i=!1,o=!1;if((s=e.input.charCodeAt(e.position))!==33)return!1;if(e.tag!==null&&Ut(e,"duplication of a tag property"),(s=e.input.charCodeAt(++e.position))===60?(i=!0,s=e.input.charCodeAt(++e.position)):s===33?(o=!0,r="!!",s=e.input.charCodeAt(++e.position)):r="!",t=e.position,i){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(n=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):Ut(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Or(s);)s===33&&(o?Ut(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),I1.test(r)||Ut(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),PM.test(n)&&Ut(e,"tag suffix cannot contain flow indicator characters")}n&&!F1.test(n)&&Ut(e,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{Ut(e,"tag name is malformed: "+n)}return i?e.tag=n:Cs.call(e.tagMap,r)?e.tag=e.tagMap[r]+n:r==="!"?e.tag="!"+n:r==="!!"?e.tag="tag:yaml.org,2002:"+n:Ut(e,'undeclared tag handle "'+r+'"'),!0}function Z1(e){var t,r;if((r=e.input.charCodeAt(e.position))!==38)return!1;for(e.anchor!==null&&Ut(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Or(r)&&!Gs(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Ut(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function X1(e){var t,r,n;if((n=e.input.charCodeAt(e.position))!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Or(n)&&!Gs(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Ut(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Cs.call(e.anchorMap,r)||Ut(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],nr(e,!0,-1),!0}function si(e,t,r,n,s){var i,o,a,h,l,c,u,p,g,f=1,m=!1,y=!1;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=o=a=jl===r||B1===r,n&&nr(e,!0,-1)&&(m=!0,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)),f===1)for(;Y1(e)||Z1(e);)nr(e,!0,-1)?(m=!0,a=i,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)):a=!1;if(a&&(a=m||s),f!==1&&jl!==r||(p=ql===r||L1===r?t:t+1,g=e.position-e.lineStart,f===1?a&&(_d(e,g)||G1(e,g,p))||H1(e,p)?y=!0:(o&&V1(e,p)||j1(e,p)||W1(e,p)?y=!0:X1(e)?(y=!0,e.tag===null&&e.anchor===null||Ut(e,"alias node should not have any properties")):q1(e,p,ql===r)&&(y=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):f===0&&(y=a&&_d(e,g))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Ut(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),h=0,l=e.implicitTypes.length;h<l;h+=1)if((u=e.implicitTypes[h]).resolve(e.result)){e.result=u.construct(e.result),e.tag=u.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Cs.call(e.typeMap[e.kind||"fallback"],e.tag))u=e.typeMap[e.kind||"fallback"][e.tag];else for(u=null,h=0,l=(c=e.typeMap.multi[e.kind||"fallback"]).length;h<l;h+=1)if(e.tag.slice(0,c[h].tag.length)===c[h].tag){u=c[h];break}u||Ut(e,"unknown tag !<"+e.tag+">"),e.result!==null&&u.kind!==e.kind&&Ut(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+u.kind+'", not "'+e.kind+'"'),u.resolve(e.result,e.tag)?(e.result=u.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Ut(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||y}function K1(e){var t,r,n,s,i=e.position,o=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(nr(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(o=!0,s=e.input.charCodeAt(++e.position),t=e.position;s!==0&&!Or(s);)s=e.input.charCodeAt(++e.position);for(n=[],(r=e.input.slice(t,e.position)).length<1&&Ut(e,"directive name must not be less than one character in length");s!==0;){for(;fs(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Tn(s));break}if(Tn(s))break;for(t=e.position;s!==0&&!Or(s);)s=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}s!==0&&Cc(e),Cs.call(Sf,r)?Sf[r](e,r,n):ea(e,'unknown document directive "'+r+'"')}nr(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,nr(e,!0,-1)):o&&Ut(e,"directives end mark is expected"),si(e,e.lineIndent-1,jl,!1,!0),nr(e,!0,-1),e.checkLineBreaks&&RM.test(e.input.slice(i,e.position))&&ea(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&xa(e)?e.input.charCodeAt(e.position)===46&&(e.position+=3,nr(e,!0,-1)):e.position<e.length-1&&Ut(e,"end of the stream or a document separator is expected")}function wd(e,t){t=t||{},(e=String(e)).length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new U1(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,Ut(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)K1(r);return r.documents}function Q1(e,t){var r=wd(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Xr("expected a single document in the stream, but found more")}}C(Jn,"captureSegment"),C(kd,"mergeMappings"),C(Ys,"storeMappingPair"),C(Cc,"readLineBreak"),C(nr,"skipSeparationSpace"),C(xa,"testDocumentSeparator"),C(Sc,"writeFoldedLines"),C(q1,"readPlainScalar"),C(j1,"readSingleQuotedScalar"),C(W1,"readDoubleQuotedScalar"),C(H1,"readFlowCollection"),C(V1,"readBlockScalar"),C(_d,"readBlockSequence"),C(G1,"readBlockMapping"),C(Y1,"readTagProperty"),C(Z1,"readAnchorProperty"),C(X1,"readAlias"),C(si,"composeNode"),C(K1,"readDocument"),C(wd,"loadDocuments"),C(function(e,t,r){t!==null&&typeof t=="object"&&r===void 0&&(r=t,t=null);var n=wd(e,r);if(typeof t!="function")return n;for(var s=0,i=n.length;s<i;s+=1)t(n[s])},"loadAll$1"),C(Q1,"load$1");var NM={load:Q1},J1=Object.prototype.toString,tb=Object.prototype.hasOwnProperty,tp=65279,zM=9,ra=10,UM=13,qM=32,jM=33,WM=34,Cd=35,HM=37,VM=38,GM=39,YM=42,eb=44,ZM=45,Wl=58,XM=61,KM=62,QM=63,JM=64,rb=91,nb=93,t5=96,sb=123,e5=124,ib=125,r5={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},n5=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],s5=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ob(e,t){var r,n,s,i,o,a,h;if(t===null)return{};for(r={},s=0,i=(n=Object.keys(t)).length;s<i;s+=1)o=n[s],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),(h=e.compiledTypeMap.fallback[o])&&tb.call(h.styleAliases,a)&&(a=h.styleAliases[a]),r[o]=a;return r}function ab(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else{if(!(e<=4294967295))throw new Xr("code point within a string may not be greater than 0xFFFFFFFF");r="U",n=8}return"\\"+r+dr.repeat("0",n-t.length)+t}C(ob,"compileStyleMap"),C(ab,"encodeHex");var i5=1,na=2;function lb(e){this.schema=e.schema||E1,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=dr.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=ob(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?na:i5,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Sd(e,t){for(var r,n=dr.repeat(" ",t),s=0,i=-1,o="",a=e.length;s<a;)(i=e.indexOf(`
`,s))===-1?(r=e.slice(s),s=a):(r=e.slice(s,i+1),s=i+1),r.length&&r!==`
`&&(o+=n),o+=r;return o}function Hl(e,t){return`
`+dr.repeat(" ",e.indent*t)}function cb(e,t){var r,n;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(e.implicitTypes[r].resolve(t))return!0;return!1}function sa(e){return e===qM||e===zM}function eo(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==tp||65536<=e&&e<=1114111}function Td(e){return eo(e)&&e!==tp&&e!==UM&&e!==ra}function $d(e,t,r){var n=Td(e),s=n&&!sa(e);return(r?n:n&&e!==eb&&e!==rb&&e!==nb&&e!==sb&&e!==ib)&&e!==Cd&&!(t===Wl&&!s)||Td(t)&&!sa(t)&&e===Cd||t===Wl&&s}function hb(e){return eo(e)&&e!==tp&&!sa(e)&&e!==ZM&&e!==QM&&e!==Wl&&e!==eb&&e!==rb&&e!==nb&&e!==sb&&e!==ib&&e!==Cd&&e!==VM&&e!==YM&&e!==jM&&e!==e5&&e!==XM&&e!==KM&&e!==GM&&e!==WM&&e!==HM&&e!==JM&&e!==t5}function db(e){return!sa(e)&&e!==Wl}function Li(e,t){var r,n=e.charCodeAt(t);return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1))>=56320&&r<=57343?1024*(n-55296)+r-56320+65536:n}function ep(e){return/^\n* /.test(e)}C(lb,"State"),C(Sd,"indentString"),C(Hl,"generateNextLine"),C(cb,"testImplicitResolving"),C(sa,"isWhitespace"),C(eo,"isPrintable"),C(Td,"isNsCharOrWhitespace"),C($d,"isPlainSafe"),C(hb,"isPlainSafeFirst"),C(db,"isPlainSafeLast"),C(Li,"codePointAt"),C(ep,"needIndentIndicator");var ub=1,Md=2,pb=3,gb=4,Ti=5;function fb(e,t,r,n,s,i,o,a){var h,l=0,c=null,u=!1,p=!1,g=n!==-1,f=-1,m=hb(Li(e,0))&&db(Li(e,e.length-1));if(t||o)for(h=0;h<e.length;l>=65536?h+=2:h++){if(!eo(l=Li(e,h)))return Ti;m=m&&$d(l,c,a),c=l}else{for(h=0;h<e.length;l>=65536?h+=2:h++){if((l=Li(e,h))===ra)u=!0,g&&(p=p||h-f-1>n&&e[f+1]!==" ",f=h);else if(!eo(l))return Ti;m=m&&$d(l,c,a),c=l}p=p||g&&h-f-1>n&&e[f+1]!==" "}return u||p?r>9&&ep(e)?Ti:o?i===na?Ti:Md:p?gb:pb:!m||o||s(e)?i===na?Ti:Md:ub}function mb(e,t,r,n,s){e.dump=function(){if(t.length===0)return e.quotingType===na?'""':"''";if(!e.noCompatMode&&(n5.indexOf(t)!==-1||s5.test(t)))return e.quotingType===na?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),a=n||e.flowLevel>-1&&r>=e.flowLevel;function h(l){return cb(e,l)}switch(C(h,"testAmbiguity"),fb(t,a,e.indent,o,h,e.quotingType,e.forceQuotes&&!n,s)){case ub:return t;case Md:return"'"+t.replace(/'/g,"''")+"'";case pb:return"|"+Ad(t,e.indent)+Ed(Sd(t,i));case gb:return">"+Ad(t,e.indent)+Ed(Sd(yb(t,o),i));case Ti:return'"'+vb(t)+'"';default:throw new Xr("impossible error: invalid scalar style")}}()}function Ad(e,t){var r=ep(e)?String(t):"",n=e[e.length-1]===`
`;return r+(n&&(e[e.length-2]===`
`||e===`
`)?"+":n?"":"-")+`
`}function Ed(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function yb(e,t){for(var r,n,s,i=/(\n+)([^\n]*)/g,o=(r=(r=e.indexOf(`
`))!==-1?r:e.length,i.lastIndex=r,Ld(e.slice(0,r),t)),a=e[0]===`
`||e[0]===" ";s=i.exec(e);){var h=s[1],l=s[2];n=l[0]===" ",o+=h+(a||n||l===""?"":`
`)+Ld(l,t),a=n}return o}function Ld(e,t){if(e===""||e[0]===" ")return e;for(var r,n,s=/ [^ ]/g,i=0,o=0,a=0,h="";r=s.exec(e);)(a=r.index)-i>t&&(n=o>i?o:a,h+=`
`+e.slice(i,n),i=n+1),o=a;return h+=`
`,e.length-i>t&&o>i?h+=e.slice(i,o)+`
`+e.slice(o+1):h+=e.slice(i),h.slice(1)}function vb(e){for(var t,r="",n=0,s=0;s<e.length;n>=65536?s+=2:s++)n=Li(e,s),!(t=r5[n])&&eo(n)?(r+=e[s],n>=65536&&(r+=e[s+1])):r+=t||ab(n);return r}function bb(e,t,r){var n,s,i,o="",a=e.tag;for(n=0,s=r.length;n<s;n+=1)i=r[n],e.replacer&&(i=e.replacer.call(r,String(n),i)),(Pn(e,t,i,!1,!1)||i===void 0&&Pn(e,t,null,!1,!1))&&(o!==""&&(o+=","+(e.condenseFlow?"":" ")),o+=e.dump);e.tag=a,e.dump="["+o+"]"}function Bd(e,t,r,n){var s,i,o,a="",h=e.tag;for(s=0,i=r.length;s<i;s+=1)o=r[s],e.replacer&&(o=e.replacer.call(r,String(s),o)),(Pn(e,t+1,o,!0,!0,!1,!0)||o===void 0&&Pn(e,t+1,null,!0,!0,!1,!0))&&(n&&a===""||(a+=Hl(e,t)),e.dump&&ra===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=h,e.dump=a||"[]"}function xb(e,t,r){var n,s,i,o,a,h="",l=e.tag,c=Object.keys(r);for(n=0,s=c.length;n<s;n+=1)a="",h!==""&&(a+=", "),e.condenseFlow&&(a+='"'),o=r[i=c[n]],e.replacer&&(o=e.replacer.call(r,i,o)),Pn(e,t,i,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Pn(e,t,o,!1,!1)&&(h+=a+=e.dump));e.tag=l,e.dump="{"+h+"}"}function kb(e,t,r,n){var s,i,o,a,h,l,c="",u=e.tag,p=Object.keys(r);if(e.sortKeys===!0)p.sort();else if(typeof e.sortKeys=="function")p.sort(e.sortKeys);else if(e.sortKeys)throw new Xr("sortKeys must be a boolean or a function");for(s=0,i=p.length;s<i;s+=1)l="",n&&c===""||(l+=Hl(e,t)),a=r[o=p[s]],e.replacer&&(a=e.replacer.call(r,o,a)),Pn(e,t+1,o,!0,!0,!0)&&((h=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024)&&(e.dump&&ra===e.dump.charCodeAt(0)?l+="?":l+="? "),l+=e.dump,h&&(l+=Hl(e,t)),Pn(e,t+1,a,!0,h)&&(e.dump&&ra===e.dump.charCodeAt(0)?l+=":":l+=": ",c+=l+=e.dump));e.tag=u,e.dump=c||"{}"}function Id(e,t,r){var n,s,i,o,a,h;for(i=0,o=(s=r?e.explicitTypes:e.implicitTypes).length;i<o;i+=1)if(((a=s[i]).instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(h=e.styleMap[a.tag]||a.defaultStyle,J1.call(a.represent)==="[object Function]")n=a.represent(t,h);else{if(!tb.call(a.represent,h))throw new Xr("!<"+a.tag+'> tag resolver accepts not "'+h+'" style');n=a.represent[h](t,h)}e.dump=n}return!0}return!1}function Pn(e,t,r,n,s,i,o){e.tag=null,e.dump=r,Id(e,r,!1)||Id(e,r,!0);var a,h=J1.call(e.dump),l=n;n&&(n=e.flowLevel<0||e.flowLevel>t);var c,u,p=h==="[object Object]"||h==="[object Array]";if(p&&(u=(c=e.duplicates.indexOf(r))!==-1),(e.tag!==null&&e.tag!=="?"||u||e.indent!==2&&t>0)&&(s=!1),u&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(p&&u&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),h==="[object Object]")n&&Object.keys(e.dump).length!==0?(kb(e,t,e.dump,s),u&&(e.dump="&ref_"+c+e.dump)):(xb(e,t,e.dump),u&&(e.dump="&ref_"+c+" "+e.dump));else if(h==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?Bd(e,t-1,e.dump,s):Bd(e,t,e.dump,s),u&&(e.dump="&ref_"+c+e.dump)):(bb(e,t,e.dump),u&&(e.dump="&ref_"+c+" "+e.dump));else{if(h!=="[object String]"){if(h==="[object Undefined]"||e.skipInvalid)return!1;throw new Xr("unacceptable kind of an object to dump "+h)}e.tag!=="?"&&mb(e,e.dump,t,i,l)}e.tag!==null&&e.tag!=="?"&&(a=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),a=e.tag[0]==="!"?"!"+a:a.slice(0,18)==="tag:yaml.org,2002:"?"!!"+a.slice(18):"!<"+a+">",e.dump=a+" "+e.dump)}return!0}function Tf(e,t){var r,n,s=[],i=[];for(Vl(e,s,i),r=0,n=i.length;r<n;r+=1)t.duplicates.push(s[i[r]]);t.usedDuplicates=new Array(n)}function Vl(e,t,r){var n,s,i;if(e!==null&&typeof e=="object")if((s=t.indexOf(e))!==-1)r.indexOf(s)===-1&&r.push(s);else if(t.push(e),Array.isArray(e))for(s=0,i=e.length;s<i;s+=1)Vl(e[s],t,r);else for(s=0,i=(n=Object.keys(e)).length;s<i;s+=1)Vl(e[n[s]],t,r)}C(fb,"chooseScalarStyle"),C(mb,"writeScalar"),C(Ad,"blockHeader"),C(Ed,"dropEndingNewline"),C(yb,"foldString"),C(Ld,"foldLine"),C(vb,"escapeString"),C(bb,"writeFlowSequence"),C(Bd,"writeBlockSequence"),C(xb,"writeFlowMapping"),C(kb,"writeBlockMapping"),C(Id,"detectType"),C(Pn,"writeNode"),C(Tf,"getDuplicateReferences"),C(Vl,"inspectNode"),C(function(e,t){var r=new lb(t=t||{});r.noRefs||Tf(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Pn(r,0,n,!0,!0)?r.dump+`
`:""},"dump$1"),C(function(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}},"renamed");var o5=p1,a5=NM.load,$r={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},$f={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function Io(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=Ge(e),t=Ge(t);const[r,n]=[e.x,e.y],[s,i]=[t.x,t.y],o=s-r,a=i-n;return{angle:Math.atan(a/o),deltaX:o,deltaY:a}}C(Io,"calculateDeltaAndAngle");var Mf,Af,Ge=C(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),l5=C(e=>({x:C(function(t,r,n){let s=0;const i=Ge(n[0]).x<Ge(n[n.length-1]).x?"left":"right";if(r===0&&Object.hasOwn($r,e.arrowTypeStart)){const{angle:p,deltaX:g}=Io(n[0],n[1]);s=$r[e.arrowTypeStart]*Math.cos(p)*(g>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn($r,e.arrowTypeEnd)){const{angle:p,deltaX:g}=Io(n[n.length-1],n[n.length-2]);s=$r[e.arrowTypeEnd]*Math.cos(p)*(g>=0?1:-1)}const o=Math.abs(Ge(t).x-Ge(n[n.length-1]).x),a=Math.abs(Ge(t).y-Ge(n[n.length-1]).y),h=Math.abs(Ge(t).x-Ge(n[0]).x),l=Math.abs(Ge(t).y-Ge(n[0]).y),c=$r[e.arrowTypeStart],u=$r[e.arrowTypeEnd];if(o<u&&o>0&&a<u){let p=u+1-o;p*=i==="right"?-1:1,s-=p}if(h<c&&h>0&&l<c){let p=c+1-h;p*=i==="right"?-1:1,s+=p}return Ge(t).x+s},"x"),y:C(function(t,r,n){let s=0;const i=Ge(n[0]).y<Ge(n[n.length-1]).y?"down":"up";if(r===0&&Object.hasOwn($r,e.arrowTypeStart)){const{angle:p,deltaY:g}=Io(n[0],n[1]);s=$r[e.arrowTypeStart]*Math.abs(Math.sin(p))*(g>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn($r,e.arrowTypeEnd)){const{angle:p,deltaY:g}=Io(n[n.length-1],n[n.length-2]);s=$r[e.arrowTypeEnd]*Math.abs(Math.sin(p))*(g>=0?1:-1)}const o=Math.abs(Ge(t).y-Ge(n[n.length-1]).y),a=Math.abs(Ge(t).x-Ge(n[n.length-1]).x),h=Math.abs(Ge(t).y-Ge(n[0]).y),l=Math.abs(Ge(t).x-Ge(n[0]).x),c=$r[e.arrowTypeStart],u=$r[e.arrowTypeEnd];if(o<u&&o>0&&a<u){let p=u+1-o;p*=i==="up"?-1:1,s-=p}if(h<c&&h>0&&l<c){let p=c+1-h;p*=i==="up"?-1:1,s+=p}return Ge(t).y+s},"y")}),"getLineFunctionsWithOffset"),rp=C(({flowchart:e})=>{const t=e?.subGraphTitleMargin?.top??0,r=e?.subGraphTitleMargin?.bottom??0;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:t+r}},"getSubGraphTitleMargins"),c5=C(e=>{const{handDrawnSeed:t}=Oe();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),ao=C(e=>{const t=h5([...e.cssCompiledStyles||[],...e.cssStyles||[],...e.labelStyle||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),h5=C(e=>{const t=new Map;return e.forEach(r=>{const[n,s]=r.split(":");t.set(n.trim(),s?.trim())}),t},"styles2Map"),_b=C(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),Nt=C(e=>{const{stylesArray:t}=ao(e),r=[],n=[],s=[],i=[];return t.forEach(o=>{const a=o[0];_b(a)?r.push(o.join(":")+" !important"):(n.push(o.join(":")+" !important"),a.includes("stroke")&&s.push(o.join(":")+" !important"),a==="fill"&&i.push(o.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:n.join(";"),stylesArray:t,borderStyles:s,backgroundStyles:i}},"styles2String"),Pt=C((e,t)=>{const{themeVariables:r,handDrawnSeed:n}=Oe(),{nodeBorder:s,mainBkg:i}=r,{stylesMap:o}=ao(e);return Object.assign({roughness:.7,fill:o.get("fill")||i,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||s,seed:n,strokeWidth:o.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:d5(o.get("stroke-dasharray"))},t)},"userNodeOverrides"),d5=C(e=>{if(!e)return[0,0];const t=e.trim().split(/\s+/).map(Number);if(t.length===1){const r=isNaN(t[0])?0:t[0];return[r,r]}return[isNaN(t[0])?0:t[0],isNaN(t[1])?0:t[1]]},"getStrokeDashArray"),_o={},mr={},u5=function(){if(Af)return _o;Af=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.sanitizeUrl=void 0;var e=(Mf||(Mf=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.BLANK_URL=mr.relativeFirstCharacters=mr.whitespaceEscapeCharsRegex=mr.urlSchemeRegex=mr.ctrlCharactersRegex=mr.htmlCtrlEntityRegex=mr.htmlEntitiesRegex=mr.invalidProtocolRegex=void 0,mr.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,mr.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,mr.htmlCtrlEntityRegex=/&(newline|tab);/gi,mr.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,mr.urlSchemeRegex=/^.+(:|&colon;)/gim,mr.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,mr.relativeFirstCharacters=[".","/"],mr.BLANK_URL="about:blank"),mr);function t(n){return n.replace(e.ctrlCharactersRegex,"").replace(e.htmlEntitiesRegex,function(s,i){return String.fromCharCode(i)})}function r(n){try{return decodeURIComponent(n)}catch{return n}}return _o.sanitizeUrl=function(n){if(!n)return e.BLANK_URL;var s,i=r(n.trim());do s=(i=r(i=t(i).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim())).match(e.ctrlCharactersRegex)||i.match(e.htmlEntitiesRegex)||i.match(e.htmlCtrlEntityRegex)||i.match(e.whitespaceEscapeCharsRegex);while(s&&s.length>0);var o=i;if(!o)return e.BLANK_URL;if(function(p){return e.relativeFirstCharacters.indexOf(p[0])>-1}(o))return o;var a=o.trimStart(),h=a.match(e.urlSchemeRegex);if(!h)return o;var l=h[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(l))return e.BLANK_URL;var c=a.replace(/\\/g,"/");if(l==="mailto:"||l.includes("://"))return c;if(l==="http:"||l==="https:"){if(!function(p){return URL.canParse(p)}(c))return e.BLANK_URL;var u=new URL(c);return u.protocol=u.protocol.toLowerCase(),u.hostname=u.hostname.toLowerCase(),u.toString()}return c},_o}(),TP="​",p5={curveBasis:yd,curveBasisClosed:function(e){return new Sv(e)},curveBasisOpen:function(e){return new Tv(e)},curveBumpX:wv,curveBumpY:Cv,curveBundle:lM,curveCardinalClosed:cM,curveCardinalOpen:hM,curveCardinal:Mv,curveCatmullRomClosed:dM,curveCatmullRomOpen:uM,curveCatmullRom:Ev,curveLinear:zl,curveLinearClosed:function(e){return new Iv(e)},curveMonotoneX:Ov,curveMonotoneY:Rv,curveNatural:Nv,curveStep:zv,curveStepAfter:qv,curveStepBefore:Uv},g5=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,f5=C(function(e,t){const r=wb(e,/(?:init\b)|(?:initialize\b)/);let n={};if(Array.isArray(r)){const o=r.map(a=>a.args);Ll(o),n=hr(n,[...o])}else n=r.args;if(!n)return;let s=Du(e,t);const i="config";return n[i]!==void 0&&(s==="flowchart-v2"&&(s="flowchart"),n[s]=n[i],delete n[i]),n},"detectInit"),wb=C(function(e,t=null){try{const r=new RegExp(`[%]{2}(?![{]${g5.source})(?=[}][%]{2}).*
`,"ig");let n;e=e.trim().replace(r,"").replace(/'/gm,'"'),ft.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);const s=[];for(;(n=Wo.exec(e))!==null;)if(n.index===Wo.lastIndex&&Wo.lastIndex++,n&&!t||t&&n[1]?.match(t)||t&&n[2]?.match(t)){const i=n[1]?n[1]:n[2],o=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;s.push({type:i,args:o})}return s.length===0?{type:e,args:null}:s.length===1?s[0]:s}catch(r){return ft.error(`ERROR: ${r.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),m5=C(function(e){return e.replace(Wo,"")},"removeDirectives"),y5=C(function(e,t){for(const[r,n]of t.entries())if(n.match(e))return r;return-1},"isSubstringInArray");function np(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return p5[r]??t}function Cb(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?u5.sanitizeUrl(r):r}C(np,"interpolateToCurve"),C(Cb,"formatUrl");var v5=C((e,...t)=>{const r=e.split("."),n=r.length-1,s=r[n];let i=window;for(let o=0;o<n;o++)if(i=i[r[o]],!i)return void ft.error(`Function name: ${e} not found in window`);i[s](...t)},"runFunc");function sp(e,t){return e&&t?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0}function Sb(e){let t,r=0;return e.forEach(n=>{r+=sp(n,t),t=n}),ip(e,r/2)}function Tb(e){return e.length===1?e[0]:Sb(e)}C(sp,"distance"),C(Sb,"traverseEdge"),C(Tb,"calcLabelPosition");var Ef=C((e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},"roundNumber"),ip=C((e,t)=>{let r,n=t;for(const s of e){if(r){const i=sp(s,r);if(i===0)return r;if(i<n)n-=i;else{const o=n/i;if(o<=0)return r;if(o>=1)return{x:s.x,y:s.y};if(o>0&&o<1)return{x:Ef((1-o)*r.x+o*s.x,5),y:Ef((1-o)*r.y+o*s.y,5)}}}r=s}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),b5=C((e,t,r)=>{ft.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const n=ip(t,25),s=e?10:5,i=Math.atan2(t[0].y-n.y,t[0].x-n.x),o={x:0,y:0};return o.x=Math.sin(i)*s+(t[0].x+n.x)/2,o.y=-Math.cos(i)*s+(t[0].y+n.y)/2,o},"calcCardinalityPosition");function $b(e,t,r){const n=structuredClone(r);ft.info("our points",n),t!=="start_left"&&t!=="start_right"&&n.reverse();const s=ip(n,25+e),i=10+.5*e,o=Math.atan2(n[0].y-s.y,n[0].x-s.x),a={x:0,y:0};return t==="start_left"?(a.x=Math.sin(o+Math.PI)*i+(n[0].x+s.x)/2,a.y=-Math.cos(o+Math.PI)*i+(n[0].y+s.y)/2):t==="end_right"?(a.x=Math.sin(o-Math.PI)*i+(n[0].x+s.x)/2-5,a.y=-Math.cos(o-Math.PI)*i+(n[0].y+s.y)/2-5):t==="end_left"?(a.x=Math.sin(o)*i+(n[0].x+s.x)/2-5,a.y=-Math.cos(o)*i+(n[0].y+s.y)/2-5):(a.x=Math.sin(o)*i+(n[0].x+s.x)/2,a.y=-Math.cos(o)*i+(n[0].y+s.y)/2),a}function Mb(e){let t="",r="";for(const n of e)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":t=t+n+";");return{style:t,labelStyle:r}}C($b,"calcTerminalLabelPosition"),C(Mb,"getStylesFromArray");var Lf=0,x5=C(()=>(Lf++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Lf),"generateId");function Ab(e){let t="";const r="0123456789abcdef";for(let n=0;n<e;n++)t+=r.charAt(Math.floor(16*Math.random()));return t}C(Ab,"makeRandomHex");var k5=C(e=>Ab(e.length),"random"),_5=C(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),w5=C(function(e,t){const r=t.text.replace(oo.lineBreakRegex," "),[,n]=Tc(t.fontSize),s=e.append("text");s.attr("x",t.x),s.attr("y",t.y),s.style("text-anchor",t.anchor),s.style("font-family",t.fontFamily),s.style("font-size",n),s.style("font-weight",t.fontWeight),s.attr("fill",t.fill),t.class!==void 0&&s.attr("class",t.class);const i=s.append("tspan");return i.attr("x",t.x+2*t.textMargin),i.attr("fill",t.fill),i.text(r),s},"drawSimpleText"),C5=ya((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),oo.lineBreakRegex.test(e)))return e;const n=e.split(" ").filter(Boolean),s=[];let i="";return n.forEach((o,a)=>{const h=ns(`${o} `,r),l=ns(i,r);if(h>t){const{hyphenatedStrings:c,remainingWord:u}=S5(o,t,"-",r);s.push(i,...c),i=u}else l+h>=t?(s.push(i),i=o):i=[i,o].filter(Boolean).join(" ");a+1===n.length&&s.push(i)}),s.filter(o=>o!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),S5=ya((e,t,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);const s=[...e],i=[];let o="";return s.forEach((a,h)=>{const l=`${o}${a}`;if(ns(l,n)>=t){const c=h+1,u=s.length===c,p=`${l}${r}`;i.push(u?l:p),o=""}else o=l}),{hyphenatedStrings:i,remainingWord:o}},(e,t,r="-",n)=>`${e}${t}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`);function Eb(e,t){return op(e,t).height}function ns(e,t){return op(e,t).width}C(Eb,"calculateTextHeight"),C(ns,"calculateTextWidth");var Na,op=ya((e,t)=>{const{fontSize:r=12,fontFamily:n="Arial",fontWeight:s=400}=t;if(!e)return{width:0,height:0};const[,i]=Tc(r),o=["sans-serif",n],a=e.split(oo.lineBreakRegex),h=[],l=we("body");if(!l.remove)return{width:0,height:0,lineHeight:0};const c=l.append("svg");for(const u of o){let p=0;const g={width:0,height:0,lineHeight:0};for(const f of a){const m=_5();m.text=f||"​";const y=w5(c,m).style("font-size",i).style("font-weight",s).style("font-family",u),v=(y._groups||y)[0][0].getBBox();if(v.width===0&&v.height===0)throw new Error("svg element not in render tree");g.width=Math.round(Math.max(g.width,v.width)),p=Math.round(v.height),g.height+=p,g.lineHeight=Math.round(Math.max(g.lineHeight,p))}h.push(g)}return c.remove(),h[isNaN(h[1].height)||isNaN(h[1].width)||isNaN(h[1].lineHeight)||h[0].height>h[1].height&&h[0].width>h[1].width&&h[0].lineHeight>h[1].lineHeight?0:1]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),Gi,T5=(Gi=class{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}},C(Gi,"InitIDGenerator"),Gi),$5=C(function(e){return Na=Na||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Na.innerHTML=e,unescape(Na.textContent)},"entityDecode");function ap(e){return"str"in e}C(ap,"isDetailedError");var M5=C((e,t,r,n)=>{if(!n)return;const s=e.node()?.getBBox();s&&e.append("text").text(n).attr("text-anchor","middle").attr("x",s.x+s.width/2).attr("y",-r).attr("class",t)},"insertTitle"),Tc=C(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function lp(e,t){return sS({},e,t)}C(lp,"cleanAndMerge");var Cn={assignWithDepth:hr,wrapLabel:C5,calculateTextHeight:Eb,calculateTextWidth:ns,calculateTextDimensions:op,cleanAndMerge:lp,detectInit:f5,detectDirective:wb,isSubstringInArray:y5,interpolateToCurve:np,calcLabelPosition:Tb,calcCardinalityPosition:b5,calcTerminalLabelPosition:$b,formatUrl:Cb,getStylesFromArray:Mb,generateId:x5,random:k5,runFunc:v5,entityDecode:$5,insertTitle:M5,isLabelCoordinateInPath:Lb,parseFontSize:Tc,InitIDGenerator:T5},A5=C(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const n=r.substring(1,r.length-1);return/^\+?\d+$/.test(n)?"ﬂ°°"+n+"¶ß":"ﬂ°"+n+"¶ß"}),t},"encodeEntities"),pi=C(function(e){return e.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),$P=C((e,t,{counter:r=0,prefix:n,suffix:s},i)=>i||`${n?`${n}_`:""}${e}_${t}_${r}${s?`_${s}`:""}`,"getEdgeId");function Lr(e){return e??null}function Lb(e,t){const r=Math.round(e.x),n=Math.round(e.y),s=t.replace(/(\d+\.\d+)/g,i=>Math.round(parseFloat(i)).toString());return s.includes(r.toString())||s.includes(n.toString())}C(Lr,"handleUndefinedAttr"),C(Lb,"isLabelCoordinateInPath");const E5=Object.freeze({left:0,top:0,width:16,height:16}),Gl=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Bb=Object.freeze({...E5,...Gl}),L5=Object.freeze({...Bb,body:"",hidden:!1}),B5=Object.freeze({width:null,height:null}),I5=Object.freeze({...B5,...Gl}),hh=(e,t)=>!!e&&!(!(t&&e.prefix===""||e.prefix)||!e.name);function Bf(e,t){const r=function(n,s){const i={};!n.hFlip!=!s.hFlip&&(i.hFlip=!0),!n.vFlip!=!s.vFlip&&(i.vFlip=!0);const o=((n.rotate||0)+(s.rotate||0))%4;return o&&(i.rotate=o),i}(e,t);for(const n in L5)n in Gl?n in e&&!(n in r)&&(r[n]=Gl[n]):n in t?r[n]=t[n]:n in e&&(r[n]=e[n]);return r}function If(e,t,r){const n=e.icons,s=e.aliases||Object.create(null);let i={};function o(a){i=Bf(n[a]||s[a],i)}return o(t),r.forEach(o),Bf(e,i)}function F5(e,t){if(e.icons[t])return If(e,t,[]);const r=function(n,s){const i=n.icons,o=n.aliases||Object.create(null),a=Object.create(null);return(s||Object.keys(i).concat(Object.keys(o))).forEach(function h(l){if(i[l])return a[l]=[];if(!(l in a)){a[l]=null;const c=o[l]&&o[l].parent,u=c&&h(c);u&&(a[l]=[c].concat(u))}return a[l]}),a}(e,[t])[t];return r?If(e,t,r):null}const D5=/(-?[0-9.]*[0-9]+[0-9.]*)/g,O5=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Ff(e,t,r){if(t===1)return e;if(r=r||100,typeof e=="number")return Math.ceil(e*t*r)/r;if(typeof e!="string")return e;const n=e.split(D5);if(n===null||!n.length)return e;const s=[];let i=n.shift(),o=O5.test(i);for(;;){if(o){const a=parseFloat(i);isNaN(a)?s.push(i):s.push(Math.ceil(a*t*r)/r)}else s.push(i);if(i=n.shift(),i===void 0)return s.join("");o=!o}}const R5=/\sid="(\S+)"/g,P5="IconifyId"+Date.now().toString(16)+(16777216*Math.random()|0).toString(16);let N5=0;function z5(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var gi={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Df(e){gi=e}var Vo={exec:()=>null};function Fe(e,t=""){let r=typeof e=="string"?e:e.source,n={replace:(s,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Rr.caret,"$1"),r=r.replace(s,o),n},getRegex:()=>new RegExp(r,t)};return n}var Rr={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},ka=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,cp=/(?:[*+-]|\d{1,9}[.)])/,Ib=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Fb=Fe(Ib).replace(/bull/g,cp).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),U5=Fe(Ib).replace(/bull/g,cp).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),hp=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,dp=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,q5=Fe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",dp).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),j5=Fe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,cp).getRegex(),$c="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",up=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,W5=Fe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",up).replace("tag",$c).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Of=Fe(hp).replace("hr",ka).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$c).getRegex(),pp={blockquote:Fe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Of).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:q5,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:ka,html:W5,lheading:Fb,list:j5,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:Of,table:Vo,text:/^[^\n]+/},Rf=Fe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ka).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$c).getRegex(),H5={...pp,lheading:U5,table:Rf,paragraph:Fe(hp).replace("hr",ka).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Rf).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$c).getRegex()},V5={...pp,html:Fe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",up).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Vo,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Fe(hp).replace("hr",ka).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Fb).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Db=/^( {2,}|\\)\n(?!\s*$)/,Mc=/[\p{P}\p{S}]/u,gp=/[\s\p{P}\p{S}]/u,Ob=/[^\s\p{P}\p{S}]/u,G5=Fe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,gp).getRegex(),Rb=/(?!~)[\p{P}\p{S}]/u,Pb=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Y5=Fe(Pb,"u").replace(/punct/g,Mc).getRegex(),Z5=Fe(Pb,"u").replace(/punct/g,Rb).getRegex(),Nb="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",X5=Fe(Nb,"gu").replace(/notPunctSpace/g,Ob).replace(/punctSpace/g,gp).replace(/punct/g,Mc).getRegex(),K5=Fe(Nb,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,Rb).getRegex(),Q5=Fe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Ob).replace(/punctSpace/g,gp).replace(/punct/g,Mc).getRegex(),J5=Fe(/\\(punct)/,"gu").replace(/punct/g,Mc).getRegex(),tA=Fe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),eA=Fe(up).replace("(?:-->|$)","-->").getRegex(),rA=Fe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",eA).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Yl=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,nA=Fe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Yl).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Pf=Fe(/^!?\[(label)\]\[(ref)\]/).replace("label",Yl).replace("ref",dp).getRegex(),Nf=Fe(/^!?\[(ref)\](?:\[\])?/).replace("ref",dp).getRegex(),zf=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,fp={_backpedal:Vo,anyPunctuation:J5,autolink:tA,blockSkip:/\[(?:[^\[\]`]|`[^`]*?`)*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,br:Db,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Vo,emStrongLDelim:Y5,emStrongRDelimAst:X5,emStrongRDelimUnd:Q5,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:nA,nolink:Nf,punctuation:G5,reflink:Pf,reflinkSearch:Fe("reflink|nolink(?!\\()","g").replace("reflink",Pf).replace("nolink",Nf).getRegex(),tag:rA,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Vo},sA={...fp,link:Fe(/^!?\[(label)\]\((.*?)\)/).replace("label",Yl).getRegex(),reflink:Fe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Yl).getRegex()},Fd={...fp,emStrongRDelimAst:K5,emStrongLDelim:Z5,url:Fe(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",zf).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Fe(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",zf).getRegex()},iA={...Fd,br:Fe(Db).replace("{2,}","*").getRegex(),text:Fe(Fd.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},za={normal:pp,gfm:H5,pedantic:V5},wo={normal:fp,gfm:Fd,breaks:iA,pedantic:sA},oA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Uf=e=>oA[e];function En(e,t){if(t){if(Rr.escapeTest.test(e))return e.replace(Rr.escapeReplace,Uf)}else if(Rr.escapeTestNoEncode.test(e))return e.replace(Rr.escapeReplaceNoEncode,Uf);return e}function qf(e){try{e=encodeURI(e).replace(Rr.percentDecode,"%")}catch{return null}return e}function jf(e,t){let r=e.replace(Rr.findPipe,(i,o,a)=>{let h=!1,l=o;for(;--l>=0&&a[l]==="\\";)h=!h;return h?"|":" |"}),n=r.split(Rr.splitPipe),s=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(Rr.slashPipe,"|");return n}function Co(e,t,r){let n=e.length;if(n===0)return"";let s=0;for(;s<n&&e.charAt(n-s-1)===t;)s++;return e.slice(0,n-s)}function Wf(e,t,r,n,s){let i=t.href,o=t.title||null,a=e[1].replace(s.other.outputLinkReplace,"$1");n.state.inLink=!0;let h={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:i,title:o,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,h}var Zl=class{options;rules;lexer;constructor(e){this.options=e||gi}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Co(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],n=function(s,i,o){let a=s.match(o.other.indentCodeCompensation);if(a===null)return i;let h=a[1];return i.split(`
`).map(l=>{let c=l.match(o.other.beginningSpace);if(c===null)return l;let[u]=c;return u.length>=h.length?l.slice(h.length):l}).join(`
`)}(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){let n=Co(r,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(r=n.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Co(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=Co(t[0],`
`).split(`
`),n="",s="",i=[];for(;r.length>0;){let o,a=!1,h=[];for(o=0;o<r.length;o++)if(this.rules.other.blockquoteStart.test(r[o]))h.push(r[o]),a=!0;else{if(a)break;h.push(r[o])}r=r.slice(o);let l=h.join(`
`),c=l.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${l}`:l,s=s?`${s}
${c}`:c;let u=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,i,!0),this.lexer.state.top=u,r.length===0)break;let p=i.at(-1);if(p?.type==="code")break;if(p?.type==="blockquote"){let g=p,f=g.raw+`
`+r.join(`
`),m=this.blockquote(f);i[i.length-1]=m,n=n.substring(0,n.length-g.raw.length)+m.raw,s=s.substring(0,s.length-g.text.length)+m.text;break}if(p?.type==="list"){let g=p,f=g.raw+`
`+r.join(`
`),m=this.list(f);i[i.length-1]=m,n=n.substring(0,n.length-p.raw.length)+m.raw,s=s.substring(0,s.length-g.raw.length)+m.raw,r=f.substring(i.at(-1).raw.length).split(`
`)}}return{type:"blockquote",raw:n,tokens:i,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),n=r.length>1,s={type:"list",raw:"",ordered:n,start:n?+r.slice(0,-1):"",loose:!1,items:[]};r=n?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=n?r:"[*+-]");let i=this.rules.other.listItemRegex(r),o=!1;for(;e;){let h=!1,l="",c="";if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;l=t[0],e=e.substring(l.length);let u=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,v=>" ".repeat(3*v.length)),p=e.split(`
`,1)[0],g=!u.trim(),f=0;if(this.options.pedantic?(f=2,c=u.trimStart()):g?f=t[1].length+1:(f=t[2].search(this.rules.other.nonSpaceChar),f=f>4?1:f,c=u.slice(f),f+=t[1].length),g&&this.rules.other.blankLine.test(p)&&(l+=p+`
`,e=e.substring(p.length+1),h=!0),!h){let v=this.rules.other.nextBulletRegex(f),x=this.rules.other.hrRegex(f),k=this.rules.other.fencesBeginRegex(f),_=this.rules.other.headingBeginRegex(f),w=this.rules.other.htmlBeginRegex(f);for(;e;){let S,T=e.split(`
`,1)[0];if(p=T,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),S=p):S=p.replace(this.rules.other.tabCharGlobal,"    "),k.test(p)||_.test(p)||w.test(p)||v.test(p)||x.test(p))break;if(S.search(this.rules.other.nonSpaceChar)>=f||!p.trim())c+=`
`+S.slice(f);else{if(g||u.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||k.test(u)||_.test(u)||x.test(u))break;c+=`
`+p}!g&&!p.trim()&&(g=!0),l+=T+`
`,e=e.substring(T.length+1),u=S.slice(f)}}s.loose||(o?s.loose=!0:this.rules.other.doubleBlankLine.test(l)&&(o=!0));let m,y=null;this.options.gfm&&(y=this.rules.other.listIsTask.exec(c),y&&(m=y[0]!=="[ ] ",c=c.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:l,task:!!y,checked:m,loose:!1,text:c,tokens:[]}),s.raw+=l}let a=s.items.at(-1);if(!a)return;a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd(),s.raw=s.raw.trimEnd();for(let h=0;h<s.items.length;h++)if(this.lexer.state.top=!1,s.items[h].tokens=this.lexer.blockTokens(s.items[h].text,[]),!s.loose){let l=s.items[h].tokens.filter(u=>u.type==="space"),c=l.length>0&&l.some(u=>this.rules.other.anyLine.test(u.raw));s.loose=c}if(s.loose)for(let h=0;h<s.items.length;h++)s.items[h].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:n,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let r=jf(t[1]),n=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===n.length){for(let o of n)this.rules.other.tableAlignRight.test(o)?i.align.push("right"):this.rules.other.tableAlignCenter.test(o)?i.align.push("center"):this.rules.other.tableAlignLeft.test(o)?i.align.push("left"):i.align.push(null);for(let o=0;o<r.length;o++)i.header.push({text:r[o],tokens:this.lexer.inline(r[o]),header:!0,align:i.align[o]});for(let o of s)i.rows.push(jf(o,i.header.length).map((a,h)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:i.align[h]})));return i}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let i=Co(r.slice(0,-1),"\\");if((r.length-i.length)%2==0)return}else{let i=function(o,a){if(o.indexOf(a[1])===-1)return-1;let h=0;for(let l=0;l<o.length;l++)if(o[l]==="\\")l++;else if(o[l]===a[0])h++;else if(o[l]===a[1]&&(h--,h<0))return l;return h>0?-2:-1}(t[2],"()");if(i===-2)return;if(i>-1){let o=(t[0].indexOf("!")===0?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let n=t[2],s="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(n);i&&(n=i[1],s=i[3])}else s=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?n.slice(1):n.slice(1,-1)),Wf(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let n=t[(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!n){let s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return Wf(r,n,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!(!n||n[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!n[1]&&!n[2]||!r||this.rules.inline.punctuation.exec(r))){let s,i,o=[...n[0]].length-1,a=o,h=0,l=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+o);(n=l.exec(t))!=null;){if(s=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!s)continue;if(i=[...s].length,n[3]||n[4]){a+=i;continue}if((n[5]||n[6])&&o%3&&!((o+i)%3)){h+=i;continue}if(a-=i,a>0)continue;i=Math.min(i,i+a+h);let c=[...n[0]][0].length,u=e.slice(0,o+n.index+c+i);if(Math.min(o,i)%2){let g=u.slice(1,-1);return{type:"em",raw:u,text:g,tokens:this.lexer.inlineTokens(g)}}let p=u.slice(2,-2);return{type:"strong",raw:u,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return n&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,n;return t[2]==="@"?(r=t[1],n="mailto:"+r):(r=t[1],n=r),{type:"link",raw:t[0],text:r,href:n,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,n;if(t[2]==="@")r=t[0],n="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=t[0],n=t[1]==="www."?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:r,href:n,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}},kn=class Dd{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||gi,this.options.tokenizer=this.options.tokenizer||new Zl,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Rr,block:za.normal,inline:wo.normal};this.options.pedantic?(r.block=za.pedantic,r.inline=wo.pedantic):this.options.gfm&&(r.block=za.gfm,this.options.breaks?r.inline=wo.breaks:r.inline=wo.gfm),this.tokenizer.rules=r}static get rules(){return{block:za,inline:wo}}static lex(t,r){return new Dd(r).lex(t)}static lexInline(t,r){return new Dd(r).inlineTokens(t)}lex(t){t=t.replace(Rr.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],n=!1){for(this.options.pedantic&&(t=t.replace(Rr.tabCharGlobal,"    ").replace(Rr.spaceLine,""));t;){let s;if(this.options.extensions?.block?.some(o=>!!(s=o.call({lexer:this},t,r))&&(t=t.substring(s.raw.length),r.push(s),!0)))continue;if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length);let o=r.at(-1);s.raw.length===1&&o!==void 0?o.raw+=`
`:r.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length);let o=r.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.text,this.inlineQueue.at(-1).src=o.text):r.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length);let o=r.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title},r.push(s));continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),r.push(s);continue}let i=t;if(this.options.extensions?.startBlock){let o,a=1/0,h=t.slice(1);this.options.extensions.startBlock.forEach(l=>{o=l.call({lexer:this},h),typeof o=="number"&&o>=0&&(a=Math.min(a,o))}),a<1/0&&a>=0&&(i=t.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(i))){let o=r.at(-1);n&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):r.push(s),n=i.length!==t.length,t=t.substring(s.raw.length)}else if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length);let o=r.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):r.push(s)}else if(t){let o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}throw new Error(o)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let n=t,s=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)a.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,s.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(s=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let i=!1,o="";for(;t;){let a;if(i||(o=""),i=!1,this.options.extensions?.inline?.some(l=>!!(a=l.call({lexer:this},t,r))&&(t=t.substring(a.raw.length),r.push(a),!0)))continue;if(a=this.tokenizer.escape(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.tag(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.link(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(a.raw.length);let l=r.at(-1);a.type==="text"&&l?.type==="text"?(l.raw+=a.raw,l.text+=a.text):r.push(a);continue}if(a=this.tokenizer.emStrong(t,n,o)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.codespan(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.br(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.del(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.autolink(t)){t=t.substring(a.raw.length),r.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(t))){t=t.substring(a.raw.length),r.push(a);continue}let h=t;if(this.options.extensions?.startInline){let l,c=1/0,u=t.slice(1);this.options.extensions.startInline.forEach(p=>{l=p.call({lexer:this},u),typeof l=="number"&&l>=0&&(c=Math.min(c,l))}),c<1/0&&c>=0&&(h=t.substring(0,c+1))}if(a=this.tokenizer.inlineText(h)){t=t.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(o=a.raw.slice(-1)),i=!0;let l=r.at(-1);l?.type==="text"?(l.raw+=a.raw,l.text+=a.text):r.push(a)}else if(t){let l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}throw new Error(l)}}return r}},Xl=class{options;parser;constructor(e){this.options=e||gi}space(e){return""}code({text:e,lang:t,escaped:r}){let n=(t||"").match(Rr.notSpaceStart)?.[0],s=e.replace(Rr.endingNewline,"")+`
`;return n?'<pre><code class="language-'+En(n)+'">'+(r?s:En(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:En(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,r=e.start,n="";for(let i=0;i<e.items.length;i++){let o=e.items[i];n+=this.listitem(o)}let s=t?"ol":"ul";return"<"+s+(t&&r!==1?' start="'+r+'"':"")+`>
`+n+"</"+s+`>
`}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+En(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);t+=this.tablerow({text:r});let n="";for(let s=0;s<e.rows.length;s++){let i=e.rows[s];r="";for(let o=0;o<i.length;o++)r+=this.tablecell(i[o]);n+=this.tablerow({text:r})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${En(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let n=this.parser.parseInline(r),s=qf(e);if(s===null)return n;let i='<a href="'+(e=s)+'"';return t&&(i+=' title="'+En(t)+'"'),i+=">"+n+"</a>",i}image({href:e,title:t,text:r,tokens:n}){n&&(r=this.parser.parseInline(n,this.parser.textRenderer));let s=qf(e);if(s===null)return En(r);let i=`<img src="${e=s}" alt="${r}"`;return t&&(i+=` title="${En(t)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:En(e.text)}},mp=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},_n=class Od{options;renderer;textRenderer;constructor(t){this.options=t||gi,this.options.renderer=this.options.renderer||new Xl,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new mp}static parse(t,r){return new Od(r).parse(t)}static parseInline(t,r){return new Od(r).parseInline(t)}parse(t,r=!0){let n="";for(let s=0;s<t.length;s++){let i=t[s];if(this.options.extensions?.renderers?.[i.type]){let a=i,h=this.options.extensions.renderers[a.type].call({parser:this},a);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){n+=h||"";continue}}let o=i;switch(o.type){case"space":n+=this.renderer.space(o);continue;case"hr":n+=this.renderer.hr(o);continue;case"heading":n+=this.renderer.heading(o);continue;case"code":n+=this.renderer.code(o);continue;case"table":n+=this.renderer.table(o);continue;case"blockquote":n+=this.renderer.blockquote(o);continue;case"list":n+=this.renderer.list(o);continue;case"html":n+=this.renderer.html(o);continue;case"def":n+=this.renderer.def(o);continue;case"paragraph":n+=this.renderer.paragraph(o);continue;case"text":{let a=o,h=this.renderer.text(a);for(;s+1<t.length&&t[s+1].type==="text";)a=t[++s],h+=`
`+this.renderer.text(a);n+=r?this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):h;continue}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}parseInline(t,r=this.renderer){let n="";for(let s=0;s<t.length;s++){let i=t[s];if(this.options.extensions?.renderers?.[i.type]){let a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=a||"";continue}}let o=i;switch(o.type){case"escape":case"text":n+=r.text(o);break;case"html":n+=r.html(o);break;case"link":n+=r.link(o);break;case"image":n+=r.image(o);break;case"strong":n+=r.strong(o);break;case"em":n+=r.em(o);break;case"codespan":n+=r.codespan(o);break;case"br":n+=r.br(o);break;case"del":n+=r.del(o);break;default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}},Fo=class{options;block;constructor(e){this.options=e||gi}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?kn.lex:kn.lexInline}provideParser(){return this.block?_n.parse:_n.parseInline}},zs=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=_n;Renderer=Xl;TextRenderer=mp;Lexer=kn;Tokenizer=Zl;Hooks=Fo;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let n of e)switch(r=r.concat(t.call(this,n)),n.type){case"table":{let s=n;for(let i of s.header)r=r.concat(this.walkTokens(i.tokens,t));for(let i of s.rows)for(let o of i)r=r.concat(this.walkTokens(o.tokens,t));break}case"list":{let s=n;r=r.concat(this.walkTokens(s.items,t));break}default:{let s=n;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(i=>{let o=s[i].flat(1/0);r=r.concat(this.walkTokens(o,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let n={...r};if(n.async=this.defaults.async||n.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let i=t.renderers[s.name];t.renderers[s.name]=i?function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=i.apply(this,o)),a}:s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=t[s.level];i?i.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),n.extensions=t),r.renderer){let s=this.defaults.renderer||new Xl(this.defaults);for(let i in r.renderer){if(!(i in s))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let o=i,a=r.renderer[o],h=s[o];s[o]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=h.apply(s,l)),c||""}}n.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new Zl(this.defaults);for(let i in r.tokenizer){if(!(i in s))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let o=i,a=r.tokenizer[o],h=s[o];s[o]=(...l)=>{let c=a.apply(s,l);return c===!1&&(c=h.apply(s,l)),c}}n.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new Fo;for(let i in r.hooks){if(!(i in s))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let o=i,a=r.hooks[o],h=s[o];Fo.passThroughHooks.has(i)?s[o]=l=>{if(this.defaults.async&&Fo.passThroughHooksRespectAsync.has(i))return(async()=>{let u=await a.call(s,l);return h.call(s,u)})();let c=a.call(s,l);return h.call(s,c)}:s[o]=(...l)=>{if(this.defaults.async)return(async()=>{let u=await a.apply(s,l);return u===!1&&(u=await h.apply(s,l)),u})();let c=a.apply(s,l);return c===!1&&(c=h.apply(s,l)),c}}n.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,i=r.walkTokens;n.walkTokens=function(o){let a=[];return a.push(i.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return kn.lex(e,t??this.defaults)}parser(e,t){return _n.parse(e,t??this.defaults)}parseMarkdown(e){return(t,r)=>{let n={...r},s={...this.defaults,...n},i=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&n.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=e),s.async)return(async()=>{let o=s.hooks?await s.hooks.preprocess(t):t,a=await(s.hooks?await s.hooks.provideLexer():e?kn.lex:kn.lexInline)(o,s),h=s.hooks?await s.hooks.processAllTokens(a):a;s.walkTokens&&await Promise.all(this.walkTokens(h,s.walkTokens));let l=await(s.hooks?await s.hooks.provideParser():e?_n.parse:_n.parseInline)(h,s);return s.hooks?await s.hooks.postprocess(l):l})().catch(i);try{s.hooks&&(t=s.hooks.preprocess(t));let o=(s.hooks?s.hooks.provideLexer():e?kn.lex:kn.lexInline)(t,s);s.hooks&&(o=s.hooks.processAllTokens(o)),s.walkTokens&&this.walkTokens(o,s.walkTokens);let a=(s.hooks?s.hooks.provideParser():e?_n.parse:_n.parseInline)(o,s);return s.hooks&&(a=s.hooks.postprocess(a)),a}catch(o){return i(o)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let n="<p>An error occurred:</p><pre>"+En(r.message+"",!0)+"</pre>";return t?Promise.resolve(n):n}if(t)return Promise.reject(r);throw r}}};function De(e,t){return zs.parse(e,t)}function zb(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.from(typeof e=="string"?[e]:e);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var s=n.reduce(function(a,h){var l=h.match(/\n([\t ]+|(?!\s).)/g);return l?a.concat(l.map(function(c){var u,p;return(p=(u=c.match(/[\t ]/g))===null||u===void 0?void 0:u.length)!==null&&p!==void 0?p:0})):a},[]);if(s.length){var i=new RegExp(`
[	 ]{`+Math.min.apply(Math,s)+"}","g");n=n.map(function(a){return a.replace(i,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var o=n[0];return t.forEach(function(a,h){var l=o.match(/(?:^|\n)( *)$/),c=l?l[1]:"",u=a;typeof a=="string"&&a.includes(`
`)&&(u=String(a).split(`
`).map(function(p,g){return g===0?p:""+c+p}).join(`
`)),o+=u+n[h+1]}),o}De.options=De.setOptions=function(e){return zs.setOptions(e),De.defaults=zs.defaults,Df(De.defaults),De},De.getDefaults=z5,De.defaults=gi,De.use=function(...e){return zs.use(...e),De.defaults=zs.defaults,Df(De.defaults),De},De.walkTokens=function(e,t){return zs.walkTokens(e,t)},De.parseInline=zs.parseInline,De.Parser=_n,De.parser=_n.parse,De.Renderer=Xl,De.TextRenderer=mp,De.Lexer=kn,De.lexer=kn.lex,De.Tokenizer=Zl,De.Hooks=Fo,De.parse=De,De.options,De.setOptions,De.use,De.walkTokens,De.parseInline,_n.parse,kn.lex;var aA={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},Rd=new Map,Ub=new Map,lA=C(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(ft.debug("Registering icon pack:",t.name),"loader"in t)Ub.set(t.name,t.loader);else{if(!("icons"in t))throw ft.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.');Rd.set(t.name,t.icons)}}},"registerIconPacks"),qb=C(async(e,t)=>{const r=((o,a,h,l="")=>{const c=o.split(":");if(o.slice(0,1)==="@"){if(c.length<2||c.length>3)return null;l=c.shift().slice(1)}if(c.length>3||!c.length)return null;if(c.length>1){const g=c.pop(),f=c.pop(),m={provider:c.length>0?c[0]:l,prefix:f,name:g};return hh(m)?m:null}const u=c[0],p=u.split("-");if(p.length>1){const g={provider:l,prefix:p.shift(),name:p.join("-")};return hh(g)?g:null}if(h&&l===""){const g={provider:l,prefix:"",name:u};return hh(g,h)?g:null}return null})(e,0,t!==void 0);if(!r)throw new Error(`Invalid icon name: ${e}`);const n=r.prefix||t;if(!n)throw new Error(`Icon name must contain a prefix: ${e}`);let s=Rd.get(n);if(!s){const o=Ub.get(n);if(!o)throw new Error(`Icon set not found: ${r.prefix}`);try{s={...await o(),prefix:n},Rd.set(n,s)}catch(a){throw ft.error(a),new Error(`Failed to load icon set: ${r.prefix}`)}}const i=F5(s,r.name);if(!i)throw new Error(`Icon not found: ${e}`);return i},"getRegisteredIconData"),cA=C(async e=>{try{return await qb(e),!0}catch{return!1}},"isIconAvailable"),_a=C(async(e,t,r)=>{let n;try{n=await qb(e,t?.fallbackPrefix)}catch(o){ft.error(o),n=aA}const s=function(o,a){const h={...Bb,...o},l={...I5,...a},c={left:h.left,top:h.top,width:h.width,height:h.height};let u=h.body;[h,l].forEach(w=>{const S=[],T=w.hFlip,L=w.vFlip;let F,A=w.rotate;switch(T?L?A+=2:(S.push("translate("+(c.width+c.left).toString()+" "+(0-c.top).toString()+")"),S.push("scale(-1 1)"),c.top=c.left=0):L&&(S.push("translate("+(0-c.left).toString()+" "+(c.height+c.top).toString()+")"),S.push("scale(1 -1)"),c.top=c.left=0),A<0&&(A-=4*Math.floor(A/4)),A%=4,A){case 1:F=c.height/2+c.top,S.unshift("rotate(90 "+F.toString()+" "+F.toString()+")");break;case 2:S.unshift("rotate(180 "+(c.width/2+c.left).toString()+" "+(c.height/2+c.top).toString()+")");break;case 3:F=c.width/2+c.left,S.unshift("rotate(-90 "+F.toString()+" "+F.toString()+")")}A%2==1&&(c.left!==c.top&&(F=c.left,c.left=c.top,c.top=F),c.width!==c.height&&(F=c.width,c.width=c.height,c.height=F)),S.length&&(u=function(B,M,$){const E=function(N,q="defs"){let K="";const Z=N.indexOf("<"+q);for(;Z>=0;){const U=N.indexOf(">",Z),H=N.indexOf("</"+q);if(U===-1||H===-1)break;const j=N.indexOf(">",H);if(j===-1)break;K+=N.slice(U+1,H).trim(),N=N.slice(0,Z).trim()+N.slice(j+1)}return{defs:K,content:N}}(B);return D=E.defs,I=M+E.content+$,D?"<defs>"+D+"</defs>"+I:I;var D,I}(u,'<g transform="'+S.join(" ")+'">',"</g>"))});const p=l.width,g=l.height,f=c.width,m=c.height;let y,v;p===null?(v=g===null?"1em":g==="auto"?m:g,y=Ff(v,f/m)):(y=p==="auto"?f:p,v=g===null?Ff(y,m/f):g==="auto"?m:g);const x={},k=(w,S)=>{(T=>T==="unset"||T==="undefined"||T==="none")(S)||(x[w]=S.toString())};k("width",y),k("height",v);const _=[c.left,c.top,f,m];return x.viewBox=_.join(" "),{attributes:x,viewBox:_,body:u}}(n,t),i=function(o,a){let h=o.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const l in a)h+=" "+l+'="'+a[l]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+h+">"+o+"</svg>"}(function(o,a=P5){const h=[];let l;for(;l=R5.exec(o);)h.push(l[1]);if(!h.length)return o;const c="suffix"+(16777216*Math.random()|Date.now()).toString(16);return h.forEach(u=>{const p=typeof a=="function"?a(u):a+(N5++).toString(),g=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");o=o.replace(new RegExp('([#;"])('+g+')([")]|\\.[a-z])',"g"),"$1"+p+c+"$3")}),o=o.replace(new RegExp(c,"g"),"")}(s.body),{...s.attributes,...r});return fn(i,Ar())},"getIconSVG");function jb(e,{markdownAutoWrap:t}){const r=zb(e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`));return t===!1?r.replace(/ /g,"&nbsp;"):r}function Wb(e,t={}){const r=jb(e,t),n=De.lexer(r),s=[[]];let i=0;function o(a,h="normal"){a.type==="text"?a.text.split(`
`).forEach((l,c)=>{c!==0&&(i++,s.push([])),l.split(" ").forEach(u=>{(u=u.replace(/&#39;/g,"'"))&&s[i].push({content:u,type:h})})}):a.type==="strong"||a.type==="em"?a.tokens.forEach(l=>{o(l,a.type)}):a.type==="html"&&s[i].push({content:a.text,type:"normal"})}return C(o,"processNode"),n.forEach(a=>{a.type==="paragraph"?a.tokens?.forEach(h=>{o(h)}):a.type==="html"?s[i].push({content:a.text,type:"normal"}):s[i].push({content:a.raw,type:"normal"})}),s}function Hb(e,{markdownAutoWrap:t}={}){const r=De.lexer(e);function n(s){return s.type==="text"?t===!1?s.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):s.text.replace(/\n */g,"<br/>"):s.type==="strong"?`<strong>${s.tokens?.map(n).join("")}</strong>`:s.type==="em"?`<em>${s.tokens?.map(n).join("")}</em>`:s.type==="paragraph"?`<p>${s.tokens?.map(n).join("")}</p>`:s.type==="space"?"":s.type==="html"?`${s.text}`:s.type==="escape"?s.text:(ft.warn(`Unsupported markdown: ${s.type}`),s.raw)}return C(n,"output"),r.map(n).join("")}function Vb(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}function Gb(e,t){return yp(e,[],Vb(t.content),t.type)}function yp(e,t,r,n){if(r.length===0)return[{content:t.join(""),type:n},{content:"",type:n}];const[s,...i]=r,o=[...t,s];return e([{content:o.join(""),type:n}])?yp(e,o,i,n):(t.length===0&&s&&(t.push(s),r.shift()),[{content:t.join(""),type:n},{content:r.join(""),type:n}])}function Yb(e,t){if(e.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Kl(e,t)}function Kl(e,t,r=[],n=[]){if(e.length===0)return n.length>0&&r.push(n),r.length>0?r:[];let s="";e[0].content===" "&&(s=" ",e.shift());const i=e.shift()??{content:" ",type:"normal"},o=[...n];if(s!==""&&o.push({content:s,type:"normal"}),o.push(i),t(o))return Kl(e,t,r,o);if(n.length>0)r.push(n),e.unshift(i);else if(i.content){const[a,h]=Gb(t,i);r.push([a]),h.content&&e.unshift(h)}return Kl(e,t,r)}function Pd(e,t){t&&e.attr("style",t)}async function Zb(e,t,r,n,s=!1,i=Ar()){const o=e.append("foreignObject");o.attr("width",10*r+"px"),o.attr("height",10*r+"px");const a=o.append("xhtml:div"),h=to(t.label)?await Ou(t.label.replace(oo.lineBreakRegex,`
`),i):fn(t.label,i),l=t.isNode?"nodeLabel":"edgeLabel",c=a.append("span");c.html(h),Pd(c,t.labelStyle),c.attr("class",`${l} ${n}`),Pd(a,t.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("line-height","1.5"),a.style("max-width",r+"px"),a.style("text-align","center"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),s&&a.attr("class","labelBkg");let u=a.node().getBoundingClientRect();return u.width===r&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",r+"px"),u=a.node().getBoundingClientRect()),o.node()}function Ac(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}function Xb(e,t,r){const n=e.append("text"),s=Ac(n,1,t);Ec(s,r);const i=s.node().getComputedTextLength();return n.remove(),i}function hA(e,t,r){const n=e.append("text"),s=Ac(n,1,t);Ec(s,[{content:r,type:"normal"}]);const i=s.node()?.getBoundingClientRect();return i&&n.remove(),i}function Kb(e,t,r,n=!1){const s=t.append("g"),i=s.insert("rect").attr("class","background").attr("style","stroke: none"),o=s.append("text").attr("y","-10.1");let a=0;for(const h of r){const l=C(u=>Xb(s,1.1,u)<=e,"checkWidth"),c=l(h)?[h]:Yb(h,l);for(const u of c)Ec(Ac(o,a,1.1),u),a++}if(n){const h=o.node().getBBox(),l=2;return i.attr("x",h.x-l).attr("y",h.y-l).attr("width",h.width+2*l).attr("height",h.height+2*l),s.node()}return o.node()}function Ec(e,t){e.text(""),t.forEach((r,n)=>{const s=e.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");n===0?s.text(r.content):s.text(" "+r.content)})}async function Qb(e,t={}){const r=[];e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(s,i,o)=>(r.push((async()=>{const a=`${i}:${o}`;return await cA(a)?await _a(a,void 0,{class:"label-icon"}):`<i class='${fn(s,t).replace(":"," ")}'></i>`})()),s));const n=await Promise.all(r);return e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>n.shift()??"")}C(jb,"preprocessMarkdown"),C(Wb,"markdownToLines"),C(Hb,"markdownToHTML"),C(Vb,"splitTextToChars"),C(Gb,"splitWordToFitWidth"),C(yp,"splitWordToFitWidthRecursion"),C(Yb,"splitLineToFitWidth"),C(Kl,"splitLineToFitWidthRecursion"),C(Pd,"applyStyle"),C(Zb,"addHtmlSpan"),C(Ac,"createTspan"),C(Xb,"computeWidthOfText"),C(hA,"computeDimensionOfText"),C(Kb,"createFormattedText"),C(Ec,"updateTextContentAndStyles"),C(Qb,"replaceIconSubstring");var Es=C(async(e,t="",{style:r="",isTitle:n=!1,classes:s="",useHtmlLabels:i=!0,isNode:o=!0,width:a=200,addSvgBackground:h=!1}={},l)=>{if(ft.debug("XYZ createText",t,r,n,s,i,o,"addSvgBackground: ",h),i){const c=Hb(t,l),u=await Qb(pi(c),l),p=t.replace(/\\\\/g,"\\"),g={isNode:o,label:to(t)?p:u,labelStyle:r.replace("fill:","color:")};return await Zb(e,g,a,s,h,l)}{const c=Kb(a,e,Wb(t.replace(/<br\s*\/?>/g,"<br/>").replace("<br>","<br/>"),l),!!t&&h);if(o){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const u=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");we(c).attr("style",u)}else{const u=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");we(c).select("rect").attr("style",u.replace(/background:/g,"fill:"));const p=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");we(c).select("text").attr("style",p)}return c}},"createText");function dh(e,t,r){if(e&&e.length){const[n,s]=t,i=Math.PI/180*r,o=Math.cos(i),a=Math.sin(i);for(const h of e){const[l,c]=h;h[0]=(l-n)*o-(c-s)*a+n,h[1]=(l-n)*a+(c-s)*o+s}}}function dA(e,t){return e[0]===t[0]&&e[1]===t[1]}function uA(e,t,r,n=1){const s=r,i=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(s)for(const l of o)dh(l,a,s);const h=function(l,c,u){const p=[];for(const x of l){const k=[...x];dA(k[0],k[k.length-1])||k.push([k[0][0],k[0][1]]),k.length>2&&p.push(k)}const g=[];c=Math.max(c,.1);const f=[];for(const x of p)for(let k=0;k<x.length-1;k++){const _=x[k],w=x[k+1];if(_[1]!==w[1]){const S=Math.min(_[1],w[1]);f.push({ymin:S,ymax:Math.max(_[1],w[1]),x:S===_[1]?_[0]:w[0],islope:(w[0]-_[0])/(w[1]-_[1])})}}if(f.sort((x,k)=>x.ymin<k.ymin?-1:x.ymin>k.ymin?1:x.x<k.x?-1:x.x>k.x?1:x.ymax===k.ymax?0:(x.ymax-k.ymax)/Math.abs(x.ymax-k.ymax)),!f.length)return g;let m=[],y=f[0].ymin,v=0;for(;m.length||f.length;){if(f.length){let x=-1;for(let k=0;k<f.length&&!(f[k].ymin>y);k++)x=k;f.splice(0,x+1).forEach(k=>{m.push({s:y,edge:k})})}if(m=m.filter(x=>!(x.edge.ymax<=y)),m.sort((x,k)=>x.edge.x===k.edge.x?0:(x.edge.x-k.edge.x)/Math.abs(x.edge.x-k.edge.x)),(u!==1||v%c==0)&&m.length>1)for(let x=0;x<m.length;x+=2){const k=x+1;if(k>=m.length)break;const _=m[x].edge,w=m[k].edge;g.push([[Math.round(_.x),y],[Math.round(w.x),y]])}y+=u,m.forEach(x=>{x.edge.x=x.edge.x+u*x.edge.islope}),v++}return g}(o,i,n);if(s){for(const l of o)dh(l,a,-s);(function(l,c,u){const p=[];l.forEach(g=>p.push(...g)),dh(p,c,u)})(h,a,-s)}return h}function wa(e,t){var r;const n=t.hachureAngle+90;let s=t.hachureGap;s<0&&(s=4*t.strokeWidth),s=Math.round(Math.max(s,.1));let i=1;return t.roughness>=1&&(((r=t.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(i=s),uA(e,s,n,i||1)}class vp{constructor(t){this.helper=t}fillPolygons(t,r){return this._fillPolygons(t,r)}_fillPolygons(t,r){const n=wa(t,r);return{type:"fillSketch",ops:this.renderLines(n,r)}}renderLines(t,r){const n=[];for(const s of t)n.push(...this.helper.doubleLineOps(s[0][0],s[0][1],s[1][0],s[1][1],r));return n}}function Lc(e){const t=e[0],r=e[1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}class pA extends vp{fillPolygons(t,r){let n=r.hachureGap;n<0&&(n=4*r.strokeWidth),n=Math.max(n,.1);const s=wa(t,Object.assign({},r,{hachureGap:n})),i=Math.PI/180*r.hachureAngle,o=[],a=.5*n*Math.cos(i),h=.5*n*Math.sin(i);for(const[l,c]of s)Lc([l,c])&&o.push([[l[0]-a,l[1]+h],[...c]],[[l[0]+a,l[1]-h],[...c]]);return{type:"fillSketch",ops:this.renderLines(o,r)}}}class gA extends vp{fillPolygons(t,r){const n=this._fillPolygons(t,r),s=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),i=this._fillPolygons(t,s);return n.ops=n.ops.concat(i.ops),n}}class fA{constructor(t){this.helper=t}fillPolygons(t,r){const n=wa(t,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(n,r)}dotsOnLines(t,r){const n=[];let s=r.hachureGap;s<0&&(s=4*r.strokeWidth),s=Math.max(s,.1);let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const o=s/4;for(const a of t){const h=Lc(a),l=h/s,c=Math.ceil(l)-1,u=h-c*s,p=(a[0][0]+a[1][0])/2-s/4,g=Math.min(a[0][1],a[1][1]);for(let f=0;f<c;f++){const m=g+u+f*s,y=p-o+2*Math.random()*o,v=m-o+2*Math.random()*o,x=this.helper.ellipse(y,v,i,i,r);n.push(...x.ops)}}return{type:"fillSketch",ops:n}}}class mA{constructor(t){this.helper=t}fillPolygons(t,r){const n=wa(t,r);return{type:"fillSketch",ops:this.dashedLine(n,r)}}dashedLine(t,r){const n=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,s=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,i=[];return t.forEach(o=>{const a=Lc(o),h=Math.floor(a/(n+s)),l=(a+s-h*(n+s))/2;let c=o[0],u=o[1];c[0]>u[0]&&(c=o[1],u=o[0]);const p=Math.atan((u[1]-c[1])/(u[0]-c[0]));for(let g=0;g<h;g++){const f=g*(n+s),m=f+n,y=[c[0]+f*Math.cos(p)+l*Math.cos(p),c[1]+f*Math.sin(p)+l*Math.sin(p)],v=[c[0]+m*Math.cos(p)+l*Math.cos(p),c[1]+m*Math.sin(p)+l*Math.sin(p)];i.push(...this.helper.doubleLineOps(y[0],y[1],v[0],v[1],r))}}),i}}class yA{constructor(t){this.helper=t}fillPolygons(t,r){const n=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,s=r.zigzagOffset<0?n:r.zigzagOffset,i=wa(t,r=Object.assign({},r,{hachureGap:n+s}));return{type:"fillSketch",ops:this.zigzagLines(i,s,r)}}zigzagLines(t,r,n){const s=[];return t.forEach(i=>{const o=Lc(i),a=Math.round(o/(2*r));let h=i[0],l=i[1];h[0]>l[0]&&(h=i[1],l=i[0]);const c=Math.atan((l[1]-h[1])/(l[0]-h[0]));for(let u=0;u<a;u++){const p=2*u*r,g=2*(u+1)*r,f=Math.sqrt(2*Math.pow(r,2)),m=[h[0]+p*Math.cos(c),h[1]+p*Math.sin(c)],y=[h[0]+g*Math.cos(c),h[1]+g*Math.sin(c)],v=[m[0]+f*Math.cos(c+Math.PI/4),m[1]+f*Math.sin(c+Math.PI/4)];s.push(...this.helper.doubleLineOps(m[0],m[1],v[0],v[1],n),...this.helper.doubleLineOps(v[0],v[1],y[0],y[1],n))}}),s}}const Vr={};class vA{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const bA=0,uh=1,Hf=2,Ua={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function ph(e,t){return e.type===t}function bp(e){const t=[],r=function(o){const a=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))a[a.length]={type:bA,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];a[a.length]={type:uh,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return a[a.length]={type:Hf,text:""},a}(e);let n="BOD",s=0,i=r[s];for(;!ph(i,Hf);){let o=0;const a=[];if(n==="BOD"){if(i.text!=="M"&&i.text!=="m")return bp("M0,0"+e);s++,o=Ua[i.text],n=i.text}else ph(i,uh)?o=Ua[n]:(s++,o=Ua[i.text],n=i.text);if(!(s+o<r.length))throw new Error("Path data ended short");for(let h=s;h<s+o;h++){const l=r[h];if(!ph(l,uh))throw new Error("Param not a number: "+n+","+l.text);a[a.length]=+l.text}if(typeof Ua[n]!="number")throw new Error("Bad segment: "+n);{const h={key:n,data:a};t.push(h),s+=o,i=r[s],n==="M"&&(n="L"),n==="m"&&(n="l")}}return t}function Jb(e){let t=0,r=0,n=0,s=0;const i=[];for(const{key:o,data:a}of e)switch(o){case"M":i.push({key:"M",data:[...a]}),[t,r]=a,[n,s]=a;break;case"m":t+=a[0],r+=a[1],i.push({key:"M",data:[t,r]}),n=t,s=r;break;case"L":i.push({key:"L",data:[...a]}),[t,r]=a;break;case"l":t+=a[0],r+=a[1],i.push({key:"L",data:[t,r]});break;case"C":i.push({key:"C",data:[...a]}),t=a[4],r=a[5];break;case"c":{const h=a.map((l,c)=>c%2?l+r:l+t);i.push({key:"C",data:h}),t=h[4],r=h[5];break}case"Q":i.push({key:"Q",data:[...a]}),t=a[2],r=a[3];break;case"q":{const h=a.map((l,c)=>c%2?l+r:l+t);i.push({key:"Q",data:h}),t=h[2],r=h[3];break}case"A":i.push({key:"A",data:[...a]}),t=a[5],r=a[6];break;case"a":t+=a[5],r+=a[6],i.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,r]});break;case"H":i.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],i.push({key:"H",data:[t]});break;case"V":i.push({key:"V",data:[...a]}),r=a[0];break;case"v":r+=a[0],i.push({key:"V",data:[r]});break;case"S":i.push({key:"S",data:[...a]}),t=a[2],r=a[3];break;case"s":{const h=a.map((l,c)=>c%2?l+r:l+t);i.push({key:"S",data:h}),t=h[2],r=h[3];break}case"T":i.push({key:"T",data:[...a]}),t=a[0],r=a[1];break;case"t":t+=a[0],r+=a[1],i.push({key:"T",data:[t,r]});break;case"Z":case"z":i.push({key:"Z",data:[]}),t=n,r=s}return i}function tx(e){const t=[];let r="",n=0,s=0,i=0,o=0,a=0,h=0;for(const{key:l,data:c}of e){switch(l){case"M":t.push({key:"M",data:[...c]}),[n,s]=c,[i,o]=c;break;case"C":t.push({key:"C",data:[...c]}),n=c[4],s=c[5],a=c[2],h=c[3];break;case"L":t.push({key:"L",data:[...c]}),[n,s]=c;break;case"H":n=c[0],t.push({key:"L",data:[n,s]});break;case"V":s=c[0],t.push({key:"L",data:[n,s]});break;case"S":{let u=0,p=0;r==="C"||r==="S"?(u=n+(n-a),p=s+(s-h)):(u=n,p=s),t.push({key:"C",data:[u,p,...c]}),a=c[0],h=c[1],n=c[2],s=c[3];break}case"T":{const[u,p]=c;let g=0,f=0;r==="Q"||r==="T"?(g=n+(n-a),f=s+(s-h)):(g=n,f=s);const m=n+2*(g-n)/3,y=s+2*(f-s)/3,v=u+2*(g-u)/3,x=p+2*(f-p)/3;t.push({key:"C",data:[m,y,v,x,u,p]}),a=g,h=f,n=u,s=p;break}case"Q":{const[u,p,g,f]=c,m=n+2*(u-n)/3,y=s+2*(p-s)/3,v=g+2*(u-g)/3,x=f+2*(p-f)/3;t.push({key:"C",data:[m,y,v,x,g,f]}),a=u,h=p,n=g,s=f;break}case"A":{const u=Math.abs(c[0]),p=Math.abs(c[1]),g=c[2],f=c[3],m=c[4],y=c[5],v=c[6];u===0||p===0?(t.push({key:"C",data:[n,s,y,v,y,v]}),n=y,s=v):n===y&&s===v||(ex(n,s,y,v,u,p,g,f,m).forEach(function(x){t.push({key:"C",data:x})}),n=y,s=v);break}case"Z":t.push({key:"Z",data:[]}),n=i,s=o}r=l}return t}function So(e,t,r){return[e*Math.cos(r)-t*Math.sin(r),e*Math.sin(r)+t*Math.cos(r)]}function ex(e,t,r,n,s,i,o,a,h,l){const c=(u=o,Math.PI*u/180);var u;let p=[],g=0,f=0,m=0,y=0;if(l)[g,f,m,y]=l;else{[e,t]=So(e,t,-c),[r,n]=So(r,n,-c);const $=(e-r)/2,E=(t-n)/2;let D=$*$/(s*s)+E*E/(i*i);D>1&&(D=Math.sqrt(D),s*=D,i*=D);const I=s*s,N=i*i,q=I*N-I*E*E-N*$*$,K=I*E*E+N*$*$,Z=(a===h?-1:1)*Math.sqrt(Math.abs(q/K));m=Z*s*E/i+(e+r)/2,y=Z*-i*$/s+(t+n)/2,g=Math.asin(parseFloat(((t-y)/i).toFixed(9))),f=Math.asin(parseFloat(((n-y)/i).toFixed(9))),e<m&&(g=Math.PI-g),r<m&&(f=Math.PI-f),g<0&&(g=2*Math.PI+g),f<0&&(f=2*Math.PI+f),h&&g>f&&(g-=2*Math.PI),!h&&f>g&&(f-=2*Math.PI)}let v=f-g;if(Math.abs(v)>120*Math.PI/180){const $=f,E=r,D=n;f=h&&f>g?g+120*Math.PI/180*1:g+120*Math.PI/180*-1,p=ex(r=m+s*Math.cos(f),n=y+i*Math.sin(f),E,D,s,i,o,0,h,[f,$,m,y])}v=f-g;const x=Math.cos(g),k=Math.sin(g),_=Math.cos(f),w=Math.sin(f),S=Math.tan(v/4),T=4/3*s*S,L=4/3*i*S,F=[e,t],A=[e+T*k,t-L*x],B=[r+T*w,n-L*_],M=[r,n];if(A[0]=2*F[0]-A[0],A[1]=2*F[1]-A[1],l)return[A,B,M].concat(p);{p=[A,B,M].concat(p);const $=[];for(let E=0;E<p.length;E+=3){const D=So(p[E][0],p[E][1],c),I=So(p[E+1][0],p[E+1][1],c),N=So(p[E+2][0],p[E+2][1],c);$.push([D[0],D[1],I[0],I[1],N[0],N[1]])}return $}}const xA={randOffset:function(e,t){return Kt(e,t)},randOffsetWithRange:function(e,t,r){return Ql(e,t,r)},ellipse:function(e,t,r,n,s){return Nd(e,t,s,nx(r,n,s)).opset},doubleLineOps:function(e,t,r,n,s){return Ss(e,t,r,n,s,!0)}};function rx(e,t,r,n,s){return{type:"path",ops:Ss(e,t,r,n,s)}}function qa(e,t,r){const n=(e||[]).length;if(n>2){const s=[];for(let i=0;i<n-1;i++)s.push(...Ss(e[i][0],e[i][1],e[i+1][0],e[i+1][1],r));return t&&s.push(...Ss(e[n-1][0],e[n-1][1],e[0][0],e[0][1],r)),{type:"path",ops:s}}return n===2?rx(e[0][0],e[0][1],e[1][0],e[1][1],r):{type:"path",ops:[]}}function Vf(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,n=ja(r[0],1*(1+.2*t.roughness),t),s=t.disableMultiStroke?[]:ja(r[0],1.5*(1+.22*t.roughness),Zf(t));for(let i=1;i<r.length;i++){const o=r[i];if(o.length){const a=ja(o,1*(1+.2*t.roughness),t),h=t.disableMultiStroke?[]:ja(o,1.5*(1+.22*t.roughness),Zf(t));for(const l of a)l.op!=="move"&&n.push(l);for(const l of h)l.op!=="move"&&s.push(l)}}return{type:"path",ops:n.concat(s)}}return{type:"path",ops:[]}}function nx(e,t,r){const n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),s=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*n)),i=2*Math.PI/s;let o=Math.abs(e/2),a=Math.abs(t/2);const h=1-r.curveFitting;return o+=Kt(o*h,r),a+=Kt(a*h,r),{increment:i,rx:o,ry:a}}function Nd(e,t,r,n){const[s,i]=Xf(n.increment,e,t,n.rx,n.ry,1,n.increment*Ql(.1,Ql(.4,1,r),r),r);let o=Jl(s,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[a]=Xf(n.increment,e,t,n.rx,n.ry,1.5,0,r),h=Jl(a,null,r);o=o.concat(h)}return{estimatedPoints:i,opset:{type:"path",ops:o}}}function Gf(e,t,r,n,s,i,o,a,h){const l=e,c=t;let u=Math.abs(r/2),p=Math.abs(n/2);u+=Kt(.01*u,h),p+=Kt(.01*p,h);let g=s,f=i;for(;g<0;)g+=2*Math.PI,f+=2*Math.PI;f-g>2*Math.PI&&(g=0,f=2*Math.PI);const m=2*Math.PI/h.curveStepCount,y=Math.min(m/2,(f-g)/2),v=Kf(y,l,c,u,p,g,f,1,h);if(!h.disableMultiStroke){const x=Kf(y,l,c,u,p,g,f,1.5,h);v.push(...x)}return o&&(a?v.push(...Ss(l,c,l+u*Math.cos(g),c+p*Math.sin(g),h),...Ss(l,c,l+u*Math.cos(f),c+p*Math.sin(f),h)):v.push({op:"lineTo",data:[l,c]},{op:"lineTo",data:[l+u*Math.cos(g),c+p*Math.sin(g)]})),{type:"path",ops:v}}function Yf(e,t){const r=tx(Jb(bp(e))),n=[];let s=[0,0],i=[0,0];for(const{key:o,data:a}of r)switch(o){case"M":i=[a[0],a[1]],s=[a[0],a[1]];break;case"L":n.push(...Ss(i[0],i[1],a[0],a[1],t)),i=[a[0],a[1]];break;case"C":{const[h,l,c,u,p,g]=a;n.push(...kA(h,l,c,u,p,g,i,t)),i=[p,g];break}case"Z":n.push(...Ss(i[0],i[1],s[0],s[1],t)),i=[s[0],s[1]]}return{type:"path",ops:n}}function gh(e,t){const r=[];for(const n of e)if(n.length){const s=t.maxRandomnessOffset||0,i=n.length;if(i>2){r.push({op:"move",data:[n[0][0]+Kt(s,t),n[0][1]+Kt(s,t)]});for(let o=1;o<i;o++)r.push({op:"lineTo",data:[n[o][0]+Kt(s,t),n[o][1]+Kt(s,t)]})}}return{type:"fillPath",ops:r}}function bi(e,t){return function(r,n){let s=r.fillStyle||"hachure";if(!Vr[s])switch(s){case"zigzag":Vr[s]||(Vr[s]=new pA(n));break;case"cross-hatch":Vr[s]||(Vr[s]=new gA(n));break;case"dots":Vr[s]||(Vr[s]=new fA(n));break;case"dashed":Vr[s]||(Vr[s]=new mA(n));break;case"zigzag-line":Vr[s]||(Vr[s]=new yA(n));break;default:s="hachure",Vr[s]||(Vr[s]=new vp(n))}return Vr[s]}(t,xA).fillPolygons(e,t)}function Zf(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function sx(e){return e.randomizer||(e.randomizer=new vA(e.seed||0)),e.randomizer.next()}function Ql(e,t,r,n=1){return r.roughness*n*(sx(r)*(t-e)+e)}function Kt(e,t,r=1){return Ql(-e,e,t,r)}function Ss(e,t,r,n,s,i=!1){const o=i?s.disableMultiStrokeFill:s.disableMultiStroke,a=zd(e,t,r,n,s,!0,!1);if(o)return a;const h=zd(e,t,r,n,s,!0,!0);return a.concat(h)}function zd(e,t,r,n,s,i,o){const a=Math.pow(e-r,2)+Math.pow(t-n,2),h=Math.sqrt(a);let l=1;l=h<200?1:h>500?.4:-.0016668*h+1.233334;let c=s.maxRandomnessOffset||0;c*c*100>a&&(c=h/10);const u=c/2,p=.2+.2*sx(s);let g=s.bowing*s.maxRandomnessOffset*(n-t)/200,f=s.bowing*s.maxRandomnessOffset*(e-r)/200;g=Kt(g,s,l),f=Kt(f,s,l);const m=[],y=()=>Kt(u,s,l),v=()=>Kt(c,s,l),x=s.preserveVertices;return o?m.push({op:"move",data:[e+(x?0:y()),t+(x?0:y())]}):m.push({op:"move",data:[e+(x?0:Kt(c,s,l)),t+(x?0:Kt(c,s,l))]}),o?m.push({op:"bcurveTo",data:[g+e+(r-e)*p+y(),f+t+(n-t)*p+y(),g+e+2*(r-e)*p+y(),f+t+2*(n-t)*p+y(),r+(x?0:y()),n+(x?0:y())]}):m.push({op:"bcurveTo",data:[g+e+(r-e)*p+v(),f+t+(n-t)*p+v(),g+e+2*(r-e)*p+v(),f+t+2*(n-t)*p+v(),r+(x?0:v()),n+(x?0:v())]}),m}function ja(e,t,r){if(!e.length)return[];const n=[];n.push([e[0][0]+Kt(t,r),e[0][1]+Kt(t,r)]),n.push([e[0][0]+Kt(t,r),e[0][1]+Kt(t,r)]);for(let s=1;s<e.length;s++)n.push([e[s][0]+Kt(t,r),e[s][1]+Kt(t,r)]),s===e.length-1&&n.push([e[s][0]+Kt(t,r),e[s][1]+Kt(t,r)]);return Jl(n,null,r)}function Jl(e,t,r){const n=e.length,s=[];if(n>3){const i=[],o=1-r.curveTightness;s.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<n;a++){const h=e[a];i[0]=[h[0],h[1]],i[1]=[h[0]+(o*e[a+1][0]-o*e[a-1][0])/6,h[1]+(o*e[a+1][1]-o*e[a-1][1])/6],i[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],i[3]=[e[a+1][0],e[a+1][1]],s.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}}else n===3?(s.push({op:"move",data:[e[1][0],e[1][1]]}),s.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):n===2&&s.push(...zd(e[0][0],e[0][1],e[1][0],e[1][1],r,0,!0));return s}function Xf(e,t,r,n,s,i,o,a){const h=[],l=[];if(a.roughness===0){e/=4,l.push([t+n*Math.cos(-e),r+s*Math.sin(-e)]);for(let c=0;c<=2*Math.PI;c+=e){const u=[t+n*Math.cos(c),r+s*Math.sin(c)];h.push(u),l.push(u)}l.push([t+n*Math.cos(0),r+s*Math.sin(0)]),l.push([t+n*Math.cos(e),r+s*Math.sin(e)])}else{const c=Kt(.5,a)-Math.PI/2;l.push([Kt(i,a)+t+.9*n*Math.cos(c-e),Kt(i,a)+r+.9*s*Math.sin(c-e)]);const u=2*Math.PI+c-.01;for(let p=c;p<u;p+=e){const g=[Kt(i,a)+t+n*Math.cos(p),Kt(i,a)+r+s*Math.sin(p)];h.push(g),l.push(g)}l.push([Kt(i,a)+t+n*Math.cos(c+2*Math.PI+.5*o),Kt(i,a)+r+s*Math.sin(c+2*Math.PI+.5*o)]),l.push([Kt(i,a)+t+.98*n*Math.cos(c+o),Kt(i,a)+r+.98*s*Math.sin(c+o)]),l.push([Kt(i,a)+t+.9*n*Math.cos(c+.5*o),Kt(i,a)+r+.9*s*Math.sin(c+.5*o)])}return[l,h]}function Kf(e,t,r,n,s,i,o,a,h){const l=i+Kt(.1,h),c=[];c.push([Kt(a,h)+t+.9*n*Math.cos(l-e),Kt(a,h)+r+.9*s*Math.sin(l-e)]);for(let u=l;u<=o;u+=e)c.push([Kt(a,h)+t+n*Math.cos(u),Kt(a,h)+r+s*Math.sin(u)]);return c.push([t+n*Math.cos(o),r+s*Math.sin(o)]),c.push([t+n*Math.cos(o),r+s*Math.sin(o)]),Jl(c,0,h)}function kA(e,t,r,n,s,i,o,a){const h=[],l=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let c=[0,0];const u=a.disableMultiStroke?1:2,p=a.preserveVertices;for(let g=0;g<u;g++)g===0?h.push({op:"move",data:[o[0],o[1]]}):h.push({op:"move",data:[o[0]+(p?0:Kt(l[0],a)),o[1]+(p?0:Kt(l[0],a))]}),c=p?[s,i]:[s+Kt(l[g],a),i+Kt(l[g],a)],h.push({op:"bcurveTo",data:[e+Kt(l[g],a),t+Kt(l[g],a),r+Kt(l[g],a),n+Kt(l[g],a),c[0],c[1]]});return h}function To(e){return[...e]}function Qf(e,t=0){const r=e.length;if(r<3)throw new Error("A curve must have at least three points.");const n=[];if(r===3)n.push(To(e[0]),To(e[1]),To(e[2]),To(e[2]));else{const s=[];s.push(e[0],e[0]);for(let a=1;a<e.length;a++)s.push(e[a]),a===e.length-1&&s.push(e[a]);const i=[],o=1-t;n.push(To(s[0]));for(let a=1;a+2<s.length;a++){const h=s[a];i[0]=[h[0],h[1]],i[1]=[h[0]+(o*s[a+1][0]-o*s[a-1][0])/6,h[1]+(o*s[a+1][1]-o*s[a-1][1])/6],i[2]=[s[a+1][0]+(o*s[a][0]-o*s[a+2][0])/6,s[a+1][1]+(o*s[a][1]-o*s[a+2][1])/6],i[3]=[s[a+1][0],s[a+1][1]],n.push(i[1],i[2],i[3])}}return n}function fl(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function _A(e,t,r){const n=fl(t,r);if(n===0)return fl(e,t);let s=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/n;return s=Math.max(0,Math.min(1,s)),fl(e,Us(t,r,s))}function Us(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]}function Ud(e,t,r,n){const s=n||[];if(function(a,h){const l=a[h+0],c=a[h+1],u=a[h+2],p=a[h+3];let g=3*c[0]-2*l[0]-p[0];g*=g;let f=3*c[1]-2*l[1]-p[1];f*=f;let m=3*u[0]-2*p[0]-l[0];m*=m;let y=3*u[1]-2*p[1]-l[1];return y*=y,g<m&&(g=m),f<y&&(f=y),g+f}(e,t)<r){const a=e[t+0];s.length?(i=s[s.length-1],o=a,Math.sqrt(fl(i,o))>1&&s.push(a)):s.push(a),s.push(e[t+3])}else{const h=e[t+0],l=e[t+1],c=e[t+2],u=e[t+3],p=Us(h,l,.5),g=Us(l,c,.5),f=Us(c,u,.5),m=Us(p,g,.5),y=Us(g,f,.5),v=Us(m,y,.5);Ud([h,p,m,v],0,r,s),Ud([v,y,f,u],0,r,s)}var i,o;return s}function wA(e,t){return tc(e,0,e.length,t)}function tc(e,t,r,n,s){const i=s||[],o=e[t],a=e[r-1];let h=0,l=1;for(let c=t+1;c<r-1;++c){const u=_A(e[c],o,a);u>h&&(h=u,l=c)}return Math.sqrt(h)>n?(tc(e,t,l+1,n,i),tc(e,l,r,n,i)):(i.length||i.push(o),i.push(a)),i}function fh(e,t=.15,r){const n=[],s=(e.length-1)/3;for(let i=0;i<s;i++)Ud(e,3*i,t,n);return r&&r>0?tc(n,0,n.length,r):n}const sn="none";class ec{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,r,n){return{shape:t,sets:r||[],options:n||this.defaultOptions}}line(t,r,n,s,i){const o=this._o(i);return this._d("line",[rx(t,r,n,s,o)],o)}rectangle(t,r,n,s,i){const o=this._o(i),a=[],h=function(l,c,u,p,g){return function(f,m){return qa(f,!0,m)}([[l,c],[l+u,c],[l+u,c+p],[l,c+p]],g)}(t,r,n,s,o);if(o.fill){const l=[[t,r],[t+n,r],[t+n,r+s],[t,r+s]];o.fillStyle==="solid"?a.push(gh([l],o)):a.push(bi([l],o))}return o.stroke!==sn&&a.push(h),this._d("rectangle",a,o)}ellipse(t,r,n,s,i){const o=this._o(i),a=[],h=nx(n,s,o),l=Nd(t,r,o,h);if(o.fill)if(o.fillStyle==="solid"){const c=Nd(t,r,o,h).opset;c.type="fillPath",a.push(c)}else a.push(bi([l.estimatedPoints],o));return o.stroke!==sn&&a.push(l.opset),this._d("ellipse",a,o)}circle(t,r,n,s){const i=this.ellipse(t,r,n,n,s);return i.shape="circle",i}linearPath(t,r){const n=this._o(r);return this._d("linearPath",[qa(t,!1,n)],n)}arc(t,r,n,s,i,o,a=!1,h){const l=this._o(h),c=[],u=Gf(t,r,n,s,i,o,a,!0,l);if(a&&l.fill)if(l.fillStyle==="solid"){const p=Object.assign({},l);p.disableMultiStroke=!0;const g=Gf(t,r,n,s,i,o,!0,!1,p);g.type="fillPath",c.push(g)}else c.push(function(p,g,f,m,y,v,x){const k=p,_=g;let w=Math.abs(f/2),S=Math.abs(m/2);w+=Kt(.01*w,x),S+=Kt(.01*S,x);let T=y,L=v;for(;T<0;)T+=2*Math.PI,L+=2*Math.PI;L-T>2*Math.PI&&(T=0,L=2*Math.PI);const F=(L-T)/x.curveStepCount,A=[];for(let B=T;B<=L;B+=F)A.push([k+w*Math.cos(B),_+S*Math.sin(B)]);return A.push([k+w*Math.cos(L),_+S*Math.sin(L)]),A.push([k,_]),bi([A],x)}(t,r,n,s,i,o,l));return l.stroke!==sn&&c.push(u),this._d("arc",c,l)}curve(t,r){const n=this._o(r),s=[],i=Vf(t,n);if(n.fill&&n.fill!==sn)if(n.fillStyle==="solid"){const o=Vf(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],a=t;if(a.length){const h=typeof a[0][0]=="number"?[a]:a;for(const l of h)l.length<3?o.push(...l):l.length===3?o.push(...fh(Qf([l[0],l[0],l[1],l[2]]),10,(1+n.roughness)/2)):o.push(...fh(Qf(l),10,(1+n.roughness)/2))}o.length&&s.push(bi([o],n))}return n.stroke!==sn&&s.push(i),this._d("curve",s,n)}polygon(t,r){const n=this._o(r),s=[],i=qa(t,!0,n);return n.fill&&(n.fillStyle==="solid"?s.push(gh([t],n)):s.push(bi([t],n))),n.stroke!==sn&&s.push(i),this._d("polygon",s,n)}path(t,r){const n=this._o(r),s=[];if(!t)return this._d("path",s,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const i=n.fill&&n.fill!=="transparent"&&n.fill!==sn,o=n.stroke!==sn,a=!!(n.simplification&&n.simplification<1),h=function(c,u,p){const g=tx(Jb(bp(c))),f=[];let m=[],y=[0,0],v=[];const x=()=>{v.length>=4&&m.push(...fh(v,1)),v=[]},k=()=>{x(),m.length&&(f.push(m),m=[])};for(const{key:w,data:S}of g)switch(w){case"M":k(),y=[S[0],S[1]],m.push(y);break;case"L":x(),m.push([S[0],S[1]]);break;case"C":if(!v.length){const T=m.length?m[m.length-1]:y;v.push([T[0],T[1]])}v.push([S[0],S[1]]),v.push([S[2],S[3]]),v.push([S[4],S[5]]);break;case"Z":x(),m.push([y[0],y[1]])}if(k(),!p)return f;const _=[];for(const w of f){const S=wA(w,p);S.length&&_.push(S)}return _}(t,0,a?4-4*(n.simplification||1):(1+n.roughness)/2),l=Yf(t,n);if(i)if(n.fillStyle==="solid")if(h.length===1){const c=Yf(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(c.ops)})}else s.push(gh(h,n));else s.push(bi(h,n));return o&&(a?h.forEach(c=>{s.push(qa(c,!1,n))}):s.push(l)),this._d("path",s,n)}opsToPath(t,r){let n="";for(const s of t.ops){const i=typeof r=="number"&&r>=0?s.data.map(o=>+o.toFixed(r)):s.data;switch(s.op){case"move":n+=`M${i[0]} ${i[1]} `;break;case"bcurveTo":n+=`C${i[0]} ${i[1]}, ${i[2]} ${i[3]}, ${i[4]} ${i[5]} `;break;case"lineTo":n+=`L${i[0]} ${i[1]} `}}return n.trim()}toPaths(t){const r=t.sets||[],n=t.options||this.defaultOptions,s=[];for(const i of r){let o=null;switch(i.type){case"path":o={d:this.opsToPath(i),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:sn};break;case"fillPath":o={d:this.opsToPath(i),stroke:sn,strokeWidth:0,fill:n.fill||sn};break;case"fillSketch":o=this.fillSketch(i,n)}o&&s.push(o)}return s}fillSketch(t,r){let n=r.fillWeight;return n<0&&(n=r.strokeWidth/2),{d:this.opsToPath(t),stroke:r.fill||sn,strokeWidth:n,fill:sn}}_mergedShape(t){return t.filter((r,n)=>n===0||r.op!=="move")}}class CA{constructor(t,r){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new ec(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),s=this.ctx,i=t.options.fixedDecimalPlaceDigits;for(const o of r)switch(o.type){case"path":s.save(),s.strokeStyle=n.stroke==="none"?"transparent":n.stroke,s.lineWidth=n.strokeWidth,n.strokeLineDash&&s.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(s.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(s,o,i),s.restore();break;case"fillPath":{s.save(),s.fillStyle=n.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(s,o,i,a),s.restore();break}case"fillSketch":this.fillSketch(s,o,n)}}fillSketch(t,r,n){let s=n.fillWeight;s<0&&(s=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=s,this._drawToContext(t,r,n.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,r,n,s="nonzero"){t.beginPath();for(const i of r.ops){const o=typeof n=="number"&&n>=0?i.data.map(a=>+a.toFixed(n)):i.data;switch(i.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1])}}r.type==="fillPath"?t.fill(s):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,r,n,s,i){const o=this.gen.line(t,r,n,s,i);return this.draw(o),o}rectangle(t,r,n,s,i){const o=this.gen.rectangle(t,r,n,s,i);return this.draw(o),o}ellipse(t,r,n,s,i){const o=this.gen.ellipse(t,r,n,s,i);return this.draw(o),o}circle(t,r,n,s){const i=this.gen.circle(t,r,n,s);return this.draw(i),i}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n),n}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n),n}arc(t,r,n,s,i,o,a=!1,h){const l=this.gen.arc(t,r,n,s,i,o,a,h);return this.draw(l),l}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n),n}path(t,r){const n=this.gen.path(t,r);return this.draw(n),n}}const Wa="http://www.w3.org/2000/svg";class SA{constructor(t,r){this.svg=t,this.gen=new ec(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),s=this.svg.ownerDocument||window.document,i=s.createElementNS(Wa,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of r){let h=null;switch(a.type){case"path":h=s.createElementNS(Wa,"path"),h.setAttribute("d",this.opsToPath(a,o)),h.setAttribute("stroke",n.stroke),h.setAttribute("stroke-width",n.strokeWidth+""),h.setAttribute("fill","none"),n.strokeLineDash&&h.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&h.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":h=s.createElementNS(Wa,"path"),h.setAttribute("d",this.opsToPath(a,o)),h.setAttribute("stroke","none"),h.setAttribute("stroke-width","0"),h.setAttribute("fill",n.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||h.setAttribute("fill-rule","evenodd");break;case"fillSketch":h=this.fillSketch(s,a,n)}h&&i.appendChild(h)}return i}fillSketch(t,r,n){let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const i=t.createElementNS(Wa,"path");return i.setAttribute("d",this.opsToPath(r,n.fixedDecimalPlaceDigits)),i.setAttribute("stroke",n.fill||""),i.setAttribute("stroke-width",s+""),i.setAttribute("fill","none"),n.fillLineDash&&i.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&i.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,r){return this.gen.opsToPath(t,r)}line(t,r,n,s,i){const o=this.gen.line(t,r,n,s,i);return this.draw(o)}rectangle(t,r,n,s,i){const o=this.gen.rectangle(t,r,n,s,i);return this.draw(o)}ellipse(t,r,n,s,i){const o=this.gen.ellipse(t,r,n,s,i);return this.draw(o)}circle(t,r,n,s){const i=this.gen.circle(t,r,n,s);return this.draw(i)}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n)}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n)}arc(t,r,n,s,i,o,a=!1,h){const l=this.gen.arc(t,r,n,s,i,o,a,h);return this.draw(l)}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n)}path(t,r){const n=this.gen.path(t,r);return this.draw(n)}}var Ot={canvas:(e,t)=>new CA(e,t),svg:(e,t)=>new SA(e,t),generator:e=>new ec(e),newSeed:()=>ec.newSeed()},Zt=C(async(e,t,r)=>{let n;const s=t.useHtmlLabels||gr(Oe()?.htmlLabels);n=r||"node default";const i=e.insert("g").attr("class",n).attr("id",t.domId||t.id),o=i.insert("g").attr("class","label").attr("style",Lr(t.labelStyle));let a;a=t.label===void 0?"":typeof t.label=="string"?t.label:t.label[0];const h=await Es(o,fn(pi(a),Oe()),{useHtmlLabels:s,width:t.width||Oe().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let l=h.getBBox();const c=(t?.padding??0)/2;if(s){const u=h.children[0],p=we(h),g=u.getElementsByTagName("img");if(g){const f=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map(m=>new Promise(y=>{function v(){if(m.style.display="flex",m.style.flexDirection="column",f){const x=Oe().fontSize?Oe().fontSize:window.getComputedStyle(document.body).fontSize,k=5,[_=Vy.fontSize]=Tc(x),w=_*k+"px";m.style.minWidth=w,m.style.maxWidth=w}else m.style.width="100%";y(m)}C(v,"setupImage"),setTimeout(()=>{m.complete&&v()}),m.addEventListener("error",v),m.addEventListener("load",v)})))}l=u.getBoundingClientRect(),p.attr("width",l.width),p.attr("height",l.height)}return s?o.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"):o.attr("transform","translate(0, "+-l.height/2+")"),t.centerLabel&&o.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:i,bbox:l,halfPadding:c,label:o}},"labelHelper"),mh=C(async(e,t,r)=>{const n=r.useHtmlLabels||gr(Oe()?.flowchart?.htmlLabels),s=e.insert("g").attr("class","label").attr("style",r.labelStyle||""),i=await Es(s,fn(pi(t),Oe()),{useHtmlLabels:n,width:r.width||Oe()?.flowchart?.wrappingWidth,style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let o=i.getBBox();const a=r.padding/2;if(gr(Oe()?.flowchart?.htmlLabels)){const h=i.children[0],l=we(i);o=h.getBoundingClientRect(),l.attr("width",o.width),l.attr("height",o.height)}return n?s.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):s.attr("transform","translate(0, "+-o.height/2+")"),r.centerLabel&&s.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),s.insert("rect",":first-child"),{shapeSvg:e,bbox:o,halfPadding:a,label:s}},"insertLabel"),zt=C((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),Gt=C((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function ye(e){const t=e.map((r,n)=>`${n===0?"M":"L"}${r.x},${r.y}`);return t.push("Z"),t.join(" ")}function Ts(e,t,r,n,s,i){const o=[],a=r-e,h=n-t,l=a/i,c=2*Math.PI/l,u=t+h/2;for(let p=0;p<=50;p++){const g=e+p/50*a,f=u+s*Math.sin(c*(g-e));o.push({x:g,y:f})}return o}function ia(e,t,r,n,s,i){const o=[],a=s*Math.PI/180,h=(i*Math.PI/180-a)/(n-1);for(let l=0;l<n;l++){const c=a+l*h,u=e+r*Math.cos(c),p=t+r*Math.sin(c);o.push({x:-u,y:-p})}return o}C(ye,"createPathFromPoints"),C(Ts,"generateFullSineWavePoints"),C(ia,"generateCirclePoints");var TA=C((e,t)=>{var r,n,s=e.x,i=e.y,o=t.x-s,a=t.y-i,h=e.width/2,l=e.height/2;return Math.abs(a)*h>Math.abs(o)*l?(a<0&&(l=-l),r=a===0?0:l*o/a,n=l):(o<0&&(h=-h),r=h,n=o===0?0:h*a/o),{x:s+r,y:i+n}},"intersectRect"),lo=TA;function ix(e,t){t&&e.attr("style",t)}async function ox(e){const t=we(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div"),n=Oe();let s=e.label;e.label&&to(e.label)&&(s=await Ou(e.label.replace(oo.lineBreakRegex,`
`),n));const i='<span class="'+(e.isNode?"nodeLabel":"edgeLabel")+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+s+"</span>";return r.html(fn(i,n)),ix(r,e.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}C(ix,"applyStyle"),C(ox,"addHtmlLabel");var $A=C(async(e,t,r,n)=>{let s=e||"";if(typeof s=="object"&&(s=s[0]),gr(Oe().flowchart.htmlLabels)){s=s.replace(/\\n|\n/g,"<br />"),ft.info("vertexText"+s);const i={isNode:n,label:pi(s).replace(/fa[blrs]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await ox(i)}{const i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("style",t.replace("color:","fill:"));let o=[];o=typeof s=="string"?s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?s:[];for(const a of o){const h=document.createElementNS("http://www.w3.org/2000/svg","tspan");h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),h.setAttribute("dy","1em"),h.setAttribute("x","0"),r?h.setAttribute("class","title-row"):h.setAttribute("class","row"),h.textContent=a.trim(),i.appendChild(h)}return i}},"createLabel"),Zs=$A,Ls=C((e,t,r,n,s)=>["M",e+s,t,"H",e+r-s,"A",s,s,0,0,1,e+r,t+s,"V",t+n-s,"A",s,s,0,0,1,e+r-s,t+n,"H",e+s,"A",s,s,0,0,1,e,t+n-s,"V",t+s,"A",s,s,0,0,1,e+s,t,"Z"].join(" "),"createRoundedRectPathD"),Jf=C(async(e,t)=>{ft.info("Creating subgraph rect for ",t.id,t);const r=Oe(),{themeVariables:n,handDrawnSeed:s}=r,{clusterBkg:i,clusterBorder:o}=n,{labelStyles:a,nodeStyles:h,borderStyles:l,backgroundStyles:c}=Nt(t),u=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),p=gr(r.flowchart.htmlLabels),g=u.insert("g").attr("class","cluster-label "),f=await Es(g,t.label,{style:t.labelStyle,useHtmlLabels:p,isNode:!0});let m=f.getBBox();if(gr(r.flowchart.htmlLabels)){const T=f.children[0],L=we(f);m=T.getBoundingClientRect(),L.attr("width",m.width),L.attr("height",m.height)}const y=t.width<=m.width+t.padding?m.width+t.padding:t.width;t.width<=m.width+t.padding?t.diff=(y-t.width)/2-t.padding:t.diff=-t.padding;const v=t.height,x=t.x-y/2,k=t.y-v/2;let _;if(ft.trace("Data ",t,JSON.stringify(t)),t.look==="handDrawn"){const T=Ot.svg(u),L=Pt(t,{roughness:.7,fill:i,stroke:o,fillWeight:3,seed:s}),F=T.path(Ls(x,k,y,v,0),L);_=u.insert(()=>(ft.debug("Rough node insert CXC",F),F),":first-child"),_.select("path:nth-child(2)").attr("style",l.join(";")),_.select("path").attr("style",c.join(";").replace("fill","stroke"))}else _=u.insert("rect",":first-child"),_.attr("style",h).attr("rx",t.rx).attr("ry",t.ry).attr("x",x).attr("y",k).attr("width",y).attr("height",v);const{subGraphTitleTopMargin:w}=rp(r);if(g.attr("transform",`translate(${t.x-m.width/2}, ${t.y-t.height/2+w})`),a){const T=g.select("span");T&&T.attr("style",a)}const S=_.node().getBBox();return t.offsetX=0,t.width=S.width,t.height=S.height,t.offsetY=m.height-t.padding/2,t.intersect=function(T){return lo(t,T)},{cluster:u,labelBBox:m}},"rect"),MA=C((e,t)=>{const r=e.insert("g").attr("class","note-cluster").attr("id",t.id),n=r.insert("rect",":first-child"),s=0*t.padding,i=s/2;n.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-i).attr("y",t.y-t.height/2-i).attr("width",t.width+s).attr("height",t.height+s).attr("fill","none");const o=n.node().getBBox();return t.width=o.width,t.height=o.height,t.intersect=function(a){return lo(t,a)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),AA=C(async(e,t)=>{const r=Oe(),{themeVariables:n,handDrawnSeed:s}=r,{altBackground:i,compositeBackground:o,compositeTitleBackground:a,nodeBorder:h}=n,l=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),c=l.insert("g",":first-child"),u=l.insert("g").attr("class","cluster-label");let p=l.append("rect");const g=u.node().appendChild(await Zs(t.label,t.labelStyle,void 0,!0));let f=g.getBBox();if(gr(r.flowchart.htmlLabels)){const F=g.children[0],A=we(g);f=F.getBoundingClientRect(),A.attr("width",f.width),A.attr("height",f.height)}const m=0*t.padding,y=m/2,v=(t.width<=f.width+t.padding?f.width+t.padding:t.width)+m;t.width<=f.width+t.padding?t.diff=(v-t.width)/2-t.padding:t.diff=-t.padding;const x=t.height+m,k=t.height+m-f.height-6,_=t.x-v/2,w=t.y-x/2;t.width=v;const S=t.y-t.height/2-y+f.height+2;let T;if(t.look==="handDrawn"){const F=t.cssClasses.includes("statediagram-cluster-alt"),A=Ot.svg(l),B=t.rx||t.ry?A.path(Ls(_,w,v,x,10),{roughness:.7,fill:a,fillStyle:"solid",stroke:h,seed:s}):A.rectangle(_,w,v,x,{seed:s});T=l.insert(()=>B,":first-child");const M=A.rectangle(_,S,v,k,{fill:F?i:o,fillStyle:F?"hachure":"solid",stroke:h,seed:s});T=l.insert(()=>B,":first-child"),p=l.insert(()=>M)}else T=c.insert("rect",":first-child"),T.attr("class","outer").attr("x",_).attr("y",w).attr("width",v).attr("height",x).attr("data-look",t.look),p.attr("class","inner").attr("x",_).attr("y",S).attr("width",v).attr("height",k);u.attr("transform",`translate(${t.x-f.width/2}, ${w+1-(gr(r.flowchart.htmlLabels)?0:3)})`);const L=T.node().getBBox();return t.height=L.height,t.offsetX=0,t.offsetY=f.height-t.padding/2,t.labelBBox=f,t.intersect=function(F){return lo(t,F)},{cluster:l,labelBBox:f}},"roundedWithTitle"),EA=C(async(e,t)=>{ft.info("Creating subgraph rect for ",t.id,t);const r=Oe(),{themeVariables:n,handDrawnSeed:s}=r,{clusterBkg:i,clusterBorder:o}=n,{labelStyles:a,nodeStyles:h,borderStyles:l,backgroundStyles:c}=Nt(t),u=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),p=gr(r.flowchart.htmlLabels),g=u.insert("g").attr("class","cluster-label "),f=await Es(g,t.label,{style:t.labelStyle,useHtmlLabels:p,isNode:!0,width:t.width});let m=f.getBBox();if(gr(r.flowchart.htmlLabels)){const T=f.children[0],L=we(f);m=T.getBoundingClientRect(),L.attr("width",m.width),L.attr("height",m.height)}const y=t.width<=m.width+t.padding?m.width+t.padding:t.width;t.width<=m.width+t.padding?t.diff=(y-t.width)/2-t.padding:t.diff=-t.padding;const v=t.height,x=t.x-y/2,k=t.y-v/2;let _;if(ft.trace("Data ",t,JSON.stringify(t)),t.look==="handDrawn"){const T=Ot.svg(u),L=Pt(t,{roughness:.7,fill:i,stroke:o,fillWeight:4,seed:s}),F=T.path(Ls(x,k,y,v,t.rx),L);_=u.insert(()=>(ft.debug("Rough node insert CXC",F),F),":first-child"),_.select("path:nth-child(2)").attr("style",l.join(";")),_.select("path").attr("style",c.join(";").replace("fill","stroke"))}else _=u.insert("rect",":first-child"),_.attr("style",h).attr("rx",t.rx).attr("ry",t.ry).attr("x",x).attr("y",k).attr("width",y).attr("height",v);const{subGraphTitleTopMargin:w}=rp(r);if(g.attr("transform",`translate(${t.x-m.width/2}, ${t.y-t.height/2+w})`),a){const T=g.select("span");T&&T.attr("style",a)}const S=_.node().getBBox();return t.offsetX=0,t.width=S.width,t.height=S.height,t.offsetY=m.height-t.padding/2,t.intersect=function(T){return lo(t,T)},{cluster:u,labelBBox:m}},"kanbanSection"),LA=C((e,t)=>{const r=Oe(),{themeVariables:n,handDrawnSeed:s}=r,{nodeBorder:i}=n,o=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),a=o.insert("g",":first-child"),h=0*t.padding,l=t.width+h;t.diff=-t.padding;const c=t.height+h,u=t.x-l/2,p=t.y-c/2;let g;if(t.width=l,t.look==="handDrawn"){const m=Ot.svg(o).rectangle(u,p,l,c,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:i,seed:s});g=o.insert(()=>m,":first-child")}else g=a.insert("rect",":first-child"),g.attr("class","divider").attr("x",u).attr("y",p).attr("width",l).attr("height",c).attr("data-look",t.look);const f=g.node().getBBox();return t.height=f.height,t.offsetX=0,t.offsetY=0,t.intersect=function(m){return lo(t,m)},{cluster:o,labelBBox:{}}},"divider"),BA={rect:Jf,squareRect:Jf,roundedWithTitle:AA,noteGroup:MA,divider:LA,kanbanSection:EA},ax=new Map,IA=C(async(e,t)=>{const r=t.shape||"rect",n=await BA[r](e,t);return ax.set(t.id,n),n},"insertCluster"),MP=C(()=>{ax=new Map},"clear");function lx(e,t){return e.intersect(t)}C(lx,"intersectNode");var FA=lx;function cx(e,t,r,n){var s=e.x,i=e.y,o=s-n.x,a=i-n.y,h=Math.sqrt(t*t*a*a+r*r*o*o),l=Math.abs(t*r*o/h);n.x<s&&(l=-l);var c=Math.abs(t*r*a/h);return n.y<i&&(c=-c),{x:s+l,y:i+c}}C(cx,"intersectEllipse");var hx=cx;function dx(e,t,r){return hx(e,t,t,r)}C(dx,"intersectCircle");var DA=dx;function ux(e,t,r,n){{const s=t.y-e.y,i=e.x-t.x,o=t.x*e.y-e.x*t.y,a=s*r.x+i*r.y+o,h=s*n.x+i*n.y+o,l=1e-6;if(a!==0&&h!==0&&qd(a,h))return;const c=n.y-r.y,u=r.x-n.x,p=n.x*r.y-r.x*n.y,g=c*e.x+u*e.y+p,f=c*t.x+u*t.y+p;if(Math.abs(g)<l&&Math.abs(f)<l&&qd(g,f))return;const m=s*u-c*i;if(m===0)return;const y=Math.abs(m/2);let v=i*p-u*o;const x=v<0?(v-y)/m:(v+y)/m;return v=c*o-s*p,{x,y:v<0?(v-y)/m:(v+y)/m}}}function qd(e,t){return e*t>0}C(ux,"intersectLine"),C(qd,"sameSign");var OA=ux;function px(e,t,r){let n=e.x,s=e.y,i=[],o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(c){o=Math.min(o,c.x),a=Math.min(a,c.y)}):(o=Math.min(o,t.x),a=Math.min(a,t.y));let h=n-e.width/2-o,l=s-e.height/2-a;for(let c=0;c<t.length;c++){let u=t[c],p=t[c<t.length-1?c+1:0],g=OA(e,r,{x:h+u.x,y:l+u.y},{x:h+p.x,y:l+p.y});g&&i.push(g)}return i.length?(i.length>1&&i.sort(function(c,u){let p=c.x-r.x,g=c.y-r.y,f=Math.sqrt(p*p+g*g),m=u.x-r.x,y=u.y-r.y,v=Math.sqrt(m*m+y*y);return f<v?-1:f===v?0:1}),i[0]):e}C(px,"intersectPolygon");var Bt={node:FA,circle:DA,ellipse:hx,polygon:px,rect:lo};function gx(e,t){const{labelStyles:r}=Nt(t);t.labelStyle=r;const n=Gt(t);let s=n;n||(s="anchor");const i=e.insert("g").attr("class",s).attr("id",t.domId||t.id),{cssStyles:o}=t,a=Ot.svg(i),h=Pt(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(h.roughness=0);const l=a.circle(0,0,2,h),c=i.insert(()=>l,":first-child");return c.attr("class","anchor").attr("style",Lr(o)),zt(t,c),t.intersect=function(u){return ft.info("Circle intersect",t,1,u),Bt.circle(t,1,u)},i}function jd(e,t,r,n,s,i,o){const a=(e+r)/2,h=(t+n)/2,l=Math.atan2(n-t,r-e),c=(r-e)/2/s,u=(n-t)/2/i,p=Math.sqrt(c**2+u**2);if(p>1)throw new Error("The given radii are too small to create an arc between the points.");const g=Math.sqrt(1-p**2),f=a+g*i*Math.sin(l)*(o?-1:1),m=h-g*s*Math.cos(l)*(o?-1:1),y=Math.atan2((t-m)/i,(e-f)/s);let v=Math.atan2((n-m)/i,(r-f)/s)-y;o&&v<0&&(v+=2*Math.PI),!o&&v>0&&(v-=2*Math.PI);const x=[];for(let k=0;k<20;k++){const _=y+k/19*v,w=f+s*Math.cos(_),S=m+i*Math.sin(_);x.push({x:w,y:S})}return x}async function fx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=i.width+t.padding+20,a=i.height+t.padding,h=a/2,l=h/(2.5+a/50),{cssStyles:c}=t,u=[{x:o/2,y:-a/2},{x:-o/2,y:-a/2},...jd(-o/2,-a/2,-o/2,a/2,l,h,!1),{x:o/2,y:a/2},...jd(o/2,a/2,o/2,-a/2,l,h,!0)],p=Ot.svg(s),g=Pt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const f=ye(u),m=p.path(f,g),y=s.insert(()=>m,":first-child");return y.attr("class","basic label-container"),c&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",c),n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),y.attr("transform",`translate(${l/2}, 0)`),zt(t,y),t.intersect=function(v){return Bt.polygon(t,u,v)},s}function Bs(e,t,r,n){return e.insert("polygon",":first-child").attr("points",n.map(function(s){return s.x+","+s.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}async function mx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=i.height+t.padding,a=i.width+t.padding+12,h=-o,l=[{x:12,y:h},{x:a,y:h},{x:a,y:0},{x:0,y:0},{x:0,y:h+12},{x:12,y:h}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const p=Ot.svg(s),g=Pt(t,{}),f=ye(l),m=p.path(f,g);c=s.insert(()=>m,":first-child").attr("transform",`translate(${-a/2}, ${o/2})`),u&&c.attr("style",u)}else c=Bs(s,a,o,l);return n&&c.attr("style",n),zt(t,c),t.intersect=function(p){return Bt.polygon(t,l,p)},s}function yx(e,t){const{nodeStyles:r}=Nt(t);t.label="";const n=e.insert("g").attr("class",Gt(t)).attr("id",t.domId??t.id),{cssStyles:s}=t,i=Math.max(28,t.width??0),o=[{x:0,y:i/2},{x:i/2,y:0},{x:0,y:-i/2},{x:-i/2,y:0}],a=Ot.svg(n),h=Pt(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const l=ye(o),c=a.path(l,h),u=n.insert(()=>c,":first-child");return s&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",s),r&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",r),t.width=28,t.height=28,t.intersect=function(p){return Bt.polygon(t,o,p)},n}async function xp(e,t,r){const{labelStyles:n,nodeStyles:s}=Nt(t);t.labelStyle=n;const{shapeSvg:i,bbox:o,halfPadding:a}=await Zt(e,t,Gt(t)),h=r?.padding??a,l=o.width/2+h;let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const p=Ot.svg(i),g=Pt(t,{}),f=p.circle(0,0,2*l,g);c=i.insert(()=>f,":first-child"),c.attr("class","basic label-container").attr("style",Lr(u))}else c=i.insert("circle",":first-child").attr("class","basic label-container").attr("style",s).attr("r",l).attr("cx",0).attr("cy",0);return zt(t,c),t.calcIntersect=function(p,g){const f=p.width/2;return Bt.circle(p,f,g)},t.intersect=function(p){return ft.info("Circle intersect",t,l,p),Bt.circle(t,l,p)},i}function vx(e){const t=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),n=2*e;return`M ${-n/2*t},${n/2*r} L ${n/2*t},${-n/2*r}
                   M ${n/2*t},${n/2*r} L ${-n/2*t},${-n/2*r}`}function bx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r,t.label="";const s=e.insert("g").attr("class",Gt(t)).attr("id",t.domId??t.id),i=Math.max(30,t?.width??0),{cssStyles:o}=t,a=Ot.svg(s),h=Pt(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const l=a.circle(0,0,2*i,h),c=vx(i),u=a.path(c,h),p=s.insert(()=>l,":first-child");return p.insert(()=>u),o&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",o),n&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",n),zt(t,p),t.intersect=function(g){return ft.info("crossedCircle intersect",t,{radius:i,point:g}),Bt.circle(t,i,g)},s}function Vn(e,t,r,n=100,s=0,i=180){const o=[],a=s*Math.PI/180,h=(i*Math.PI/180-a)/(n-1);for(let l=0;l<n;l++){const c=a+l*h,u=e+r*Math.cos(c),p=t+r*Math.sin(c);o.push({x:-u,y:-p})}return o}async function xx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=i.width+(t.padding??0),h=i.height+(t.padding??0),l=Math.max(5,.1*h),{cssStyles:c}=t,u=[...Vn(a/2,-h/2,l,30,-90,0),{x:-a/2-l,y:l},...Vn(a/2+2*l,-l,l,20,-180,-270),...Vn(a/2+2*l,l,l,20,-90,-180),{x:-a/2-l,y:-h/2},...Vn(a/2,h/2,l,20,0,90)],p=[{x:a/2,y:-h/2-l},{x:-a/2,y:-h/2-l},...Vn(a/2,-h/2,l,20,-90,0),{x:-a/2-l,y:-l},...Vn(a/2+.1*a,-l,l,20,-180,-270),...Vn(a/2+.1*a,l,l,20,-90,-180),{x:-a/2-l,y:h/2},...Vn(a/2,h/2,l,20,0,90),{x:-a/2,y:h/2+l},{x:a/2,y:h/2+l}],g=Ot.svg(s),f=Pt(t,{fill:"none"});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=ye(u).replace("Z",""),y=g.path(m,f),v=ye(p),x=g.path(v,{...f}),k=s.insert("g",":first-child");return k.insert(()=>x,":first-child").attr("stroke-opacity",0),k.insert(()=>y,":first-child"),k.attr("class","text"),c&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",c),n&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",n),k.attr("transform",`translate(${l}, 0)`),o.attr("transform",`translate(${-a/2+l-(i.x-(i.left??0))},${-h/2+(t.padding??0)/2-(i.y-(i.top??0))})`),zt(t,k),t.intersect=function(_){return Bt.polygon(t,p,_)},s}function Gn(e,t,r,n=100,s=0,i=180){const o=[],a=s*Math.PI/180,h=(i*Math.PI/180-a)/(n-1);for(let l=0;l<n;l++){const c=a+l*h,u=e+r*Math.cos(c),p=t+r*Math.sin(c);o.push({x:u,y:p})}return o}async function kx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=i.width+(t.padding??0),h=i.height+(t.padding??0),l=Math.max(5,.1*h),{cssStyles:c}=t,u=[...Gn(a/2,-h/2,l,20,-90,0),{x:a/2+l,y:-l},...Gn(a/2+2*l,-l,l,20,-180,-270),...Gn(a/2+2*l,l,l,20,-90,-180),{x:a/2+l,y:h/2},...Gn(a/2,h/2,l,20,0,90)],p=[{x:-a/2,y:-h/2-l},{x:a/2,y:-h/2-l},...Gn(a/2,-h/2,l,20,-90,0),{x:a/2+l,y:-l},...Gn(a/2+2*l,-l,l,20,-180,-270),...Gn(a/2+2*l,l,l,20,-90,-180),{x:a/2+l,y:h/2},...Gn(a/2,h/2,l,20,0,90),{x:a/2,y:h/2+l},{x:-a/2,y:h/2+l}],g=Ot.svg(s),f=Pt(t,{fill:"none"});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=ye(u).replace("Z",""),y=g.path(m,f),v=ye(p),x=g.path(v,{...f}),k=s.insert("g",":first-child");return k.insert(()=>x,":first-child").attr("stroke-opacity",0),k.insert(()=>y,":first-child"),k.attr("class","text"),c&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",c),n&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",n),k.attr("transform",`translate(${-l}, 0)`),o.attr("transform",`translate(${-a/2+(t.padding??0)/2-(i.x-(i.left??0))},${-h/2+(t.padding??0)/2-(i.y-(i.top??0))})`),zt(t,k),t.intersect=function(_){return Bt.polygon(t,p,_)},s}function br(e,t,r,n=100,s=0,i=180){const o=[],a=s*Math.PI/180,h=(i*Math.PI/180-a)/(n-1);for(let l=0;l<n;l++){const c=a+l*h,u=e+r*Math.cos(c),p=t+r*Math.sin(c);o.push({x:-u,y:-p})}return o}async function _x(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=i.width+(t.padding??0),h=i.height+(t.padding??0),l=Math.max(5,.1*h),{cssStyles:c}=t,u=[...br(a/2,-h/2,l,30,-90,0),{x:-a/2-l,y:l},...br(a/2+2*l,-l,l,20,-180,-270),...br(a/2+2*l,l,l,20,-90,-180),{x:-a/2-l,y:-h/2},...br(a/2,h/2,l,20,0,90)],p=[...br(-a/2+l+l/2,-h/2,l,20,-90,-180),{x:a/2-l/2,y:l},...br(-a/2-l/2,-l,l,20,0,90),...br(-a/2-l/2,l,l,20,-90,0),{x:a/2-l/2,y:-l},...br(-a/2+l+l/2,h/2,l,30,-180,-270)],g=[{x:a/2,y:-h/2-l},{x:-a/2,y:-h/2-l},...br(a/2,-h/2,l,20,-90,0),{x:-a/2-l,y:-l},...br(a/2+2*l,-l,l,20,-180,-270),...br(a/2+2*l,l,l,20,-90,-180),{x:-a/2-l,y:h/2},...br(a/2,h/2,l,20,0,90),{x:-a/2,y:h/2+l},{x:a/2-l-l/2,y:h/2+l},...br(-a/2+l+l/2,-h/2,l,20,-90,-180),{x:a/2-l/2,y:l},...br(-a/2-l/2,-l,l,20,0,90),...br(-a/2-l/2,l,l,20,-90,0),{x:a/2-l/2,y:-l},...br(-a/2+l+l/2,h/2,l,30,-180,-270)],f=Ot.svg(s),m=Pt(t,{fill:"none"});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=ye(u).replace("Z",""),v=f.path(y,m),x=ye(p).replace("Z",""),k=f.path(x,m),_=ye(g),w=f.path(_,{...m}),S=s.insert("g",":first-child");return S.insert(()=>w,":first-child").attr("stroke-opacity",0),S.insert(()=>v,":first-child"),S.insert(()=>k,":first-child"),S.attr("class","text"),c&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",c),n&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",n),S.attr("transform",`translate(${l-l/4}, 0)`),o.attr("transform",`translate(${-a/2+(t.padding??0)/2-(i.x-(i.left??0))},${-h/2+(t.padding??0)/2-(i.y-(i.top??0))})`),zt(t,S),t.intersect=function(T){return Bt.polygon(t,g,T)},s}async function wx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=Math.max(80,1.25*(i.width+2*(t.padding??0)),t?.width??0),a=Math.max(20,i.height+2*(t.padding??0),t?.height??0),h=a/2,{cssStyles:l}=t,c=Ot.svg(s),u=Pt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const p=o-h,g=a/4,f=[{x:p,y:0},{x:g,y:0},{x:0,y:a/2},{x:g,y:a},{x:p,y:a},...ia(-p,-a/2,h,50,270,90)],m=ye(f),y=c.path(m,u),v=s.insert(()=>y,":first-child");return v.attr("class","basic label-container"),l&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",l),n&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",n),v.attr("transform",`translate(${-o/2}, ${-a/2})`),zt(t,v),t.intersect=function(x){return Bt.polygon(t,f,x)},s}C(gx,"anchor"),C(jd,"generateArcPoints"),C(fx,"bowTieRect"),C(Bs,"insertPolygonShape"),C(mx,"card"),C(yx,"choice"),C(xp,"circle"),C(vx,"createLine"),C(bx,"crossedCircle"),C(Vn,"generateCirclePoints"),C(xx,"curlyBraceLeft"),C(Gn,"generateCirclePoints"),C(kx,"curlyBraceRight"),C(br,"generateCirclePoints"),C(_x,"curlyBraces"),C(wx,"curvedTrapezoid");var RA=C((e,t,r,n,s,i)=>[`M${e},${t+i}`,`a${s},${i} 0,0,0 ${r},0`,`a${s},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${s},${i} 0,0,0 ${r},0`,"l0,"+-n].join(" "),"createCylinderPathD"),PA=C((e,t,r,n,s,i)=>[`M${e},${t+i}`,`M${e+r},${t+i}`,`a${s},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${s},${i} 0,0,0 ${r},0`,"l0,"+-n].join(" "),"createOuterCylinderPathD"),NA=C((e,t,r,n,s,i)=>[`M${e-r/2},${-n/2}`,`a${s},${i} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function Cx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=Math.max(i.width+t.padding,t.width??0),h=a/2,l=h/(2.5+a/50),c=Math.max(i.height+l+t.padding,t.height??0);let u;const{cssStyles:p}=t;if(t.look==="handDrawn"){const g=Ot.svg(s),f=PA(0,0,a,c,h,l),m=NA(0,l,a,c,h,l),y=g.path(f,Pt(t,{})),v=g.path(m,Pt(t,{fill:"none"}));u=s.insert(()=>v,":first-child"),u=s.insert(()=>y,":first-child"),u.attr("class","basic label-container"),p&&u.attr("style",p)}else{const g=RA(0,0,a,c,h,l);u=s.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",Lr(p)).attr("style",n)}return u.attr("label-offset-y",l),u.attr("transform",`translate(${-a/2}, ${-(c/2+l)})`),zt(t,u),o.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${-i.height/2+(t.padding??0)/1.5-(i.y-(i.top??0))})`),t.intersect=function(g){const f=Bt.rect(t,g),m=f.x-(t.x??0);if(h!=0&&(Math.abs(m)<(t.width??0)/2||Math.abs(m)==(t.width??0)/2&&Math.abs(f.y-(t.y??0))>(t.height??0)/2-l)){let y=l*l*(1-m*m/(h*h));y>0&&(y=Math.sqrt(y)),y=l-y,g.y-(t.y??0)>0&&(y=-y),f.y+=y}return f},s}async function Sx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=i.width+t.padding,h=i.height+t.padding,l=.2*h,c=-a/2,u=-h/2-l/2,{cssStyles:p}=t,g=Ot.svg(s),f=Pt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=[{x:c,y:u+l},{x:-c,y:u+l},{x:-c,y:-u},{x:c,y:-u},{x:c,y:u},{x:-c,y:u},{x:-c,y:u+l}],y=g.polygon(m.map(x=>[x.x,x.y]),f),v=s.insert(()=>y,":first-child");return v.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",n),o.attr("transform",`translate(${c+(t.padding??0)/2-(i.x-(i.left??0))}, ${u+l+(t.padding??0)/2-(i.y-(i.top??0))})`),zt(t,v),t.intersect=function(x){return Bt.rect(t,x)},s}async function Tx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,halfPadding:o}=await Zt(e,t,Gt(t)),a=i.width/2+o+5,h=i.width/2+o;let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=Ot.svg(s),p=Pt(t,{roughness:.2,strokeWidth:2.5}),g=Pt(t,{roughness:.2,strokeWidth:1.5}),f=u.circle(0,0,2*a,p),m=u.circle(0,0,2*h,g);l=s.insert("g",":first-child"),l.attr("class",Lr(t.cssClasses)).attr("style",Lr(c)),l.node()?.appendChild(f),l.node()?.appendChild(m)}else{l=s.insert("g",":first-child");const u=l.insert("circle",":first-child"),p=l.insert("circle");l.attr("class","basic label-container").attr("style",n),u.attr("class","outer-circle").attr("style",n).attr("r",a).attr("cx",0).attr("cy",0),p.attr("class","inner-circle").attr("style",n).attr("r",h).attr("cx",0).attr("cy",0)}return zt(t,l),t.intersect=function(u){return ft.info("DoubleCircle intersect",t,a,u),Bt.circle(t,a,u)},s}function $x(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:s}=Nt(t);t.label="",t.labelStyle=n;const i=e.insert("g").attr("class",Gt(t)).attr("id",t.domId??t.id),{cssStyles:o}=t,a=Ot.svg(i),{nodeBorder:h}=r,l=Pt(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(l.roughness=0);const c=a.circle(0,0,14,l),u=i.insert(()=>c,":first-child");return u.selectAll("path").attr("style",`fill: ${h} !important;`),o&&o.length>0&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",o),s&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",s),zt(t,u),t.intersect=function(p){return ft.info("filledCircle intersect",t,{radius:7,point:p}),Bt.circle(t,7,p)},i}async function Mx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=i.width+(t.padding??0),h=a+i.height,l=a+i.height,c=[{x:0,y:-h},{x:l,y:-h},{x:l/2,y:0}],{cssStyles:u}=t,p=Ot.svg(s),g=Pt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const f=ye(c),m=p.path(f,g),y=s.insert(()=>m,":first-child").attr("transform",`translate(${-h/2}, ${h/2})`);return u&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",u),n&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),t.width=a,t.height=h,zt(t,y),o.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${-h/2+(t.padding??0)/2+(i.y-(i.top??0))})`),t.intersect=function(v){return ft.info("Triangle intersect",t,c,v),Bt.polygon(t,c,v)},s}function Ax(e,t,{dir:r,config:{state:n,themeVariables:s}}){const{nodeStyles:i}=Nt(t);t.label="";const o=e.insert("g").attr("class",Gt(t)).attr("id",t.domId??t.id),{cssStyles:a}=t;let h=Math.max(70,t?.width??0),l=Math.max(10,t?.height??0);r==="LR"&&(h=Math.max(10,t?.width??0),l=Math.max(70,t?.height??0));const c=-1*h/2,u=-1*l/2,p=Ot.svg(o),g=Pt(t,{stroke:s.lineColor,fill:s.lineColor});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const f=p.rectangle(c,u,h,l,g),m=o.insert(()=>f,":first-child");a&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",a),i&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",i),zt(t,m);const y=n?.padding??0;return t.width&&t.height&&(t.width+=y/2||0,t.height+=y/2||0),t.intersect=function(v){return Bt.rect(t,v)},o}async function Ex(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=Math.max(80,i.width+2*(t.padding??0),t?.width??0),a=Math.max(50,i.height+2*(t.padding??0),t?.height??0),h=a/2,{cssStyles:l}=t,c=Ot.svg(s),u=Pt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const p=[{x:-o/2,y:-a/2},{x:o/2-h,y:-a/2},...ia(-o/2+h,0,h,50,90,270),{x:o/2-h,y:a/2},{x:-o/2,y:a/2}],g=ye(p),f=c.path(g,u),m=s.insert(()=>f,":first-child");return m.attr("class","basic label-container"),l&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",l),n&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",n),zt(t,m),t.intersect=function(y){return ft.info("Pill intersect",t,{radius:h,point:y}),Bt.polygon(t,p,y)},s}async function Lx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=i.height+(t.padding??0),a=i.width+2.5*(t.padding??0),{cssStyles:h}=t,l=Ot.svg(s),c=Pt(t,{});t.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");let u=a/2;u+=u/6;const p=o/2,g=u-p/2,f=[{x:-g,y:-p},{x:0,y:-p},{x:g,y:-p},{x:u,y:0},{x:g,y:p},{x:0,y:p},{x:-g,y:p},{x:-u,y:0}],m=ye(f),y=l.path(m,c),v=s.insert(()=>y,":first-child");return v.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",h),n&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",n),t.width=a,t.height=o,zt(t,v),t.intersect=function(x){return Bt.polygon(t,f,x)},s}async function Bx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.label="",t.labelStyle=r;const{shapeSvg:s}=await Zt(e,t,Gt(t)),i=Math.max(30,t?.width??0),o=Math.max(30,t?.height??0),{cssStyles:a}=t,h=Ot.svg(s),l=Pt(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=[{x:0,y:0},{x:i,y:0},{x:0,y:o},{x:i,y:o}],u=ye(c),p=h.path(u,l),g=s.insert(()=>p,":first-child");return g.attr("class","basic label-container"),a&&t.look!=="handDrawn"&&g.selectChildren("path").attr("style",a),n&&t.look!=="handDrawn"&&g.selectChildren("path").attr("style",n),g.attr("transform",`translate(${-i/2}, ${-o/2})`),zt(t,g),t.intersect=function(f){return ft.info("Pill intersect",t,{points:c}),Bt.polygon(t,c,f)},s}async function Ix(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:s}=Nt(t);t.labelStyle=s;const i=t.assetHeight??48,o=t.assetWidth??48,a=Math.max(i,o),h=n?.wrappingWidth;t.width=Math.max(a,h??0);const{shapeSvg:l,bbox:c,label:u}=await Zt(e,t,"icon-shape default"),p=t.pos==="t",g=a,f=a,{nodeBorder:m}=r,{stylesMap:y}=ao(t),v=-f/2,x=-g/2,k=t.label?8:0,_=Ot.svg(l),w=Pt(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");const S=_.rectangle(v,x,f,g,w),T=Math.max(f,c.width),L=g+c.height+k,F=_.rectangle(-T/2,-L/2,T,L,{...w,fill:"transparent",stroke:"none"}),A=l.insert(()=>S,":first-child"),B=l.insert(()=>F);if(t.icon){const M=l.append("g");M.html(`<g>${await _a(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const $=M.node().getBBox(),E=$.width,D=$.height,I=$.x,N=$.y;M.attr("transform",`translate(${-E/2-I},${p?c.height/2+k/2-D/2-N:-c.height/2-k/2-D/2-N})`),M.attr("style",`color: ${y.get("stroke")??m};`)}return u.attr("transform",`translate(${-c.width/2-(c.x-(c.left??0))},${p?-L/2:L/2-c.height})`),A.attr("transform",`translate(0,${p?c.height/2+k/2:-c.height/2-k/2})`),zt(t,B),t.intersect=function(M){if(ft.info("iconSquare intersect",t,M),!t.label)return Bt.rect(t,M);const $=t.x??0,E=t.y??0,D=t.height??0;let I=[];return I=p?[{x:$-c.width/2,y:E-D/2},{x:$+c.width/2,y:E-D/2},{x:$+c.width/2,y:E-D/2+c.height+k},{x:$+f/2,y:E-D/2+c.height+k},{x:$+f/2,y:E+D/2},{x:$-f/2,y:E+D/2},{x:$-f/2,y:E-D/2+c.height+k},{x:$-c.width/2,y:E-D/2+c.height+k}]:[{x:$-f/2,y:E-D/2},{x:$+f/2,y:E-D/2},{x:$+f/2,y:E-D/2+g},{x:$+c.width/2,y:E-D/2+g},{x:$+c.width/2/2,y:E+D/2},{x:$-c.width/2,y:E+D/2},{x:$-c.width/2,y:E-D/2+g},{x:$-f/2,y:E-D/2+g}],Bt.polygon(t,I,M)},l}async function Fx(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:s}=Nt(t);t.labelStyle=s;const i=t.assetHeight??48,o=t.assetWidth??48,a=Math.max(i,o),h=n?.wrappingWidth;t.width=Math.max(a,h??0);const{shapeSvg:l,bbox:c,label:u}=await Zt(e,t,"icon-shape default"),p=t.label?8:0,g=t.pos==="t",{nodeBorder:f,mainBkg:m}=r,{stylesMap:y}=ao(t),v=Ot.svg(l),x=Pt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const k=y.get("fill");x.stroke=k??m;const _=l.append("g");t.icon&&_.html(`<g>${await _a(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const w=_.node().getBBox(),S=w.width,T=w.height,L=w.x,F=w.y,A=Math.max(S,T)*Math.SQRT2+40,B=v.circle(0,0,A,x),M=Math.max(A,c.width),$=A+c.height+p,E=v.rectangle(-M/2,-$/2,M,$,{...x,fill:"transparent",stroke:"none"}),D=l.insert(()=>B,":first-child"),I=l.insert(()=>E);return _.attr("transform",`translate(${-S/2-L},${g?c.height/2+p/2-T/2-F:-c.height/2-p/2-T/2-F})`),_.attr("style",`color: ${y.get("stroke")??f};`),u.attr("transform",`translate(${-c.width/2-(c.x-(c.left??0))},${g?-$/2:$/2-c.height})`),D.attr("transform",`translate(0,${g?c.height/2+p/2:-c.height/2-p/2})`),zt(t,I),t.intersect=function(N){return ft.info("iconSquare intersect",t,N),Bt.rect(t,N)},l}async function Dx(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:s}=Nt(t);t.labelStyle=s;const i=t.assetHeight??48,o=t.assetWidth??48,a=Math.max(i,o),h=n?.wrappingWidth;t.width=Math.max(a,h??0);const{shapeSvg:l,bbox:c,halfPadding:u,label:p}=await Zt(e,t,"icon-shape default"),g=t.pos==="t",f=a+2*u,m=a+2*u,{nodeBorder:y,mainBkg:v}=r,{stylesMap:x}=ao(t),k=-m/2,_=-f/2,w=t.label?8:0,S=Ot.svg(l),T=Pt(t,{});t.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const L=x.get("fill");T.stroke=L??v;const F=S.path(Ls(k,_,m,f,5),T),A=Math.max(m,c.width),B=f+c.height+w,M=S.rectangle(-A/2,-B/2,A,B,{...T,fill:"transparent",stroke:"none"}),$=l.insert(()=>F,":first-child").attr("class","icon-shape2"),E=l.insert(()=>M);if(t.icon){const D=l.append("g");D.html(`<g>${await _a(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const I=D.node().getBBox(),N=I.width,q=I.height,K=I.x,Z=I.y;D.attr("transform",`translate(${-N/2-K},${g?c.height/2+w/2-q/2-Z:-c.height/2-w/2-q/2-Z})`),D.attr("style",`color: ${x.get("stroke")??y};`)}return p.attr("transform",`translate(${-c.width/2-(c.x-(c.left??0))},${g?-B/2:B/2-c.height})`),$.attr("transform",`translate(0,${g?c.height/2+w/2:-c.height/2-w/2})`),zt(t,E),t.intersect=function(D){if(ft.info("iconSquare intersect",t,D),!t.label)return Bt.rect(t,D);const I=t.x??0,N=t.y??0,q=t.height??0;let K=[];return K=g?[{x:I-c.width/2,y:N-q/2},{x:I+c.width/2,y:N-q/2},{x:I+c.width/2,y:N-q/2+c.height+w},{x:I+m/2,y:N-q/2+c.height+w},{x:I+m/2,y:N+q/2},{x:I-m/2,y:N+q/2},{x:I-m/2,y:N-q/2+c.height+w},{x:I-c.width/2,y:N-q/2+c.height+w}]:[{x:I-m/2,y:N-q/2},{x:I+m/2,y:N-q/2},{x:I+m/2,y:N-q/2+f},{x:I+c.width/2,y:N-q/2+f},{x:I+c.width/2/2,y:N+q/2},{x:I-c.width/2,y:N+q/2},{x:I-c.width/2,y:N-q/2+f},{x:I-m/2,y:N-q/2+f}],Bt.polygon(t,K,D)},l}async function Ox(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:s}=Nt(t);t.labelStyle=s;const i=t.assetHeight??48,o=t.assetWidth??48,a=Math.max(i,o),h=n?.wrappingWidth;t.width=Math.max(a,h??0);const{shapeSvg:l,bbox:c,halfPadding:u,label:p}=await Zt(e,t,"icon-shape default"),g=t.pos==="t",f=a+2*u,m=a+2*u,{nodeBorder:y,mainBkg:v}=r,{stylesMap:x}=ao(t),k=-m/2,_=-f/2,w=t.label?8:0,S=Ot.svg(l),T=Pt(t,{});t.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const L=x.get("fill");T.stroke=L??v;const F=S.path(Ls(k,_,m,f,.1),T),A=Math.max(m,c.width),B=f+c.height+w,M=S.rectangle(-A/2,-B/2,A,B,{...T,fill:"transparent",stroke:"none"}),$=l.insert(()=>F,":first-child"),E=l.insert(()=>M);if(t.icon){const D=l.append("g");D.html(`<g>${await _a(t.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const I=D.node().getBBox(),N=I.width,q=I.height,K=I.x,Z=I.y;D.attr("transform",`translate(${-N/2-K},${g?c.height/2+w/2-q/2-Z:-c.height/2-w/2-q/2-Z})`),D.attr("style",`color: ${x.get("stroke")??y};`)}return p.attr("transform",`translate(${-c.width/2-(c.x-(c.left??0))},${g?-B/2:B/2-c.height})`),$.attr("transform",`translate(0,${g?c.height/2+w/2:-c.height/2-w/2})`),zt(t,E),t.intersect=function(D){if(ft.info("iconSquare intersect",t,D),!t.label)return Bt.rect(t,D);const I=t.x??0,N=t.y??0,q=t.height??0;let K=[];return K=g?[{x:I-c.width/2,y:N-q/2},{x:I+c.width/2,y:N-q/2},{x:I+c.width/2,y:N-q/2+c.height+w},{x:I+m/2,y:N-q/2+c.height+w},{x:I+m/2,y:N+q/2},{x:I-m/2,y:N+q/2},{x:I-m/2,y:N-q/2+c.height+w},{x:I-c.width/2,y:N-q/2+c.height+w}]:[{x:I-m/2,y:N-q/2},{x:I+m/2,y:N-q/2},{x:I+m/2,y:N-q/2+f},{x:I+c.width/2,y:N-q/2+f},{x:I+c.width/2/2,y:N+q/2},{x:I-c.width/2,y:N+q/2},{x:I-c.width/2,y:N-q/2+f},{x:I-m/2,y:N-q/2+f}],Bt.polygon(t,K,D)},l}async function Rx(e,t,{config:{flowchart:r}}){const n=new Image;n.src=t?.img??"",await n.decode();const s=Number(n.naturalWidth.toString().replace("px","")),i=Number(n.naturalHeight.toString().replace("px",""));t.imageAspectRatio=s/i;const{labelStyles:o}=Nt(t);t.labelStyle=o;const a=r?.wrappingWidth;t.defaultWidth=r?.wrappingWidth;const h=Math.max(t.label?a??0:0,t?.assetWidth??s),l=t.constraint==="on"&&t?.assetHeight?t.assetHeight*t.imageAspectRatio:h,c=t.constraint==="on"?l/t.imageAspectRatio:t?.assetHeight??i;t.width=Math.max(l,a??0);const{shapeSvg:u,bbox:p,label:g}=await Zt(e,t,"image-shape default"),f=t.pos==="t",m=-l/2,y=-c/2,v=t.label?8:0,x=Ot.svg(u),k=Pt(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const _=x.rectangle(m,y,l,c,k),w=Math.max(l,p.width),S=c+p.height+v,T=x.rectangle(-w/2,-S/2,w,S,{...k,fill:"none",stroke:"none"}),L=u.insert(()=>_,":first-child"),F=u.insert(()=>T);if(t.img){const A=u.append("image");A.attr("href",t.img),A.attr("width",l),A.attr("height",c),A.attr("preserveAspectRatio","none"),A.attr("transform",`translate(${-l/2},${f?S/2-c:-S/2})`)}return g.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${f?-c/2-p.height/2-v/2:c/2-p.height/2+v/2})`),L.attr("transform",`translate(0,${f?p.height/2+v/2:-p.height/2-v/2})`),zt(t,F),t.intersect=function(A){if(ft.info("iconSquare intersect",t,A),!t.label)return Bt.rect(t,A);const B=t.x??0,M=t.y??0,$=t.height??0;let E=[];return E=f?[{x:B-p.width/2,y:M-$/2},{x:B+p.width/2,y:M-$/2},{x:B+p.width/2,y:M-$/2+p.height+v},{x:B+l/2,y:M-$/2+p.height+v},{x:B+l/2,y:M+$/2},{x:B-l/2,y:M+$/2},{x:B-l/2,y:M-$/2+p.height+v},{x:B-p.width/2,y:M-$/2+p.height+v}]:[{x:B-l/2,y:M-$/2},{x:B+l/2,y:M-$/2},{x:B+l/2,y:M-$/2+c},{x:B+p.width/2,y:M-$/2+c},{x:B+p.width/2/2,y:M+$/2},{x:B-p.width/2,y:M+$/2},{x:B-p.width/2,y:M-$/2+c},{x:B-l/2,y:M-$/2+c}],Bt.polygon(t,E,A)},u}async function Px(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=Math.max(i.width+2*(t.padding??0),t?.width??0),a=Math.max(i.height+2*(t.padding??0),t?.height??0),h=[{x:0,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:-3*a/6,y:-a}];let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=Ot.svg(s),p=Pt(t,{}),g=ye(h),f=u.path(g,p);l=s.insert(()=>f,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),c&&l.attr("style",c)}else l=Bs(s,o,a,h);return n&&l.attr("style",n),t.width=o,t.height=a,zt(t,l),t.intersect=function(u){return Bt.polygon(t,h,u)},s}async function Bc(e,t,r){const{labelStyles:n,nodeStyles:s}=Nt(t);t.labelStyle=n;const{shapeSvg:i,bbox:o}=await Zt(e,t,Gt(t)),a=Math.max(o.width+2*r.labelPaddingX,t?.width||0),h=Math.max(o.height+2*r.labelPaddingY,t?.height||0),l=-a/2,c=-h/2;let u,{rx:p,ry:g}=t;const{cssStyles:f}=t;if(r?.rx&&r.ry&&(p=r.rx,g=r.ry),t.look==="handDrawn"){const m=Ot.svg(i),y=Pt(t,{}),v=p||g?m.path(Ls(l,c,a,h,p||0),y):m.rectangle(l,c,a,h,y);u=i.insert(()=>v,":first-child"),u.attr("class","basic label-container").attr("style",Lr(f))}else u=i.insert("rect",":first-child"),u.attr("class","basic label-container").attr("style",s).attr("rx",Lr(p)).attr("ry",Lr(g)).attr("x",l).attr("y",c).attr("width",a).attr("height",h);return zt(t,u),t.calcIntersect=function(m,y){return Bt.rect(m,y)},t.intersect=function(m){return Bt.rect(t,m)},i}async function Nx(e,t){const{shapeSvg:r,bbox:n,label:s}=await Zt(e,t,"label"),i=r.insert("rect",":first-child");return i.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),s.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))}, ${-n.height/2-(n.y-(n.top??0))})`),zt(t,i),t.intersect=function(o){return Bt.rect(t,o)},r}async function zx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=Math.max(i.width+(t.padding??0),t?.width??0),a=Math.max(i.height+(t.padding??0),t?.height??0),h=[{x:0,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:-3*a/6,y:-a}];let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=Ot.svg(s),p=Pt(t,{}),g=ye(h),f=u.path(g,p);l=s.insert(()=>f,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),c&&l.attr("style",c)}else l=Bs(s,o,a,h);return n&&l.attr("style",n),t.width=o,t.height=a,zt(t,l),t.intersect=function(u){return Bt.polygon(t,h,u)},s}async function Ux(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=Math.max(i.width+(t.padding??0),t?.width??0),a=Math.max(i.height+(t.padding??0),t?.height??0),h=[{x:-3*a/6,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:0,y:-a}];let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=Ot.svg(s),p=Pt(t,{}),g=ye(h),f=u.path(g,p);l=s.insert(()=>f,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),c&&l.attr("style",c)}else l=Bs(s,o,a,h);return n&&l.attr("style",n),t.width=o,t.height=a,zt(t,l),t.intersect=function(u){return Bt.polygon(t,h,u)},s}function qx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.label="",t.labelStyle=r;const s=e.insert("g").attr("class",Gt(t)).attr("id",t.domId??t.id),{cssStyles:i}=t,o=Math.max(35,t?.width??0),a=Math.max(35,t?.height??0),h=[{x:o,y:0},{x:0,y:a+3.5},{x:o-14,y:a+3.5},{x:0,y:2*a},{x:o,y:a-3.5},{x:14,y:a-3.5}],l=Ot.svg(s),c=Pt(t,{});t.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const u=ye(h),p=l.path(u,c),g=s.insert(()=>p,":first-child");return i&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",i),n&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",n),g.attr("transform",`translate(-${o/2},${-a})`),zt(t,g),t.intersect=function(f){return ft.info("lightningBolt intersect",t,f),Bt.polygon(t,h,f)},s}C(Cx,"cylinder"),C(Sx,"dividedRectangle"),C(Tx,"doublecircle"),C($x,"filledCircle"),C(Mx,"flippedTriangle"),C(Ax,"forkJoin"),C(Ex,"halfRoundedRectangle"),C(Lx,"hexagon"),C(Bx,"hourglass"),C(Ix,"icon"),C(Fx,"iconCircle"),C(Dx,"iconRounded"),C(Ox,"iconSquare"),C(Rx,"imageSquare"),C(Px,"inv_trapezoid"),C(Bc,"drawRect"),C(Nx,"labelRect"),C(zx,"lean_left"),C(Ux,"lean_right"),C(qx,"lightningBolt");var zA=C((e,t,r,n,s,i,o)=>[`M${e},${t+i}`,`a${s},${i} 0,0,0 ${r},0`,`a${s},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${s},${i} 0,0,0 ${r},0`,"l0,"+-n,`M${e},${t+i+o}`,`a${s},${i} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),UA=C((e,t,r,n,s,i,o)=>[`M${e},${t+i}`,`M${e+r},${t+i}`,`a${s},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${s},${i} 0,0,0 ${r},0`,"l0,"+-n,`M${e},${t+i+o}`,`a${s},${i} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),qA=C((e,t,r,n,s,i)=>[`M${e-r/2},${-n/2}`,`a${s},${i} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function jx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=Math.max(i.width+(t.padding??0),t.width??0),h=a/2,l=h/(2.5+a/50),c=Math.max(i.height+l+(t.padding??0),t.height??0),u=.1*c;let p;const{cssStyles:g}=t;if(t.look==="handDrawn"){const f=Ot.svg(s),m=UA(0,0,a,c,h,l,u),y=qA(0,l,a,c,h,l),v=Pt(t,{}),x=f.path(m,v),k=f.path(y,v);s.insert(()=>k,":first-child").attr("class","line"),p=s.insert(()=>x,":first-child"),p.attr("class","basic label-container"),g&&p.attr("style",g)}else{const f=zA(0,0,a,c,h,l,u);p=s.insert("path",":first-child").attr("d",f).attr("class","basic label-container").attr("style",Lr(g)).attr("style",n)}return p.attr("label-offset-y",l),p.attr("transform",`translate(${-a/2}, ${-(c/2+l)})`),zt(t,p),o.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${-i.height/2+l-(i.y-(i.top??0))})`),t.intersect=function(f){const m=Bt.rect(t,f),y=m.x-(t.x??0);if(h!=0&&(Math.abs(y)<(t.width??0)/2||Math.abs(y)==(t.width??0)/2&&Math.abs(m.y-(t.y??0))>(t.height??0)/2-l)){let v=l*l*(1-y*y/(h*h));v>0&&(v=Math.sqrt(v)),v=l-v,f.y-(t.y??0)>0&&(v=-v),m.y+=v}return m},s}async function Wx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=Math.max(i.width+2*(t.padding??0),t?.width??0),h=Math.max(i.height+2*(t.padding??0),t?.height??0),l=h/4,c=h+l,{cssStyles:u}=t,p=Ot.svg(s),g=Pt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const f=[{x:-a/2-a/2*.1,y:-c/2},{x:-a/2-a/2*.1,y:c/2},...Ts(-a/2-a/2*.1,c/2,a/2+a/2*.1,c/2,l,.8),{x:a/2+a/2*.1,y:-c/2},{x:-a/2-a/2*.1,y:-c/2},{x:-a/2,y:-c/2},{x:-a/2,y:c/2*1.1},{x:-a/2,y:-c/2}],m=p.polygon(f.map(v=>[v.x,v.y]),g),y=s.insert(()=>m,":first-child");return y.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",u),n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),y.attr("transform",`translate(0,${-l/2})`),o.attr("transform",`translate(${-a/2+(t.padding??0)+a/2*.1/2-(i.x-(i.left??0))},${-h/2+(t.padding??0)-l/2-(i.y-(i.top??0))})`),zt(t,y),t.intersect=function(v){return Bt.polygon(t,f,v)},s}async function Hx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=Math.max(i.width+2*(t.padding??0),t?.width??0),h=Math.max(i.height+2*(t.padding??0),t?.height??0),l=-a/2,c=-h/2,{cssStyles:u}=t,p=Ot.svg(s),g=Pt(t,{}),f=[{x:l-5,y:c+5},{x:l-5,y:c+h+5},{x:l+a-5,y:c+h+5},{x:l+a-5,y:c+h},{x:l+a,y:c+h},{x:l+a,y:c+h-5},{x:l+a+5,y:c+h-5},{x:l+a+5,y:c-5},{x:l+5,y:c-5},{x:l+5,y:c},{x:l,y:c},{x:l,y:c+5}],m=[{x:l,y:c+5},{x:l+a-5,y:c+5},{x:l+a-5,y:c+h},{x:l+a,y:c+h},{x:l+a,y:c},{x:l,y:c}];t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=ye(f),v=p.path(y,g),x=ye(m),k=p.path(x,{...g,fill:"none"}),_=s.insert(()=>k,":first-child");return _.insert(()=>v,":first-child"),_.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",u),n&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",n),o.attr("transform",`translate(${-i.width/2-5-(i.x-(i.left??0))}, ${-i.height/2+5-(i.y-(i.top??0))})`),zt(t,_),t.intersect=function(w){return Bt.polygon(t,f,w)},s}async function Vx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=Math.max(i.width+2*(t.padding??0),t?.width??0),h=Math.max(i.height+2*(t.padding??0),t?.height??0),l=h/4,c=h+l,u=-a/2,p=-c/2,{cssStyles:g}=t,f=Ts(u-5,p+c+5,u+a-5,p+c+5,l,.8),m=f?.[f.length-1],y=[{x:u-5,y:p+5},{x:u-5,y:p+c+5},...f,{x:u+a-5,y:m.y-5},{x:u+a,y:m.y-5},{x:u+a,y:m.y-10},{x:u+a+5,y:m.y-10},{x:u+a+5,y:p-5},{x:u+5,y:p-5},{x:u+5,y:p},{x:u,y:p},{x:u,y:p+5}],v=[{x:u,y:p+5},{x:u+a-5,y:p+5},{x:u+a-5,y:m.y-5},{x:u+a,y:m.y-5},{x:u+a,y:p},{x:u,y:p}],x=Ot.svg(s),k=Pt(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const _=ye(y),w=x.path(_,k),S=ye(v),T=x.path(S,k),L=s.insert(()=>w,":first-child");return L.insert(()=>T),L.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",g),n&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",n),L.attr("transform",`translate(0,${-l/2})`),o.attr("transform",`translate(${-i.width/2-5-(i.x-(i.left??0))}, ${-i.height/2+5-l/2-(i.y-(i.top??0))})`),zt(t,L),t.intersect=function(F){return Bt.polygon(t,y,F)},s}async function Gx(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:s}=Nt(t);t.labelStyle=n,t.useHtmlLabels||Ar().flowchart?.htmlLabels!==!1||(t.centerLabel=!0);const{shapeSvg:i,bbox:o,label:a}=await Zt(e,t,Gt(t)),h=Math.max(o.width+2*(t.padding??0),t?.width??0),l=Math.max(o.height+2*(t.padding??0),t?.height??0),c=-h/2,u=-l/2,{cssStyles:p}=t,g=Ot.svg(i),f=Pt(t,{fill:r.noteBkgColor,stroke:r.noteBorderColor});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=g.rectangle(c,u,h,l,f),y=i.insert(()=>m,":first-child");return y.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",p),s&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",s),a.attr("transform",`translate(${-o.width/2-(o.x-(o.left??0))}, ${-o.height/2-(o.y-(o.top??0))})`),zt(t,y),t.intersect=function(v){return Bt.rect(t,v)},i}C(jx,"linedCylinder"),C(Wx,"linedWaveEdgedRect"),C(Hx,"multiRect"),C(Vx,"multiWaveEdgedRectangle"),C(Gx,"note");var jA=C((e,t,r)=>[`M${e+r/2},${t}`,`L${e+r},${t-r/2}`,`L${e+r/2},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function Yx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=i.width+t.padding+(i.height+t.padding),a=[{x:o/2,y:0},{x:o,y:-o/2},{x:o/2,y:-o},{x:0,y:-o/2}];let h;const{cssStyles:l}=t;if(t.look==="handDrawn"){const c=Ot.svg(s),u=Pt(t,{}),p=jA(0,0,o),g=c.path(p,u);h=s.insert(()=>g,":first-child").attr("transform",`translate(${-o/2+.5}, ${o/2})`),l&&h.attr("style",l)}else h=Bs(s,o,o,a),h.attr("transform",`translate(${-o/2+.5}, ${o/2})`);return n&&h.attr("style",n),zt(t,h),t.calcIntersect=function(c,u){const p=c.width,g=[{x:p/2,y:0},{x:p,y:-p/2},{x:p/2,y:-p},{x:0,y:-p/2}],f=Bt.polygon(c,g,u);return{x:f.x-.5,y:f.y-.5}},t.intersect=function(c){return this.calcIntersect(t,c)},s}async function Zx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=-Math.max(i.width+(t.padding??0),t?.width??0)/2,h=-Math.max(i.height+(t.padding??0),t?.height??0)/2,l=h/2,c=[{x:a+l,y:h},{x:a,y:0},{x:a+l,y:-h},{x:-a,y:-h},{x:-a,y:h}],{cssStyles:u}=t,p=Ot.svg(s),g=Pt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const f=ye(c),m=p.path(f,g),y=s.insert(()=>m,":first-child");return y.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",u),n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),y.attr("transform",`translate(${-l/2},0)`),o.attr("transform",`translate(${-l/2-i.width/2-(i.x-(i.left??0))}, ${-i.height/2-(i.y-(i.top??0))})`),zt(t,y),t.intersect=function(v){return Bt.polygon(t,c,v)},s}async function Xx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);let s;t.labelStyle=r,s=t.cssClasses?"node "+t.cssClasses:"node default";const i=e.insert("g").attr("class",s).attr("id",t.domId||t.id),o=i.insert("g"),a=i.insert("g").attr("class","label").attr("style",n),h=t.description,l=t.label,c=a.node().appendChild(await Zs(l,t.labelStyle,!0,!0));let u={width:0,height:0};if(gr(Oe()?.flowchart?.htmlLabels)){const L=c.children[0],F=we(c);u=L.getBoundingClientRect(),F.attr("width",u.width),F.attr("height",u.height)}ft.info("Text 2",h);const p=h||[],g=c.getBBox(),f=a.node().appendChild(await Zs(p.join?p.join("<br/>"):p,t.labelStyle,!0,!0)),m=f.children[0],y=we(f);u=m.getBoundingClientRect(),y.attr("width",u.width),y.attr("height",u.height);const v=(t.padding||0)/2;we(f).attr("transform","translate( "+(u.width>g.width?0:(g.width-u.width)/2)+", "+(g.height+v+5)+")"),we(c).attr("transform","translate( "+(u.width<g.width?0:-(g.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-v+3)+")");const x=u.width+(t.padding||0),k=u.height+(t.padding||0),_=-u.width/2-v,w=-u.height/2-v;let S,T;if(t.look==="handDrawn"){const L=Ot.svg(i),F=Pt(t,{}),A=L.path(Ls(_,w,x,k,t.rx||0),F),B=L.line(-u.width/2-v,-u.height/2-v+g.height+v,u.width/2+v,-u.height/2-v+g.height+v,F);T=i.insert(()=>(ft.debug("Rough node insert CXC",A),B),":first-child"),S=i.insert(()=>(ft.debug("Rough node insert CXC",A),A),":first-child")}else S=o.insert("rect",":first-child"),T=o.insert("line"),S.attr("class","outer title-state").attr("style",n).attr("x",-u.width/2-v).attr("y",-u.height/2-v).attr("width",u.width+(t.padding||0)).attr("height",u.height+(t.padding||0)),T.attr("class","divider").attr("x1",-u.width/2-v).attr("x2",u.width/2+v).attr("y1",-u.height/2-v+g.height+v).attr("y2",-u.height/2-v+g.height+v);return zt(t,S),t.intersect=function(L){return Bt.rect(t,L)},i}function Do(e,t,r,n,s,i,o){const a=(e+r)/2,h=(t+n)/2,l=Math.atan2(n-t,r-e),c=(r-e)/2/s,u=(n-t)/2/i,p=Math.sqrt(c**2+u**2);if(p>1)throw new Error("The given radii are too small to create an arc between the points.");const g=Math.sqrt(1-p**2),f=a+g*i*Math.sin(l)*(o?-1:1),m=h-g*s*Math.cos(l)*(o?-1:1),y=Math.atan2((t-m)/i,(e-f)/s);let v=Math.atan2((n-m)/i,(r-f)/s)-y;o&&v<0&&(v+=2*Math.PI),!o&&v>0&&(v-=2*Math.PI);const x=[];for(let k=0;k<20;k++){const _=y+k/19*v,w=f+s*Math.cos(_),S=m+i*Math.sin(_);x.push({x:w,y:S})}return x}async function Kx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=t?.padding??0,a=t?.padding??0,h=(t?.width?t?.width:i.width)+2*o,l=(t?.height?t?.height:i.height)+2*a,c=t.radius||5,u=t.taper||5,{cssStyles:p}=t,g=Ot.svg(s),f=Pt(t,{});t.stroke&&(f.stroke=t.stroke),t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=[{x:-h/2+u,y:-l/2},{x:h/2-u,y:-l/2},...Do(h/2-u,-l/2,h/2,-l/2+u,c,c,!0),{x:h/2,y:-l/2+u},{x:h/2,y:l/2-u},...Do(h/2,l/2-u,h/2-u,l/2,c,c,!0),{x:h/2-u,y:l/2},{x:-h/2+u,y:l/2},...Do(-h/2+u,l/2,-h/2,l/2-u,c,c,!0),{x:-h/2,y:l/2-u},{x:-h/2,y:-l/2+u},...Do(-h/2,-l/2+u,-h/2+u,-l/2,c,c,!0)],y=ye(m),v=g.path(y,f),x=s.insert(()=>v,":first-child");return x.attr("class","basic label-container outer-path"),p&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",p),n&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",n),zt(t,x),t.intersect=function(k){return Bt.polygon(t,m,k)},s}async function Qx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=t?.padding??0,h=Math.max(i.width+2*(t.padding??0),t?.width??0),l=Math.max(i.height+2*(t.padding??0),t?.height??0),c=-i.width/2-a,u=-i.height/2-a,{cssStyles:p}=t,g=Ot.svg(s),f=Pt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=[{x:c,y:u},{x:c+h+8,y:u},{x:c+h+8,y:u+l},{x:c-8,y:u+l},{x:c-8,y:u},{x:c,y:u},{x:c,y:u+l}],y=g.polygon(m.map(x=>[x.x,x.y]),f),v=s.insert(()=>y,":first-child");return v.attr("class","basic label-container").attr("style",Lr(p)),n&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",n),p&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",n),o.attr("transform",`translate(${-h/2+4+(t.padding??0)-(i.x-(i.left??0))},${-l/2+(t.padding??0)-(i.y-(i.top??0))})`),zt(t,v),t.intersect=function(x){return Bt.rect(t,x)},s}async function Jx(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=Math.max(i.width+2*(t.padding??0),t?.width??0),h=Math.max(i.height+2*(t.padding??0),t?.height??0),l=-a/2,c=-h/2,{cssStyles:u}=t,p=Ot.svg(s),g=Pt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const f=[{x:l,y:c},{x:l,y:c+h},{x:l+a,y:c+h},{x:l+a,y:c-h/2}],m=ye(f),y=p.path(m,g),v=s.insert(()=>y,":first-child");return v.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",u),n&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",n),v.attr("transform",`translate(0, ${h/4})`),o.attr("transform",`translate(${-a/2+(t.padding??0)-(i.x-(i.left??0))}, ${-h/4+(t.padding??0)-(i.y-(i.top??0))})`),zt(t,v),t.intersect=function(x){return Bt.polygon(t,f,x)},s}async function tk(e,t){return Bc(e,t,{rx:0,ry:0,labelPaddingX:t.labelPaddingX??2*(t?.padding||0),labelPaddingY:1*(t?.padding||0)})}async function ek(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=i.height+t.padding,a=i.width+o/4+t.padding,h=o/2,{cssStyles:l}=t,c=Ot.svg(s),u=Pt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const p=[{x:-a/2+h,y:-o/2},{x:a/2-h,y:-o/2},...ia(-a/2+h,0,h,50,90,270),{x:a/2-h,y:o/2},...ia(a/2-h,0,h,50,270,450)],g=ye(p),f=c.path(g,u),m=s.insert(()=>f,":first-child");return m.attr("class","basic label-container outer-path"),l&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",l),n&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",n),zt(t,m),t.intersect=function(y){return Bt.polygon(t,p,y)},s}async function rk(e,t){return Bc(e,t,{rx:5,ry:5})}function nk(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:s}=Nt(t);t.labelStyle=n;const{cssStyles:i}=t,{lineColor:o,stateBorder:a,nodeBorder:h}=r,l=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),c=Ot.svg(l),u=Pt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const p=c.circle(0,0,14,{...u,stroke:o,strokeWidth:2}),g=a??h,f=c.circle(0,0,5,{...u,fill:g,stroke:g,strokeWidth:2,fillStyle:"solid"}),m=l.insert(()=>p,":first-child");return m.insert(()=>f),i&&m.selectAll("path").attr("style",i),s&&m.selectAll("path").attr("style",s),zt(t,m),t.intersect=function(y){return Bt.circle(t,7,y)},l}function sk(e,t,{config:{themeVariables:r}}){const{lineColor:n}=r,s=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let i;if(t.look==="handDrawn"){const o=Ot.svg(s).circle(0,0,14,c5(n));i=s.insert(()=>o),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else i=s.insert("circle",":first-child"),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return zt(t,i),t.intersect=function(o){return Bt.circle(t,7,o)},s}async function ik(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=(t?.padding||0)/2,a=i.width+t.padding,h=i.height+t.padding,l=-i.width/2-o,c=-i.height/2-o,u=[{x:0,y:0},{x:a,y:0},{x:a,y:-h},{x:0,y:-h},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-h},{x:-8,y:-h},{x:-8,y:0}];if(t.look==="handDrawn"){const p=Ot.svg(s),g=Pt(t,{}),f=p.rectangle(l-8,c,a+16,h,g),m=p.line(l,c,l,c+h,g),y=p.line(l+a,c,l+a,c+h,g);s.insert(()=>m,":first-child"),s.insert(()=>y,":first-child");const v=s.insert(()=>f,":first-child"),{cssStyles:x}=t;v.attr("class","basic label-container").attr("style",Lr(x)),zt(t,v)}else{const p=Bs(s,a,h,u);n&&p.attr("style",n),zt(t,p)}return t.intersect=function(p){return Bt.polygon(t,u,p)},s}async function ok(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=Math.max(i.width+2*(t.padding??0),t?.width??0),a=Math.max(i.height+2*(t.padding??0),t?.height??0),h=-o/2,l=-a/2,c=.2*a,u=.2*a,{cssStyles:p}=t,g=Ot.svg(s),f=Pt(t,{}),m=[{x:h-c/2,y:l},{x:h+o+c/2,y:l},{x:h+o+c/2,y:l+a},{x:h-c/2,y:l+a}],y=[{x:h+o-c/2,y:l+a},{x:h+o+c/2,y:l+a},{x:h+o+c/2,y:l+a-u}];t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const v=ye(m),x=g.path(v,f),k=ye(y),_=g.path(k,{...f,fillStyle:"solid"}),w=s.insert(()=>_,":first-child");return w.insert(()=>x,":first-child"),w.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",n),zt(t,w),t.intersect=function(S){return Bt.polygon(t,m,S)},s}async function ak(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=Math.max(i.width+2*(t.padding??0),t?.width??0),h=Math.max(i.height+2*(t.padding??0),t?.height??0),l=h/4,c=.2*a,u=.2*h,p=h+l,{cssStyles:g}=t,f=Ot.svg(s),m=Pt(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:-a/2-a/2*.1,y:p/2},...Ts(-a/2-a/2*.1,p/2,a/2+a/2*.1,p/2,l,.8),{x:a/2+a/2*.1,y:-p/2},{x:-a/2-a/2*.1,y:-p/2}],v=-a/2+a/2*.1,x=-p/2-.4*u,k=[{x:v+a-c,y:1.4*(x+h)},{x:v+a,y:x+h-u},{x:v+a,y:.9*(x+h)},...Ts(v+a,1.3*(x+h),v+a-c,1.5*(x+h),.03*-h,.5)],_=ye(y),w=f.path(_,m),S=ye(k),T=f.path(S,{...m,fillStyle:"solid"}),L=s.insert(()=>T,":first-child");return L.insert(()=>w,":first-child"),L.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",g),n&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",n),L.attr("transform",`translate(0,${-l/2})`),o.attr("transform",`translate(${-a/2+(t.padding??0)-(i.x-(i.left??0))},${-h/2+(t.padding??0)-l/2-(i.y-(i.top??0))})`),zt(t,L),t.intersect=function(F){return Bt.polygon(t,y,F)},s}async function lk(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=Math.max(i.width+t.padding,t?.width||0),a=Math.max(i.height+t.padding,t?.height||0),h=-o/2,l=-a/2,c=s.insert("rect",":first-child");return c.attr("class","text").attr("style",n).attr("rx",0).attr("ry",0).attr("x",h).attr("y",l).attr("width",o).attr("height",a),zt(t,c),t.intersect=function(u){return Bt.rect(t,u)},s}C(Yx,"question"),C(Zx,"rect_left_inv_arrow"),C(Xx,"rectWithTitle"),C(Do,"generateArcPoints"),C(Kx,"roundedRect"),C(Qx,"shadedProcess"),C(Jx,"slopedRect"),C(tk,"squareRect"),C(ek,"stadium"),C(rk,"state"),C(nk,"stateEnd"),C(sk,"stateStart"),C(ik,"subroutine"),C(ok,"taggedRect"),C(ak,"taggedWaveEdgedRectangle"),C(lk,"text");var WA=C((e,t,r,n,s,i)=>`M${e},${t}
    a${s},${i} 0,0,1 0,${-n}
    l${r},0
    a${s},${i} 0,0,1 0,${n}
    M${r},${-n}
    a${s},${i} 0,0,0 0,${n}
    l${-r},0`,"createCylinderPathD"),HA=C((e,t,r,n,s,i)=>[`M${e},${t}`,`M${e+r},${t}`,`a${s},${i} 0,0,0 0,${-n}`,`l${-r},0`,`a${s},${i} 0,0,0 0,${n}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),VA=C((e,t,r,n,s,i)=>[`M${e+r/2},${-n/2}`,`a${s},${i} 0,0,0 0,${n}`].join(" "),"createInnerCylinderPathD");async function ck(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o,halfPadding:a}=await Zt(e,t,Gt(t)),h=t.look==="neo"?2*a:a,l=i.height+h,c=l/2,u=c/(2.5+l/50),p=i.width+u+h,{cssStyles:g}=t;let f;if(t.look==="handDrawn"){const m=Ot.svg(s),y=HA(0,0,p,l,u,c),v=VA(0,0,p,l,u,c),x=m.path(y,Pt(t,{})),k=m.path(v,Pt(t,{fill:"none"}));f=s.insert(()=>k,":first-child"),f=s.insert(()=>x,":first-child"),f.attr("class","basic label-container"),g&&f.attr("style",g)}else{const m=WA(0,0,p,l,u,c);f=s.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",Lr(g)).attr("style",n),f.attr("class","basic label-container"),g&&f.selectAll("path").attr("style",g),n&&f.selectAll("path").attr("style",n)}return f.attr("label-offset-x",u),f.attr("transform",`translate(${-p/2}, ${l/2} )`),o.attr("transform",`translate(${-i.width/2-u-(i.x-(i.left??0))}, ${-i.height/2-(i.y-(i.top??0))})`),zt(t,f),t.intersect=function(m){const y=Bt.rect(t,m),v=y.y-(t.y??0);if(c!=0&&(Math.abs(v)<(t.height??0)/2||Math.abs(v)==(t.height??0)/2&&Math.abs(y.x-(t.x??0))>(t.width??0)/2-u)){let x=u*u*(1-v*v/(c*c));x!=0&&(x=Math.sqrt(Math.abs(x))),x=u-x,m.x-(t.x??0)>0&&(x=-x),y.x+=x}return y},s}async function hk(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=i.width+t.padding,a=i.height+t.padding,h=[{x:-3*a/6,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:0,y:-a}];let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=Ot.svg(s),p=Pt(t,{}),g=ye(h),f=u.path(g,p);l=s.insert(()=>f,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),c&&l.attr("style",c)}else l=Bs(s,o,a,h);return n&&l.attr("style",n),t.width=o,t.height=a,zt(t,l),t.intersect=function(u){return Bt.polygon(t,h,u)},s}async function dk(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=Math.max(60,i.width+2*(t.padding??0),t?.width??0),a=Math.max(20,i.height+2*(t.padding??0),t?.height??0),{cssStyles:h}=t,l=Ot.svg(s),c=Pt(t,{});t.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const u=[{x:-o/2*.8,y:-a/2},{x:o/2*.8,y:-a/2},{x:o/2,y:-a/2*.6},{x:o/2,y:a/2},{x:-o/2,y:a/2},{x:-o/2,y:-a/2*.6}],p=ye(u),g=l.path(p,c),f=s.insert(()=>g,":first-child");return f.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&f.selectChildren("path").attr("style",h),n&&t.look!=="handDrawn"&&f.selectChildren("path").attr("style",n),zt(t,f),t.intersect=function(m){return Bt.polygon(t,u,m)},s}async function uk(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=gr(Oe().flowchart?.htmlLabels),h=i.width+(t.padding??0),l=h+i.height,c=h+i.height,u=[{x:0,y:0},{x:c,y:0},{x:c/2,y:-l}],{cssStyles:p}=t,g=Ot.svg(s),f=Pt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=ye(u),y=g.path(m,f),v=s.insert(()=>y,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return p&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",p),n&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",n),t.width=h,t.height=l,zt(t,v),o.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${l/2-(i.height+(t.padding??0)/(a?2:1)-(i.y-(i.top??0)))})`),t.intersect=function(x){return ft.info("Triangle intersect",t,u,x),Bt.polygon(t,u,x)},s}async function pk(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=Math.max(i.width+2*(t.padding??0),t?.width??0),h=Math.max(i.height+2*(t.padding??0),t?.height??0),l=h/8,c=h+l,{cssStyles:u}=t,p=70-a,g=p>0?p/2:0,f=Ot.svg(s),m=Pt(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:-a/2-g,y:c/2},...Ts(-a/2-g,c/2,a/2+g,c/2,l,.8),{x:a/2+g,y:-c/2},{x:-a/2-g,y:-c/2}],v=ye(y),x=f.path(v,m),k=s.insert(()=>x,":first-child");return k.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",u),n&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",n),k.attr("transform",`translate(0,${-l/2})`),o.attr("transform",`translate(${-a/2+(t.padding??0)-(i.x-(i.left??0))},${-h/2+(t.padding??0)-l-(i.y-(i.top??0))})`),zt(t,k),t.intersect=function(_){return Bt.polygon(t,y,_)},s}async function gk(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Zt(e,t,Gt(t)),o=Math.max(i.width+2*(t.padding??0),t?.width??0),a=Math.max(i.height+2*(t.padding??0),t?.height??0),h=o/a;let l=o,c=a;l>c*h?c=l/h:l=c*h,l=Math.max(l,100),c=Math.max(c,50);const u=Math.min(.2*c,c/4),p=c+2*u,{cssStyles:g}=t,f=Ot.svg(s),m=Pt(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:-l/2,y:p/2},...Ts(-l/2,p/2,l/2,p/2,u,1),{x:l/2,y:-p/2},...Ts(l/2,-p/2,-l/2,-p/2,u,-1)],v=ye(y),x=f.path(v,m),k=s.insert(()=>x,":first-child");return k.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",g),n&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",n),zt(t,k),t.intersect=function(_){return Bt.polygon(t,y,_)},s}async function fk(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:o}=await Zt(e,t,Gt(t)),a=Math.max(i.width+2*(t.padding??0),t?.width??0),h=Math.max(i.height+2*(t.padding??0),t?.height??0),l=-a/2,c=-h/2,{cssStyles:u}=t,p=Ot.svg(s),g=Pt(t,{}),f=[{x:l-5,y:c-5},{x:l-5,y:c+h},{x:l+a,y:c+h},{x:l+a,y:c-5}],m=`M${l-5},${c-5} L${l+a},${c-5} L${l+a},${c+h} L${l-5},${c+h} L${l-5},${c-5}
                M${l-5},${c} L${l+a},${c}
                M${l},${c-5} L${l},${c+h}`;t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=p.path(m,g),v=s.insert(()=>y,":first-child");return v.attr("transform","translate(2.5, 2.5)"),v.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",u),n&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",n),o.attr("transform",`translate(${-i.width/2+2.5-(i.x-(i.left??0))}, ${-i.height/2+2.5-(i.y-(i.top??0))})`),zt(t,v),t.intersect=function(x){return Bt.polygon(t,f,x)},s}async function kp(e,t){const r=t;if(r.alias&&(t.label=r.alias),t.look==="handDrawn"){const{themeVariables:H}=Ar(),{background:j}=H,V={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${j}`]};await kp(e,V)}const n=Ar();t.useHtmlLabels=n.htmlLabels;let s=n.er?.diagramPadding??10,i=n.er?.entityPadding??6;const{cssStyles:o}=t,{labelStyles:a,nodeStyles:h}=Nt(t);if(r.attributes.length===0&&t.label){const H={rx:0,ry:0,labelPaddingX:s,labelPaddingY:1.5*s};ns(t.label,n)+2*H.labelPaddingX<n.er.minEntityWidth&&(t.width=n.er.minEntityWidth);const j=await Bc(e,t,H);if(!gr(n.htmlLabels)){const V=j.select("text"),rt=V.node()?.getBBox();V.attr("transform",`translate(${-rt.width/2}, 0)`)}return j}n.htmlLabels||(s*=1.25,i*=1.25);let l=Gt(t);l||(l="node default");const c=e.insert("g").attr("class",l).attr("id",t.domId||t.id),u=await $i(c,t.label??"",n,0,0,["name"],a);u.height+=i;let p=0;const g=[],f=[];let m=0,y=0,v=0,x=0,k=!0,_=!0;for(const H of r.attributes){const j=await $i(c,H.type,n,0,p,["attribute-type"],a);m=Math.max(m,j.width+s);const V=await $i(c,H.name,n,0,p,["attribute-name"],a);y=Math.max(y,V.width+s);const rt=await $i(c,H.keys.join(),n,0,p,["attribute-keys"],a);v=Math.max(v,rt.width+s);const tt=await $i(c,H.comment,n,0,p,["attribute-comment"],a);x=Math.max(x,tt.width+s);const it=Math.max(j.height,V.height,rt.height,tt.height)+i;f.push({yOffset:p,rowHeight:it}),p+=it}let w=4;v<=s&&(k=!1,v=0,w--),x<=s&&(_=!1,x=0,w--);const S=c.node().getBBox();if(u.width+2*s-(m+y+v+x)>0){const H=u.width+2*s-(m+y+v+x);m+=H/w,y+=H/w,v>0&&(v+=H/w),x>0&&(x+=H/w)}const T=m+y+v+x,L=Ot.svg(c),F=Pt(t,{});t.look!=="handDrawn"&&(F.roughness=0,F.fillStyle="solid");let A=0;f.length>0&&(A=f.reduce((H,j)=>H+(j?.rowHeight??0),0));const B=Math.max(S.width+2*s,t?.width||0,T),M=Math.max((A??0)+u.height,t?.height||0),$=-B/2,E=-M/2;c.selectAll("g:not(:first-child)").each((H,j,V)=>{const rt=we(V[j]),tt=rt.attr("transform");let it=0,nt=0;if(tt){const ct=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(tt);ct&&(it=parseFloat(ct[1]),nt=parseFloat(ct[2]),rt.attr("class").includes("attribute-name")?it+=m:rt.attr("class").includes("attribute-keys")?it+=m+y:rt.attr("class").includes("attribute-comment")&&(it+=m+y+v))}rt.attr("transform",`translate(${$+s/2+it}, ${nt+E+u.height+i/2})`)}),c.select(".name").attr("transform","translate("+-u.width/2+", "+(E+i/2)+")");const D=L.rectangle($,E,B,M,F),I=c.insert(()=>D,":first-child").attr("style",o.join("")),{themeVariables:N}=Ar(),{rowEven:q,rowOdd:K,nodeBorder:Z}=N;g.push(0);for(const[H,j]of f.entries()){const V=(H+1)%2==0&&j.yOffset!==0,rt=L.rectangle($,u.height+E+j?.yOffset,B,j?.rowHeight,{...F,fill:V?q:K,stroke:Z});c.insert(()=>rt,"g.label").attr("style",o.join("")).attr("class","row-rect-"+(V?"even":"odd"))}let U=L.line($,u.height+E,B+$,u.height+E,F);c.insert(()=>U).attr("class","divider"),U=L.line(m+$,u.height+E,m+$,M+E,F),c.insert(()=>U).attr("class","divider"),k&&(U=L.line(m+y+$,u.height+E,m+y+$,M+E,F),c.insert(()=>U).attr("class","divider")),_&&(U=L.line(m+y+v+$,u.height+E,m+y+v+$,M+E,F),c.insert(()=>U).attr("class","divider"));for(const H of g)U=L.line($,u.height+E+H,B+$,u.height+E+H,F),c.insert(()=>U).attr("class","divider");if(zt(t,I),h&&t.look!=="handDrawn"){const H=h.split(";"),j=H?.filter(V=>V.includes("stroke"))?.map(V=>`${V}`).join("; ");c.selectAll("path").attr("style",j??""),c.selectAll(".row-rect-even path").attr("style",h)}return t.intersect=function(H){return Bt.rect(t,H)},c}async function $i(e,t,r,n=0,s=0,i=[],o=""){const a=e.insert("g").attr("class",`label ${i.join(" ")}`).attr("transform",`translate(${n}, ${s})`).attr("style",o);t!==jg(t)&&(t=(t=jg(t)).replaceAll("<","&lt;").replaceAll(">","&gt;"));const h=a.node().appendChild(await Es(a,t,{width:ns(t,r)+100,style:o,useHtmlLabels:r.htmlLabels},r));if(t.includes("&lt;")||t.includes("&gt;")){let c=h.children[0];for(c.textContent=c.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");c.childNodes[0];)c=c.childNodes[0],c.textContent=c.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let l=h.getBBox();if(gr(r.htmlLabels)){const c=h.children[0];c.style.textAlign="start";const u=we(h);l=c.getBoundingClientRect(),u.attr("width",l.width),u.attr("height",l.height)}return l}async function mk(e,t,r,n,s=r.class.padding??12){const i=n?0:3,o=e.insert("g").attr("class",Gt(t)).attr("id",t.domId||t.id);let a=null,h=null,l=null,c=null,u=0,p=0,g=0;if(a=o.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const x=t.annotations[0];await Oo(a,{text:`«${x}»`},0),u=a.node().getBBox().height}h=o.insert("g").attr("class","label-group text"),await Oo(h,t,0,["font-weight: bolder"]);const f=h.node().getBBox();p=f.height,l=o.insert("g").attr("class","members-group text");let m=0;for(const x of t.members)m+=await Oo(l,x,m,[x.parseClassifier()])+i;g=l.node().getBBox().height,g<=0&&(g=s/2),c=o.insert("g").attr("class","methods-group text");let y=0;for(const x of t.methods)y+=await Oo(c,x,y,[x.parseClassifier()])+i;let v=o.node().getBBox();if(a!==null){const x=a.node().getBBox();a.attr("transform",`translate(${-x.width/2})`)}return h.attr("transform",`translate(${-f.width/2}, ${u})`),v=o.node().getBBox(),l.attr("transform",`translate(0, ${u+p+2*s})`),v=o.node().getBBox(),c.attr("transform",`translate(0, ${u+p+(g?g+4*s:2*s)})`),v=o.node().getBBox(),{shapeSvg:o,bbox:v}}async function Oo(e,t,r,n=[]){const s=e.insert("g").attr("class","label").attr("style",n.join("; ")),i=Ar();let o="useHtmlLabels"in t?t.useHtmlLabels:gr(i.htmlLabels)??!0,a="";a="text"in t?t.text:t.label,!o&&a.startsWith("\\")&&(a=a.substring(1)),to(a)&&(o=!0);const h=await Es(s,Uu(pi(a)),{width:ns(a,i)+50,classes:"markdown-node-label",useHtmlLabels:o},i);let l,c=1;if(o){const u=h.children[0],p=we(h);c=u.innerHTML.split("<br>").length,u.innerHTML.includes("</math>")&&(c+=u.innerHTML.split("<mrow>").length-1);const g=u.getElementsByTagName("img");if(g){const f=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map(m=>new Promise(y=>{function v(){if(m.style.display="flex",m.style.flexDirection="column",f){const x=i.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,k=5,_=parseInt(x,10)*k+"px";m.style.minWidth=_,m.style.maxWidth=_}else m.style.width="100%";y(m)}C(v,"setupImage"),setTimeout(()=>{m.complete&&v()}),m.addEventListener("error",v),m.addEventListener("load",v)})))}l=u.getBoundingClientRect(),p.attr("width",l.width),p.attr("height",l.height)}else{n.includes("font-weight: bolder")&&we(h).selectAll("tspan").attr("font-weight",""),c=h.children.length;const u=h.children[0];(h.textContent===""||h.textContent.includes("&gt"))&&(u.textContent=a[0]+a.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),a[1]===" "&&(u.textContent=u.textContent[0]+" "+u.textContent.substring(1))),u.textContent==="undefined"&&(u.textContent=""),l=h.getBBox()}return s.attr("transform","translate(0,"+(-l.height/(2*c)+r)+")"),l.height}async function yk(e,t){const r=Oe(),n=r.class.padding??12,s=n,i=t.useHtmlLabels??gr(r.htmlLabels)??!0,o=t;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:a,bbox:h}=await mk(e,t,r,i,s),{labelStyles:l,nodeStyles:c}=Nt(t);t.labelStyle=l,t.cssStyles=o.styles||"";const u=o.styles?.join(";")||c||"";t.cssStyles||(t.cssStyles=u.replaceAll("!important","").split(";"));const p=o.members.length===0&&o.methods.length===0&&!r.class?.hideEmptyMembersBox,g=Ot.svg(a),f=Pt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=h.width;let y=h.height;o.members.length===0&&o.methods.length===0?y+=s:o.members.length>0&&o.methods.length===0&&(y+=2*s);const v=-m/2,x=-y/2,k=g.rectangle(v-n,x-n-(p?n:o.members.length===0&&o.methods.length===0?-n/2:0),m+2*n,y+2*n+(p?2*n:o.members.length===0&&o.methods.length===0?-n:0),f),_=a.insert(()=>k,":first-child");_.attr("class","basic label-container");const w=_.node().getBBox();a.selectAll(".text").each((F,A,B)=>{const M=we(B[A]),$=M.attr("transform");let E=0;if($){const N=RegExp(/translate\(([^,]+),([^)]+)\)/).exec($);N&&(E=parseFloat(N[2]))}let D=E+x+n-(p?n:o.members.length===0&&o.methods.length===0?-n/2:0);i||(D-=4);let I=v;(M.attr("class").includes("label-group")||M.attr("class").includes("annotation-group"))&&(I=-M.node()?.getBBox().width/2||0,a.selectAll("text").each(function(N,q,K){window.getComputedStyle(K[q]).textAnchor==="middle"&&(I=0)})),M.attr("transform",`translate(${I}, ${D})`)});const S=a.select(".annotation-group").node().getBBox().height-(p?n/2:0)||0,T=a.select(".label-group").node().getBBox().height-(p?n/2:0)||0,L=a.select(".members-group").node().getBBox().height-(p?n/2:0)||0;if(o.members.length>0||o.methods.length>0||p){const F=g.line(w.x,S+T+x+n,w.x+w.width,S+T+x+n,f);a.insert(()=>F).attr("class","divider").attr("style",u)}if(p||o.members.length>0||o.methods.length>0){const F=g.line(w.x,S+T+L+x+2*s+n,w.x+w.width,S+T+L+x+n+2*s,f);a.insert(()=>F).attr("class","divider").attr("style",u)}if(o.look!=="handDrawn"&&a.selectAll("path").attr("style",u),_.select(":nth-child(2)").attr("style",u),a.selectAll(".divider").select("path").attr("style",u),t.labelStyle?a.selectAll("span").attr("style",t.labelStyle):a.selectAll("span").attr("style",u),!i){const F=RegExp(/color\s*:\s*([^;]*)/),A=F.exec(u);if(A){const B=A[0].replace("color","fill");a.selectAll("tspan").attr("style",B)}else if(l){const B=F.exec(l);if(B){const M=B[0].replace("color","fill");a.selectAll("tspan").attr("style",M)}}}return zt(t,_),t.intersect=function(F){return Bt.rect(t,F)},a}async function vk(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const s=t,i=t,o="verifyMethod"in t,a=Gt(t),h=e.insert("g").attr("class",a).attr("id",t.domId??t.id);let l;l=o?await Ln(h,`&lt;&lt;${s.type}&gt;&gt;`,0,t.labelStyle):await Ln(h,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let c=l;const u=await Ln(h,s.name,c,t.labelStyle+"; font-weight: bold;");c+=u+20,o?(c+=await Ln(h,s.requirementId?`ID: ${s.requirementId}`:"",c,t.labelStyle),c+=await Ln(h,s.text?`Text: ${s.text}`:"",c,t.labelStyle),c+=await Ln(h,s.risk?`Risk: ${s.risk}`:"",c,t.labelStyle),await Ln(h,s.verifyMethod?`Verification: ${s.verifyMethod}`:"",c,t.labelStyle)):(c+=await Ln(h,i.type?`Type: ${i.type}`:"",c,t.labelStyle),await Ln(h,i.docRef?`Doc Ref: ${i.docRef}`:"",c,t.labelStyle));const p=(h.node()?.getBBox().width??200)+20,g=(h.node()?.getBBox().height??200)+20,f=-p/2,m=-g/2,y=Ot.svg(h),v=Pt(t,{});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const x=y.rectangle(f,m,p,g,v),k=h.insert(()=>x,":first-child");if(k.attr("class","basic label-container").attr("style",n),h.selectAll(".label").each((_,w,S)=>{const T=we(S[w]),L=T.attr("transform");let F=0,A=0;if(L){const $=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(L);$&&(F=parseFloat($[1]),A=parseFloat($[2]))}const B=A-g/2;let M=f+10;w!==0&&w!==1||(M=F),T.attr("transform",`translate(${M}, ${B+20})`)}),c>l+u+20){const _=y.line(f,m+l+u+20,f+p,m+l+u+20,v);h.insert(()=>_).attr("style",n)}return zt(t,k),t.intersect=function(_){return Bt.rect(t,_)},h}async function Ln(e,t,r,n=""){if(t==="")return 0;const s=e.insert("g").attr("class","label").attr("style",n),i=Oe(),o=i.htmlLabels??!0,a=await Es(s,Uu(pi(t)),{width:ns(t,i)+50,classes:"markdown-node-label",useHtmlLabels:o,style:n},i);let h;if(o){const l=a.children[0],c=we(a);h=l.getBoundingClientRect(),c.attr("width",h.width),c.attr("height",h.height)}else{const l=a.children[0];for(const c of l.children)c.textContent=c.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),n&&c.setAttribute("style",n);h=a.getBBox(),h.height+=6}return s.attr("transform",`translate(${-h.width/2},${-h.height/2+r})`),h.height}C(ck,"tiltedCylinder"),C(hk,"trapezoid"),C(dk,"trapezoidalPentagon"),C(uk,"triangle"),C(pk,"waveEdgedRectangle"),C(gk,"waveRectangle"),C(fk,"windowPane"),C(kp,"erBox"),C($i,"addText"),C(mk,"textHelper"),C(Oo,"addText"),C(yk,"classBox"),C(vk,"requirementBox"),C(Ln,"addText");var GA=C(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function bk(e,t,{config:r}){const{labelStyles:n,nodeStyles:s}=Nt(t);t.labelStyle=n||"";const i=t.width;t.width=(t.width??200)-10;const{shapeSvg:o,bbox:a,label:h}=await Zt(e,t,Gt(t)),l=t.padding||10;let c,u="";"ticket"in t&&t.ticket&&r?.kanban?.ticketBaseUrl&&(u=r?.kanban?.ticketBaseUrl.replace("#TICKET#",t.ticket),c=o.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",u).attr("target","_blank"));const p={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let g,f;({label:g,bbox:f}=c?await mh(c,"ticket"in t&&t.ticket||"",p):await mh(o,"ticket"in t&&t.ticket||"",p));const{label:m,bbox:y}=await mh(o,"assigned"in t&&t.assigned||"",p);t.width=i;const v=t?.width||0,x=Math.max(f.height,y.height)/2,k=Math.max(a.height+20,t?.height||0)+x,_=-v/2,w=-k/2;let S;h.attr("transform","translate("+(l-v/2)+", "+(-x-a.height/2)+")"),g.attr("transform","translate("+(l-v/2)+", "+(-x+a.height/2)+")"),m.attr("transform","translate("+(l+v/2-y.width-20)+", "+(-x+a.height/2)+")");const{rx:T,ry:L}=t,{cssStyles:F}=t;if(t.look==="handDrawn"){const A=Ot.svg(o),B=Pt(t,{}),M=T||L?A.path(Ls(_,w,v,k,T||0),B):A.rectangle(_,w,v,k,B);S=o.insert(()=>M,":first-child"),S.attr("class","basic label-container").attr("style",F||null)}else{S=o.insert("rect",":first-child"),S.attr("class","basic label-container __APA__").attr("style",s).attr("rx",T??5).attr("ry",L??5).attr("x",_).attr("y",w).attr("width",v).attr("height",k);const A="priority"in t&&t.priority;if(A){const B=o.append("line"),M=_+2,$=w+Math.floor((T??0)/2),E=w+k-Math.floor((T??0)/2);B.attr("x1",M).attr("y1",$).attr("x2",M).attr("y2",E).attr("stroke-width","4").attr("stroke",GA(A))}}return zt(t,S),t.height=k,t.intersect=function(A){return Bt.rect(t,A)},o}async function xk(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,halfPadding:o,label:a}=await Zt(e,t,Gt(t)),h=i.width+10*o,l=i.height+8*o,c=.15*h,{cssStyles:u}=t,p=i.width+20,g=i.height+20,f=Math.max(h,p),m=Math.max(l,g);let y;a.attr("transform",`translate(${-i.width/2}, ${-i.height/2})`);const v=`M0 0 
    a${c},${c} 1 0,0 ${.25*f},${-1*m*.1}
    a${c},${c} 1 0,0 ${.25*f},0
    a${c},${c} 1 0,0 ${.25*f},0
    a${c},${c} 1 0,0 ${.25*f},${.1*m}

    a${c},${c} 1 0,0 ${.15*f},${.33*m}
    a${.8*c},${.8*c} 1 0,0 0,${.34*m}
    a${c},${c} 1 0,0 ${-1*f*.15},${.33*m}

    a${c},${c} 1 0,0 ${-1*f*.25},${.15*m}
    a${c},${c} 1 0,0 ${-1*f*.25},0
    a${c},${c} 1 0,0 ${-1*f*.25},0
    a${c},${c} 1 0,0 ${-1*f*.25},${-1*m*.15}

    a${c},${c} 1 0,0 ${-1*f*.1},${-1*m*.33}
    a${.8*c},${.8*c} 1 0,0 0,${-1*m*.34}
    a${c},${c} 1 0,0 ${.1*f},${-1*m*.33}
  H0 V0 Z`;if(t.look==="handDrawn"){const x=Ot.svg(s),k=Pt(t,{}),_=x.path(v,k);y=s.insert(()=>_,":first-child"),y.attr("class","basic label-container").attr("style",Lr(u))}else y=s.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",v);return y.attr("transform",`translate(${-f/2}, ${-m/2})`),zt(t,y),t.calcIntersect=function(x,k){return Bt.rect(x,k)},t.intersect=function(x){return ft.info("Bang intersect",t,x),Bt.rect(t,x)},s}async function kk(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,halfPadding:o,label:a}=await Zt(e,t,Gt(t)),h=i.width+2*o,l=i.height+2*o,c=.15*h,u=.25*h,p=.35*h,g=.2*h,{cssStyles:f}=t;let m;const y=`M0 0 
    a${c},${c} 0 0,1 ${.25*h},${-1*h*.1}
    a${p},${p} 1 0,1 ${.4*h},${-1*h*.1}
    a${u},${u} 1 0,1 ${.35*h},${.2*h}

    a${c},${c} 1 0,1 ${.15*h},${.35*l}
    a${g},${g} 1 0,1 ${-1*h*.15},${.65*l}

    a${u},${c} 1 0,1 ${-1*h*.25},${.15*h}
    a${p},${p} 1 0,1 ${-1*h*.5},0
    a${c},${c} 1 0,1 ${-1*h*.25},${-1*h*.15}

    a${c},${c} 1 0,1 ${-1*h*.1},${-1*l*.35}
    a${g},${g} 1 0,1 ${.1*h},${-1*l*.65}
  H0 V0 Z`;if(t.look==="handDrawn"){const v=Ot.svg(s),x=Pt(t,{}),k=v.path(y,x);m=s.insert(()=>k,":first-child"),m.attr("class","basic label-container").attr("style",Lr(f))}else m=s.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",y);return a.attr("transform",`translate(${-i.width/2}, ${-i.height/2})`),m.attr("transform",`translate(${-h/2}, ${-l/2})`),zt(t,m),t.calcIntersect=function(v,x){return Bt.rect(v,x)},t.intersect=function(v){return ft.info("Cloud intersect",t,v),Bt.rect(t,v)},s}async function _k(e,t){const{labelStyles:r,nodeStyles:n}=Nt(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,halfPadding:o,label:a}=await Zt(e,t,Gt(t)),h=i.width+8*o,l=i.height+2*o,c=`
    M${-h/2} ${l/2-5}
    v${10-l}
    q0,-5 5,-5
    h${h-10}
    q5,0 5,5
    v${l-10}
    q0,5 -5,5
    h${10-h}
    q-5,0 -5,-5
    Z
  `,u=s.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+t.type).attr("style",n).attr("d",c);return s.append("line").attr("class","node-line-").attr("x1",-h/2).attr("y1",l/2).attr("x2",h/2).attr("y2",l/2),a.attr("transform",`translate(${-i.width/2}, ${-i.height/2})`),s.append(()=>a.node()),zt(t,u),t.calcIntersect=function(p,g){return Bt.rect(p,g)},t.intersect=function(p){return Bt.rect(t,p)},s}async function wk(e,t){return xp(e,t,{padding:t.padding??0})}C(bk,"kanbanItem"),C(xk,"bang"),C(kk,"cloud"),C(_k,"defaultMindmapNode"),C(wk,"mindmapCircle");var YA=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:tk},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:Kx},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:ek},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:ik},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:Cx},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:xp},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:xk},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:kk},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:Yx},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:Lx},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:Ux},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:zx},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:hk},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:Px},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:Tx},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:lk},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:mx},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Qx},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:sk},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:nk},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:Ax},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:Bx},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:xx},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:kx},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:_x},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:qx},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:pk},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:Ex},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:ck},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:jx},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:wx},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:Sx},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:uk},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:fk},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:$x},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:dk},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:Mx},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:Jx},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:Vx},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Hx},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:fx},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:bx},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:ak},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:ok},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:gk},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Zx},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Wx}],ZA=C(()=>{const e={state:rk,choice:yx,note:Gx,rectWithTitle:Xx,labelRect:Nx,iconSquare:Ox,iconCircle:Fx,icon:Ix,iconRounded:Dx,imageSquare:Rx,anchor:gx,kanbanItem:bk,mindmapCircle:wk,defaultMindmapNode:_k,classBox:yk,erBox:kp,requirementBox:vk},t=[...Object.entries(e),...YA.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(n=>[n,r.handler]))];return Object.fromEntries(t)},"generateShapeMap"),Ck=ZA();function XA(e){return e in Ck}C(XA,"isValidShape");var Ic=new Map;async function Sk(e,t,r){let n,s;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const i=t.shape?Ck[t.shape]:void 0;if(!i)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let o;r.config.securityLevel==="sandbox"?o="_top":t.linkTarget&&(o=t.linkTarget||"_blank"),n=e.insert("svg:a").attr("xlink:href",t.link).attr("target",o??null),s=await i(n,t,r)}else s=await i(e,t,r),n=s;return t.tooltip&&s.attr("title",t.tooltip),Ic.set(t.id,n),t.haveCallback&&n.attr("class",n.attr("class")+" clickable"),n}C(Sk,"insertNode");var AP=C((e,t)=>{Ic.set(t.id,e)},"setNodeElem"),EP=C(()=>{Ic.clear()},"clear"),LP=C(e=>{const t=Ic.get(e.id);ft.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+r-e.width/2)+", "+(e.y-e.height/2-8)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),r},"positionNode"),KA=C((e,t,r,n,s,i)=>{t.arrowTypeStart&&tm(e,"start",t.arrowTypeStart,r,n,s,i),t.arrowTypeEnd&&tm(e,"end",t.arrowTypeEnd,r,n,s,i)},"addEdgeMarkers"),QA={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},tm=C((e,t,r,n,s,i,o)=>{const a=QA[r];if(!a)return void ft.warn(`Unknown arrow type: ${r}`);const h=`${s}_${i}-${a.type}${t==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const l=`${h}_${o.replace(/[^\dA-Za-z]/g,"_")}`;if(!document.getElementById(l)){const c=document.getElementById(h);if(c){const u=c.cloneNode(!0);u.id=l,u.querySelectorAll("path, circle, line").forEach(p=>{p.setAttribute("stroke",o),a.fill&&p.setAttribute("fill",o)}),c.parentNode?.appendChild(u)}}e.attr(`marker-${t}`,`url(${n}#${l})`)}else e.attr(`marker-${t}`,`url(${n}#${h})`)},"addEdgeMarker"),rc=new Map,_r=new Map,BP=C(()=>{rc.clear(),_r.clear()},"clear"),Ha=C(e=>e?e.reduce((t,r)=>t+";"+r,""):"","getLabelStyles"),JA=C(async(e,t)=>{let r=gr(Oe().flowchart.htmlLabels);const{labelStyles:n}=Nt(t);t.labelStyle=n;const s=await Es(e,t.label,{style:t.labelStyle,useHtmlLabels:r,addSvgBackground:!0,isNode:!1});ft.info("abc82",t,t.labelType);const i=e.insert("g").attr("class","edgeLabel"),o=i.insert("g").attr("class","label").attr("data-id",t.id);o.node().appendChild(s);let a,h=s.getBBox();if(r){const l=s.children[0],c=we(s);h=l.getBoundingClientRect(),c.attr("width",h.width),c.attr("height",h.height)}if(o.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),rc.set(t.id,i),t.width=h.width,t.height=h.height,t.startLabelLeft){const l=await Zs(t.startLabelLeft,Ha(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");a=u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),_r.get(t.id)||_r.set(t.id,{}),_r.get(t.id).startLeft=c,Ro(a,t.startLabelLeft)}if(t.startLabelRight){const l=await Zs(t.startLabelRight,Ha(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");a=c.node().appendChild(l),u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),_r.get(t.id)||_r.set(t.id,{}),_r.get(t.id).startRight=c,Ro(a,t.startLabelRight)}if(t.endLabelLeft){const l=await Zs(t.endLabelLeft,Ha(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");a=u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),c.node().appendChild(l),_r.get(t.id)||_r.set(t.id,{}),_r.get(t.id).endLeft=c,Ro(a,t.endLabelLeft)}if(t.endLabelRight){const l=await Zs(t.endLabelRight,Ha(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");a=u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),c.node().appendChild(l),_r.get(t.id)||_r.set(t.id,{}),_r.get(t.id).endRight=c,Ro(a,t.endLabelRight)}return s},"insertEdgeLabel");function Ro(e,t){Oe().flowchart.htmlLabels&&e&&(e.style.width=9*t.length+"px",e.style.height="12px")}C(Ro,"setTerminalWidth");var tE=C((e,t)=>{ft.debug("Moving label abc88 ",e.id,e.label,rc.get(e.id),t);let r=t.updatedPath?t.updatedPath:t.originalPath;const n=Oe(),{subGraphTitleTotalMargin:s}=rp(n);if(e.label){const i=rc.get(e.id);let o=e.x,a=e.y;if(r){const h=Cn.calcLabelPosition(r);ft.debug("Moving label "+e.label+" from (",o,",",a,") to (",h.x,",",h.y,") abc88"),t.updatedPath&&(o=h.x,a=h.y)}i.attr("transform",`translate(${o}, ${a+s/2})`)}if(e.startLabelLeft){const i=_r.get(e.id).startLeft;let o=e.x,a=e.y;if(r){const h=Cn.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);o=h.x,a=h.y}i.attr("transform",`translate(${o}, ${a})`)}if(e.startLabelRight){const i=_r.get(e.id).startRight;let o=e.x,a=e.y;if(r){const h=Cn.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);o=h.x,a=h.y}i.attr("transform",`translate(${o}, ${a})`)}if(e.endLabelLeft){const i=_r.get(e.id).endLeft;let o=e.x,a=e.y;if(r){const h=Cn.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);o=h.x,a=h.y}i.attr("transform",`translate(${o}, ${a})`)}if(e.endLabelRight){const i=_r.get(e.id).endRight;let o=e.x,a=e.y;if(r){const h=Cn.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);o=h.x,a=h.y}i.attr("transform",`translate(${o}, ${a})`)}},"positionEdgeLabel"),eE=C((e,t)=>{const r=e.x,n=e.y,s=Math.abs(t.x-r),i=Math.abs(t.y-n),o=e.width/2,a=e.height/2;return s>=o||i>=a},"outsideNode"),rE=C((e,t,r)=>{ft.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const n=e.x,s=e.y,i=Math.abs(n-r.x),o=e.width/2;let a=r.x<t.x?o-i:o+i;const h=e.height/2,l=Math.abs(t.y-r.y),c=Math.abs(t.x-r.x);if(Math.abs(s-t.y)*o>Math.abs(n-t.x)*h){let u=r.y<t.y?t.y-h-s:s-h-t.y;a=c*u/l;const p={x:r.x<t.x?r.x+a:r.x-c+a,y:r.y<t.y?r.y+l-u:r.y-l+u};return a===0&&(p.x=t.x,p.y=t.y),c===0&&(p.x=t.x),l===0&&(p.y=t.y),ft.debug(`abc89 top/bottom calc, Q ${l}, q ${u}, R ${c}, r ${a}`,p),p}{a=r.x<t.x?t.x-o-n:n-o-t.x;let u=l*a/c,p=r.x<t.x?r.x+c-a:r.x-c+a,g=r.y<t.y?r.y+u:r.y-u;return ft.debug(`sides calc abc89, Q ${l}, q ${u}, R ${c}, r ${a}`,{_x:p,_y:g}),a===0&&(p=t.x,g=t.y),c===0&&(p=t.x),l===0&&(g=t.y),{x:p,y:g}}},"intersection"),em=C((e,t)=>{ft.warn("abc88 cutPathAtIntersect",e,t);let r=[],n=e[0],s=!1;return e.forEach(i=>{if(ft.info("abc88 checking point",i,t),eE(t,i)||s)ft.warn("abc88 outside",i,n),n=i,s||r.push(i);else{const o=rE(t,n,i);ft.debug("abc88 inside",i,n,o),ft.debug("abc88 intersection",o,t);let a=!1;r.forEach(h=>{a=a||h.x===o.x&&h.y===o.y}),r.some(h=>h.x===o.x&&h.y===o.y)?ft.warn("abc88 no intersect",o,r):r.push(o),s=!0}}),ft.debug("returning points",r),r},"cutPathAtIntersect");function Tk(e){const t=[],r=[];for(let n=1;n<e.length-1;n++){const s=e[n-1],i=e[n],o=e[n+1];(s.x===i.x&&i.y===o.y&&Math.abs(i.x-o.x)>5&&Math.abs(i.y-s.y)>5||s.y===i.y&&i.x===o.x&&Math.abs(i.x-s.x)>5&&Math.abs(i.y-o.y)>5)&&(t.push(i),r.push(n))}return{cornerPoints:t,cornerPointPositions:r}}C(Tk,"extractCornerPoints");var rm=C(function(e,t,r){const n=t.x-e.x,s=t.y-e.y,i=r/Math.sqrt(n*n+s*s);return{x:t.x-i*n,y:t.y-i*s}},"findAdjacentPoint"),nE=C(function(e){const{cornerPointPositions:t}=Tk(e),r=[];for(let n=0;n<e.length;n++)if(t.includes(n)){const s=e[n-1],i=e[n+1],o=e[n],a=rm(s,o,5),h=rm(i,o,5),l=h.x-a.x,c=h.y-a.y;r.push(a);const u=2*Math.sqrt(2);let p={x:o.x,y:o.y};if(Math.abs(i.x-s.x)>10&&Math.abs(i.y-s.y)>=10){ft.debug("Corner point fixing",Math.abs(i.x-s.x),Math.abs(i.y-s.y));const g=5;p=o.x===a.x?{x:l<0?a.x-g+u:a.x+g-u,y:c<0?a.y-u:a.y+u}:{x:l<0?a.x-u:a.x+u,y:c<0?a.y-g+u:a.y+g-u}}else ft.debug("Corner point skipping fixing",Math.abs(i.x-s.x),Math.abs(i.y-s.y));r.push(p,h)}else r.push(e[n]);return r},"fixCorners"),sE=C((e,t,r)=>{const n=e-t-r,s=Math.floor(n/4);return`0 ${t} ${Array(s).fill("2 2").join(" ")} ${r}`},"generateDashArray"),iE=C(function(e,t,r,n,s,i,o,a=!1){const{handDrawnSeed:h}=Oe();let l=t.points,c=!1;const u=s;var p=i;const g=[];for(const $ in t.cssCompiledStyles)_b($)||g.push(t.cssCompiledStyles[$]);ft.debug("UIO intersect check",t.points,p.x,u.x),p.intersect&&u.intersect&&!a&&(l=l.slice(1,t.points.length-1),l.unshift(u.intersect(l[0])),ft.debug("Last point UIO",t.start,"-->",t.end,l[l.length-1],p,p.intersect(l[l.length-1])),l.push(p.intersect(l[l.length-1])));const f=btoa(JSON.stringify(l));t.toCluster&&(ft.info("to cluster abc88",r.get(t.toCluster)),l=em(t.points,r.get(t.toCluster).node),c=!0),t.fromCluster&&(ft.debug("from cluster abc88",r.get(t.fromCluster),JSON.stringify(l,null,2)),l=em(l.reverse(),r.get(t.fromCluster).node).reverse(),c=!0);let m=l.filter($=>!Number.isNaN($.y));m=nE(m);let y=yd;switch(y=zl,t.curve){case"linear":y=zl;break;case"basis":default:y=yd;break;case"cardinal":y=Mv;break;case"bumpX":y=wv;break;case"bumpY":y=Cv;break;case"catmullRom":y=Ev;break;case"monotoneX":y=Ov;break;case"monotoneY":y=Rv;break;case"natural":y=Nv;break;case"step":y=zv;break;case"stepAfter":y=qv;break;case"stepBefore":y=Uv}const{x:v,y:x}=l5(t),k=aM().x(v).y(x).curve(y);let _,w;switch(t.thickness){case"normal":default:_="edge-thickness-normal";break;case"thick":_="edge-thickness-thick";break;case"invisible":_="edge-thickness-invisible"}switch(t.pattern){case"solid":default:_+=" edge-pattern-solid";break;case"dotted":_+=" edge-pattern-dotted";break;case"dashed":_+=" edge-pattern-dashed"}let S=t.curve==="rounded"?$k(Mk(m,t),5):k(m);const T=Array.isArray(t.style)?t.style:[t.style];let L=T.find($=>$?.startsWith("stroke:")),F=!1;if(t.look==="handDrawn"){const $=Ot.svg(e);Object.assign([],m),_+=" transition",w=we($.path(S,{roughness:.3,seed:h})).select("path").attr("id",t.id).attr("class"," "+_+(t.classes?" "+t.classes:"")).attr("style",T?T.reduce((D,I)=>D+";"+I,""):"");let E=w.attr("d");w.attr("d",E),e.node().appendChild(w.node())}else{const $=g.join(";"),E=T?T.reduce((U,H)=>U+H+";",""):"";let D="";t.animate&&(D=" edge-animation-fast"),t.animation&&(D=" edge-animation-"+t.animation);const I=($?$+";"+E+";":E)+";"+(T?T.reduce((U,H)=>U+";"+H,""):"");w=e.append("path").attr("d",S).attr("id",t.id).attr("class"," "+_+(t.classes?" "+t.classes:"")+(D??"")).attr("style",I),L=I.match(/stroke:([^;]+)/)?.[1],F=t.animate===!0||!!t.animation||$.includes("animation");const N=w.node(),q=typeof N.getTotalLength=="function"?N.getTotalLength():0,K=$f[t.arrowTypeStart]||0,Z=$f[t.arrowTypeEnd]||0;if(t.look==="neo"&&!F){const U=`stroke-dasharray: ${t.pattern==="dotted"||t.pattern==="dashed"?sE(q,K,Z):`0 ${K} ${q-K-Z} ${Z}`}; stroke-dashoffset: 0;`;w.attr("style",U+w.attr("style"))}}w.attr("data-edge",!0),w.attr("data-et","edge"),w.attr("data-id",t.id),w.attr("data-points",f),t.showPoints&&m.forEach($=>{e.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",$.x).attr("cy",$.y)});let A="";(Oe().flowchart.arrowMarkerAbsolute||Oe().state.arrowMarkerAbsolute)&&(A=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,A=A.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),ft.info("arrowTypeStart",t.arrowTypeStart),ft.info("arrowTypeEnd",t.arrowTypeEnd),KA(w,t,A,o,n,L);const B=l[Math.floor(l.length/2)];Cn.isLabelCoordinateInPath(B,w.attr("d"))||(c=!0);let M={};return c&&(M.updatedPath=l),M.originalPath=t.points,M},"insertEdge");function $k(e,t){if(e.length<2)return"";let r="";const n=e.length,s=1e-5;for(let i=0;i<n;i++){const o=e[i],a=e[i-1],h=e[i+1];if(i===0)r+=`M${o.x},${o.y}`;else if(i===n-1)r+=`L${o.x},${o.y}`;else{const l=o.x-a.x,c=o.y-a.y,u=h.x-o.x,p=h.y-o.y,g=Math.hypot(l,c),f=Math.hypot(u,p);if(g<s||f<s){r+=`L${o.x},${o.y}`;continue}const m=l/g,y=c/g,v=u/f,x=p/f,k=m*v+y*x,_=Math.max(-1,Math.min(1,k)),w=Math.acos(_);if(w<s||Math.abs(Math.PI-w)<s){r+=`L${o.x},${o.y}`;continue}const S=Math.min(t/Math.sin(w/2),g/2,f/2),T=o.x-m*S,L=o.y-y*S,F=o.x+v*S,A=o.y+x*S;r+=`L${T},${L}`,r+=`Q${o.x},${o.y} ${F},${A}`}}return r}function Wd(e,t){if(!e||!t)return{angle:0,deltaX:0,deltaY:0};const r=t.x-e.x,n=t.y-e.y;return{angle:Math.atan2(n,r),deltaX:r,deltaY:n}}function Mk(e,t){const r=e.map(s=>({...s}));if(e.length>=2&&$r[t.arrowTypeStart]){const s=$r[t.arrowTypeStart],i=e[0],o=e[1],{angle:a}=Wd(i,o),h=s*Math.cos(a),l=s*Math.sin(a);r[0].x=i.x+h,r[0].y=i.y+l}const n=e.length;if(n>=2&&$r[t.arrowTypeEnd]){const s=$r[t.arrowTypeEnd],i=e[n-1],o=e[n-2],{angle:a}=Wd(o,i),h=s*Math.cos(a),l=s*Math.sin(a);r[n-1].x=i.x-h,r[n-1].y=i.y-l}return r}C($k,"generateRoundedPath"),C(Wd,"calculateDeltaAndAngle"),C(Mk,"applyMarkerOffsetsToPoints");var oE=C((e,t,r,n)=>{t.forEach(s=>{_E[s](e,r,n)})},"insertMarkers"),aE=C((e,t,r)=>{ft.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),lE=C((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),cE=C((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),hE=C((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),dE=C((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),uE=C((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),pE=C((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),gE=C((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),fE=C((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),mE=C((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),yE=C((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("d","M9,0 L9,18");const s=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");s.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),s.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),vE=C((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),bE=C((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const s=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");s.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),s.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),xE=C((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),kE=C((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");n.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),n.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),n.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),_E={extension:aE,composition:lE,aggregation:cE,dependency:hE,lollipop:dE,point:uE,circle:pE,cross:gE,barb:fE,only_one:mE,zero_or_one:yE,one_or_more:vE,zero_or_more:bE,requirement_arrow:xE,requirement_contains:kE},wE=oE,CE={common:oo,getConfig:Ar,insertCluster:IA,insertEdge:iE,insertEdgeLabel:JA,insertMarkers:wE,insertNode:Sk,interpolateToCurve:np,labelHelper:Zt,log:ft,positionEdgeLabel:tE},oa={},Ak=C(e=>{for(const t of e)oa[t.name]=t},"registerLayoutLoaders");C(()=>{Ak([{name:"dagre",loader:C(async()=>await Ie(()=>import("./dagre-6UL2VRFP-Ib7HcRG8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url),"loader")},{name:"cose-bilkent",loader:C(async()=>await Ie(()=>import("./cose-bilkent-S5V4N54A-DZ-Sj5Cw.js"),__vite__mapDeps([60,61,23,3,4,24,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url),"loader")}])},"registerDefaultLayoutLoaders")();var IP=C(async(e,t)=>{if(!(e.layoutAlgorithm in oa))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const r=oa[e.layoutAlgorithm];return(await r.loader()).render(e,t,CE,{algorithm:r.algorithm})},"render"),FP=C((e="",{fallback:t="dagre"}={})=>{if(e in oa)return e;if(t in oa)return ft.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),Ek="comm",Lk="rule",Bk="decl",Ik=Math.abs,_p=String.fromCharCode;function Fk(e){return e.trim()}function ml(e,t,r){return e.replace(t,r)}function SE(e,t,r){return e.indexOf(t,r)}function Pi(e,t){return 0|e.charCodeAt(t)}function ro(e,t,r){return e.slice(t,r)}function Bn(e){return e.length}function Va(e,t){return t.push(e),e}var Fc=1,no=1,Dk=0,mn=0,or=0,so="";function wp(e,t,r,n,s,i,o,a){return{value:e,root:t,parent:r,type:n,props:s,children:i,line:Fc,column:no,length:o,return:"",siblings:a}}function TE(){return or=mn>0?Pi(so,--mn):0,no--,or===10&&(no=1,Fc--),or}function $n(){return or=mn<Dk?Pi(so,mn++):0,no++,or===10&&(no=1,Fc++),or}function ps(){return Pi(so,mn)}function yl(){return mn}function Dc(e,t){return ro(so,e,t)}function aa(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function yh(e){return Fk(Dc(mn-1,Hd(e===91?e+2:e===40?e+1:e)))}function $E(e){for(;(or=ps())&&or<33;)$n();return aa(e)>2||aa(or)>3?"":" "}function ME(e,t){for(;--t&&$n()&&!(or<48||or>102||or>57&&or<65||or>70&&or<97););return Dc(e,yl()+(t<6&&ps()==32&&$n()==32))}function Hd(e){for(;$n();)switch(or){case e:return mn;case 34:case 39:e!==34&&e!==39&&Hd(or);break;case 40:e===41&&Hd(e);break;case 92:$n()}return mn}function AE(e,t){for(;$n()&&e+or!==57&&(e+or!==84||ps()!==47););return"/*"+Dc(t,mn-1)+"*"+_p(e===47?e:$n())}function EE(e){for(;!aa(ps());)$n();return Dc(e,mn)}function LE(e){return function(t){return so="",t}(vl("",null,null,null,[""],e=function(t){return Fc=no=1,Dk=Bn(so=t),mn=0,[]}(e),0,[0],e))}function vl(e,t,r,n,s,i,o,a,h){for(var l=0,c=0,u=o,p=0,g=0,f=0,m=1,y=1,v=1,x=0,k="",_=s,w=i,S=n,T=k;y;)switch(f=x,x=$n()){case 40:if(f!=108&&Pi(T,u-1)==58){SE(T+=ml(yh(x),"&","&\f"),"&\f",Ik(l?a[l-1]:0))!=-1&&(v=-1);break}case 34:case 39:case 91:T+=yh(x);break;case 9:case 10:case 13:case 32:T+=$E(f);break;case 92:T+=ME(yl()-1,7);continue;case 47:switch(ps()){case 42:case 47:Va(BE(AE($n(),yl()),t,r,h),h),aa(f||1)!=5&&aa(ps()||1)!=5||!Bn(T)||ro(T,-1,void 0)===" "||(T+=" ");break;default:T+="/"}break;case 123*m:a[l++]=Bn(T)*v;case 125*m:case 59:case 0:switch(x){case 0:case 125:y=0;case 59+c:v==-1&&(T=ml(T,/\f/g,"")),g>0&&(Bn(T)-u||m===0&&f===47)&&Va(g>32?sm(T+";",n,r,u-1,h):sm(ml(T," ","")+";",n,r,u-2,h),h);break;case 59:T+=";";default:if(Va(S=nm(T,t,r,l,c,s,a,k,_=[],w=[],u,i),i),x===123)if(c===0)vl(T,t,S,S,_,i,u,a,w);else{switch(p){case 99:if(Pi(T,3)===110)break;case 108:if(Pi(T,2)===97)break;default:c=0;case 100:case 109:case 115:}c?vl(e,S,S,n&&Va(nm(e,S,S,0,0,s,a,k,s,_=[],u,w),w),s,w,u,a,n?_:w):vl(T,S,S,S,[""],w,0,a,w)}}l=c=g=0,m=v=1,k=T="",u=o;break;case 58:u=1+Bn(T),g=f;default:if(m<1){if(x==123)--m;else if(x==125&&m++==0&&TE()==125)continue}switch(T+=_p(x),x*m){case 38:v=c>0?1:(T+="\f",-1);break;case 44:a[l++]=(Bn(T)-1)*v,v=1;break;case 64:ps()===45&&(T+=yh($n())),p=ps(),c=u=Bn(k=T+=EE(yl())),x++;break;case 45:f===45&&Bn(T)==2&&(m=0)}}return i}function nm(e,t,r,n,s,i,o,a,h,l,c,u){for(var p=s-1,g=s===0?i:[""],f=function(w){return w.length}(g),m=0,y=0,v=0;m<n;++m)for(var x=0,k=ro(e,p+1,p=Ik(y=o[m])),_=e;x<f;++x)(_=Fk(y>0?g[x]+" "+k:ml(k,/&\f/g,g[x])))&&(h[v++]=_);return wp(e,t,r,s===0?Lk:a,h,l,c,u)}function BE(e,t,r,n){return wp(e,t,r,Ek,_p(or),ro(e,2,-2),0,n)}function sm(e,t,r,n,s){return wp(e,t,r,Bk,ro(e,0,n),ro(e,n+1,-1),n,s)}function Vd(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function IE(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case"@namespace":case Bk:return e.return=e.return||e.value;case Ek:return"";case"@keyframes":return e.return=e.value+"{"+Vd(e.children,n)+"}";case Lk:if(!Bn(e.value=e.props.join(",")))return""}return Bn(r=Vd(e.children,n))?e.return=e.value+"{"+r+"}":""}var FE={id:"c4",detector:C(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./c4Diagram-YG6GDRKO-DkjzBJGl.js");return{diagram:t}},__vite__mapDeps([62,63,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:"c4",diagram:e}},"loader")},im="flowchart",DE=C((e,t)=>t?.flowchart?.defaultRenderer!=="dagre-wrapper"&&t?.flowchart?.defaultRenderer!=="elk"&&/^\s*graph/.test(e),"detector"),OE={id:im,detector:DE,loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-BzxdmGsm.js");return{diagram:t}},__vite__mapDeps([64,65,66,67,68,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:im,diagram:e}},"loader")},om="flowchart-v2",RE=C((e,t)=>t?.flowchart?.defaultRenderer!=="dagre-d3"&&(t?.flowchart?.defaultRenderer==="elk"&&(t.layout="elk"),!(!/^\s*graph/.test(e)||t?.flowchart?.defaultRenderer!=="dagre-wrapper")||/^\s*flowchart/.test(e)),"detector"),PE={id:om,detector:RE,loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-BzxdmGsm.js");return{diagram:t}},__vite__mapDeps([64,65,66,67,68,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:om,diagram:e}},"loader")},NE={id:"er",detector:C(e=>/^\s*erDiagram/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./erDiagram-Q2GNP2WA-CaZ0zaA3.js");return{diagram:t}},__vite__mapDeps([69,66,67,68,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:"er",diagram:e}},"loader")},am="gitGraph",zE={id:am,detector:C(e=>/^\s*gitGraph/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./gitGraphDiagram-NY62KEGX-DYtX5RNf.js");return{diagram:t}},__vite__mapDeps([70,71,72,73,9,2,3,4,6,7,8,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:am,diagram:e}},"loader")},lm="gantt",UE={id:lm,detector:C(e=>/^\s*gantt/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./ganttDiagram-LVOFAZNH-CLGAHSzz.js");return{diagram:t}},__vite__mapDeps([74,23,3,4,24,75,76,77,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:lm,diagram:e}},"loader")},cm="info",qE={id:cm,detector:C(e=>/^\s*info/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./infoDiagram-F6ZHWCRC-Cd2EZuEM.js");return{diagram:t}},__vite__mapDeps([78,73,9,2,3,4,6,7,8,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:cm,diagram:e}},"loader")},jE={id:"pie",detector:C(e=>/^\s*pie/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./pieDiagram-ADFJNKIX-Bfdmy7zO.js");return{diagram:t}},__vite__mapDeps([79,71,73,9,2,3,4,6,7,80,81,76,8,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:"pie",diagram:e}},"loader")},hm="quadrantChart",WE={id:hm,detector:C(e=>/^\s*quadrantChart/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./quadrantDiagram-AYHSOK5B-C6vUUFAm.js");return{diagram:t}},__vite__mapDeps([82,75,76,77,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:hm,diagram:e}},"loader")},dm="xychart",HE={id:dm,detector:C(e=>/^\s*xychart(-beta)?/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./xychartDiagram-PRI3JC2R-CqggVp-i.js");return{diagram:t}},__vite__mapDeps([83,76,81,75,77,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:dm,diagram:e}},"loader")},um="requirement",VE={id:um,detector:C(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./requirementDiagram-UZGBJVZJ-CpNijE83.js");return{diagram:t}},__vite__mapDeps([84,66,67,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:um,diagram:e}},"loader")},pm="sequence",GE={id:pm,detector:C(e=>/^\s*sequenceDiagram/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./sequenceDiagram-WL72ISMW-DFVOir4V.js");return{diagram:t}},__vite__mapDeps([85,63,72,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:pm,diagram:e}},"loader")},gm="class",YE=C((e,t)=>t?.class?.defaultRenderer!=="dagre-wrapper"&&/^\s*classDiagram/.test(e),"detector"),ZE={id:gm,detector:YE,loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./classDiagram-2ON5EDUG-COyElPW6.js");return{diagram:t}},__vite__mapDeps([86,87,65,66,67,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:gm,diagram:e}},"loader")},fm="classDiagram",XE=C((e,t)=>!(!/^\s*classDiagram/.test(e)||t?.class?.defaultRenderer!=="dagre-wrapper")||/^\s*classDiagram-v2/.test(e),"detector"),KE={id:fm,detector:XE,loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./classDiagram-v2-WZHVMYZB-CB6JShNa.js");return{diagram:t}},__vite__mapDeps([88,87,65,66,67,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:fm,diagram:e}},"loader")},mm="state",QE=C((e,t)=>t?.state?.defaultRenderer!=="dagre-wrapper"&&/^\s*stateDiagram/.test(e),"detector"),JE={id:mm,detector:QE,loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./stateDiagram-FKZM4ZOC-BfODEK3X.js");return{diagram:t}},__vite__mapDeps([89,90,66,67,1,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:mm,diagram:e}},"loader")},ym="stateDiagram",tL=C((e,t)=>!!/^\s*stateDiagram-v2/.test(e)||!(!/^\s*stateDiagram/.test(e)||t?.state?.defaultRenderer!=="dagre-wrapper"),"detector"),eL={id:ym,detector:tL,loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./stateDiagram-v2-4FDKWEC3-WRMyPFw7.js");return{diagram:t}},__vite__mapDeps([91,90,66,67,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:ym,diagram:e}},"loader")},vm="journey",rL={id:vm,detector:C(e=>/^\s*journey/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./journeyDiagram-XKPGCS4Q-DiUHC3ew.js");return{diagram:t}},__vite__mapDeps([92,63,65,80,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:vm,diagram:e}},"loader")},nL=C((e,t,r)=>{ft.debug(`rendering svg for syntax error
`);const n=pM(t),s=n.append("g");n.attr("viewBox","0 0 2412 512"),tv(n,100,512,!0),s.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),s.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),s.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),s.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),s.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),s.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),s.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),s.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),Ok={draw:nL},sL=Ok,iL={db:{},renderer:Ok,parser:{parse:C(()=>{},"parse")}},bm="flowchart-elk",oL=C((e,t={})=>!!(/^\s*flowchart-elk/.test(e)||/^\s*(flowchart|graph)/.test(e)&&t?.flowchart?.defaultRenderer==="elk")&&(t.layout="elk",!0),"detector"),aL={id:bm,detector:oL,loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-BzxdmGsm.js");return{diagram:t}},__vite__mapDeps([64,65,66,67,68,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:bm,diagram:e}},"loader")},xm="timeline",lL={id:xm,detector:C(e=>/^\s*timeline/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./timeline-definition-IT6M3QCI-BC1eOj30.js");return{diagram:t}},__vite__mapDeps([93,80,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:xm,diagram:e}},"loader")},km="mindmap",cL={id:km,detector:C(e=>/^\s*mindmap/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./mindmap-definition-VGOIOE7T-CD-Rou7R.js");return{diagram:t}},__vite__mapDeps([94,66,67,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:km,diagram:e}},"loader")},_m="kanban",hL={id:_m,detector:C(e=>/^\s*kanban/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./kanban-definition-3W4ZIXB7-t8j3Qfes.js");return{diagram:t}},__vite__mapDeps([95,65,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:_m,diagram:e}},"loader")},wm="sankey",dL={id:wm,detector:C(e=>/^\s*sankey(-beta)?/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./sankeyDiagram-TZEHDZUN-CF8ZSBcM.js");return{diagram:t}},__vite__mapDeps([96,81,76,3,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:wm,diagram:e}},"loader")},Cm="packet",uL={id:Cm,detector:C(e=>/^\s*packet(-beta)?/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./diagram-S2PKOQOG-BD5by_mA.js");return{diagram:t}},__vite__mapDeps([97,71,73,9,2,3,4,6,7,8,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:Cm,diagram:e}},"loader")},Sm="radar",pL={id:Sm,detector:C(e=>/^\s*radar-beta/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./diagram-QEK2KX5R-B1sLKHWs.js");return{diagram:t}},__vite__mapDeps([98,71,73,9,2,3,4,6,7,8,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:Sm,diagram:e}},"loader")},Tm="block",gL={id:Tm,detector:C(e=>/^\s*block(-beta)?/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./blockDiagram-VD42YOAC-CiLdYStC.js");return{diagram:t}},__vite__mapDeps([99,65,7,2,3,4,1,68,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:Tm,diagram:e}},"loader")},$m="architecture",fL={id:$m,detector:C(e=>/^\s*architecture/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./architectureDiagram-VXUJARFQ-2HP4w1Lb.js");return{diagram:t}},__vite__mapDeps([100,71,73,9,2,3,4,6,7,61,23,24,8,10,11,12,13,14,15,16,17,18,19,20,21,22,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:$m,diagram:e}},"loader")},Mm="treemap",mL={id:Mm,detector:C(e=>/^\s*treemap/.test(e),"detector"),loader:C(async()=>{const{diagram:e}=await Ie(async()=>{const{diagram:t}=await import("./diagram-PSM6KHXK-BrFiGYNA.js");return{diagram:t}},__vite__mapDeps([101,67,71,73,9,2,3,4,6,7,77,81,76,8,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]),import.meta.url);return{id:Mm,diagram:e}},"loader")},Am=!1,Oc=C(()=>{Am||(Am=!0,Dl("error",iL,e=>e.toLowerCase().trim()==="error"),Dl("---",{db:{clear:C(()=>{},"clear")},styles:{},renderer:{draw:C(()=>{},"draw")},parser:{parse:C(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:C(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),rd(aL,cL,fL),rd(FE,hL,KE,ZE,NE,UE,qE,jE,VE,GE,PE,OE,lL,zE,eL,JE,rL,WE,dL,uL,HE,gL,pL,mL))},"addDiagrams"),yL=C(async()=>{ft.debug("Loading registered diagrams");const e=await Promise.allSettled(Object.entries(ni).map(async([r,{detector:n,loader:s}])=>{if(s)try{od(r)}catch{try{const{diagram:i,id:o}=await s();Dl(o,i,n)}catch(i){throw ft.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete ni[r],i}}})),t=e.filter(r=>r.status==="rejected");if(t.length>0){ft.error(`Failed to load ${t.length} external diagrams`);for(const r of t)ft.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),vL="graphics-document document";function Rk(e,t){e.attr("role",vL),t!==""&&e.attr("aria-roledescription",t)}function Pk(e,t,r,n){if(e.insert!==void 0){if(r){const s=`chart-desc-${n}`;e.attr("aria-describedby",s),e.insert("desc",":first-child").attr("id",s).text(r)}if(t){const s=`chart-title-${n}`;e.attr("aria-labelledby",s),e.insert("title",":first-child").attr("id",s).text(t)}}}C(Rk,"setA11yDiagramInfo"),C(Pk,"addSVGa11yTitleDescription");var ei,Gd=(ei=class{constructor(t,r,n,s,i){this.type=t,this.text=r,this.db=n,this.parser=s,this.renderer=i}static async fromText(t,r={}){const n=Ar(),s=Du(t,n);t=A5(t)+`
`;try{od(s)}catch{const l=DT(s);if(!l)throw new qy(`Diagram ${s} not found.`);const{id:c,diagram:u}=await l();Dl(c,u)}const{db:i,parser:o,renderer:a,init:h}=od(s);return o.parser&&(o.parser.yy=i),i.clear?.(),h?.(n),r.title&&i.setDiagramTitle?.(r.title),await o.parse(t),new ei(s,t,i,o,a)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},C(ei,"Diagram"),ei),Em=[],bL=C(()=>{Em.forEach(e=>{e()}),Em=[]},"attachFunctions"),xL=C(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function Nk(e){const t=e.match(Uy);if(!t)return{text:e,metadata:{}};let r=a5(t[1],{schema:o5})??{};r=typeof r!="object"||Array.isArray(r)?{}:r;const n={};return r.displayMode&&(n.displayMode=r.displayMode.toString()),r.title&&(n.title=r.title.toString()),r.config&&(n.config=r.config),{text:e.slice(t[0].length),metadata:n}}C(Nk,"extractFrontMatter");var kL=C(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,n)=>"<"+r+n.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),_L=C(e=>{const{text:t,metadata:r}=Nk(e),{displayMode:n,title:s,config:i={}}=r;return n&&(i.gantt||(i.gantt={}),i.gantt.displayMode=n),{title:s,config:i,text:t}},"processFrontmatter"),wL=C(e=>{const t=Cn.detectInit(e)??{},r=Cn.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:n})=>n==="wrap"):r?.type==="wrap"&&(t.wrap=!0),{text:m5(e),directive:t}},"processDirectives");function Cp(e){const t=kL(e),r=_L(t),n=wL(r.text),s=lp(r.config,n.directive);return{code:e=xL(n.text),title:r.title,config:s}}function zk(e){const t=new TextEncoder().encode(e),r=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(r)}C(Cp,"preprocessDiagram"),C(zk,"toBase64");var CL=["foreignobject"],SL=["dominant-baseline"];function Sp(e){const t=Cp(e);return Il(),XT(t.config??{}),t}async function Uk(e,t){Oc();try{const{code:r,config:n}=Sp(e);return{diagramType:(await jk(r)).type,config:n}}catch(r){if(t?.suppressErrors)return!1;throw r}}C(Sp,"processAndSetConfigs"),C(Uk,"parse");var Lm=C((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),TL=C((e,t=new Map)=>{let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const n=e.htmlLabels??e.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(s=>{Sg(s.styles)||n.forEach(i=>{r+=Lm(s.id,i,s.styles)}),Sg(s.textStyles)||(r+=Lm(s.id,"tspan",(s?.textStyles||[]).map(i=>i.replace("color","fill"))))})}return r},"createCssStyles"),$L=C((e,t,r,n)=>{const s=TL(e,r);return Vd(LE(`${n}{${m$(t,s,e.themeVariables)}}`),IE)},"createUserStyles"),ML=C((e="",t,r)=>{let n=e;return r||t||(n=n.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),n=pi(n),n=n.replace(/<br>/g,"<br/>"),n},"cleanUpSvgCode"),AL=C((e="",t)=>`<iframe style="width:100%;height:${t?.viewBox?.baseVal?.height?t.viewBox.baseVal.height+"px":"100%"};border:0;margin:0;" src="data:text/html;charset=UTF-8;base64,${zk(`<body style="margin:0">${e}</body>`)}" sandbox="allow-top-navigation-by-user-activation allow-popups">
  The "iframe" tag is not supported by your browser.
</iframe>`,"putIntoIFrame"),Bm=C((e,t,r,n,s)=>{const i=e.append("div");i.attr("id",r),n&&i.attr("style",n);const o=i.append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return s&&o.attr("xmlns:xlink",s),o.append("g"),e},"appendDivSvgG");function Yd(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}C(Yd,"sandboxedIframe");var EL=C((e,t,r,n)=>{e.getElementById(t)?.remove(),e.getElementById(r)?.remove(),e.getElementById(n)?.remove()},"removeExistingElements"),LL=C(async function(e,t,r){Oc();const n=Sp(t);t=n.code;const s=Ar();ft.debug(s),t.length>(s?.maxTextSize??5e4)&&(t="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");const i="#"+e,o="i"+e,a="#"+o,h="d"+e,l="#"+h,c=C(()=>{const M=we(p?a:l).node();M&&"remove"in M&&M.remove()},"removeTempElements");let u=we("body");const p=s.securityLevel==="sandbox",g=s.securityLevel==="loose",f=s.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),p){const M=Yd(we(r),o);u=we(M.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=we(r);Bm(u,e,h,`font-family: ${f}`,"http://www.w3.org/1999/xlink")}else{if(EL(document,e,h,o),p){const M=Yd(we("body"),o);u=we(M.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=we("body");Bm(u,e,h)}let m,y;try{m=await Gd.fromText(t,{title:n.title})}catch(M){if(s.suppressErrorRendering)throw c(),M;m=await Gd.fromText("error"),y=M}const v=u.select(l).node(),x=m.type,k=v.firstChild,_=k.firstChild,w=m.renderer.getClasses?.(t,m),S=$L(s,x,w,i),T=document.createElement("style");T.innerHTML=S,k.insertBefore(T,_);try{await m.renderer.draw(t,e,Lg.version,m)}catch(M){throw s.suppressErrorRendering?c():sL.draw(t,e,Lg.version),M}const L=u.select(`${l} svg`),F=m.db.getAccTitle?.(),A=m.db.getAccDescription?.();Wk(x,L,F,A),u.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let B=u.select(l).node().innerHTML;if(ft.debug("config.arrowMarkerAbsolute",s.arrowMarkerAbsolute),B=ML(B,p,gr(s.arrowMarkerAbsolute)),p){const M=u.select(l+" svg").node();B=AL(B,M)}else g||(B=Ki.sanitize(B,{ADD_TAGS:CL,ADD_ATTR:SL,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(bL(),y)throw y;return c(),{diagramType:x,svg:B,bindFunctions:m.db.bindFunctions}},"render");function qk(e={}){const t=hr({},e);t?.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),YT(t),t?.theme&&t.theme in Qn?t.themeVariables=Qn[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Qn.default.getThemeVariables(t.themeVariables));const r=typeof t=="object"?GT(t):Gy();Fu(r.logLevel),Oc()}C(qk,"initialize");var jk=C((e,t={})=>{const{code:r}=Cp(e);return Gd.fromText(r,t)},"getDiagramFromText");function Wk(e,t,r,n){Rk(t,e),Pk(t,r,n,t.attr("id"))}C(Wk,"addA11yInfo");var ii=Object.freeze({render:LL,parse:Uk,getDiagramFromText:jk,initialize:qk,getConfig:Ar,setConfig:Yy,getSiteConfig:Gy,updateSiteConfig:ZT,reset:C(()=>{Il()},"reset"),globalReset:C(()=>{Il(Qi)},"globalReset"),defaultConfig:Qi});Fu(Ar().logLevel),Il(Ar());var BL=C((e,t,r)=>{ft.warn(e),ap(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),Hk=C(async function(e={querySelector:".mermaid"}){try{await IL(e)}catch(t){if(ap(t)&&ft.error(t.str),ss.parseError&&ss.parseError(t),!e.suppressErrors)throw ft.error("Use the suppressErrors option to suppress these errors"),t}},"run"),IL=C(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const n=ii.getConfig();let s;if(ft.debug((e?"":"No ")+"Callback function found"),r)s=r;else{if(!t)throw new Error("Nodes and querySelector are both undefined");s=document.querySelectorAll(t)}ft.debug(`Found ${s.length} diagrams`),n?.startOnLoad!==void 0&&(ft.debug("Start On Load: "+n?.startOnLoad),ii.updateSiteConfig({startOnLoad:n?.startOnLoad}));const i=new Cn.InitIDGenerator(n.deterministicIds,n.deterministicIDSeed);let o;const a=[];for(const h of Array.from(s)){if(ft.info("Rendering diagram: "+h.id),h.getAttribute("data-processed"))continue;h.setAttribute("data-processed","true");const l=`mermaid-${i.next()}`;o=h.innerHTML,o=zb(Cn.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const c=Cn.detectInit(o);c&&ft.debug("Detected early reinit: ",c);try{const{svg:u,bindFunctions:p}=await Zk(l,o,h);h.innerHTML=u,e&&await e(l),p&&p(h)}catch(u){BL(u,a,ss.parseError)}}if(a.length>0)throw a[0]},"runThrowsErrors"),Vk=C(function(e){ii.initialize(e)},"initialize"),FL=C(async function(e,t,r){ft.warn("mermaid.init is deprecated. Please use run instead."),e&&Vk(e);const n={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?n.querySelector=t:t&&(t instanceof HTMLElement?n.nodes=[t]:n.nodes=t),await Hk(n)},"init"),DL=C(async(e,{lazyLoad:t=!0}={})=>{Oc(),rd(...e),t===!1&&await yL()},"registerExternalDiagrams"),Gk=C(function(){if(ss.startOnLoad){const{startOnLoad:e}=ii.getConfig();e&&ss.run().catch(t=>ft.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",Gk,!1);var Im,Fm,vh,Dm,$o,Om,Rm,Pm,Nm,zm,bh,Um,OL=C(function(e){ss.parseError=e},"setParseErrorHandler"),nc=[],xh=!1,Yk=C(async()=>{if(!xh){for(xh=!0;nc.length>0;){const e=nc.shift();if(e)try{await e()}catch(t){ft.error("Error executing queue",t)}}xh=!1}},"executeQueue"),RL=C(async(e,t)=>new Promise((r,n)=>{const s=C(()=>new Promise((i,o)=>{ii.parse(e,t).then(a=>{i(a),r(a)},a=>{ft.error("Error parsing",a),ss.parseError?.(a),o(a),n(a)})}),"performCall");nc.push(s),Yk().catch(n)}),"parse"),Zk=C((e,t,r)=>new Promise((n,s)=>{const i=C(()=>new Promise((o,a)=>{ii.render(e,t,r).then(h=>{o(h),n(h)},h=>{ft.error("Error parsing",h),ss.parseError?.(h),a(h),s(h)})}),"performCall");nc.push(i),Yk().catch(s)}),"render"),ss={startOnLoad:!0,mermaidAPI:ii,parse:RL,render:Zk,init:FL,run:Hk,registerExternalDiagrams:DL,registerLayoutLoaders:Ak,initialize:Vk,parseError:void 0,contentLoaded:Gk,setParseErrorHandler:OL,detectType:Du,registerIconPacks:lA,getRegisteredDiagramsMetadata:C(()=>Object.keys(ni).map(e=>({id:e})),"getRegisteredDiagramsMetadata")},qm=ss;function PL(){return Fm||(Fm=1,Im=function(){var e,t,r,n="",s=[],i={passive:!0},o={passive:!1};function a(l,c,u,p){var g;g=r==="wheel"?u:function(f,m){var y=function(v){!v&&(v=window.event);var x={originalEvent:v,target:v.target||v.srcElement,type:"wheel",deltaMode:v.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){v.preventDefault?v.preventDefault():v.returnValue=!1}};return r=="mousewheel"?(x.deltaY=-.025*v.wheelDelta,v.wheelDeltaX&&(x.deltaX=-.025*v.wheelDeltaX)):x.deltaY=v.detail,m(x)};return s.push({element:f,fn:y}),y}(l,u),l[e](n+c,g,p?i:o)}function h(l,c,u,p){var g;g=r==="wheel"?u:function(f){for(var m=0;m<s.length;m++)if(s[m].element===f)return s[m].fn;return function(){}}(l),l[t](n+c,g,p?i:o),function(f){for(var m=0;m<s.length;m++)if(s[m].element===f)return s.splice(m,1)}(l)}return window.addEventListener?(e="addEventListener",t="removeEventListener"):(e="attachEvent",t="detachEvent",n="on"),r="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",{on:function(l,c,u){a(l,r,c,u),r=="DOMMouseScroll"&&a(l,"MozMousePixelScroll",c,u)},off:function(l,c,u){h(l,r,c,u),r=="DOMMouseScroll"&&h(l,"MozMousePixelScroll",c,u)}}}()),Im}function Zd(){if(Dm)return vh;function e(t){return function(r){window.setTimeout(r,t)}}return Dm=1,vh={extend:function(t,r){for(var n in t=t||{},r)this.isObject(r[n])?t[n]=this.extend(t[n],r[n]):t[n]=r[n];return t},isElement:function(t){return t instanceof HTMLElement||t instanceof SVGElement||t instanceof SVGSVGElement||t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"},isObject:function(t){return Object.prototype.toString.call(t)==="[object Object]"},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},getSvg:function(t){var r,n;if(this.isElement(t))r=t;else{if(!(typeof t=="string"||t instanceof String))throw new Error("Provided selector is not an HTML object nor String");if(!(r=document.querySelector(t)))throw new Error("Provided selector did not find any elements. Selector: "+t)}if(r.tagName.toLowerCase()==="svg")n=r;else if(r.tagName.toLowerCase()==="object")n=r.contentDocument.documentElement;else{if(r.tagName.toLowerCase()!=="embed")throw r.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");n=r.getSVGDocument().documentElement}return n},proxy:function(t,r){return function(){return t.apply(r,arguments)}},getType:function(t){return Object.prototype.toString.apply(t).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(t,r){if(t.clientX===void 0||t.clientX===null)if(t.clientX=0,t.clientY=0,t.touches!==void 0&&t.touches.length){if(t.touches[0].clientX!==void 0)t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY;else if(t.touches[0].pageX!==void 0){var n=r.getBoundingClientRect();t.clientX=t.touches[0].pageX-n.left,t.clientY=t.touches[0].pageY-n.top}}else t.originalEvent!==void 0&&t.originalEvent.clientX!==void 0&&(t.clientX=t.originalEvent.clientX,t.clientY=t.originalEvent.clientY)},isDblClick:function(t,r){if(t.detail===2)return!0;if(r!=null){var n=t.timeStamp-r.timeStamp,s=Math.sqrt(Math.pow(t.clientX-r.clientX,2)+Math.pow(t.clientY-r.clientY,2));return n<250&&s<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(t,r,n){var s,i,o,a=this,h=null,l=0;n||(n={});var c=function(){l=n.leading===!1?0:a.now(),h=null,o=t.apply(s,i),h||(s=i=null)};return function(){var u=a.now();l||n.leading!==!1||(l=u);var p=r-(u-l);return s=this,i=arguments,p<=0||p>r?(clearTimeout(h),h=null,l=u,o=t.apply(s,i),h||(s=i=null)):h||n.trailing===!1||(h=setTimeout(c,p)),o}},createRequestAnimationFrame:function(t){var r=null;return t!=="auto"&&t<60&&t>1&&(r=Math.floor(1e3/t)),r===null?window.requestAnimationFrame||e(33):e(r)}},vh}function kh(){if(Om)return $o;Om=1;var e=Zd(),t="unknown";return document.documentMode&&(t="ie"),$o={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(r){if(r.clientWidth&&r.clientHeight)return{width:r.clientWidth,height:r.clientHeight};if(r.getBoundingClientRect())return r.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(r,n){var s=null;if(!(s=e.isElement(n)?n:r.querySelector(n))){var i=Array.prototype.slice.call(r.childNodes||r.children).filter(function(c){return c.nodeName!=="defs"&&c.nodeName!=="#text"});i.length===1&&i[0].nodeName==="g"&&i[0].getAttribute("transform")===null&&(s=i[0])}if(!s){var o="viewport-"+new Date().toISOString().replace(/\D/g,"");(s=document.createElementNS(this.svgNS,"g")).setAttribute("id",o);var a=r.childNodes||r.children;if(a&&a.length>0)for(var h=a.length;h>0;h--)a[a.length-h].nodeName!=="defs"&&s.appendChild(a[a.length-h]);r.appendChild(s)}var l=[];return s.getAttribute("class")&&(l=s.getAttribute("class").split(" ")),~l.indexOf("svg-pan-zoom_viewport")||(l.push("svg-pan-zoom_viewport"),s.setAttribute("class",l.join(" "))),s},setupSvgAttributes:function(r){if(r.setAttribute("xmlns",this.svgNS),r.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),r.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),r.parentNode!==null){var n=r.getAttribute("style")||"";n.toLowerCase().indexOf("overflow")===-1&&r.setAttribute("style","overflow: hidden; "+n)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:e.throttle(function(){for(var r=document.querySelectorAll("defs"),n=r.length,s=0;s<n;s++){var i=r[s];i.parentNode.insertBefore(i,i)}},$o?$o.internetExplorerRedisplayInterval:null),setCTM:function(r,n,s){var i=this,o="matrix("+n.a+","+n.b+","+n.c+","+n.d+","+n.e+","+n.f+")";r.setAttributeNS(null,"transform",o),"transform"in r.style?r.style.transform=o:"-ms-transform"in r.style?r.style["-ms-transform"]=o:"-webkit-transform"in r.style&&(r.style["-webkit-transform"]=o),t==="ie"&&s&&(s.parentNode.insertBefore(s,s),window.setTimeout(function(){i.refreshDefsGlobal()},i.internetExplorerRedisplayInterval))},getEventPoint:function(r,n){var s=n.createSVGPoint();return e.mouseAndTouchNormalize(r,n),s.x=r.clientX,s.y=r.clientY,s},getSvgCenterPoint:function(r,n,s){return this.createSVGPoint(r,n/2,s/2)},createSVGPoint:function(r,n,s){var i=r.createSVGPoint();return i.x=n,i.y=s,i}},$o}var NL=function(){if(Um)return bh;Um=1;var e=PL(),t=function(){if(Pm)return Rm;Pm=1;var l=kh();return Rm={enable:function(c){var u=c.svg.querySelector("defs");if(u||(u=document.createElementNS(l.svgNS,"defs"),c.svg.appendChild(u)),!u.querySelector("style#svg-pan-zoom-controls-styles")){var p=document.createElementNS(l.svgNS,"style");p.setAttribute("id","svg-pan-zoom-controls-styles"),p.setAttribute("type","text/css"),p.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",u.appendChild(p)}var g=document.createElementNS(l.svgNS,"g");g.setAttribute("id","svg-pan-zoom-controls"),g.setAttribute("transform","translate("+(c.width-70)+" "+(c.height-76)+") scale(0.75)"),g.setAttribute("class","svg-pan-zoom-control"),g.appendChild(this._createZoomIn(c)),g.appendChild(this._createZoomReset(c)),g.appendChild(this._createZoomOut(c)),c.svg.appendChild(g),c.controlIcons=g},_createZoomIn:function(c){var u=document.createElementNS(l.svgNS,"g");u.setAttribute("id","svg-pan-zoom-zoom-in"),u.setAttribute("transform","translate(30.5 5) scale(0.015)"),u.setAttribute("class","svg-pan-zoom-control"),u.addEventListener("click",function(){c.getPublicInstance().zoomIn()},!1),u.addEventListener("touchstart",function(){c.getPublicInstance().zoomIn()},!1);var p=document.createElementNS(l.svgNS,"rect");p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("width","1500"),p.setAttribute("height","1400"),p.setAttribute("class","svg-pan-zoom-control-background"),u.appendChild(p);var g=document.createElementNS(l.svgNS,"path");return g.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),g.setAttribute("class","svg-pan-zoom-control-element"),u.appendChild(g),u},_createZoomReset:function(c){var u=document.createElementNS(l.svgNS,"g");u.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),u.setAttribute("transform","translate(5 35) scale(0.4)"),u.setAttribute("class","svg-pan-zoom-control"),u.addEventListener("click",function(){c.getPublicInstance().reset()},!1),u.addEventListener("touchstart",function(){c.getPublicInstance().reset()},!1);var p=document.createElementNS(l.svgNS,"rect");p.setAttribute("x","2"),p.setAttribute("y","2"),p.setAttribute("width","182"),p.setAttribute("height","58"),p.setAttribute("class","svg-pan-zoom-control-background"),u.appendChild(p);var g=document.createElementNS(l.svgNS,"path");g.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),g.setAttribute("class","svg-pan-zoom-control-element"),u.appendChild(g);var f=document.createElementNS(l.svgNS,"path");return f.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),f.setAttribute("class","svg-pan-zoom-control-element"),u.appendChild(f),u},_createZoomOut:function(c){var u=document.createElementNS(l.svgNS,"g");u.setAttribute("id","svg-pan-zoom-zoom-out"),u.setAttribute("transform","translate(30.5 70) scale(0.015)"),u.setAttribute("class","svg-pan-zoom-control"),u.addEventListener("click",function(){c.getPublicInstance().zoomOut()},!1),u.addEventListener("touchstart",function(){c.getPublicInstance().zoomOut()},!1);var p=document.createElementNS(l.svgNS,"rect");p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("width","1500"),p.setAttribute("height","1400"),p.setAttribute("class","svg-pan-zoom-control-background"),u.appendChild(p);var g=document.createElementNS(l.svgNS,"path");return g.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),g.setAttribute("class","svg-pan-zoom-control-element"),u.appendChild(g),u},disable:function(c){c.controlIcons&&(c.controlIcons.parentNode.removeChild(c.controlIcons),c.controlIcons=null)}}}(),r=Zd(),n=kh(),s=function(){if(zm)return Nm;zm=1;var l=kh(),c=Zd(),u=function(p,g){this.init(p,g)};return u.prototype.init=function(p,g){this.viewport=p,this.options=g,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=c.proxy(this.updateCTM,this),this.requestAnimationFrame=c.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var f=this.processCTM();this.setCTM(f),this.updateCTM()},u.prototype.cacheViewBox=function(){var p=this.options.svg.getAttribute("viewBox");if(p){var g=p.split(/[\s\,]/).filter(function(m){return m}).map(parseFloat);this.viewBox.x=g[0],this.viewBox.y=g[1],this.viewBox.width=g[2],this.viewBox.height=g[3];var f=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=f,this.activeState.x=(this.options.width-this.viewBox.width*f)/2,this.activeState.y=(this.options.height-this.viewBox.height*f)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},u.prototype.simpleViewBoxCache=function(){var p=this.viewport.getBBox();this.viewBox.x=p.x,this.viewBox.y=p.y,this.viewBox.width=p.width,this.viewBox.height=p.height},u.prototype.getViewBox=function(){return c.extend({},this.viewBox)},u.prototype.processCTM=function(){var p,g=this.getCTM();if((this.options.fit||this.options.contain)&&(p=this.options.fit?Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),g.a=p,g.d=p,g.e=-this.viewBox.x*p,g.f=-this.viewBox.y*p),this.options.center){var f=.5*(this.options.width-(this.viewBox.width+2*this.viewBox.x)*g.a),m=.5*(this.options.height-(this.viewBox.height+2*this.viewBox.y)*g.a);g.e=f,g.f=m}return this.originalState.zoom=g.a,this.originalState.x=g.e,this.originalState.y=g.f,g},u.prototype.getOriginalState=function(){return c.extend({},this.originalState)},u.prototype.getState=function(){return c.extend({},this.activeState)},u.prototype.getZoom=function(){return this.activeState.zoom},u.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},u.prototype.computeRelativeZoom=function(p){return p/this.originalState.zoom},u.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},u.prototype.getCTM=function(){var p=this.options.svg.createSVGMatrix();return p.a=this.activeState.zoom,p.b=0,p.c=0,p.d=this.activeState.zoom,p.e=this.activeState.x,p.f=this.activeState.y,p},u.prototype.setCTM=function(p){var g=this.isZoomDifferent(p),f=this.isPanDifferent(p);if(g||f){if(g&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(p.a))===!1?(p.a=p.d=this.activeState.zoom,g=!1):(this.updateCache(p),this.options.onZoom(this.getRelativeZoom()))),f){var m=this.options.beforePan(this.getPan(),{x:p.e,y:p.f}),y=!1,v=!1;m===!1?(p.e=this.getPan().x,p.f=this.getPan().y,y=v=!0):c.isObject(m)&&(m.x===!1?(p.e=this.getPan().x,y=!0):c.isNumber(m.x)&&(p.e=m.x),m.y===!1?(p.f=this.getPan().y,v=!0):c.isNumber(m.y)&&(p.f=m.y)),y&&v||!this.isPanDifferent(p)?f=!1:(this.updateCache(p),this.options.onPan(this.getPan()))}(g||f)&&this.updateCTMOnNextFrame()}},u.prototype.isZoomDifferent=function(p){return this.activeState.zoom!==p.a},u.prototype.isPanDifferent=function(p){return this.activeState.x!==p.e||this.activeState.y!==p.f},u.prototype.updateCache=function(p){this.activeState.zoom=p.a,this.activeState.x=p.e,this.activeState.y=p.f},u.prototype.pendingUpdate=!1,u.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},u.prototype.updateCTM=function(){var p=this.getCTM();l.setCTM(this.viewport,p,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(p)},Nm=function(p,g){return new u(p,g)}}(),i=function(l,c){this.init(l,c)},o={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},a={passive:!0};i.prototype.init=function(l,c){var u=this;this.svg=l,this.defs=l.querySelector("defs"),n.setupSvgAttributes(this.svg),this.options=r.extend(r.extend({},o),c),this.state="none";var p=n.getBoundingClientRectNormalized(l);this.width=p.width,this.height=p.height,this.viewport=s(n.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(f,m){if(u.viewport&&u.options.beforeZoom)return u.options.beforeZoom(f,m)},onZoom:function(f){if(u.viewport&&u.options.onZoom)return u.options.onZoom(f)},beforePan:function(f,m){if(u.viewport&&u.options.beforePan)return u.options.beforePan(f,m)},onPan:function(f){if(u.viewport&&u.options.onPan)return u.options.onPan(f)},onUpdatedCTM:function(f){if(u.viewport&&u.options.onUpdatedCTM)return u.options.onUpdatedCTM(f)}});var g=this.getPublicInstance();g.setBeforeZoom(this.options.beforeZoom),g.setOnZoom(this.options.onZoom),g.setBeforePan(this.options.beforePan),g.setOnPan(this.options.onPan),g.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&t.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},i.prototype.setupHandlers=function(){var l=this,c=null;if(this.eventListeners={mousedown:function(f){var m=l.handleMouseDown(f,c);return c=f,m},touchstart:function(f){var m=l.handleMouseDown(f,c);return c=f,m},mouseup:function(f){return l.handleMouseUp(f)},touchend:function(f){return l.handleMouseUp(f)},mousemove:function(f){return l.handleMouseMove(f)},touchmove:function(f){return l.handleMouseMove(f)},mouseleave:function(f){return l.handleMouseUp(f)},touchleave:function(f){return l.handleMouseUp(f)},touchcancel:function(f){return l.handleMouseUp(f)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var u=this.options.customEventsHandler.haltEventListeners;if(u&&u.length)for(var p=u.length-1;p>=0;p--)this.eventListeners.hasOwnProperty(u[p])&&delete this.eventListeners[u[p]]}for(var g in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(g,this.eventListeners[g],!this.options.preventMouseEventsDefault&&a);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},i.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var l=this;this.wheelListener=function(u){return l.handleMouseWheel(u)};var c=!this.options.preventMouseEventsDefault;e.on(this.options.eventsListenerElement||this.svg,this.wheelListener,c),this.options.mouseWheelZoomEnabled=!0}},i.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var l=!this.options.preventMouseEventsDefault;e.off(this.options.eventsListenerElement||this.svg,this.wheelListener,l),this.options.mouseWheelZoomEnabled=!1}},i.prototype.handleMouseWheel=function(l){if(this.options.zoomEnabled&&this.state==="none"){this.options.preventMouseEventsDefault&&(l.preventDefault?l.preventDefault():l.returnValue=!1);var c=l.deltaY||1,u=Date.now()-this.lastMouseWheelEventTime,p=3+Math.max(0,30-u);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in l&&l.deltaMode===0&&l.wheelDelta&&(c=l.deltaY===0?0:Math.abs(l.wheelDelta)/l.deltaY),c=-.3<c&&c<.3?c:(c>0?1:-1)*Math.log(Math.abs(c)+10)/p;var g=this.svg.getScreenCTM().inverse(),f=n.getEventPoint(l,this.svg).matrixTransform(g),m=Math.pow(1+this.options.zoomScaleSensitivity,-1*c);this.zoomAtPoint(m,f)}},i.prototype.zoomAtPoint=function(l,c,u){var p=this.viewport.getOriginalState();u?(l=Math.max(this.options.minZoom*p.zoom,Math.min(this.options.maxZoom*p.zoom,l)),l/=this.getZoom()):this.getZoom()*l<this.options.minZoom*p.zoom?l=this.options.minZoom*p.zoom/this.getZoom():this.getZoom()*l>this.options.maxZoom*p.zoom&&(l=this.options.maxZoom*p.zoom/this.getZoom());var g=this.viewport.getCTM(),f=c.matrixTransform(g.inverse()),m=this.svg.createSVGMatrix().translate(f.x,f.y).scale(l).translate(-f.x,-f.y),y=g.multiply(m);y.a!==g.a&&this.viewport.setCTM(y)},i.prototype.zoom=function(l,c){this.zoomAtPoint(l,n.getSvgCenterPoint(this.svg,this.width,this.height),c)},i.prototype.publicZoom=function(l,c){c&&(l=this.computeFromRelativeZoom(l)),this.zoom(l,c)},i.prototype.publicZoomAtPoint=function(l,c,u){if(u&&(l=this.computeFromRelativeZoom(l)),r.getType(c)!=="SVGPoint"){if(!("x"in c)||!("y"in c))throw new Error("Given point is invalid");c=n.createSVGPoint(this.svg,c.x,c.y)}this.zoomAtPoint(l,c,u)},i.prototype.getZoom=function(){return this.viewport.getZoom()},i.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},i.prototype.computeFromRelativeZoom=function(l){return l*this.viewport.getOriginalState().zoom},i.prototype.resetZoom=function(){var l=this.viewport.getOriginalState();this.zoom(l.zoom,!0)},i.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},i.prototype.reset=function(){this.resetZoom(),this.resetPan()},i.prototype.handleDblClick=function(l){var c;if(this.options.preventMouseEventsDefault&&(l.preventDefault?l.preventDefault():l.returnValue=!1),this.options.controlIconsEnabled&&(l.target.getAttribute("class")||"").indexOf("svg-pan-zoom-control")>-1)return!1;c=l.shiftKey?1/(2*(1+this.options.zoomScaleSensitivity)):2*(1+this.options.zoomScaleSensitivity);var u=n.getEventPoint(l,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(c,u)},i.prototype.handleMouseDown=function(l,c){this.options.preventMouseEventsDefault&&(l.preventDefault?l.preventDefault():l.returnValue=!1),r.mouseAndTouchNormalize(l,this.svg),this.options.dblClickZoomEnabled&&r.isDblClick(l,c)?this.handleDblClick(l):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=n.getEventPoint(l,this.svg).matrixTransform(this.firstEventCTM.inverse()))},i.prototype.handleMouseMove=function(l){if(this.options.preventMouseEventsDefault&&(l.preventDefault?l.preventDefault():l.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var c=n.getEventPoint(l,this.svg).matrixTransform(this.firstEventCTM.inverse()),u=this.firstEventCTM.translate(c.x-this.stateOrigin.x,c.y-this.stateOrigin.y);this.viewport.setCTM(u)}},i.prototype.handleMouseUp=function(l){this.options.preventMouseEventsDefault&&(l.preventDefault?l.preventDefault():l.returnValue=!1),this.state==="pan"&&(this.state="none")},i.prototype.fit=function(){var l=this.viewport.getViewBox(),c=Math.min(this.width/l.width,this.height/l.height);this.zoom(c,!0)},i.prototype.contain=function(){var l=this.viewport.getViewBox(),c=Math.max(this.width/l.width,this.height/l.height);this.zoom(c,!0)},i.prototype.center=function(){var l=this.viewport.getViewBox(),c=.5*(this.width-(l.width+2*l.x)*this.getZoom()),u=.5*(this.height-(l.height+2*l.y)*this.getZoom());this.getPublicInstance().pan({x:c,y:u})},i.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},i.prototype.pan=function(l){var c=this.viewport.getCTM();c.e=l.x,c.f=l.y,this.viewport.setCTM(c)},i.prototype.panBy=function(l){var c=this.viewport.getCTM();c.e+=l.x,c.f+=l.y,this.viewport.setCTM(c)},i.prototype.getPan=function(){var l=this.viewport.getState();return{x:l.x,y:l.y}},i.prototype.resize=function(){var l=n.getBoundingClientRectNormalized(this.svg);this.width=l.width,this.height=l.height;var c=this.viewport;c.options.width=this.width,c.options.height=this.height,c.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},i.prototype.destroy=function(){var l=this;for(var c in this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()}),this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(c,this.eventListeners[c],!this.options.preventMouseEventsDefault&&a);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),h=h.filter(function(u){return u.svg!==l.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},i.prototype.getPublicInstance=function(){var l=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return l.options.panEnabled=!0,l.pi},disablePan:function(){return l.options.panEnabled=!1,l.pi},isPanEnabled:function(){return!!l.options.panEnabled},pan:function(c){return l.pan(c),l.pi},panBy:function(c){return l.panBy(c),l.pi},getPan:function(){return l.getPan()},setBeforePan:function(c){return l.options.beforePan=c===null?null:r.proxy(c,l.publicInstance),l.pi},setOnPan:function(c){return l.options.onPan=c===null?null:r.proxy(c,l.publicInstance),l.pi},enableZoom:function(){return l.options.zoomEnabled=!0,l.pi},disableZoom:function(){return l.options.zoomEnabled=!1,l.pi},isZoomEnabled:function(){return!!l.options.zoomEnabled},enableControlIcons:function(){return l.options.controlIconsEnabled||(l.options.controlIconsEnabled=!0,t.enable(l)),l.pi},disableControlIcons:function(){return l.options.controlIconsEnabled&&(l.options.controlIconsEnabled=!1,t.disable(l)),l.pi},isControlIconsEnabled:function(){return!!l.options.controlIconsEnabled},enableDblClickZoom:function(){return l.options.dblClickZoomEnabled=!0,l.pi},disableDblClickZoom:function(){return l.options.dblClickZoomEnabled=!1,l.pi},isDblClickZoomEnabled:function(){return!!l.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return l.enableMouseWheelZoom(),l.pi},disableMouseWheelZoom:function(){return l.disableMouseWheelZoom(),l.pi},isMouseWheelZoomEnabled:function(){return!!l.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(c){return l.options.zoomScaleSensitivity=c,l.pi},setMinZoom:function(c){return l.options.minZoom=c,l.pi},setMaxZoom:function(c){return l.options.maxZoom=c,l.pi},setBeforeZoom:function(c){return l.options.beforeZoom=c===null?null:r.proxy(c,l.publicInstance),l.pi},setOnZoom:function(c){return l.options.onZoom=c===null?null:r.proxy(c,l.publicInstance),l.pi},zoom:function(c){return l.publicZoom(c,!0),l.pi},zoomBy:function(c){return l.publicZoom(c,!1),l.pi},zoomAtPoint:function(c,u){return l.publicZoomAtPoint(c,u,!0),l.pi},zoomAtPointBy:function(c,u){return l.publicZoomAtPoint(c,u,!1),l.pi},zoomIn:function(){return this.zoomBy(1+l.options.zoomScaleSensitivity),l.pi},zoomOut:function(){return this.zoomBy(1/(1+l.options.zoomScaleSensitivity)),l.pi},getZoom:function(){return l.getRelativeZoom()},setOnUpdatedCTM:function(c){return l.options.onUpdatedCTM=c===null?null:r.proxy(c,l.publicInstance),l.pi},resetZoom:function(){return l.resetZoom(),l.pi},resetPan:function(){return l.resetPan(),l.pi},reset:function(){return l.reset(),l.pi},fit:function(){return l.fit(),l.pi},contain:function(){return l.contain(),l.pi},center:function(){return l.center(),l.pi},updateBBox:function(){return l.updateBBox(),l.pi},resize:function(){return l.resize(),l.pi},getSizes:function(){return{width:l.width,height:l.height,realZoom:l.getZoom(),viewBox:l.viewport.getViewBox()}},destroy:function(){return l.destroy(),l.pi}}),this.publicInstance};var h=[];return bh=function(l,c){var u=r.getSvg(l);if(u===null)return null;for(var p=h.length-1;p>=0;p--)if(h[p].svg===u)return h[p].instance.getPublicInstance();return h.push({svg:u,instance:new i(u,c)}),h[h.length-1].instance.getPublicInstance()},bh}();const zL=ku(NL),UL=new Map([[zp.light,"default"],[zp.dark,"dark"]]),Xk=500,qL=(e,t)=>{const r=`mermaid-${crypto.randomUUID()}`;let n,s=!1;const i=()=>{try{n?.destroy()}catch(l){s?console.warn("Pan controller matrix is not invertible, controller will not be destroyed"):console.error("Failed to destroy pan controller: ",l)}n=void 0};let o=0;const a=uu(l=>{(async function(c){const u=(t.themeCategory&&UL.get(t.themeCategory))??"default";qm.initialize({startOnLoad:!1,theme:u});try{const{svg:p,bindFunctions:g}=await qm.render(r,c,e);e.innerHTML=p,t.setSvg(p),g?.(e);const f=document.querySelector(`#${r}`);if(f===null)throw new Error("Diagram element not found");const m=document.querySelector(".c-codeblock__top-bar-anchor"),y=m?.getBoundingClientRect().height||0;t.setContainerPosition(y),f.style.height=Xk-y+"px",f.style.maxWidth="100%",i(),n=zL(f,{fit:!0,center:!0,mouseWheelZoomEnabled:!1}),n.setOnUpdatedCTM(v=>{var x;(x=v).a*x.d-x.c*x.b==0&&(s=!0,console.warn("Pan controller matrix is not invertible"))}),t.setPanZoomController(n)}catch(p){console.error("Failed to parse mermaid diagram: ",p),t.setError(!0)}})(l)},150),h=new ResizeObserver(l=>{const c=l[0].contentRect.width;c!==o&&t.text!==""&&t.canRender()&&(o=c,a(t.text))});return h.observe(document.documentElement),{update:l=>{(l.text!==""&&t.text!==l.text||l.themeCategory!==t.themeCategory)&&(t={...t,...l},a(t.text))},destroy:()=>{e.innerHTML="",h.disconnect(),i()}}};var jL=P('<div class="c-mermaid-block svelte-mbq130"><div style="position: relative"><!> <div><div class="c-mermaid-diagram svelte-mbq130"></div></div> <div><!> <!> <!> <!> <!> <!> <div class="c-mermaid-controls-container__down svelte-mbq130"><!></div></div></div></div>');function Kk(e,t){ut(t,!0);const[r,n]=se(),s=me("chatModel"),i=s?.extensionClient;$s(()=>{i?.reportWebviewClientEvent(Sn.chatMermaidblockInitialize)});let o=yt(!1),a=yt(!0),h=yt(!1),l=yt(void 0),c=yt(void 0),u=yt(void 0);function p(){return d(o)&&!d(a)&&!d(h)}let g=!1;function f(){X(o,!d(o)),g||(g=!0,i?.reportWebviewClientEvent(Sn.chatMermaidblockToggle))}function m(j){j&&(X(o,!1),X(a,!1),d(h)||i?.reportWebviewClientEvent(Sn.chatMermaidBlockError)),X(h,j,!0)}function y(j){d(c)&&(d(c).style.top=`${j}px`)}function v(j){X(l,j,!0),d(l).setOnPan(k),d(l).setOnZoom(k)}let x=!1;function k(){x||(i?.reportWebviewClientEvent(Sn.chatMermaidblockInteract),x=!0)}function _(j){X(u,j,!0)}let w=O(()=>Tt(fu,"$themeStore",r)?.category);_e(()=>{t.token.raw.trim().endsWith("```")&&!d(h)&&(X(a,!1),X(o,!0))});const S=O(()=>{if(!d(h)&&!d(a)){const j=[{codeblockActionType:pe.goTo,title:d(o)?"Show Code":"Show Diagram",onClick:f,iconName:d(o)?"braces":"network",buttonText:d(o)?"Code":"Diagram",primary:!0}];return d(o)&&j?.push({codeblockActionType:pe.copy,title:"Copy SVG",onClick:()=>{d(u)&&My(d(u))},iconName:"files",buttonText:"Copy SVG",onSuccessMessage:"Copied SVG"},{codeblockActionType:pe.insert,title:"Create SVG",onClick:()=>{if(d(u)&&s){const V=t.codeblockMetadata?.relPath?.replace(/\.[^/.]+$/,".svg");Ay(d(u),s.extensionClient,V)}},iconName:"image-plus",buttonText:"Create SVG",onSuccessMessage:"Created SVG"}),j}});var T=jL(),L=R(T),F=R(L);{let j=O(()=>d(o)?{...t.token,text:""}:t.token);rT(F,{get token(){return d(j)},get codeblockMetadata(){return t.codeblockMetadata},get height(){return Xk},get actionButtons(){return d(S)},get removeDefaultButtons(){return d(o)}})}var A=Y(F,2);let B;var M=R(A);Jr(M,(j,V)=>qL?.(j,V),()=>({text:d(a)||d(h)?"":t.token.text,canRender:p,setError:m,setContainerPosition:y,setPanZoomController:v,themeCategory:d(w),setSvg:_})),Kr(A,j=>X(c,j),()=>d(c));var $=Y(A,2);let E;var D=R($);de(D,{onclick:()=>d(l)?.zoomIn(),color:"neutral",variant:"ghost",children:(j,V)=>{vt(j,{name:"zoom-in"})},$$slots:{default:!0}});var I=Y(D,2);de(I,{onclick:()=>d(l)?.panBy({x:0,y:32}),color:"neutral",variant:"ghost",children:(j,V)=>{vt(j,{name:"chevron-up"})},$$slots:{default:!0}});var N=Y(I,2);de(N,{onclick:()=>d(l)?.zoomOut(),color:"neutral",variant:"ghost",children:(j,V)=>{vt(j,{name:"zoom-out"})},$$slots:{default:!0}});var q=Y(N,2);de(q,{onclick:()=>d(l)?.panBy({x:32,y:0}),color:"neutral",variant:"ghost",children:(j,V)=>{vt(j,{name:"chevron-left"})},$$slots:{default:!0}});var K=Y(q,2);{let j=O(()=>d(l)?.reset||qs);de(K,{get onclick(){return d(j)},color:"neutral",variant:"ghost",children:(V,rt)=>{vt(V,{name:"refresh-ccw"})},$$slots:{default:!0}})}var Z=Y(K,2);de(Z,{onclick:()=>d(l)?.panBy({x:-32,y:0}),color:"neutral",variant:"ghost",children:(j,V)=>{vt(j,{name:"chevron-right"})},$$slots:{default:!0}});var U=Y(Z,2),H=R(U);de(H,{onclick:()=>d(l)?.panBy({x:0,y:-32}),color:"neutral",variant:"ghost",children:(j,V)=>{vt(j,{name:"chevron-down"})},$$slots:{default:!0}}),et((j,V)=>{B=Me(A,1,"c-mermaid-diagram-container svelte-mbq130",null,B,j),E=Me($,1,"c-mermaid-controls-container svelte-mbq130",null,E,V)},[()=>({"c-mermaid-diagram-hidden":!d(o)}),()=>({"c-mermaid-diagram-hidden":!d(o)})]),b(e,T),pt(),n()}const bl={lineNumbers:"off",wrappingIndent:"same",contextmenu:!1,wordBasedSuggestions:"off",renderLineHighlight:"none",occurrencesHighlight:"off",selectionHighlight:!1,codeLens:!1,links:!1,hover:{enabled:!1},hideCursorInOverviewRuler:!0,renderWhitespace:"none",renderFinalNewline:"on",lineHeight:16.5,fontSize:11};var WL=P('<span class="c-code-insert-button svelte-qm16ig"><!></span>'),HL=P('<span class="c-collapsible-button-false svelte-1bu2x6f"><!></span>');function VL(e,t){ut(t,!1);let r=G(t,"primaryButton",8);const n=async()=>(r().onClick(),"success");var s={onClickForSuccessButton:n};pr();var i=HL(),o=R(i),a=l=>{ks(l,{stickyColor:!0,size:1,onCopy:n})},h=l=>{var c=J(),u=W(c),p=f=>{_u(f,{stickyColor:!0,size:1,onOpenLocalFile:n})},g=f=>{(function(m,y){const v=O0(y);ut(y,!1);let x=G(y,"size",8,1),k=G(y,"codeblockActionType",8),_=G(y,"variant",8,"ghost-block"),w=G(y,"color",8,"neutral"),S=G(y,"successText",24,()=>{}),T=G(y,"tooltip",8,"Insert"),L=G(y,"stickyColor",8,!1),F=G(y,"onClick",8);pr();var A=WL(),B=R(A);{let M=he(()=>({neutral:T(),success:S()}));wu(B,{get defaultColor(){return w()},get size(){return x()},get variant(){return _()},loading:!1,get stickyColor(){return L()},icon:Ft(()=>!v.text),get tooltip(){return d(M)},stateVariant:{success:"soft",neutral:"ghost-block",failure:"soft"},get onClick(){return F()},children:($,E)=>{var D=J(),I=W(D);cr(I,y,"text",{},null),b($,D)},$$slots:{default:!0,iconLeft:($,E)=>{var D=J(),I=W(D),N=K=>{vt(K,{name:"file-plus"})},q=K=>{var Z=J(),U=W(Z),H=V=>{vt(V,{name:"file-diff"})},j=V=>{var rt=J(),tt=W(rt),it=nt=>{vt(nt,{name:"check"})};z(tt,nt=>{xt(k()),xt(pe),Ft(()=>k()===pe.directApply)&&nt(it)},!0),b(V,rt)};z(U,V=>{xt(k()),xt(pe),Ft(()=>k()===pe.smartPaste)?V(H):V(j,!1)},!0),b(K,Z)};z(I,K=>{xt(k()),xt(pe),Ft(()=>k()===pe.insert)?K(N):K(q,!1)}),b($,D)}}})}b(m,A),pt()})(f,{get codeblockActionType(){return xt(r()),Ft(()=>r().codeblockActionType)},size:1,onClick:n,get successText(){return xt(r()),Ft(()=>r().onSuccessMessage)}})};z(u,f=>{xt(r()),xt(pe),Ft(()=>r().codeblockActionType===pe.goTo)?f(p):f(g,!1)},!0),b(l,c)};return z(o,l=>{xt(r()),xt(pe),Ft(()=>r().codeblockActionType===pe.copy)?l(a):l(h,!1)}),b(e,i),H0(t,"onClickForSuccessButton",n),pt(s)}function Qk(e,t){const r=G(t,"expanded",3,!1),n=G(t,"class",3,""),s=O(()=>r()?"up":"down");{let i=O(()=>r()?"Collapse":"Expand");Nr(e,{variant:"soft",color:"neutral",size:.5,get class(){return`c-expand-button ${n()??""}`},get"aria-label"(){return d(i)},$$events:{click(...o){t.onClick?.apply(this,o)}},children:(o,a)=>{Hw(o,{get direction(){return d(s)}})},$$slots:{default:!0}})}}const GL=10;var YL=P('<span class="c-deferred-loading-augment__spinner"><!> <!></span>'),ZL=P("<div><!></div>"),XL=P('<div><span class="c-collapsible-icon-wrapper c-collapsible-icon-expand svelte-7kz44h"><!></span> <span class="c-collapsible-icon-wrapper svelte-7kz44h"><!></span></div>');function Jk(e,t){ut(t,!1);let r=G(t,"expandable",8,!0),n=G(t,"collapsed",8,!1);const s=void 0;var i={icon:s};pr();{let o=he(()=>r()?n()?"Expand":"Collapse":""),a=he(()=>(xt(Pe),Ft(()=>[Pe.Hover])));fe(e,{get content(){return d(o)},get triggerOn(){return d(a)},children:(h,l)=>{var c=XL();let u;var p=R(c),g=R(p);Gw(g,{get collapsed(){return n()}});var f=Y(p,2),m=R(f);cr(m,t,"icon",{},null),et(y=>u=Me(c,1,"c-collapsible-icon svelte-7kz44h",null,u,y),[()=>({"is-not-expandable":!r()})]),b(h,c)},$$slots:{default:!0}})}return H0(t,"icon",s),pt(i)}function la(e,t){let r=G(t,"filepath",8),n=G(t,"start",24,()=>{}),s=G(t,"stop",24,()=>{}),i=G(t,"metric",24,()=>{}),o=G(t,"codeSnippetToLocate",24,()=>{}),a=_t();function h(l){l.stopPropagation(),l.preventDefault(),d(a).openFile()}fe(e,{get content(){return`Open ${r()??""}`},class:"c-collapsible-button-false",children:(l,c)=>{Zi(l,{get filepath(){return r()},growname:!1,onClick:h,size:1,rightIcon:p=>{Kr(_u(p,{get path(){return r()},get start(){return n()},get stop(){return s()},get metric(){return i()},tooltip:!1,get codeSnippetToLocate(){return o()},$$legacy:!0}),g=>X(a,g),()=>d(a))},$$slots:{rightIcon:!0}})},$$slots:{default:!0}})}var KL=P('<div class="c-codeblock__truncated-surface svelte-m8hfpi"><!></div>'),QL=P("<div><!> <!></div>"),JL=P('<div class="c-codeblock__loading svelte-m8hfpi"><!></div>'),tB=P("<!> ",1),eB=P("<!> <!>",1),rB=P('<div slot="header" class="c-codeblock__header-content svelte-m8hfpi"><!> <div class="c-codeblock__relpath svelte-m8hfpi"><!></div> <div class="c-codeblock__action-bar-right svelte-m8hfpi"><!> <!></div></div>'),nB=P("<div><!></div>");function sB(e,t){ut(t,!1);const r=()=>Tt(fu,"$themeStore",n),[n,s]=se(),i=_t(),o=_t(),a=_t(),h=_t(),l=_t(),c=_t();let u=G(t,"token",8),p=G(t,"codeblockMetadata",8),g=G(t,"collapsed",12,!0),f=G(t,"element",28,()=>{}),m=_t(),y=G(t,"lineHeight",24,()=>bl.lineHeight??18),v=G(t,"truncateLines",8,10),x=G(t,"requestStatus",8),k=G(t,"primaryButton",8),_=G(t,"buttons",8),w=G(t,"truncate",12,!1),S=G(t,"opened",12,!1),T=G(t,"codeContainerElement",28,()=>{});const{enabled:L}=mc();qt(()=>r(),()=>{X(i,r()?.category)}),qt(()=>xt(p()),()=>{X(o,Vw(p()?.relPath??""))}),qt(()=>(xt(p()),xt(u())),()=>{X(a,p()?.language||u().lang)}),qt(()=>xt(u()),()=>{X(h,(u().text.match(/\r?\n/g)||[]).length+1)}),qt(()=>(d(h),xt(v()),xt(y())),()=>{X(l,Math.min(d(h),v())*y())}),qt(()=>(xt(x()),ur),()=>{X(c,x()===ur.sent)}),Ms(),pr();var F=nB();let A;var B=R(F);uc(B,{get stickyHeaderTop(){return GL},stickyHeader:!0,toggleHeader:!0,expandable:!0,class:"c-codeblock__container",get isHeaderStuck(){return d(m)},set isHeaderStuck(M){X(m,M)},get collapsed(){return g()},set collapsed(M){g(M)},children:(M,$)=>{var E=QL();let D;var I=R(E);cr(I,t,"default",{},K=>{var Z=J(),U=W(Z),H=V=>{{let rt=he(()=>(d(a),xt(u()),Ft(()=>d(a)||u().lang)));wl(V,{get options(){return bl},get text(){return xt(u()),Ft(()=>u().text)},get lang(){return d(rt)}})}},j=V=>{(function(rt,tt){ut(tt,!1);let it=G(tt,"minHeight",8,"var(--ds-spacing-4)"),nt=G(tt,"options",24,()=>({scrollTarget:document.body,threshold:.01,visibilityDuration:100,throttleDuration:10,ignoreScroll:!0})),ct=_t(!1);function mt(){X(ct,!0),nt()?.onVisible?.()}pr();var lt=ZL();let gt;var Ct=R(lt),St=kt=>{var wt=J(),bt=W(wt);cr(bt,tt,"default",{},null),b(kt,wt)},Lt=kt=>{var wt=YL(),bt=R(wt);gs(bt,{});var It=Y(bt,2);ht(It,{class:"c-deferred-loading-augment__text",size:1,children:(Yt,Xt)=>{var Ht=st("Loading...");b(Yt,Ht)},$$slots:{default:!0}}),b(kt,wt)};z(Ct,kt=>{d(ct)?kt(St):kt(Lt,!1)}),Jr(lt,(kt,wt)=>As?.(kt,wt),()=>({...nt(),onVisible:mt})),et(kt=>{gt=Me(lt,1,"c-deferred-loading-augment svelte-1oeu3hh",null,gt,kt),ri(lt,`--deferred-loading-augment-min-height: ${it()??""}`)},[()=>({"c-deferred-loading-augment--visible":d(ct)})]),b(rt,lt),pt()})(V,{get minHeight(){return`${d(l)??""}px`},children:(rt,tt)=>{{let it=he(()=>(d(a),xt(u()),Ft(()=>d(a)||u().lang)));wl(rt,{get options(){return bl},get text(){return xt(u()),Ft(()=>u().text)},get lang(){return d(it)}})}},$$slots:{default:!0}})};z(U,V=>{Tt(L,"$intersectionObserverEnabled",n)?V(H):V(j,!1)}),b(K,Z)});var N=Y(I,2),q=K=>{var Z=KL();Qk(R(Z),{expanded:!1,onClick:()=>{w(!1),S(!0)}}),b(K,Z)};z(N,K=>{w()&&K(q)}),Kr(E,K=>T(K),()=>T()),et(K=>D=Me(E,1,"c-codeblock__container-inner svelte-m8hfpi",null,D,K),[()=>({"c-codeblock__truncated":w()})]),b(M,E)},$$slots:{default:!0,header:(M,$)=>{var E=rB(),D=R(E);Jk(D,{get collapsed(){return g()},expandable:!0,$$slots:{icon:(V,rt)=>{G0(V,{slot:"icon",get language(){return d(a)},get filename(){return d(o)},class:"c-icon-file-path__lang-icon"})}}});var I=Y(D,2),N=R(I),q=V=>{la(V,{get filepath(){return d(o)},get metric(){return xt(Sn),Ft(()=>Sn.chatCodeblockGoToFile)},get codeSnippetToLocate(){return xt(u()),Ft(()=>u().text)}})};z(N,V=>{xt(p()),Ft(()=>p()?.relPath)&&V(q)});var K=Y(I,2),Z=R(K),U=V=>{var rt=JL(),tt=R(rt);gs(tt,{size:1}),b(V,rt)},H=V=>{VL(V,{get primaryButton(){return k()}})};z(Z,V=>{d(c)?V(U):V(H,!1)});var j=Y(Z,2);ce.Root(j,{nested:!1,children:(V,rt)=>{var tt=eB(),it=W(tt);ce.Trigger(it,{children:(ct,mt)=>{de(ct,{variant:"ghost-block",color:"neutral",size:1,"data-collapsible-button":"false",children:(lt,gt)=>{vt(lt,{name:"ellipsis"})},$$slots:{default:!0}})},$$slots:{default:!0}});var nt=Y(it,2);ce.Content(nt,{size:1,side:"bottom",align:"end",children:(ct,mt)=>{var lt=J(),gt=W(lt);ge(gt,1,_,Re,(Ct,St)=>{ce.Item(Ct,{get onSelect(){return d(St),Ft(()=>d(St).onClick)},get disabled(){return d(St),Ft(()=>d(St).disabled)},children:(Lt,kt)=>{var wt=tB(),bt=W(wt),It=Xt=>{vt(Xt,{slot:"iconLeft",get name(){return d(St),Ft(()=>d(St).iconName)}})};z(bt,Xt=>{d(St),Ft(()=>d(St).iconName)&&Xt(It)});var Yt=Y(bt);et(()=>at(Yt,` ${d(St),Ft(()=>d(St).buttonText)??""}`)),b(Lt,wt)},$$slots:{default:!0}})}),b(ct,lt)},$$slots:{default:!0}}),b(V,tt)},$$slots:{default:!0}}),b(M,E)}},$$legacy:!0}),Kr(F,M=>f(M),()=>f()),et(M=>{A=Me(F,1,`c-codeblock c-codeblock__${d(i)}`,"svelte-m8hfpi",A,M),ri(F,`--codeblock-line-height: ${y()}px; --codeblock-truncate-lines: ${v()};`)},[()=>({"is-sticky":d(m)})]),b(e,F),pt(),s()}function iB(e,t){ut(t,!0);const r=()=>Tt(f,"$enableSmartPaste",s),n=()=>Tt(m,"$enableDirectApply",s),[s,i]=se();let o=G(t,"collapsed",3,!1),a=G(t,"lineHeight",19,()=>bl.lineHeight??18),h=G(t,"truncateLines",3,10),l=G(t,"defaultActionButtons",31,()=>Ne([pe.smartPaste,pe.copy,pe.insert,pe.goTo]));const c=me("chatModel"),u=me("requestId"),p=me("requestStatus"),g=me(xs.key),f=je("enableSmartPaste"),m=je("enableDirectApply"),y=je("enableDebugFeatures"),v=N0();let x=yt(!1),k=yt(!1),_=yt(void 0),w=yt(!1),S=yt(!1),T=yt(void 0);const L=kt=>ma(F,kt),F=Be(!1);let A=yt(!1),B=!1,M=yt(void 0),$=yt(void 0);pn(()=>{d(T)?.(),d(M)?.disconnect(),X(M,void 0)});let E=O(()=>Tt(u,"$requestIdModel",s)),D=O(()=>Tt(p,"$requestStatusModel",s)),I=O(()=>!!g?.isActive);_e(()=>{d(I)&&l([pe.copy])});let N=O(()=>t.codeblockMetadata?.mode==="EXCERPT");_e(()=>{t.codeblockMetadata?.relPath&&async function(){X(k,!0),t.codeblockMetadata?.relPath&&X(x,!!await c?.extensionClient.resolvePath({rootPath:"",relPath:t.codeblockMetadata?.relPath}))}()});let q=O(()=>d(D)===ur.success),K=O(()=>d(D)===ur.sent),Z=O(()=>!t.token.raw.trimEnd().endsWith("```"));_e(()=>{d(_)&&d(q)&&r()&&X(T,Kh(d(_),kt=>X(w,kt,!0),kt=>X(S,kt,!0)),!0)});let U=O(()=>Fy(c,t.codeblockMetadata,t.token,d(E),d(q),d(x),d(w),d(S),0,L,{enableDirectApply:n(),enableSmartPaste:r(),smartPastePrecomputeMode:Tt(v,"$smartPastePrecomputeMode",s)})),H=O(()=>d(U).smartPaste),j=O(()=>d(U).canTriggerSmartPaste),V=O(()=>d(U).canPrecomputeSmartPaste),rt=O(()=>d(U).smartPasteButton),tt=O(()=>d(U).directApplyButton),it=O(()=>function(kt,wt,bt,It=!1){const Yt=!!kt?.relPath,Xt=Yt&&$y(kt?.relPath??"");return It&&wt&&!Xt?pe.directApply:wt&&!Xt?pe.smartPaste:Yt&&bt?pe.insert:pe.copy}(t.codeblockMetadata,d(j),d(k)&&!d(x),!!n()&&!!d(tt))),nt=O(()=>By(t.token.text,d(N),t.codeblockMetadata,c,bs())),ct=O(()=>Ey(()=>t.token.text)),mt=O(()=>Ly(()=>t.token.text,t.codeblockMetadata,c));_e(()=>{d(V)&&d(H)({dryRun:!0})});let lt=O(()=>({[pe.smartPaste]:{...d(rt),disabled:d(K)},...n()&&d(tt)&&!d(I)?{[pe.directApply]:{...d(tt),disabled:d(K)}}:{},[pe.copy]:{...d(ct),disabled:d(Z)&&d(K)},[pe.insert]:{...d(mt),disabled:d(Z)&&d(K)},[pe.goTo]:{...d(nt)}})),gt=O(()=>d(lt)[d(it)]),Ct=O(()=>n()&&d(tt)?[pe.directApply,...l()]:l()),St=O(()=>d(Ct).map(kt=>d(lt)[kt]).filter(kt=>kt!==void 0)),Lt=O(()=>d(St).filter(kt=>kt.codeblockActionType!==d(it)));_e(()=>{d($)&&!d(M)&&Tt(y,"$enableDebugFeatures",s)&&(X(M,new ResizeObserver(kt=>{if(!d(A)&&t.codeblockMetadata?.relPath){const wt=kt[0].contentRect.height;X(A,wt>h()*a())}}),!0),d(M).observe(d($)))});{let kt=O(()=>d(K)?d(St):d(Lt));sB(e,{get truncate(){return d(A)},opened:B,get token(){return t.token},get codeblockMetadata(){return t.codeblockMetadata},get collapsed(){return o()},get lineHeight(){return a()},get truncateLines(){return h()},get requestStatus(){return d(D)},get primaryButton(){return d(gt)},get buttons(){return d(kt)},get element(){return d(_)},set element(wt){X(_,wt,!0)},get codeContainerElement(){return d($)},set codeContainerElement(wt){X($,wt,!0)}})}pt(),i()}function jm(e,t){ut(t,!0);const[r,n]=se();let s=O(()=>function(c){const u=c.indexOf(`
`);if(u!==-1)return c.slice(0,u)}(t.token.raw)),i=O(()=>d(s)?function(c){const u=/^`{3,}(\w+)?/.exec(c),p=u?.[1]??null;if(!u)return{language:null,relPath:null,mode:null};const g=c.slice(u[0].length);let f=null;const m=" path=",y=g.indexOf(m);if(y!==-1){const k=g.slice(y+6),_=k.indexOf(" mode=");f=(_!==-1?k.slice(0,_):k).trim()}let v=null;const x=g.indexOf(" mode=");return x!==-1&&(v=g.slice(x+6).trim()),{language:p,relPath:f,mode:v}}(d(s)):void 0),o=O(()=>d(i)?.language??t.token.lang);const a=je("enableChatMermaidDiagrams"),h=je("enableChatMermaidDiagramsMinVersion");let l=O(()=>Tt(a,"$enableChatMermaidDiagrams",r)||Tt(h,"$enableChatMermaidDiagramsMinVersion",r));Iu(e,{estimatedHeight:function(){return 80},children:(c,u)=>{var p=J(),g=W(p),f=y=>{Kk(y,{get token(){return t.token},get codeblockMetadata(){return d(i)}})},m=y=>{iB(y,{get token(){return t.token},get codeblockMetadata(){return d(i)}})};z(g,y=>{d(o)==="mermaid"&&d(l)?y(f):y(m,!1)}),b(c,p)},$$slots:{default:!0}}),pt(),n()}function Wm(e){return e!==void 0}var Mi=(e=>(e.directory="Directory",e.file="File",e.other="Other",e))(Mi||{}),oB=P('<span class="c-chat-codespan__content svelte-12i2pat" role="button" tabindex="0"><!> <!></span>'),aB=P("<div><!></div>");function Hm(e,t){let r=G(t,"token",8),n=G(t,"linkable",8),s=G(t,"element",28,()=>{});var i=aB();let o;var a=R(i);q0(a,{get token(){return r()},get element(){return s()},set element(h){s(h)},children:(h,l)=>{var c=oB(),u=R(c);cr(u,t,"icon",{},null);var p=Y(u,2);cr(p,t,"default",{},null),$e("click",c,function(g){tr.call(this,t,g)}),$e("keydown",c,function(g){tr.call(this,t,g)}),$e("cut",c,function(g){tr.call(this,t,g)}),$e("paste",c,function(g){tr.call(this,t,g)}),b(h,c)},$$slots:{default:!0},$$legacy:!0}),et(h=>o=Me(i,1,"c-chat-codespan svelte-12i2pat",null,o,h),[()=>({"c-chat-codespan--linkable":n()})]),b(e,i)}var lB=P("<!> ",1);function Vm(e,t){ut(t,!1);const r=()=>Tt(y,"$requestIdStore",i),n=()=>Tt(m,"$chatModel",i),s=()=>Tt(d(l),"$conversationModel",i),[i,o]=se(),a=_t(),h=_t(),l=_t(),c=_t(),u=_t(),p=_t(),g=_t();let f=G(t,"token",8);const m=me("chatModel"),y=me("requestId");m||console.warn("ChatModel not found in context -- should you be using this component?");const v=bs(),x=D=>{d(a)&&(m?.extensionClient.reportWebviewClientEvent(Sn.chatCodespanGoToFile),v(Yi(D)))},k=D=>{m?.extensionClient.reportWebviewClientEvent(Sn.chatCodespanGoToSymbol),v(Yi(D))};let _=_t(void 0),w=_t(void 0);async function S(D){const I=await m?.extensionClient.resolveSymbols(D,{files:d(p)})??[];return D===d(g)&&X(w,I),I}const T=uu(async D=>{D.length<=1||d(p).length===0||(async function(I){const N=await m?.extensionClient.resolvePath?.({rootPath:"",relPath:I},{files:d(p)});I===d(g)&&X(_,N)}(D),S(D))},500,{leading:!1,trailing:!0});let L,F=_t(!1),A=_t();pn(()=>{L?.destroy()}),qt(()=>(d(_),d(w)),()=>{X(a,d(_)!==void 0&&(d(_).fileType===void 0||d(_).fileType===Mi.file)||d(w)!==void 0&&d(w).length>0)}),qt(()=>r(),()=>{X(h,r())}),qt(()=>n(),()=>{dc(X(l,n()?.currentConversationModel),"$conversationModel",i)}),qt(()=>(s(),d(h)),()=>{X(c,s()?.exchangeWithRequestId?.(d(h)))}),qt(()=>d(c),()=>{X(u,d(c)?.workspace_file_chunks?.map(D=>D.file)??[])}),qt(()=>(d(u),Wm),()=>{X(p,d(u).filter(Wm).map(D=>({repoRoot:D.repoRoot,pathName:D.pathName})))}),qt(()=>xt(f()),()=>{X(g,f().raw.slice(1,f().raw.length-1))}),qt(()=>(d(F),d(g)),()=>{d(F)&&T(d(g))}),qt(()=>(d(F),d(A)),()=>{var D;!d(F)&&d(A)&&(D=d(A),L?.destroy(),L=As(D,{scrollTarget:document.body,threshold:.25,visibilityDuration:250,onVisible:()=>X(F,!0)}))}),Ms(),pr();var B=J(),M=W(B),$=D=>{const I=he(()=>d(_));var N=O(()=>Cr("Enter",()=>x(d(I))));Hm(D,{get linkable(){return d(a)},get token(){return f()},get element(){return d(A)},set element(q){X(A,q)},$$events:{click:()=>x(d(I)),keydown(...q){d(N)?.apply(this,q)},cut:()=>navigator.clipboard.writeText(d(g)),paste:q=>q.preventDefault()},children:(q,K)=>{var Z=st();et(()=>at(Z,d(g))),b(q,Z)},$$slots:{default:!0,icon:(q,K)=>{var Z=J(),U=W(Z),H=V=>{vt(V,{name:"file"})},j=V=>{var rt=J(),tt=W(rt),it=nt=>{vt(nt,{name:"folder-open"})};z(tt,nt=>{xt(d(I)),xt(Mi),Ft(()=>d(I).fileType===Mi.directory)&&nt(it)},!0),b(V,rt)};z(U,V=>{xt(d(I)),xt(Mi),Ft(()=>d(I).fileType===Mi.file)?V(H):V(j,!1)}),b(q,Z)}},$$legacy:!0})},E=D=>{var I=J(),N=W(I),q=Z=>{const U=he(()=>(d(w),Ft(()=>d(w)[0])));var H=O(()=>Cr("Enter",()=>k(d(U).file)));Hm(Z,{get linkable(){return d(a)},get token(){return f()},$$events:{click:async()=>{const j=await S(d(g)),V=j&&j.length>0?j[0]:d(U);k(V.file)},keydown(...j){d(H)?.apply(this,j)},cut:()=>navigator.clipboard.writeText(d(g)),paste:j=>j.preventDefault()},children:(j,V)=>{var rt=lB(),tt=W(rt);vt(tt,{name:"braces"});var it=Y(tt);et(()=>at(it,` ${d(g)??""}`)),b(j,rt)},$$slots:{default:!0}})},K=Z=>{q0(Z,{get token(){return f()},get element(){return d(A)},set element(U){X(A,U)},children:(U,H)=>{var j=st();et(()=>at(j,d(g))),b(U,j)},$$slots:{default:!0},$$legacy:!0})};z(N,Z=>{d(w),Ft(()=>d(w)!==void 0&&d(w).length>0)?Z(q):Z(K,!1)},!0),b(D,I)};z(M,D=>{d(_)!==void 0?D($):D(E,!1)}),b(e,B),pt(),o()}var cB=P('<a class="markdown-active-link svelte-1ip4w5g"><span class="markdown-base-link svelte-1ip4w5g"><!></span></a>'),hB=P('<span class="markdown-active-link svelte-1ip4w5g" role="button" tabindex="0"><span class="markdown-base-link svelte-1ip4w5g"><!></span></span>'),dB=P('<span class="markdown-active-link svelte-1ip4w5g" role="button" tabindex="0"><span class="markdown-base-link svelte-1ip4w5g"><!></span></span>'),uB=P('<span class="markdown-active-link svelte-1ip4w5g" role="button" tabindex="0"><span class="markdown-base-link svelte-1ip4w5g"><!></span></span>'),pB=P('<span class="markdown-base-link svelte-1ip4w5g"><!></span>'),gB=P('<span class="markdown-base-link svelte-1ip4w5g"><!></span>'),fB=P('<span class="markdown-base-link svelte-1ip4w5g"><!></span>');function Gm(e,t){ut(t,!1);let r=G(t,"token",8);const n=me("chatModel");n||console.warn("ChatModel not found in context -- should you be using this component?");const s=bs(),i=g=>{s(Yi(g))},o=g=>{Zo.postMessage({type:kr.augmentLink,data:g})},a=g=>{Zo.postMessage({type:kr.executeCommand,data:g})};let h=r().text.replace(/`/g,"");pr();var l=J(),c=W(l),u=g=>{var f=cB(),m=R(f),y=R(m);cr(y,t,"default",{},v=>{var x=st();et(()=>at(x,h)),b(v,x)}),et(()=>{Pr(f,"href",(xt(r()),Ft(()=>r().href))),Pr(f,"title",(xt(r()),Ft(()=>r().title)))}),b(g,f)},p=g=>{var f=J(),m=W(f),y=x=>{var k=hB(),_=O(()=>Cr("Enter",()=>o(r().href))),w=R(k),S=R(w);cr(S,t,"default",{},T=>{var L=st();et(()=>at(L,h)),b(T,L)}),$e("click",k,()=>o(r().href)),$e("keydown",k,function(...T){d(_)?.apply(this,T)}),$e("cut",k,()=>navigator.clipboard.writeText(h)),$e("paste",k,T=>T.preventDefault()),b(x,k)},v=x=>{var k=J(),_=W(k),w=T=>{var L=dB(),F=O(()=>Cr("Enter",()=>a(r().href.substring(8)))),A=R(L),B=R(A);cr(B,t,"default",{},M=>{var $=st();et(()=>at($,h)),b(M,$)}),$e("click",L,()=>a(r().href.substring(8))),$e("keydown",L,function(...M){d(F)?.apply(this,M)}),$e("cut",L,()=>navigator.clipboard.writeText(h)),$e("paste",L,M=>M.preventDefault()),b(T,L)},S=T=>{var L=J(),F=W(L);yu(F,()=>(xt(r()),Ft(()=>n?.extensionClient.resolvePath?.({rootPath:"",relPath:r().href}))),A=>{var B=fB(),M=R(B);cr(M,t,"default",{},$=>{var E=st();et(()=>at(E,h)),b($,E)}),b(A,B)},(A,B)=>{var M=J(),$=W(M),E=I=>{var N=uB(),q=O(()=>Cr("Enter",()=>i(d(B)))),K=R(N),Z=R(K);cr(Z,t,"default",{},U=>{var H=st();et(()=>at(H,h)),b(U,H)}),$e("click",N,()=>i(d(B))),$e("keydown",N,function(...U){d(q)?.apply(this,U)}),$e("cut",N,()=>navigator.clipboard.writeText(h)),$e("paste",N,U=>U.preventDefault()),b(I,N)},D=I=>{var N=pB(),q=R(N);cr(q,t,"default",{},K=>{var Z=st();et(()=>at(Z,h)),b(K,Z)}),b(I,N)};z($,I=>{d(B)?I(E):I(D,!1)}),b(A,M)},A=>{var B=gB(),M=R(B);cr(M,t,"default",{},$=>{var E=st();et(()=>at(E,h)),b($,E)}),b(A,B)}),b(T,L)};z(_,T=>{xt(r()),Ft(()=>/^command:/.test(r().href))?T(w):T(S,!1)},!0),b(x,k)};z(m,x=>{xt(r()),Ft(()=>/^augment:\/\//.test(r().href))?x(y):x(v,!1)},!0),b(g,f)};z(c,g=>{xt(r()),Ft(()=>/^https?:\/\//.test(r().href))?g(u):g(p,!1)}),b(e,l),pt()}var mB=P('<div class="c-thinking__title svelte-1dba5s8"> </div>'),yB=P("<span>Thinking</span>"),vB=P("<!> <!>",1),bB=P('<details class="c-thinking__details svelte-1dba5s8"><summary class="c-thinking__summary svelte-1dba5s8"><!></summary> <div class="c-thinking__row svelte-1dba5s8"><div class="c-thinking__vr svelte-1dba5s8"><!></div> <div class="c-thinking__content svelte-1dba5s8"><!></div></div></details>'),xB=P('<div class="c-thinking__summary svelte-1dba5s8"><!></div>'),kB=P('<div class="c-thinking svelte-1dba5s8"><!></div>'),_B=P('<div class="c-thinking-container hidden-when-empty"></div>');function Ym(e){e.scrollIntoView({block:"nearest",behavior:"smooth"})}var wB=P('<div class="c-bugreport-form svelte-helebu"><!> <div><!> <!></div> <div class="l-bugreport__send svelte-helebu"><!> <div class="l-bugreport__send-btns svelte-helebu"><!></div></div></div>'),CB=P('<div class="c-bugreport-form-container"><!></div>'),SB=P('<div class="c-feedback-form svelte-1q34grt"><!> <div class="l-feedback__send svelte-1q34grt"><!> <div class="l-feedback__send-btns svelte-1q34grt"><!></div></div></div>'),TB=P('<div class="c-feedback-form-container svelte-1q34grt"><!></div>');function Ws(e,t){ut(t,!1);let r,n=G(t,"iconName",24,()=>{}),s=G(t,"idleLabel",8),i=G(t,"successLabel",8),o=G(t,"onSelect",24,()=>{}),a=G(t,"successDuration",8,500),h=G(t,"disabled",8,!1),l=_t(void 0);pn(()=>{clearTimeout(r)}),pr(),ce.Item(e,{get color(){return d(l)},onSelect:async function(){try{await o()?.(),X(l,"success"),clearTimeout(r),r=setTimeout(()=>{X(l,void 0)},a())}catch{X(l,"error"),r=setTimeout(()=>{X(l,void 0)},a())}},get disabled(){return h()},children:(c,u)=>{var p=J(),g=W(p),f=y=>{var v=st("Action failed");b(y,v)},m=y=>{var v=J(),x=W(v),k=w=>{var S=st();et(()=>at(S,i())),b(w,S)},_=w=>{var S=st();et(()=>at(S,s())),b(w,S)};z(x,w=>{d(l)==="success"?w(k):w(_,!1)},!0),b(y,v)};z(g,y=>{d(l)==="error"?y(f):y(m,!1)}),b(c,p)},$$slots:{default:!0,iconLeft:(c,u)=>{var p=J(),g=W(p),f=m=>{vt(m,{size:1,get name(){return n()}})};z(g,m=>{n()&&m(f)}),b(c,p)}}}),pt()}async function $B(e,t,r){const n=e.conversations[t];if(!n)throw new Error(`Source conversation with ID ${t} not found`);try{const s=function(l,c){if(c?.includeFullHistory===!1&&!c?.forkFromExchangeId)return[];const{forkFromExchangeId:u}=c||{};if(u){const p=l.findIndex(g=>g.request_id===u);if(p!==-1)return l.slice(0,p+1);console.warn(`Exchange ID ${u} not found in chat history, including full history`)}return JSON.parse(JSON.stringify(l))}(n.chatHistory,r),{feedbackStates:i,toolUseStates:o,requestIds:a}=function(l,c){const u=new Set,p=new Set;for(const y of c)if(typeof y.request_id=="string"&&u.add(y.request_id),xu(y)&&y.structured_output_nodes)for(const v of y.structured_output_nodes)v.type===wr.TOOL_USE&&v.tool_use?.tool_use_id&&p.add(v.tool_use.tool_use_id);const g={};for(const[y,v]of Object.entries(l.feedbackStates))u.has(y)&&(g[y]=v);const f={};if(l.toolUseStates)for(const[y,v]of Object.entries(l.toolUseStates))try{const{requestId:x,toolUseId:k}=Kw(y);if(!x||!k)throw new Error(`Invalid tool use key format: expected "requestId;toolUseId", got "${y}"`);u.has(x)&&p.has(k)&&(f[y]=v)}catch(x){console.warn(`Failed to parse tool use key "${y}" during fork pruning:`,x)}const m=Array.from(u);return{feedbackStates:g,toolUseStates:f,requestIds:m}}(n,s),h={...n,id:crypto.randomUUID(),name:r?.namePrefix?`${r.namePrefix}${n.name||"Conversation"}`:`[Fork ${new Date().toLocaleString("en-US",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}] ${n.name||"Conversation"}`,createdAtIso:new Date().toISOString(),lastInteractedAtIso:new Date().toISOString(),lastUrl:void 0,isPinned:!1,draftExchange:void 0,draftActiveContextIds:r?.preserveContext?n.draftActiveContextIds:void 0,chatHistory:s,feedbackStates:i,toolUseStates:o,requestIds:a,extraData:{...n.extraData,isForked:!0,forkedFrom:{conversationId:t,exchangeId:r?.forkFromExchangeId},forkedAt:new Date().toISOString()}};for(const l of h.chatHistory)if(typeof l.request_id=="string")try{e.markExchangeDirty(l.request_id)}catch(c){console.warn("Failed to mark exchange dirty during fork",c)}return e.saveConversation(h),e.saveImmediate(),r?.switchToForked!==!1&&await e.setCurrentConversation(h.id),h.id}catch(s){throw console.error("Error forking conversation:",s),s}}var MB=P('<div class="c-feedback__thankyou"><!></div>'),AB=P("<!> <!>",1),EB=P("<!> <!> <!> <!> <!> <!> <!> <!>",1),LB=P("<!> <!>",1),BB=P('<div class="c-feedback-panel svelte-j9wesd"><div class="c-feedback__ratings svelte-j9wesd"><!> <div class="c-feedback__buttons svelte-j9wesd"><!> <!> <!></div></div> <!> <!></div>');function IB(e,t){ut(t,!0);const r=()=>Tt(p,"$chatModel",s),n=()=>Tt(g,"$currentConversationId",s),[s,i]=se(),o="augment-marketplace-review-clicked",a="none",h="bugreport",l="feedback",c="none",u="bugreport",p=ci(),g=Cw(),f=me(xs.key);let m=yt(Ne(a)),y=yt(Ne(c));const v=$t=>({get:()=>d(m)===$t,set:Wt=>{Wt?(X(m,$t,!0),X(y,c,!0)):X(m,a,!0)}}),x=je("enableConversationDebugUtils");let k=O(()=>x&&!f?.isActive),_=O(()=>p.currentConversationModel.extraData?.isForked&&!f?.isActive);const w=v(h),S=v(l),T=()=>{X(m,a,!0)},L=$t=>$t?.currentConversationModel.feedbackStates[t.requestId]?.selectedRating??Xe.unset,F=$t=>$t?.currentConversationModel.feedbackStates[t.requestId]?.feedbackNote??"";let A=yt(Ne(L(p))),B=yt(Ne(F(p)));function M($t,Wt){const{chatMode:Jt,note:Vt}=t.feedbackMetadata(t.requestId,Wt);return r().extensionClient.sendUserRating(t.requestId,Jt,$t,Vt)}function $(){w.set(!0)}function E(){T(),function(){try{localStorage.setItem(o,"true")}catch{}}(),Zo.postMessage({type:kr.augmentLink,data:d(it)})}function D($t){d(A)===$t?X(A,Xe.unset,!0):X(A,$t,!0)}function I(){return D(Xe.positive),M(d(A))}function N(){return D(Xe.negative),d(A)===Xe.unset?(X(y,c,!0),X(nt,!1),X(ct,"none")):w.get()||(X(y,u,!0),X(nt,!0),X(ct,"dislike")),M(d(A))}async function q($t){T(),await M(Xe.negative,$t),V(Xe.negative)}async function K($t){T(),await M(Xe.unset,$t),V(Xe.unset)}_e(()=>{X(A,L(p),!0),X(B,F(p),!0)}),pn(()=>{Z&&clearTimeout(Z)});let Z,U=yt("");const H="Thanks for the feedback!",j="Your issue was reported!";function V($t){X(U,$t===Xe.negative?j:H,!0),clearTimeout(Z),Z=setTimeout(()=>{X(U,"")},3e3)}const rt=O(()=>d(A)===Xe.positive),tt=O(()=>d(A)===Xe.negative),it=O(()=>R0()?"https://marketplace.visualstudio.com/items?itemName=augment.vscode-augment&ssr=false#review-details":"https://plugins.jetbrains.com/plugin/24072-augment/reviews");let nt=yt(!1),ct=yt("none");function mt($t){if(X(nt,$t,!0),!$t)return X(ct,"none"),void X(y,c,!0);d(ct)==="more"&&X(y,c,!0)}var lt=BB(),gt=R(lt),Ct=R(gt),St=$t=>{var Wt=MB(),Jt=R(Wt);ht(Jt,{size:1,weight:"regular",color:"secondary",children:(Vt,ie)=>{var oe=st();et(()=>at(oe,d(U))),b(Vt,oe)},$$slots:{default:!0}}),rs(3,Wt,()=>mu,()=>({duration:300})),b($t,Wt)};z(Ct,$t=>{d(U)&&$t(St)});var Lt=Y(Ct,2),kt=R(Lt),wt=O(()=>Cr("Enter",I));{let $t=O(()=>"c-feedback__positive "+(d(rt)?"c-feedback--selected":"")),Wt=O(()=>d(rt)?"soft":"ghost-block"),Jt=O(()=>d(rt)?"success":"neutral");de(kt,{get class(){return d($t)},title:"Feedback Positive",get variant(){return d(Wt)},size:1,get color(){return d(Jt)},$$events:{keyup(...Vt){d(wt)?.apply(this,Vt)},click:I},children:(Vt,ie)=>{vt(Vt,{name:"thumbs-up",size:1})},$$slots:{default:!0}})}var bt=Y(kt,2),It=O(()=>Cr("Enter",N));{let $t=O(()=>"c-feedback__negative "+(d(tt)?"c-feedback--selected":"")),Wt=O(()=>d(tt)?"soft":"ghost-block"),Jt=O(()=>d(tt)?"error":"neutral");de(bt,{get class(){return d($t)},title:"Feedback Negative",get variant(){return d(Wt)},size:1,get color(){return d(Jt)},$$events:{keyup(...Vt){d(It)?.apply(this,Vt)},click:N},children:(Vt,ie)=>{vt(Vt,{name:"thumbs-down",size:1})},$$slots:{default:!0}})}var Yt=Y(bt,2);ve(Yt,()=>ce.Root,($t,Wt)=>{Wt($t,{get open(){return d(nt)},onOpenChange:mt,nested:!1,children:(Jt,Vt)=>{var ie=LB(),oe=W(ie);ve(oe,()=>ce.Trigger,(Ae,er)=>{er(Ae,{children:(Ke,We)=>{de(Ke,{variant:"ghost-block",size:1,title:"More",$$events:{click:()=>{X(ct,"more"),X(y,c,!0),X(nt,!d(nt))}},children:(rr,ln)=>{vt(rr,{name:"ellipsis",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})});var ne=Y(oe,2);ve(ne,()=>ce.Content,(Ae,er)=>{er(Ae,{size:1,side:"bottom",align:"start",children:(Ke,We)=>{var rr=J(),ln=W(rr),tn=sr=>{var fr=J(),cn=W(fr);ve(cn,()=>ce.Item,(yr,Qe)=>{Qe(yr,{onSelect:()=>{$(),X(nt,!1),X(y,c,!0)},children:(be,He)=>{var Wr=st("Report an Issue");b(be,Wr)},$$slots:{default:!0}})}),b(sr,fr)},jr=sr=>{var fr=EB(),cn=W(fr);Ws(cn,{iconName:"share-2",idleLabel:"Share",successLabel:"Copied link",onSelect:async()=>{const Ce=p.currentConversationModel;if(!Ce?.id)return;const Ze=await p?.getConversationUrl(Ce.id);Ze&&await navigator.clipboard.writeText(Ze)}});var yr=Y(cn,2),Qe=Ce=>{Ws(Ce,{iconName:"copy",idleLabel:"Copy Response",successLabel:"Copied Response",onSelect:async()=>{await navigator.clipboard.writeText(t.getResponseText()||"")}})};z(yr,Ce=>{t.getResponseText&&Ce(Qe)});var be=Y(yr,2);Ws(be,{iconName:"clipboard",idleLabel:"Copy Request ID",successLabel:"Copied Request ID",onSelect:async()=>{await navigator.clipboard.writeText(t.requestId)}});var He=Y(be,2),Wr=Ce=>{var Ze=AB(),en=W(Ze);Ws(en,{iconName:"git-branch-plus",idleLabel:"Fork Conversation",successLabel:"Forking Conversation",onSelect:async()=>{n()&&await $B(p,n(),{preserveContext:!0,switchToForked:!0,forkFromExchangeId:t.requestId})}});var yn=Y(en,2),rn=zn=>{Ws(zn,{iconName:"arrow-left",idleLabel:"Go to Parent Conversation",successLabel:"Going to Parent Conversation",onSelect:async()=>{if(!n())return;const nn=p.currentConversationModel.extraData,Is=nn?.forkedFrom?.conversationId;Is&&await p.setCurrentConversation(Is)}})};z(yn,zn=>{d(_)&&zn(rn)}),b(Ce,Ze)};z(He,Ce=>{d(k)&&Ce(Wr)});var Ve=Y(He,2);ve(Ve,()=>ce.Separator,(Ce,Ze)=>{Ze(Ce,{})});var ir=Y(Ve,2);ve(ir,()=>ce.Item,(Ce,Ze)=>{Ze(Ce,{onSelect:()=>{$(),X(nt,!1),X(y,c,!0)},children:(en,yn)=>{var rn=st("Report an Issue");b(en,rn)},$$slots:{default:!0}})});var Hr=Y(ir,2);ve(Hr,()=>ce.Item,(Ce,Ze)=>{Ze(Ce,{onSelect:()=>{S.set(!0),X(nt,!1)},children:(en,yn)=>{var rn=st("Give Feedback");b(en,rn)},$$slots:{default:!0}})});var hn=Y(Hr,2);ve(hn,()=>ce.Item,(Ce,Ze)=>{Ze(Ce,{onSelect:()=>{E()},children:(en,yn)=>{var rn=st("Leave a Review");b(en,rn)},$$slots:{default:!0}})}),b(sr,fr)};z(ln,sr=>{d(y)===u?sr(tn):sr(jr,!1)}),b(Ke,rr)},$$slots:{default:!0}})}),b(Jt,ie)},$$slots:{default:!0}})});var Xt=Y(gt,2),Ht=$t=>{var Wt=w.get,Jt=w.set;(function(Vt,ie){ut(ie,!0);let oe=G(ie,"showBugreportForm",15,!1),ne=Ne({explanation:"",stepsToReproduce:""});function Ae(){ie.onSubmit(`
Explanation: ${ne.explanation}
Steps to reproduce: ${ne.stepsToReproduce}
`)}function er(){oe(!1)}var Ke=CB(),We=R(Ke);un(We,{size:0,variant:"surface",children:(rr,ln)=>{var tn=wB(),jr=R(tn);Fi(jr,{name:"explanation",rows:3,placeholder:"Explanation of the time issue was encountered here...",color:"neutral",variant:"soft",label:"Report an issue*",required:!0,focus:!0,get value(){return ne.explanation},set value(ir){ne.explanation=ir},topRightAction:ir=>{var Hr=O(()=>Cr("Enter",er));de(ir,{title:"Cancel",variant:"ghost-block",color:"neutral",size:.5,$$events:{keyup(...hn){d(Hr)?.apply(this,hn)},click:er},children:(hn,Ce)=>{vt(hn,{name:"x"})},$$slots:{default:!0}})},$$slots:{topRightAction:!0}});var sr=Y(jr,2),fr=R(sr);Fi(fr,{name:"stepsToReproduce",rows:3,placeholder:"Steps to reproduce the issue...",color:"neutral",variant:"soft",label:"How to reproduce*",required:!0,get value(){return ne.stepsToReproduce},set value(Ve){ne.stepsToReproduce=Ve}});var cn=Y(fr,2);ht(cn,{size:0,weight:"light",color:"secondary",children:(Ve,ir)=>{var Hr=st("* required fields");b(Ve,Hr)},$$slots:{default:!0}});var yr=Y(sr,2),Qe=R(yr);ks(Qe,{get text(){return ie.requestId},tooltip:"Copy request ID",textSnippet:ir=>{var Hr=st("Request ID");b(ir,Hr)},$$slots:{textSnippet:!0}});var be=Y(Qe,2),He=R(be),Wr=O(()=>Cr("Enter",Ae));{let Ve=O(()=>ne.explanation.trim().length===0||ne.stepsToReproduce.trim().length===0);Nr(He,{type:"submit",title:"Share ",color:"accent",get disabled(){return d(Ve)},size:1,$$events:{keyup(...ir){d(Wr)?.apply(this,ir)},click:Ae},children:(ir,Hr)=>{var hn=st("Submit");b(ir,hn)},$$slots:{default:!0}})}Jr(yr,Ve=>Ym?.(Ve)),b(rr,tn)},$$slots:{default:!0}}),b(Vt,Ke),pt()})($t,{get showBugreportForm(){return Wt()},set showBugreportForm(Vt){Jt(Vt)},get requestId(){return t.requestId},onSubmit:q})};z(Xt,$t=>{w.get()&&$t(Ht)});var Qt=Y(Xt,2),ee=$t=>{var Wt=S.get,Jt=S.set;(function(Vt,ie){ut(ie,!0);let oe=G(ie,"showFeedbackForm",15,!1),ne=yt(Ne(ie.feedbackNote??""));function Ae(){ie.onSubmit(`
Feedback: ${d(ne)}
`)}function er(){oe(!1)}var Ke=TB(),We=R(Ke);un(We,{size:0,variant:"surface",children:(rr,ln)=>{var tn=SB(),jr=R(tn);Fi(jr,{name:"explanation",rows:3,placeholder:"Tell us what you think of Augment...",color:"neutral",variant:"soft",label:"Give Feedback",required:!0,focus:!0,get value(){return d(ne)},set value(He){X(ne,He,!0)},topRightAction:He=>{var Wr=O(()=>Cr("Enter",er));de(He,{title:"Cancel",variant:"ghost-block",color:"neutral",size:.5,$$events:{keyup(...Ve){d(Wr)?.apply(this,Ve)},click:er},children:(Ve,ir)=>{vt(Ve,{name:"x"})},$$slots:{default:!0}})},$$slots:{topRightAction:!0}});var sr=Y(jr,2),fr=R(sr);ks(fr,{get text(){return ie.requestId},tooltip:"Copy request ID",iconName:"clipboard",textSnippet:He=>{var Wr=st("Request ID");b(He,Wr)},$$slots:{textSnippet:!0}});var cn=Y(fr,2),yr=R(cn),Qe=O(()=>Cr("Enter",Ae));{let be=O(()=>d(ne).trim().length===0);Nr(yr,{type:"submit",title:"Share ",color:"accent",get disabled(){return d(be)},size:1,$$events:{keyup(...He){d(Qe)?.apply(this,He)},click:Ae},children:(He,Wr)=>{var Ve=st("Submit");b(He,Ve)},$$slots:{default:!0}})}Jr(sr,be=>Ym?.(be)),b(rr,tn)},$$slots:{default:!0}}),b(Vt,Ke),pt()})($t,{get showFeedbackForm(){return Wt()},set showFeedbackForm(Vt){Jt(Vt)},get requestId(){return t.requestId},get feedbackNote(){return d(B)},onSubmit:K})};z(Qt,$t=>{S.get()&&$t(ee)}),b(e,lt),pt(),i()}var FB=P("<strong>Here are some questions you can ask Augment:</strong>"),DB=P('<!> <div class="l-questions svelte-1nimdct"></div>',1);function OB(e,t){ut(t,!0);let r=G(t,"showIntroText",3,!0);function n(h){t.conversationModel.sendSuggestedQuestion(h)}let s=O(()=>t.turn.questions||[]);var i=J(),o=W(i),a=h=>{var l=DB(),c=W(l),u=g=>{Dw(g,{children:(f,m)=>{var y=FB();b(f,y)},$$slots:{default:!0}})};z(c,g=>{r()&&g(u)});var p=Y(c,2);ge(p,20,()=>d(s),g=>g,(g,f)=>{var m=O(()=>Cr("Enter",()=>n(f)));Nr(g,{variant:"ghost",size:1,color:"accent",alignment:"left",$$events:{keyup(...y){d(m)?.apply(this,y)},click:()=>n(f)},children:(y,v)=>{var x=st();et(()=>at(x,f)),b(y,x)},$$slots:{default:!0,iconLeft:(y,v)=>{vt(y,{name:"send-horizontal",size:2,slot:"iconLeft"})}}})}),b(h,l)};z(o,h=>{t.turn.questionsLoaded&&d(s).length>0&&h(a)}),b(e,i),pt()}var RB=P('<div class="c-tooluse-filepath svelte-1bzkivf" role="button" tabindex="0" data-testid="file-link"><!></div>'),PB=P('<span class="c-tooluse-arg"><!></span>');function NB(e,t){ut(t,!0);const r=ci(),n=bs(),s=u=>{n(Yi(u))};let i=yt(!1),o=yt(void 0);_e(()=>{d(i)&&async function(u){if(typeof u=="string")try{X(o,await r?.extensionClient.resolvePath?.({rootPath:"",relPath:u}),!0)}catch{X(o,void 0)}}(t.value)});var a=PB(),h=R(a),l=u=>{(function(p,g){ut(g,!1);let f=G(g,"fileDetails",8),m=G(g,"onOpenLocalFile",8);pr();{let y=he(()=>(xt(Pe),Ft(()=>[Pe.Hover])));fe(p,{get content(){return xt(f()),Ft(()=>f().pathName)},get triggerOn(){return d(y)},children:(v,x)=>{var k=RB(),_=O(()=>Cr("Enter",()=>m()(f()))),w=R(k);Zi(w,{get filepath(){return xt(f()),Ft(()=>f().pathName)},leftIcon:T=>{vt(T,{name:"file"})},$$slots:{leftIcon:!0}}),$e("click",k,()=>m()(f())),$e("keydown",k,function(...S){d(_)?.apply(this,S)}),b(v,k)},$$slots:{default:!0}})}pt()})(u,{get fileDetails(){return d(o)},onOpenLocalFile:s})},c=u=>{ht(u,{size:1,children:(p,g)=>{var f=st();et(()=>at(f,t.value)),b(p,f)},$$slots:{default:!0}})};z(h,u=>{d(o)?u(l):u(c,!1)}),Jr(a,(u,p)=>As?.(u,p),()=>({onVisible:()=>X(i,!0),scrollTarget:document.body})),b(e,a),pt()}var zB=P('<div class="c-tooluse__value svelte-rbof7e"><!></div>'),UB=P('<div class="c-tooluse__details__heading svelte-rbof7e"><!></div> <!>',1),qB=P('<pre class="c-tooluse__value-monospace svelte-rbof7e"> </pre>'),jB=P('<img alt="Tool result" class="c-tooluse__image svelte-rbof7e"/>'),WB=P('<div class="c-tooluse__image-container svelte-rbof7e"><!></div>'),HB=P('<div class="c-tooluse__structured-content svelte-rbof7e"></div>'),VB=P('<pre class="c-tooluse__value-monospace svelte-rbof7e"> </pre>'),GB=P('<div class="tool-output svelte-rbof7e"><div class="c-tooluse__details__heading svelte-rbof7e"><!></div> <!></div>'),YB=P('<div class="c-tooluse__details svelte-rbof7e"><!> <!></div>');function t_(e,t){ut(t,!0);let r=G(t,"showOutput",3,!0),n=O(()=>Object.entries(t.toolUseInput).reduce((c,[u,p])=>(Array.isArray(p)?c[u]=p.map(g=>JSON.stringify(g)):c[u]=[JSON.stringify(p)],c),{})),s=O(()=>t.toolUseState?.result?.contentNodes&&t.toolUseState.result.contentNodes.length>0);function i(c){return c.image_data?`data:${c.media_type};base64,${c.image_data}`:null}var o=YB(),a=R(o);ge(a,17,()=>Object.entries(d(n)),Re,(c,u)=>{var p=O(()=>gu(d(u),2)),g=UB(),f=W(g),m=R(f);ht(m,{size:1,weight:"medium",children:(v,x)=>{var k=st();et(()=>at(k,d(p)[0])),b(v,k)},$$slots:{default:!0}});var y=Y(f,2);ge(y,17,()=>d(p)[1],Re,(v,x)=>{var k=zB();NB(R(k),{get value(){return d(x)}}),b(v,k)}),b(c,g)});var h=Y(a,2),l=c=>{var u=GB(),p=R(u),g=R(p);ht(g,{size:1,weight:"medium",children:(v,x)=>{var k=st("output");b(v,k)},$$slots:{default:!0}});var f=Y(p,2),m=v=>{var x=HB();ge(x,21,()=>t.toolUseState.result.contentNodes,Re,(k,_)=>{var w=J(),S=W(w),T=F=>{ht(F,{size:0,type:"monospace",children:(A,B)=>{var M=qB(),$=R(M);et(E=>at($,E),[()=>d(_).text_content.trim()]),b(A,M)},$$slots:{default:!0}})},L=F=>{var A=J(),B=W(A),M=$=>{var E=J(),D=W(E),I=q=>{var K=WB(),Z=R(K);un(Z,{insetContent:!0,size:1,class:"c-image-card",children:(U,H)=>{var j=jB();et(V=>Pr(j,"src",V),[()=>i(d(_).image_content)]),b(U,j)},$$slots:{default:!0}}),b(q,K)},N=q=>{ht(q,{size:1,color:"error",children:(K,Z)=>{var U=st("Failed to load image: Image data not found");b(K,U)},$$slots:{default:!0}})};z(D,q=>{i(d(_).image_content)?q(I):q(N,!1)}),b($,E)};z(B,$=>{d(_).type===_l.ContentImage&&d(_).image_content&&$(M)},!0),b(F,A)};z(S,F=>{d(_).type===_l.ContentText&&d(_).text_content?F(T):F(L,!1)}),b(k,w)}),b(v,x)},y=v=>{ht(v,{size:1,type:"monospace",children:(x,k)=>{var _=VB(),w=R(_);et(S=>at(w,S),[()=>t.toolUseState.result?.text?.trim()]),b(x,_)},$$slots:{default:!0}})};z(f,v=>{d(s)&&t.toolUseState.result?.contentNodes?v(m):v(y,!1)}),b(c,u)};z(h,c=>{!r()||t.toolUseState.phase!==dt.completed&&t.toolUseState.phase!==dt.error||c(l)}),b(e,o),pt()}function sc(e){if(e==null)return"";if(Array.isArray(e))return e.map(t=>sc(t)).join(", ");if(typeof e=="object"){const t=Object.entries(e);return t.length===0?"{}":t.map(([r,n])=>`${r}: ${sc(n)}`).join(", ")}return String(e)}function Zm(e){let t=[];for(const r of Object.values(e))Array.isArray(r)?t=t.concat(r.map(n=>sc(n))):t.push(sc(r));return t.join(" ")}const e_=Symbol("toolContext");function qr(){const e=me(e_);if(!e)throw new Error("ToolUseContext context not found");return e}function ZB(e){const t=Be(e);let r;const n=Zn(t,(s,i)=>{if(s.toolUse.tool_use_id===r?.toolUse.tool_use_id&&s.toolUse.input_json===r?.toolUse.input_json&&s.toolUse.tool_name===r?.toolUse.tool_name&&s.toolUseState.phase===r?.toolUseState.phase&&s.toolUseState.result?.isError===r?.toolUseState.result?.isError&&s.toolUseState.result?.text===r?.toolUseState.result?.text&&s.isLastTurn===r?.isLastTurn&&s.requestId===r?.requestId&&s.turnIndex===r?.turnIndex)return;r=s;const o=function(a){try{return JSON.parse(a)??{}}catch(h){return console.error("Failed to parse tool input JSON",h),{}}}(s.toolUse.input_json);i({...r,toolUseInput:o??{}})});return Qr(e_,n),{writableCtx:t,readableCtx:n}}var XB=P("<div><!></div>"),KB=P('<div class="c-scroll-to-top-pill svelte-62xm9u"><!></div>');function QB(e,t){ut(t,!0);let r=G(t,"isVisible",3,!1);var n=J(),s=W(n),i=o=>{(function(a,h){let l=G(h,"class",3,""),c=G(h,"xPos",3,"left"),u=G(h,"yPos",3,"middle");var p=XB();let g;var f=R(p);ke(f,()=>h.children??Ue),et(m=>g=Me(p,1,`c-floating__container ${l()}`,"svelte-178rk9e",g,m),[()=>({"c-floating__x-left":c()==="left","c-floating__x-middle":c()==="middle","c-floating__x-right":c()==="right","c-floating__y-top":u()==="top","c-floating__y-middle":u()==="middle","c-floating__y-bottom":u()==="bottom","c-floating__y-below":u()==="below"})]),b(a,p)})(o,{xPos:"right",yPos:"below",children:(a,h)=>{var l=KB(),c=R(l);{let u=O(()=>[Pe.Hover]);fe(c,{content:"Scroll to top",get triggerOn(){return d(u)},children:(p,g)=>{de(p,{class:"c-scroll-to-top-button",variant:"solid",color:"neutral",size:1,radius:"full",get onclick(){return t.onScrollToTop},children:(f,m)=>{vt(f,{name:"move-up"})},$$slots:{default:!0}})},$$slots:{default:!0}})}b(a,l)},$$slots:{default:!0}})};z(s,o=>{r()&&o(i)}),b(e,n),pt()}var JB=P('<span class="c-tool-approval-panel__approve-btn-text svelte-xpcnzb">Approve</span>'),t6=P('<div slot="content" class="svelte-xpcnzb"><!></div>'),e6=P('<div class="c-tool-approval-panel__content svelte-xpcnzb"><!> <div class="c-tool-approval-panel__actions svelte-xpcnzb"><!> <!></div></div>'),r6=P('<div class="c-tool-approval-panel svelte-xpcnzb"><!> <div class="tooltip-pointer svelte-xpcnzb"></div> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),n6=P('<div class="c-cancel-hover svelte-172oyl5"><!></div>'),s6=is('<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="7.5" cy="7.5" r="5" fill="currentColor"></circle></svg>'),i6=P("<div><!></div>");function Os(e,t){ut(t,!0);let r=G(t,"status",19,()=>{});fe(e,{get content(){return t.content},children:(n,s)=>{var i=i6();vs(i,l=>({class:"c-status-indicator",...l}),[()=>cw(r())],void 0,"svelte-1orrk02");var o=R(i),a=l=>{var c=J(),u=W(c);ke(u,()=>t.children),b(l,c)},h=l=>{(function(c){var u=s6();b(c,u)})(l)};z(o,l=>{t.children?l(a):l(h,!1)}),b(n,i)},$$slots:{default:!0}}),pt()}var o6=P('<div class="c-tooluse-status svelte-3yk79m"><!></div>');function Rc(e,t){ut(t,!0);const r=()=>Tt(i,"$ctx",n),[n,s]=se(),i=qr();let o=G(t,"isCommandError",3,!1),a=G(t,"toolUseState",31,()=>Ne(r().toolUseState));function h(g){g.stopPropagation(),r().onToolCancel(r().requestId,r().toolUse.tool_use_id)}_e(()=>{a(r().toolUseState)});var l=o6(),c=R(l),u=g=>{var f=J(),m=W(f),y=v=>{vt(v,{name:"pause"})};z(m,v=>{r().isLastTurn&&v(y)}),b(g,f)},p=g=>{var f=J(),m=W(f),y=x=>{Os(x,{status:"error",content:"Command failed"})},v=x=>{var k=J(),_=W(k),w=T=>{Os(T,{content:"Waiting for end of message...",children:(L,F)=>{gs(L,{size:1})},$$slots:{default:!0}})},S=T=>{var L=J(),F=W(L),A=M=>{Os(M,{content:"Looking up tool...",children:($,E)=>{gs($,{size:1})},$$slots:{default:!0}})},B=M=>{var $=J(),E=W($),D=N=>{(function(q,K){ut(K,!0);let Z=yt(!0);const U=new W0({onHoverStart(){X(Z,!1)},onHoverEnd(){X(Z,!0)},hoverTriggerDuration:0});var H=n6(),j=R(H);{let V=O(()=>[Pe.Hover]);fe(j,{get triggerOn(){return d(V)},content:"Cancel",children:(rt,tt)=>{de(rt,{size:0,color:"neutral",get onclick(){return K.onClick},variant:"ghost-block",class:"c-cancel-hover__btn",get loading(){return d(Z)},children:(it,nt)=>{vt(it,{name:"x"})},$$slots:{default:!0}})},$$slots:{default:!0}})}Jr(H,(V,rt)=>j0?.(V,rt),()=>U),b(q,H),pt()})(N,{onClick:h})},I=N=>{var q=J(),K=W(q),Z=H=>{Os(H,{status:"error",content:"Cancelled"})},U=H=>{var j=J(),V=W(j),rt=it=>{Os(it,{status:"error",content:"Failed"})},tt=it=>{var nt=J(),ct=W(nt),mt=gt=>{Os(gt,{status:"error",content:"Cancelling...",children:(Ct,St)=>{gs(Ct,{size:1})},$$slots:{default:!0}})},lt=gt=>{Os(gt,{status:"success",content:"Completed"})};z(ct,gt=>{a().phase===dt.cancelling?gt(mt):gt(lt,!1)},!0),b(it,nt)};z(V,it=>{a().phase===dt.error?it(rt):it(tt,!1)},!0),b(H,j)};z(K,H=>{a().phase===dt.cancelled?H(Z):H(U,!1)},!0),b(N,q)};z(E,N=>{a().phase===dt.running?N(D):N(I,!1)},!0),b(M,$)};z(F,M=>{a().phase===dt.checkingSafety?M(A):M(B,!1)},!0),b(T,L)};z(_,T=>{a().phase===dt.new?T(w):T(S,!1)},!0),b(x,k)};z(m,x=>{o()?x(y):x(v,!1)},!0),b(g,f)};z(c,g=>{a().phase===dt.runnable?g(u):g(p,!1)}),et(()=>Pr(l,"data-tool-use-state",a().phase)),b(e,l),pt(),s()}var a6=P('<span class="c-tooluse__tool-name-text svelte-l7l81c"> </span>'),l6=P('<div class="c-tooluse__content-secondary-2 svelte-l7l81c"><!></div>'),c6=P('<div class="c-tooluse__content-secondary-2 svelte-l7l81c"><!></div>'),h6=P('<span class="svelte-l7l81c"></span>'),d6=P('<div><div class="c-tooluse-header__label svelte-l7l81c"><!> <!> <!> <!> <div class="c-tooluse__main-bar__tool-status svelte-l7l81c"><div class="c-tooluse__header-actions svelte-l7l81c"><!></div> <!></div></div></div>');function Se(e,t){ut(t,!0);const r=()=>Tt(p,"$collapsed",s),n=()=>Tt(g,"$expandable",s),[s,i]=se(),o=qr();let a=G(t,"toolName",19,()=>{}),h=G(t,"toolUseInput",31,()=>Ne(Tt(o,"$ctx",s).toolUseInput)),l=G(t,"formattedToolArgs",19,()=>{}),c=G(t,"class",3,"");_e(()=>{l()&&h({args:l()})});const u=Yw(),p=u.collapsed,g=u.expandable;var f=d6();let m;var y=R(f),v=R(y),x=I=>{Jk(I,{get expandable(){return n()},get collapsed(){return r()},icon:q=>{var K=J(),Z=W(K);ke(Z,()=>t.icon??Ue),b(q,K)},$$slots:{icon:!0}})};z(v,I=>{t.icon&&I(x)});var k=Y(v,2);ht(k,{size:1,weight:"medium",color:"primary",class:"c-tooluse__content-btn-name",children:(I,N)=>{var q=J(),K=W(q),Z=H=>{var j=J(),V=W(j);ke(V,()=>t.toolNameSnippet),b(H,j)},U=H=>{var j=J(),V=W(j),rt=tt=>{var it=a6(),nt=R(it);et(()=>at(nt,a())),b(tt,it)};z(V,tt=>{a()&&tt(rt)},!0),b(H,j)};z(K,H=>{t.toolNameSnippet?H(Z):H(U,!1)}),b(I,q)},$$slots:{default:!0}});var _=Y(k,2),w=I=>{var N=l6(),q=R(N);ke(q,()=>t.secondary??Ue,()=>({toolName:a(),formattedToolArgs:l()})),b(I,N)},S=I=>{var N=J(),q=W(N),K=Z=>{var U=c6(),H=R(U);ht(H,{size:1,class:"c-tooluse__content-btn-args",children:(j,V)=>{var rt=st();et(tt=>at(rt,tt),[()=>Zm(h())]),b(j,rt)},$$slots:{default:!0}}),b(Z,U)};z(q,Z=>{Zm(h())&&Z(K)},!0),b(I,N)};z(_,I=>{t.secondary?I(w):I(S,!1)});var T=Y(_,2),L=I=>{var N=J(),q=W(N);ke(q,()=>t.toolAction),b(I,N)},F=I=>{var N=h6();b(I,N)};z(T,I=>{t.toolAction?I(L):I(F,!1)});var A=Y(T,2),B=R(A),M=R(B);ke(M,()=>t.headerActions??Ue);var $=Y(B,2),E=I=>{var N=J(),q=W(N);ke(q,()=>t.toolStatus),b(I,N)},D=I=>{Rc(I,{})};z($,I=>{t.toolStatus?I(E):I(D,!1)}),et(I=>m=Me(f,1,`c-tooluse__main-bar ${c()??""}`,"svelte-l7l81c",m,I),[()=>({"is-collapsed":r(),"is-expandable":n()})]),b(e,f),pt(),i()}var u6=P('<div class="c-tool-use__header-container svelte-kv049e" role="button" tabindex="0"><div class="c-tool-use__header svelte-kv049e"><!> <div class="c-tool-use__content svelte-kv049e"><!></div></div></div>'),p6=P('<div class="c-tool-use__details svelte-kv049e"><!> <!></div>'),g6=P("<div><!> <!> <!></div>");function Te(e,t){ut(t,!0);const r=()=>Tt(a,"$intersectionCtx",s),n=()=>Tt(o,"$ctx",s),[s,i]=se(),o=qr(),a=Sy({collapsed:!0});$s(()=>{r()?.collapsed!=null&&g(r().collapsed)}),pn(()=>{ma(a,{...r(),collapsed:g()})});const h=Pw(0);let l=G(t,"showToolOutput",3,!0),c=G(t,"toolUse",27,()=>Ne(n().toolUse)),u=G(t,"toolUseState",27,()=>Ne(n().toolUseState)),p=G(t,"toolUseInput",27,()=>Ne(n().toolUseInput)),g=G(t,"collapsed",15,!0),f=G(t,"messageListContainer",19,()=>n().messageListContainer),m=G(t,"toggle",31,()=>{}),y=O(()=>l()===void 0?!Qw(c().tool_name):l()),v=yt(void 0),x=yt(void 0);function k(){if(f()&&d(v))ig(f(),d(v),{smooth:!0});else if(d(v)){let M=d(v).parentElement;for(;M&&window.getComputedStyle(M).overflowY!=="scroll"&&window.getComputedStyle(M).overflowY!=="auto";)M=M.parentElement;M&&ig(M,d(v),{smooth:!0})}}let _=O(()=>!g()&&d(y)&&d(x));var w=g6();let S;var T=R(w);uc(T,{class:"c-tool-use__container",get expandable(){return d(y)},get toggle(){return m()},set toggle($){m($)},get collapsed(){return g()},set collapsed($){g($)},get isHeaderStuck(){return d(x)},set isHeaderStuck($){X(x,$,!0)},header:$=>{var E=u6();E.__click=function(...U){m()?.apply(this,U)};var D=R(E),I=R(D);QB(I,{onScrollToTop:k,get isVisible(){return d(_)}});var N=Y(I,2),q=R(N),K=U=>{var H=J(),j=W(H);ke(j,()=>t.header,()=>({toolUseInput:p(),toolUse:c()})),b(U,H)},Z=U=>{Se(U,{get toolUseInput(){return p()},get toolName(){return c().tool_name}})};z(q,U=>{t.header?U(K):U(Z,!1)}),b($,E)},children:($,E)=>{var D=p6(),I=R(D),N=Z=>{var U=J(),H=W(U);ke(H,()=>t.details,()=>({toolUseInput:p()})),b(Z,U)},q=Z=>{t_(Z,{get toolUseInput(){return p()},get toolUseState(){return u()},get showOutput(){return d(y)}})};z(I,Z=>{t.details?Z(N):Z(q,!1)});var K=Y(I,2);ke(K,()=>t.error??Ue),b($,D)},$$slots:{header:!0,default:!0}});var L=Y(T,2);ke(L,()=>t.secondary??Ue);var F=Y(L,2),A=M=>{var $=J(),E=W($);ke(E,()=>t.actions),b(M,$)},B=M=>{(function($,E){ut(E,!1);const D=()=>Tt(q,"$ctx",I),[I,N]=se(),q=qr();function K(){D().onToolSkip(D().requestId,D().toolUse.tool_use_id)}function Z(){D().onToolRun(D().requestId,D().toolUse,D().toolUseInput)}function U(rt){rt.stopPropagation(),Z()}pr();var H=J(),j=W(H),V=rt=>{var tt=r6(),it=R(tt);Uh(0,{name:"allowTool",handler:Z});var nt=Y(it,4);Y0(nt,()=>({"--after-box-shadow":"none"})),un(nt.lastChild,{borderless:!0,children:(ct,mt)=>{var lt=e6(),gt=R(lt);ht(gt,{size:1,children:(kt,wt)=>{var bt=st("Waiting for user input");b(kt,bt)},$$slots:{default:!0}});var Ct=Y(gt,2),St=R(Ct);Nr(St,{size:1,variant:"solid",color:"neutral",$$events:{click:K},children:(kt,wt)=>{var bt=st("Skip");b(kt,bt)},$$slots:{default:!0}});var Lt=Y(St,2);{let kt=he(()=>[Pe.Hover]);fe(Lt,{get triggerOn(){return d(kt)},delayDurationMs:300,children:(wt,bt)=>{Nr(wt,{size:1,variant:"solid",color:"accent",class:"c-tool-approval-panel__approve-btn-pulse",$$events:{click:U},children:(It,Yt)=>{var Xt=JB();b(It,Xt)},$$slots:{default:!0,iconLeft:(It,Yt)=>{vt(It,{slot:"iconLeft",name:"circle-play"})}}})},$$slots:{default:!0,content:(wt,bt)=>{var It=t6();qh(R(It),{commandName:"allowTool",keysOnly:!0}),b(wt,It)}}})}b(ct,lt)},$$slots:{default:!0}}),rs(3,tt,()=>P0,()=>({y:-2,duration:150})),b(rt,tt)};z(j,rt=>{D().toolUseState.phase===dt.runnable&&D().isLastTurn&&rt(V)}),b($,H),pt(),N()})(M,{})};z(F,M=>{t.actions?M(A):M(B,!1)}),Kr(w,M=>X(v,M),()=>d(v)),Jr(w,M=>h?.(M)),et(M=>S=Me(w,1,"c-tool-use svelte-kv049e",null,S,M),[()=>({"is-sticky":d(x),"is-expandable":d(y)})]),b(e,w),pt(),i()}fa(["click"]);var f6=P("<div><!></div>"),m6=P('<div class="c-message-actions svelte-109jn4a"></div>');function y6(e,t){var r=m6();ge(r,21,()=>t.items,Re,(n,s)=>{{let i=O(()=>`${d(s).id}-button`),o=O(()=>({neutral:d(s).label,success:d(s).successMessage}));wu(n,{get"data-testid"(){return d(i)},variant:"ghost-block",size:1,defaultColor:"neutral",get disabled(){return d(s).disabled},icon:!0,stickyColor:!1,onClick:a=>(d(s).action(a),d(s).successMessage?"success":"neutral"),get tooltip(){return d(o)},children:(a,h)=>{var l=J(),c=W(l),u=p=>{vt(p,{get name(){return d(s).lucideIconName}})};z(c,p=>{d(s).lucideIconName&&p(u)}),b(a,l)},$$slots:{default:!0}})}}),b(e,r)}var v6=P("<!> <!>",1),b6=P("<!> <!>",1),x6=P('<span class="c-feedback__thankyou svelte-1muhiky"> </span>'),k6=P('<!> <div class="l-feedback__send svelte-1muhiky"><!> <div class="l-feedback__send-btns svelte-1muhiky"><!> <!></div></div>',1),_6=P('<div class="c-feedback__input-container svelte-1muhiky"><!></div>'),w6=P('<div class="c-feedback svelte-1muhiky"><div class="c-feedback__ratings svelte-1muhiky"><div class="c-feedback__buttons svelte-1muhiky"><!> <!> <!> <!></div> <!></div> <!></div>');function C6(e,t){ut(t,!0);const r="augment-marketplace-review-clicked";let n=G(t,"showFeedbackInput",15,!1),s=G(t,"tooltipItems",19,()=>[]),i=yt(Ne({selectedRating:t.feedbackState?.selectedRating??Xe.unset,feedbackNote:t.feedbackState?.feedbackNote??""})),o=yt(!1),a=yt(()=>{}),h=yt(void 0),l=O(()=>R0()?"https://marketplace.visualstudio.com/items?itemName=augment.vscode-augment&ssr=false#review-details":"https://plugins.jetbrains.com/plugin/24072-augment/reviews");function c(){n(!1),t.onSendUserRating(t.requestId,d(i).selectedRating,d(i).feedbackNote),X(m,"Thanks for the feedback!"),clearTimeout(f),f=setTimeout(()=>{X(m,"")},3e3)}async function u($){d(i).selectedRating=$,n(!0),await pa(),d(h)?.focus()}function p(){n(!1),t.feedbackState?X(i,{...t.feedbackState},!0):d(i).selectedRating=Xe.unset}function g($){$.key==="Escape"&&($.preventDefault(),p())}let f,m=yt("");var y=w6(),v=R(y),x=R(v),k=R(x);fe(k,{content:"Give feedback",children:($,E)=>{var D=O(()=>Cr("Enter",()=>u(Xe.positive)));{let I=O(()=>"c-feedback__positive "+(d(i).selectedRating===Xe.positive?"c-feedback--selected":"")),N=O(()=>d(i).selectedRating===Xe.positive?"success":"neutral");de($,{get class(){return d(I)},title:"Feedback Positive",variant:"ghost-block",size:1,get color(){return d(N)},$$events:{keyup(...q){d(D)?.apply(this,q)},click:()=>u(Xe.positive)},children:(q,K)=>{vt(q,{name:"thumbs-up"})},$$slots:{default:!0}})}},$$slots:{default:!0}});var _=Y(k,2);fe(_,{content:"Give feedback",children:($,E)=>{var D=O(()=>Cr("Enter",()=>u(Xe.negative)));{let I=O(()=>"c-feedback__negative "+(d(i).selectedRating===Xe.negative?"c-feedback--selected":"")),N=O(()=>d(i).selectedRating===Xe.negative?"error":"neutral");de($,{get class(){return d(I)},title:"Feedback Negative",variant:"ghost-block",size:1,get color(){return d(N)},$$events:{keyup(...q){d(D)?.apply(this,q)},click:()=>u(Xe.negative)},children:(q,K)=>{vt(q,{name:"thumbs-down"})},$$slots:{default:!0}})}},$$slots:{default:!0}});var w=Y(_,2),S=$=>{ks($,{get text(){return t.reponseText},tooltip:"Copy response"})};z(w,$=>{t.reponseText&&$(S)});var T=Y(w,2);ve(T,()=>ce.Root,($,E)=>{E($,{get requestClose(){return d(a)},set requestClose(D){X(a,D,!0)},children:(D,I)=>{var N=b6(),q=W(N);ve(q,()=>ce.Trigger,(Z,U)=>{U(Z,{children:(H,j)=>{{let V=O(()=>[Pe.Hover]);fe(H,{content:"More options",get triggerOn(){return d(V)},children:(rt,tt)=>{de(rt,{title:"More options",variant:"ghost-block",size:1,color:"neutral",children:(it,nt)=>{vt(it,{name:"ellipsis"})},$$slots:{default:!0}})},$$slots:{default:!0}})}},$$slots:{default:!0}})});var K=Y(q,2);ve(K,()=>ce.Content,(Z,U)=>{U(Z,{size:1,side:"right",align:"end",children:(H,j)=>{var V=v6(),rt=W(V),tt=it=>{var nt=J(),ct=W(nt);ge(ct,17,s,Re,(mt,lt)=>{{let gt=O(()=>d(lt).successMessage??`${d(lt).label} completed`);Ws(mt,{get iconName(){return d(lt).lucideIconName},get idleLabel(){return d(lt).label},get successLabel(){return d(gt)},get disabled(){return d(lt).disabled},onSelect:async()=>{d(lt).action(new Event("click"))}})}}),b(it,nt)};z(rt,it=>{s().length>0&&it(tt)}),Ws(Y(rt,2),{iconName:"clipboard",idleLabel:"Copy request ID",successLabel:"Copied request ID",onSelect:async()=>{await navigator.clipboard?.writeText(t.requestId)}}),b(H,V)},$$slots:{default:!0}})}),b(D,N)},$$slots:{default:!0}})});var L=Y(x,2),F=$=>{Nr($,{size:1,variant:"ghost",color:"neutral",$$events:{click:()=>{X(o,!0),function(){try{localStorage.setItem(r,"true")}catch{}}(),Zo.postMessage({type:kr.augmentLink,data:d(l)})}},iconLeft:D=>{vt(D,{name:"star"})},children:(D,I)=>{var N=st("Leave a review for Augment!");b(D,N)},$$slots:{iconLeft:!0,default:!0}})},A=$=>{var E=x6(),D=R(E);et(()=>at(D,d(m))),b($,E)};z(L,$=>{d(i).selectedRating!==Xe.positive||!d(o)&&function(){try{return localStorage.getItem(r)==="true"}catch{return!0}}()?$(A,!1):$(F)});var B=Y(v,2),M=$=>{var E=_6(),D=R(E);un(D,{size:2,children:(I,N)=>{var q=k6(),K=W(q);Fi(K,{class:"c-feedback__textarea",rows:3,placeholder:"Enter your feedback...",color:"neutral",variant:"soft",onkeydown:g,get value(){return d(i).feedbackNote},set value(it){d(i).feedbackNote=it},get textInput(){return d(h)},set textInput(it){X(h,it,!0)}});var Z=Y(K,2),U=R(Z);ks(U,{get text(){return t.requestId},tooltip:"Copy request ID",textSnippet:nt=>{var ct=st("Request ID");b(nt,ct)},$$slots:{textSnippet:!0}});var H=Y(U,2),j=R(H),V=O(()=>Cr("Enter",p));Nr(j,{title:"Cancel",variant:"soft",color:"neutral",size:1,$$events:{keyup(...it){d(V)?.apply(this,it)},click:p},children:(it,nt)=>{var ct=st("Cancel");b(it,ct)},$$slots:{default:!0}});var rt=Y(j,2),tt=O(()=>Cr("Enter",c));{let it=O(()=>!d(i).feedbackNote.trim());Nr(rt,{title:"Share ",color:"accent",get disabled(){return d(it)},size:1,$$events:{keyup(...nt){d(tt)?.apply(this,nt)},click:c},children:(nt,ct)=>{var mt=st();et(()=>at(mt,t.feedbackState?"Update feedback":"Share feedback")),b(nt,mt)},$$slots:{default:!0}})}Jr(Z,it=>function(nt){nt.scrollIntoView({block:"end",behavior:"smooth"})}(it)),b(I,q)},$$slots:{default:!0}}),b($,E)};z(B,$=>{n()&&$(M)}),b(e,y),pt()}var S6=P('<div class="memory-meta svelte-fikraf"><!></div>');function T6(e,t){ut(t,!0);const[r,n]=se(),s=je("enableDebugFeatures"),i=Sw();var o=S6();C6(R(o),{get requestId(){return t.requestId},get reponseText(){return t.memoryData.memory},feedbackState:void 0,onSendUserRating:async(a,h,l)=>{const c=`${l||""}

Memory version: ${Tt(i,"$memoriesParams",r)?.memory_retrieval_version}`,u=`${c}

Created memory: ${t.memoryData.memory}`,p=Tt(s,"$enableDebugFeatures",r)?u:c;await Tt(t.chatModel,"$chatModel",r).extensionClient.sendUserRating(a,Xa.memories,h,p)}}),b(e,o),pt(),n()}var $6=P("<div><!></div> <div><!></div>",1),M6=P('<div class="memory-content svelte-15shl9p"><!> <div><!></div> <div><!></div> <!></div>'),A6=P("<div><!></div>"),E6=P('<div><div class="c-show-more__content svelte-rs6o7w"><!></div> <!></div>');function ca(e,t){ut(t,!0);let r,n=G(t,"expanded",15),s=G(t,"maxHeight",3,200),i=G(t,"transitionDurationMs",19,()=>{}),o=G(t,"collapseText",3,"Show less"),a=G(t,"paddingBottom",3,30),h=G(t,"showOnHover",3,!1),l=G(t,"overflowThreshold",3,10),c=G(t,"class",3,""),u=yt(0),p=yt(!1),g=!!n(),f=O(()=>i()??Math.min(Math.max(500,d(u)+s()),200));function m(){g=!0,n(!n()),clearTimeout(r),r=setTimeout(()=>{g=!1},d(f))}var y=E6();let v;var x=R(y),k=R(x);ke(k,()=>t.children??Ue),Jr(x,S=>function(T){let L;function F(B){if(g)return;const M=B.scrollHeight;X(u,M+B.clientHeight),X(p,M>s()+l())}function A(B){L?.disconnect(),L=new ResizeObserver(()=>{requestAnimationFrame(()=>{F(B)})}),L.observe(B)}return n()&&X(u,T.scrollHeight+T.clientHeight),F(T),A(T),{update(B){A(B),F(B)},destroy(){L?.disconnect()}}}(S));var _=Y(x,2),w=S=>{var T=A6();let L;var F=R(T),A=B=>{Qk(B,{get expanded(){return n()},onClick:m})};z(F,B=>{n()&&!o()||B(A)}),et(B=>L=Me(T,1,"c-show-more__button-container svelte-rs6o7w",null,L,B),[()=>({"c-show-more__button-container--no-overflow":n()})]),b(S,T)};z(_,S=>{(n()||!n()&&d(p))&&S(w)}),et(S=>{v=Me(y,1,`c-show-more ${c()??""}`,"svelte-rs6o7w",v,S),ri(x,`max-height: ${n()?d(u)?d(u)+a()+"px":"unset":s()+"px"};--show-more-transition: ${d(f)??""}ms ease-in-out;`)},[()=>({"c-show-more--expanded":n(),"c-show-more--show-on-hover":h()})]),b(e,y),pt()}var L6=P('<span class="c-tool-memory-retrieval__header__icon svelte-1dwosli"><!></span>'),B6=P('<!> <span class="c-tool-memory-retrieval__metadata__source svelte-1dwosli"><!></span>',1),I6=P('<div class="c-tool-memory-retrieval__secondary svelte-1dwosli"><!></div>'),F6=P('<div class="c-tool-memory-retrieval__details svelte-1dwosli"> </div>');function Xd(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=G(t,"noRetrieval",3,!1);Te(e,{header:o=>{Se(o,{class:"c-tool-memory-retrieval__header",toolName:"Augment Context Engine",icon:l=>{var c=L6(),u=R(c);i2(u),b(l,c)},secondary:l=>{var c=I6(),u=R(c),p=g=>{var f=B6(),m=W(f);ht(m,{size:1,color:"secondary",children:(_,w)=>{var S=st("Retrieving from:");b(_,S)},$$slots:{default:!0}});var y=Y(m,2),v=R(y),x=_=>{var w=J(),S=W(w);ke(S,()=>t.retrieval),b(_,w)},k=_=>{ht(_,{size:1,color:"neutral",children:(w,S)=>{var T=st();et(()=>at(T,t.retrievalText)),b(w,T)},$$slots:{default:!0}})};z(v,_=>{t.retrieval?_(x):_(k,!1)}),b(g,f)};z(u,g=>{n()||g(p)}),b(l,c)},$$slots:{icon:!0,secondary:!0}})},details:o=>{ca(o,{maxHeight:150,showOnHover:!0,overflowThreshold:0,children:(a,h)=>{var l=F6(),c=R(l);et(()=>at(c,r().information_request||r().query||"")),b(a,l)},$$slots:{default:!0}})},$$slots:{header:!0,details:!0}}),pt()}var D6=P("<!>Commit History",1),O6=P("<span><!></span>"),R6=P('<span class="c-open-terminal-button-wrapper"><!></span>');function P6(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=G(t,"size",3,0),s=G(t,"color",3,"neutral"),i=G(t,"variant",3,"ghost-block"),o=G(t,"stickyColor",3,!1);const a=ci();let h=yt(!1),l=yt(!1),c=yt(!1),u=yt(void 0);async function p(k){return k?.stopPropagation?.(),k?.preventDefault?.(),await a.extensionClient.showTerminal(t.terminalId,d(g))?"success":(X(h,!1),"failure")}let g=O(()=>r().command),f=O(()=>t.phase===dt.running);_e(()=>{t.terminalId,d(g),t.phase,t.toolResult,X(l,!1),d(u)!==void 0&&(clearTimeout(d(u)),X(u,void 0))});let m=O(()=>(t.terminalId!==void 0||d(g)!==void 0||d(f))&&d(c)&&!d(l));_e(()=>{d(m)&&async function(){if(!d(l))try{const k=await a.extensionClient.canShowTerminal(t.terminalId,d(g));X(h,k,!0),X(l,!0),!k&&t.terminalId===void 0&&d(f)&&X(u,setTimeout(()=>{X(l,!1),X(u,void 0)},1e3),!0)}catch(k){console.warn("Failed to check terminal availability:",k),X(l,!0)}}()});var y=R6(),v=R(y),x=k=>{var _=O6(),w=R(_);{const S=L=>{vt(L,{name:"external-link"})};let T=O(()=>!t.text);wu(w,{get defaultColor(){return s()},get stickyColor(){return o()},get size(){return n()},get variant(){return i()},tooltip:{neutral:"Open Terminal",success:"Opening terminal..."},stateVariant:{success:"soft"},onClick:p,get icon(){return d(T)},iconLeft:S,children:(L,F)=>{var A=J(),B=W(A);ke(B,()=>t.text??Ue),b(L,A)},$$slots:{iconLeft:!0,default:!0}})}et(()=>Me(_,1,`c-open-terminal-button-container c-open-terminal-button__size--${n()??""}`,"svelte-w84z3c")),b(k,_)};z(v,k=>{d(h)&&k(x)}),Jr(y,(k,_)=>As?.(k,_),()=>({onVisible:()=>X(c,!0),scrollTarget:document.body})),b(e,y),pt()}var N6=P('<pre class="svelte-aj3tks"> </pre>'),z6=P('<div class="c-shell-error__message svelte-aj3tks"><!></div>'),U6=P('<div class="c-shell-error svelte-aj3tks"><div class="c-shell-error__code svelte-aj3tks"><!> <!></div> <!></div>');function Gr(e,t){ut(t,!0);let r=G(t,"isError",3,!1),n=G(t,"text",3,""),s=G(t,"hideDetailedMessage",3,!1),i=O(()=>n()?n().split(`
`)[0]:""),o=O(()=>s()?d(i):n());var a=J(),h=W(a),l=c=>{var u=U6(),p=R(u),g=R(p);ht(g,{size:1,weight:"medium",children:(v,x)=>{var k=st("Error");b(v,k)},$$slots:{default:!0}});var f=Y(g,2);{let v=O(()=>n()??"");ks(f,{get text(){return d(v)}})}var m=Y(p,2),y=v=>{ca(v,{maxHeight:90,children:(x,k)=>{var _=z6(),w=R(_);ht(w,{size:1,weight:"light",type:"monospace",children:(S,T)=>{var L=N6(),F=R(L);et(()=>at(F,d(o))),b(S,L)},$$slots:{default:!0}}),b(x,_)},$$slots:{default:!0}})};z(m,v=>{d(o)&&v(y)}),b(c,u)};z(h,c=>{r()&&c(l)}),b(e,a),pt()}var q6=P('<pre class="c-shell-tooluse__value"> </pre>'),j6=P('<div class="c-shell-tooluse__content"><!></div>'),W6=P('<div class="c-shell-tooluse__details__group"><div class="c-shell-tooluse__details__heading"><!> <!></div> <!></div>'),H6=P('<pre class="c-shell-tooluse__value"> </pre>'),V6=P('<div class="c-shell-tooluse__details__group"><div class="c-shell-tooluse__details__heading"><!> <!></div> <div class="c-shell-tooluse__content"><!></div></div>'),G6=P('<div class="c-shell-tooluse__details svelte-huxgkx"><!> <!></div>');function Y6(e,t){ut(t,!0);const[r,n]=se(),s=je("enableDebugFeatures");let i=O(()=>{let c=[];return typeof t.toolUseInput.command_type=="string"?t.toolUseInput.command_type==="simple"&&Array.isArray(t.toolUseInput.simple_command)&&t.toolUseInput.simple_command.length>0?c=[["Command",[t.toolUseInput.simple_command[0]]],["Args",t.toolUseInput.simple_command.slice(1)]]:t.toolUseInput.command_type==="complex"&&typeof t.toolUseInput.complex_command=="string"&&(c=[["Command",[t.toolUseInput.complex_command]]]):typeof t.toolUseInput.command=="string"&&(c=[["Command",[t.toolUseInput.command]]]),c});var o=G6(),a=R(o);ge(a,17,()=>d(i),Re,(c,u)=>{var p=O(()=>gu(d(u),2));let g=()=>d(p)[1];var f=W6(),m=R(f),y=R(m);ht(y,{size:1,weight:"medium",color:"primary",children:(k,_)=>{var w=st();et(()=>at(w,d(p)[0])),b(k,w)},$$slots:{default:!0}});var v=Y(y,2);{let k=O(()=>g().join(`
`));ks(v,{get text(){return d(k)}})}var x=Y(m,2);ge(x,17,g,Re,(k,_)=>{var w=j6();ca(R(w),{maxHeight:90,children:(S,T)=>{ht(S,{size:1,color:"secondary",children:(L,F)=>{var A=q6(),B=R(A);et(()=>at(B,d(_))),b(L,A)},$$slots:{default:!0}})},$$slots:{default:!0}}),b(k,w)}),b(c,f)});var h=Y(a,2),l=c=>{var u=V6(),p=R(u),g=R(p);ht(g,{size:1,weight:"medium",color:"primary",children:(y,v)=>{var x=st("Output");b(y,x)},$$slots:{default:!0}});var f=Y(g,2);ks(f,{get text(){return t.result.output}});var m=Y(p,2);ca(R(m),{maxHeight:90,children:(y,v)=>{{let x=O(()=>Tt(s,"$enableDebugFeatures",r)?1:2);ht(y,{get size(){return d(x)},color:"secondary",type:"monospace",children:(k,_)=>{var w=H6(),S=R(w);et(T=>at(S,T),[()=>t.result.output?.trim()]),b(k,w)},$$slots:{default:!0}})}},$$slots:{default:!0}}),b(c,u)};z(h,c=>{t.result.output&&t.toolUseState.phase!==dt.error&&c(l)}),b(e,o),pt(),n()}const Xm=16e3;function Z6(e){if(!e)return{reason:"",returnCode:0,output:""};if(e.length>Xm)return{reason:"Output too large",returnCode:0,output:e.slice(-1*Xm)};const t=e.includes("<return-code>"),r=e.includes("<output>");if(!t&&!r)return{reason:"",returnCode:0,output:e};const n=t?/<return-code>\s*(-?\d+)\s*<\/return-code>/.exec(e):null,s=r?/<output>\s*(.*?)\s*<\/output>/s.exec(e):null;let i="",o="0",a=e;return n&&(o=n[1],i=e.substring(0,n.index)),s&&(a=s[1],n||(i=e.substring(0,s.index))),{reason:i,returnCode:Number(o),output:a}}function cs(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({}));const n=Ty(Z6,`shell-tool-component-${t.toolUse.tool_use_id}`);let s=O(()=>function(a){if(typeof a.command_type=="string"){if(a.command_type==="simple"&&Array.isArray(a.simple_command)&&a.simple_command.length>0)return a.simple_command.join(" ");if(a.command_type==="complex"&&typeof a.complex_command=="string")return a.complex_command}else if(typeof a.command=="string")return a.command;return""}(r())),i=O(()=>n(t.toolUseState.result?.text??"")),o=O(()=>function(a,h,l){if(h.terminal_id!==null&&h.terminal_id!==void 0)return h.terminal_id;if(a==="launch-process"&&l){const c=l.match(/[Tt]erminal ID (\d+)/);if(c)return parseInt(c[1],10)}}(t.toolUse.tool_name,r(),t.toolUseState.result?.text));Te(e,{header:c=>{Se(c,{toolName:"Terminal",icon:m=>{vt(m,{name:"square-terminal"})},secondary:m=>{var y=J(),v=W(y),x=_=>{fe(_,{get content(){return d(s)},class:"c-shell-tool-component__secondary",children:(w,S)=>{ht(w,{size:1,type:"monospace",color:"secondary",children:(T,L)=>{var F=st();et(A=>at(F,`$ ${A??""}`),[()=>d(s).replace(/^\s*\$/,"").trim()]),b(T,F)},$$slots:{default:!0}})},$$slots:{default:!0}})},k=_=>{ht(_,{size:1,color:"secondary",children:(w,S)=>{var T=st();et(L=>at(T,L),[()=>function(L,F){const A=!(F===dt.completed||F===dt.error);switch(L){case"launch-process":return A?"Launching Process...":"Launched Process";case"kill-process":return A?"Killing Process...":"Killed Process";case"read-process":return A?"Reading from Process...":"Read from Process";case"write-process":return A?"Writing to Process...":"Wrote to Process";case"list-processes":return A?"Listing Processes":"Listed Processes";case"wait-process":return A?"Waiting for Process...":"Waited for Process";case"read-terminal":return A?"Reading from Terminal...":"Read from Terminal"}return""}(t.toolUse.tool_name,t.toolUseState.phase)]),b(w,T)},$$slots:{default:!0}})};z(v,_=>{d(s)?_(x):_(k,!1)}),b(m,y)},toolAction:m=>{{let y=O(()=>t.toolUseState.result?.text);P6(m,{get terminalId(){return d(o)},get toolUseInput(){return r()},get toolResult(){return d(y)},get phase(){return t.toolUseState.phase}})}},toolStatus:m=>{{let y=O(()=>!!d(i).returnCode&&d(i).returnCode!==0);Rc(m,{get isCommandError(){return d(y)}})}},$$slots:{icon:!0,secondary:!0,toolAction:!0,toolStatus:!0}})},details:c=>{Y6(c,{get toolUseInput(){return r()},get result(){return d(i)},get toolUseState(){return t.toolUseState}})},error:c=>{{let u=O(()=>!d(i).returnCode&&t.toolUseState.phase===dt.error),p=O(()=>t.toolUseState.result?.text);Gr(c,{get isError(){return d(u)},get text(){return d(p)}})}},$$slots:{header:!0,details:!0,error:!0}}),pt()}var X6=P('<div><div class="editor-container svelte-1fs6d6v"></div></div>');function K6(e,t){ut(t,!0);const[r,n]=se();let s,i,o=yt(void 0),a=yt(void 0);function h(u,p,g){s?.dispose(),i?.dispose(),p=p||"",g=g||"",s=go.createModel(p,void 0,u!==void 0?Xp.parse("file://"+u+`#${crypto.randomUUID()}`):void 0),i=go.createModel(g,void 0,u!==void 0?Xp.parse("file://"+u+`#${crypto.randomUUID()}`):void 0),d(o)&&d(o).setModel({original:s,modified:i})}pn(()=>{d(o)?.dispose(),s?.dispose(),i?.dispose()}),$s(()=>{d(a)&&(X(o,go.createDiffEditor(d(a),{lineNumbers:"off",hideUnchangedRegions:{enabled:!0,revealLineCount:3,minimumLineCount:3,contextLineCount:3},scrollBeyondLastLine:!1,readOnly:!0,minimap:{enabled:!1},lightbulb:{enabled:go.ShowLightbulbIconMode.Off},automaticLayout:!0,enableSplitViewResizing:!1,diffCodeLens:!1,renderOverviewRuler:!1,renderSideBySide:!1,glyphMargin:!1,folding:!1,showFoldingControls:"never",overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,lineDecorationsWidth:0}),!0),d(o).getOriginalEditor().updateOptions({lineNumbers:"off"}),d(o).getModifiedEditor().updateOptions({lineNumbers:"off"}),h(t.path,t.originalCode,t.modifiedCode))}),_e(()=>{h(t.path,t.originalCode,t.modifiedCode)}),_e(()=>{if(d(o)){const u=Tt(fu,"$themeStore",r),p=jw(u?.category,u?.intensity),g={theme:p};go.setTheme(p),d(o).getModifiedEditor().updateOptions(g),d(o).getOriginalEditor().updateOptions(g),d(o).layout()}});var l=X6(),c=R(l);ri(c,"height:200px"),Kr(c,u=>X(a,u),()=>d(a)),b(e,l),pt(),n()}var Q6=P("<!> <!>",1),J6=P('<div class="c-edit-file-tool-use-details__loading">Loading...</div>'),tI=P('<div class="c-edit-file-tool-use-details svelte-1wof8pl"><div class="c-edit-file-tool-use-details__header svelte-1wof8pl"><!> <div class="c-edit-file-tool-use-details__header__counts svelte-1wof8pl"><!></div></div> <!></div>');function eI(e,t){ut(t,!0);const r=()=>Tt(o,"$ctx",s),n=()=>Tt(f,"$remoteAgentsModel",s),[s,i]=se(),o=qr();let a=G(t,"toolUseInput",31,()=>Ne(r().toolUseInput)),h=G(t,"toolUseState",31,()=>Ne(r().toolUseState)),l=G(t,"requestId",31,()=>Ne(r().requestId)),c=G(t,"turnIndex",19,()=>r().turnIndex),u=yt(!1),p=yt(!1);const g=ci(),f=me(xs.key);let m=O(()=>h().phase===dt.completed),y=yt(void 0);async function v(){if(!d(x))return;if(d(k))return void function(){if(!d(k)||d(u))return;const E=o2(n()?.currentConversation?.exchanges??[],c());if(!E)return void console.warn("no changed files for remote agent turn",c());let D=E.find(I=>I.new_path===a().path);D||(D=E.find(I=>a().path.includes(I.new_path))),D?(X(y,{originalCode:D.old_contents,modifiedCode:D.new_contents},!0),X(u,!0)):console.warn("no changed file for path",a().path)}();const $=await g?.extensionClient.getAgentEditContentsByRequestId(l());$?($.originalCode===$.modifiedCode&&console.warn("no changes for requestId",l()),X(y,$,!0),X(u,!0)):console.warn("no contents for requestId",l())}_e(()=>{l(l()),a(a()),h(h()),X(u,!1)});let x=O(()=>d(m)&&!d(u)&&d(p));_e(()=>{d(x)&&v()});let k=O(()=>!!f?.isActive),_=O(()=>Ir(a().path,"").split("/").at(-1)??"");var w=tI(),S=R(w),T=R(S);ht(T,{size:1,color:"primary",class:"c-edit-file-tool-use-details__header__icon",children:($,E)=>{var D=Q6(),I=W(D);G0(I,{get filename(){return d(_)}});var N=Y(I,2);Zi(N,{get filepath(){return d(_)}}),b($,D)},$$slots:{default:!0}});var L=Y(T,2),F=R(L);{let $=O(()=>Ir(a().path,"")),E=O(()=>Ir(a().snippet,""));_u(F,{get path(){return d($)},get codeSnippetToLocate(){return d(E)}})}var A=Y(S,2),B=$=>{K6($,Ye(()=>d(y),{get path(){return d(_)}}))},M=$=>{var E=J6();b($,E)};z(A,$=>{d(y)?$(B):$(M,!1)}),Jr(w,($,E)=>As?.($,E),()=>({onVisible:()=>X(p,!0),scrollTarget:document.body})),b(e,w),pt(),i()}var rI=P('<div class="c-line-diff-count svelte-izp0bi"><!></div>');function nI(e,t){ut(t,!0);const r=()=>Tt(h,"$intersectionStore",n),[n,s]=se(),i=qr(),o=ci(),{enabled:a}=mc(),h=function(f,m,y=Bu()){if(y.has(f))return Be(y.get(f));const v=Be(m);return v.subscribe(x=>{y.set(f,x)}),v}(`line-diff-count-${t.requestId}`,{totalAddedLines:0,totalRemovedLines:0,hasLoaded:!1,isError:!1});let l=Tt(a,"$intersectionObserverEnabled",n);_e(()=>{Tt(i,"$ctx",n).toolUseState.phase!==dt.completed||r().hasLoaded||!l||r().isError||u(t.requestId)});let c=yt(0);async function u(f){try{const m=await o?.extensionClient?.getAgentEditChangesByRequestId(f);if(!m)throw new Error("No changes found");ma(h,{totalAddedLines:m.totalAddedLines??0,totalRemovedLines:m.totalRemovedLines??0,hasLoaded:!0,isError:!1})}catch(m){console.warn(`Loading changes  for ${f} retry ${d(c)}: `,m),hw(c)>3?(Up(h,Ft(r).hasLoaded=!0,Ft(r)),Up(h,Ft(r).isError=!0,Ft(r)),console.warn(`Loading changes failed for ${f}: `,m)):f&&(await new Promise(y=>setTimeout(y,500)),await u(f))}}var p=rI(),g=R(p);{let f=O(()=>!r().hasLoaded);Au(g,{get loading(){return d(f)},get totalAddedLines(){return r().totalAddedLines},get totalRemovedLines(){return r().totalRemovedLines},size:0,tooltips:!0})}Jr(p,(f,m)=>As?.(f,m),()=>({onVisible:()=>l=!0,scrollTarget:document.body})),b(e,p),pt(),s()}function Km(e){return e.view_range&&Array.isArray(e.view_range)?{start:e.view_range[0],stop:e.view_range[1]}:{start:0,stop:0}}var sI=P("<!> <!>",1),iI=P('<div class="c-str-replace__details"><!></div>');function r_(e,t){ut(t,!0);const[r,n]=se(),s=qr();let i=G(t,"toolUseInput",19,()=>({})),o=O(()=>Ir(i().path||i().file_path,"")),a=O(()=>i().command==="str_replace");Te(e,{get showToolOutput(){return d(a)},header:u=>{Se(u,{icon:y=>{var v=J(),x=W(v),k=w=>{vt(w,{name:"file-pen"})},_=w=>{vt(w,{name:"file"})};z(x,w=>{d(a)?w(k):w(_,!1)}),b(y,v)},toolNameSnippet:y=>{{let v=O(()=>Km(i()));(function(x,k){ut(k,!0);const _=()=>Tt(F,"$ctx",w),[w,S]=se();let T=G(k,"start",19,()=>{}),L=G(k,"stop",19,()=>{});const F=qr();var A=J(),B=W(A),M=E=>{var D=st();et(()=>at(D,_().toolUseInput.edit_summary??_().toolUseState.phase===dt.running?"Reading file...":T()&&L()?`Read lines ${T()}-${L()}`:"Read file")),b(E,D)},$=E=>{var D=st();et(()=>at(D,_().toolUseState.phase===dt.running?"Editing file...":"Edited file")),b(E,D)};z(B,E=>{_().toolUseInput.command==="view"?E(M):E($,!1)}),b(x,A),pt(),S()})(y,Ye(()=>d(v)))}},secondary:y=>{{let v=O(()=>Km(i()));la(y,Ye({get filepath(){return d(o)}},()=>d(v)))}},toolStatus:y=>{var v=sI(),x=W(v);nI(x,{get requestId(){return Tt(s,"$ctx",r).requestId}}),Rc(Y(x,2),{}),b(y,v)},$$slots:{icon:!0,toolNameSnippet:!0,secondary:!0,toolStatus:!0}})},details:u=>{var p=iI(),g=R(p),f=m=>{eI(m,{})};z(g,m=>{t.toolUseState.phase===dt.completed&&m(f)}),b(u,p)},error:u=>{var p=J(),g=W(p),f=m=>{Gr(m,Ye(()=>t.toolUseState.result??{}))};z(g,m=>{t.toolUseState.phase===dt.error&&m(f)}),b(u,p)},$$slots:{header:!0,details:!0,error:!0}}),pt(),n()}var oI=P("<span><!></span>");function n_(e,t){ut(t,!0);let r=G(t,"size",3,0),n=G(t,"href",19,()=>{});function s(h){h?.preventDefault(),h?.stopPropagation(),Zo.postMessage({type:kr.augmentLink,data:n()})}var i=oI(),o=R(i),a=h=>{de(h,{variant:"ghost-block",color:"neutral",size:1,onclick:s,children:(l,c)=>{vt(l,{name:"external-link"})},$$slots:{default:!0}})};z(o,h=>{n()&&h(a)}),et(()=>Me(i,1,`c-open-link-button c-open-link-button__size--${r()??""}`,"svelte-dyu2w8")),b(e,i),pt()}var aI=P("<img/>"),lI=P('<div class="c-web-fetch-container svelte-1s8mpu9"><span class="c-web-fetch-favicon-container svelte-1s8mpu9"><!> <span class="c-web-fetch-url svelte-1s8mpu9"> </span></span></div>');function s_(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({}));function n(o,a){switch(o){case dt.running:return`Getting information from ${a}...`;case dt.error:return"Error";case dt.cancelled:return"Cancelled";case dt.runnable:return`Waiting for user approval to get ${a}`;case dt.completed:default:return""}}let s=O(()=>Ir(r().url,"")),i=O(()=>function(o){try{return new URL(o).hostname}catch{return""}}(d(s)));Te(e,{header:h=>{{const l=p=>{vt(p,{name:"globe"})},c=p=>{n_(p,{get href(){return d(s)}})};let u=O(()=>[n(t.toolUseState.phase,d(i))]);Se(h,{get toolName(){return t.toolName},get formattedToolArgs(){return d(u)},icon:l,toolAction:c,$$slots:{icon:!0,toolAction:!0}})}},details:h=>{var l=lI(),c=R(l),u=R(c),p=y=>{var v=J(),x=W(v);yu(x,()=>async function(k){return new Promise((_,w)=>{const S=new Image,T=`https://www.google.com/s2/favicons?domain=${k}&sz=12`;T?(S.onload=()=>{_(T)},S.onerror=L=>{console.warn(L),w(L)},S.src=T):w(new Error("No favicon URL"))})}(d(i)||""),k=>{gs(k,{size:1,class:"c-web-fetch-favicon"})},(k,_)=>{var w=aI();et(()=>{Pr(w,"src",d(_)),Pr(w,"alt",`Website favicon ${d(_)??""}`)}),b(k,w)}),b(y,v)},g=y=>{gs(y,{size:1,class:"c-web-fetch-favicon"})};z(u,y=>{d(i)?y(p):y(g,!1)});var f=Y(u,2),m=R(f);et(()=>at(m,r().url||"")),b(h,l)},$$slots:{header:!0,details:!0}}),pt()}var cI=P("<!> Codebase",1),hI=P("<span></span>"),dI=P('<code class="svelte-1dzy6ao"> </code>'),uI=P("Pattern Search <!> <!>",1);function pI(e,t){ut(t,!0);const[r,n]=se(),s=qr();let i=G(t,"start",19,()=>{}),o=G(t,"stop",19,()=>{}),a=G(t,"isDirectory",3,!1),h=G(t,"searchQueryRegex",19,()=>{}),l=G(t,"caseSensitive",3,!1),c=G(t,"isRulesFile",3,!1);var u=J(),p=W(u),g=m=>{var y=J(),v=W(y),x=_=>{var w=st("Searching for pattern...");b(_,w)},k=_=>{var w=J(),S=W(w),T=F=>{var A=st("Reading directory...");b(F,A)},L=F=>{var A=J(),B=W(A),M=E=>{var D=st("Reading rules file...");b(E,D)},$=E=>{var D=st("Reading file...");b(E,D)};z(B,E=>{c()?E(M):E($,!1)},!0),b(F,A)};z(S,F=>{a()?F(T):F(L,!1)},!0),b(_,w)};z(v,_=>{h()?_(x):_(k,!1)}),b(m,y)},f=m=>{var y=J(),v=W(y),x=_=>{var w=st("Read directory");b(_,w)},k=_=>{var w=J(),S=W(w),T=F=>{var A=uI(),B=Y(W(A));ht(B,{size:1,color:"secondary",type:"monospace",children:(E,D)=>{var I=dI(),N=R(I);et(()=>at(N,h())),b(E,I)},$$slots:{default:!0}});var M=Y(B,2),$=E=>{ht(E,{size:1,color:"secondary",children:(D,I)=>{var N=st("(case-sensitive)");b(D,N)},$$slots:{default:!0}})};z(M,E=>{l()&&E($)}),b(F,A)},L=F=>{var A=J(),B=W(A),M=E=>{var D=st("Read rules file");b(E,D)},$=E=>{var D=J(),I=W(D),N=K=>{var Z=st("Read file");b(K,Z)},q=K=>{var Z=st();et(()=>at(Z,`Read lines ${i()??""}-${o()??""}`)),b(K,Z)};z(I,K=>{i()&&o()?K(q,!1):K(N)},!0),b(E,D)};z(B,E=>{c()?E(M):E($,!1)},!0),b(F,A)};z(S,F=>{h()?F(T):F(L,!1)},!0),b(_,w)};z(v,_=>{a()?_(x):_(k,!1)},!0),b(m,y)};z(p,m=>{Tt(s,"$ctx",r).toolUseState.phase<=dt.running?m(g):m(f,!1)}),b(e,u),pt(),n()}var gI=P('<code class="c-view-tool-use-details__value svelte-1uvztgz"> </code>'),fI=P('<div class="c-view-tool-use-details__section svelte-1uvztgz"><!> <!></div> <div class="c-view-tool-use-details__section svelte-1uvztgz"><!> <!></div> <div class="c-view-tool-use-details__section svelte-1uvztgz"><!> <!></div>',1),mI=P('<div class="c-view-tool-use-details__section svelte-1uvztgz"><!> <!></div>'),yI=P('<div class="c-view-tool-use-details svelte-1uvztgz"><div class="c-view-tool-use-details__content svelte-1uvztgz"><!> <!></div></div>');function vI(e,t){ut(t,!0);const[r,n]=se(),s=qr();let i=G(t,"toolUseInput",19,()=>Tt(s,"$ctx",r).toolUseInput),o=O(()=>typeof i().search_query_regex=="string"?i().search_query_regex:void 0),a=O(()=>typeof i().case_sensitive=="boolean"&&i().case_sensitive),h=O(()=>typeof i().context_lines_before=="number"?i().context_lines_before:5),l=O(()=>typeof i().context_lines_after=="number"?i().context_lines_after:5),c=O(()=>i().view_range&&Array.isArray(i().view_range)&&(i().view_range[0]!==0||i().view_range[1]!==0)?i().view_range:void 0);var u=J(),p=W(u),g=f=>{var m=yI(),y=R(m),v=R(y),x=w=>{var S=fI(),T=W(S),L=R(T);ht(L,{size:1,class:"c-view-tool-use-details__label",children:(I,N)=>{var q=st("Search Pattern");b(I,q)},$$slots:{default:!0}});var F=Y(L,2);ht(F,{size:1,color:"secondary",children:(I,N)=>{var q=gI(),K=R(q);et(()=>at(K,d(o))),b(I,q)},$$slots:{default:!0}});var A=Y(T,2),B=R(A);ht(B,{size:1,class:"c-view-tool-use-details__label",children:(I,N)=>{var q=st("Case Sensitive");b(I,q)},$$slots:{default:!0}});var M=Y(B,2);ht(M,{size:1,color:"secondary",class:"c-view-tool-use-details__value",children:(I,N)=>{var q=st();et(()=>at(q,d(a)?"Yes":"No")),b(I,q)},$$slots:{default:!0}});var $=Y(A,2),E=R($);ht(E,{size:1,class:"c-view-tool-use-details__label",children:(I,N)=>{var q=st("Context Lines");b(I,q)},$$slots:{default:!0}});var D=Y(E,2);ht(D,{size:1,color:"secondary",class:"c-view-tool-use-details__value",children:(I,N)=>{var q=st();et(()=>at(q,`${d(h)??""} before, ${d(l)??""} after`)),b(I,q)},$$slots:{default:!0}}),b(w,S)};z(v,w=>{d(o)&&w(x)});var k=Y(v,2),_=w=>{var S=mI(),T=R(S);ht(T,{size:1,class:"c-view-tool-use-details__label",children:(F,A)=>{var B=st("View Range");b(F,B)},$$slots:{default:!0}});var L=Y(T,2);ht(L,{size:1,color:"secondary",class:"c-view-tool-use-details__value",children:(F,A)=>{var B=st();et(()=>at(B,`Lines ${d(c)[0]??""} to ${(d(c)[1]===-1?"end":d(c)[1])??""}`)),b(F,B)},$$slots:{default:!0}}),b(w,S)};z(k,w=>{d(c)&&w(_)}),b(f,m)};z(p,f=>{(d(o)||d(c))&&f(g)}),b(e,u),pt(),n()}const bI="Here's the result of running `cat -n`",xI="Total lines in file:";function _h(e){return e.view_range&&Array.isArray(e.view_range)?{start:e.view_range[0],stop:e.view_range[1]}:{start:0,stop:0}}function Qm(e){return typeof e.search_query_regex=="string"?e.search_query_regex:void 0}var kI=P("<span>Render Mermaid</span>"),_I=P("<span> </span>"),wI=P('<div class="c-mermaid-wrapper svelte-pw0otf"><!></div>'),CI=P('<div class="c-mermaid-loading svelte-pw0otf"><!></div>'),SI=P('<div class="c-mermaid-error svelte-pw0otf"><!></div>'),TI=P('<div class="c-mermaid-tool svelte-pw0otf"><!></div>'),$I=P("<!> ",1),MI=P("<!> ",1),AI=P("<!> ",1),EI=P('<div class="c-task-diff-badges svelte-6ivqgh"><!> <!> <!></div>');function wh(e,t){ut(t,!0);var r=EI(),n=R(r),s=l=>{fe(l,{content:"Added",children:(c,u)=>{var p=J(),g=W(p);ve(g,()=>Qa.Root,(f,m)=>{m(f,{color:"neutral",size:0,children:(y,v)=>{var x=$I(),k=W(x);vt(k,{name:"circle-fading-plus",size:1});var _=Y(k);et(()=>at(_,` ${t.taskCounts.created??""}`)),b(y,x)},$$slots:{default:!0}})}),b(c,p)},$$slots:{default:!0}})};z(n,l=>{t.taskCounts.created>0&&l(s)});var i=Y(n,2),o=l=>{fe(l,{content:"Updated",children:(c,u)=>{var p=J(),g=W(p);ve(g,()=>Qa.Root,(f,m)=>{m(f,{color:"neutral",size:0,children:(y,v)=>{var x=MI(),k=W(x);vt(k,{name:"circle-fading-arrow-up",size:1});var _=Y(k);et(()=>at(_,` ${t.taskCounts.updated??""}`)),b(y,x)},$$slots:{default:!0}})}),b(c,p)},$$slots:{default:!0}})};z(i,l=>{t.taskCounts.updated>0&&l(o)});var a=Y(i,2),h=l=>{fe(l,{content:"Deleted",children:(c,u)=>{var p=J(),g=W(p);ve(g,()=>Qa.Root,(f,m)=>{m(f,{color:"neutral",size:0,children:(y,v)=>{var x=AI(),k=W(x);vt(k,{name:"trash-2",size:1});var _=Y(k);et(()=>at(_,` ${t.taskCounts.deleted??""}`)),b(y,x)},$$slots:{default:!0}})}),b(c,p)},$$slots:{default:!0}})};z(a,l=>{t.taskCounts.deleted>0&&l(h)}),b(e,r),pt()}function xl(e,t){const r=e.map(n=>Eu(n));return{uuid:`dummy-root-${t}`,name:`${t} Tasks`,description:`Tasks that were ${t.toLowerCase()}`,state:Et.NOT_STARTED,subTasks:e.map(n=>n.uuid),subTasksData:r,lastUpdated:Date.now(),lastUpdatedBy:lr.AGENT,isVisible:!0}}var LI=P('<div class="c-task-diff-renderer__section svelte-1fo99a"><div class="c-task-diff-renderer__section-header svelte-1fo99a"><!></div> <div class="c-task-diff-renderer__task-list"><!></div></div>'),BI=P('<div class="c-task-diff-renderer__section svelte-1fo99a"><div class="c-task-diff-renderer__section-header svelte-1fo99a"><!></div> <div class="c-task-diff-renderer__task-list"><!></div></div>'),II=P('<div class="c-task-diff-renderer__section svelte-1fo99a"><div class="c-task-diff-renderer__section-header svelte-1fo99a"><!></div> <!></div>'),FI=P('<div class="c-task-diff-renderer svelte-1fo99a"><!> <!> <!></div>'),DI=P('<div class="c-task-diff-renderer__empty svelte-1fo99a"><!></div>');function Ch(e,t){ut(t,!0);const r=Dn(),n=O(()=>r?.rootTaskUuid?Le(r.rootTaskUuid):void 0);let s=O(()=>z0(t.text,d(n))),i=O(()=>d(s).created.length>0||d(s).updated.length>0||d(s).deleted.length>0);var o=J(),a=W(o),h=c=>{var u=FI(),p=R(u),g=x=>{var k=LI(),_=R(k),w=R(_);ht(w,{size:1,weight:"medium",color:"success",children:(L,F)=>{var A=st();et(()=>at(A,`Created Tasks (${d(s).created.length??""})`)),b(L,A)},$$slots:{default:!0}});var S=Y(_,2),T=R(S);{let L=O(()=>xl(d(s).created,"Created")),F=O(()=>Fn.createReadOnlyStore(void 0));Di(T,{get task(){return d(L)},get taskStore(){return d(F)},editable:!1})}b(x,k)};z(p,x=>{d(s).created.length>0&&x(g)});var f=Y(p,2),m=x=>{var k=BI(),_=R(k),w=R(_);ht(w,{size:1,weight:"medium",color:"accent",children:(L,F)=>{var A=st();et(()=>at(A,`Updated Tasks (${d(s).updated.length??""})`)),b(L,A)},$$slots:{default:!0}});var S=Y(_,2),T=R(S);{let L=O(()=>xl(d(s).updated,"Updated")),F=O(()=>Fn.createReadOnlyStore(void 0));Di(T,{get task(){return d(L)},get taskStore(){return d(F)},editable:!1})}b(x,k)};z(f,x=>{d(s).updated.length>0&&x(m)});var y=Y(f,2),v=x=>{var k=II(),_=R(k),w=R(_);ht(w,{size:1,weight:"medium",color:"error",children:(T,L)=>{var F=st();et(()=>at(F,`Deleted Tasks (${d(s).deleted.length??""})`)),b(T,F)},$$slots:{default:!0}});var S=Y(_,2);{let T=O(()=>xl(d(s).deleted,"Deleted")),L=O(()=>Fn.createReadOnlyStore(void 0));Di(S,{get task(){return d(T)},get taskStore(){return d(L)},editable:!1})}b(x,k)};z(y,x=>{d(s).deleted.length>0&&x(v)}),b(c,u)},l=c=>{var u=DI(),p=R(u);ht(p,{size:1,color:"neutral",children:(g,f)=>{var m=st("No task changes to display");b(g,m)},$$slots:{default:!0}}),b(c,u)};z(a,c=>{d(i)?c(h):c(l,!1)}),b(e,o),pt()}const OI=(e,t=Ue)=>{var r=PI(),n=W(r);de(n,{size:.5,variant:"ghost-block",color:"neutral",readonly:!0,children:(o,a)=>{vt(o,{get name(){return t().icon},size:2})},$$slots:{default:!0}});var s=Y(n,2),i=R(s);ht(i,{size:1,children:(o,a)=>{var h=st();et(()=>at(h,t().name)),b(o,h)},$$slots:{default:!0}}),b(e,r)},RI=(e,t=Ue)=>{{let r=O(()=>xl(t().tasks,t().name));Ml(e,{get task(){return d(r)},editable:!1})}};var PI=P('<!> <div class="c-task-diff-renderer__item-name svelte-ui33ty"><!></div>',1),NI=P('<div class="c-task-diff-renderer__empty svelte-ui33ty"><!></div>'),zI=P('<div class="c-task-diff-renderer"><!></div>');function Sh(e,t){ut(t,!0);const r=Dn(),n=O(()=>r?.rootTaskUuid?Le(r.rootTaskUuid):void 0),s=O(()=>z0(t.text,d(n))),i=O(()=>[{name:"Created",icon:"circle-fading-plus",tasks:d(s).created},{name:"Updated",icon:"circle-fading-arrow-up",tasks:d(s).updated},{name:"Deleted",icon:"trash-2",tasks:d(s).deleted}].filter(u=>u.tasks.length>0)),o=O(()=>d(i).length>0);sy(Fn.createReadOnlyStore(void 0));var a=zI(),h=R(a),l=u=>{var p=J(),g=W(p);ge(g,17,()=>d(i),f=>f.name,(f,m)=>{{let y=O(()=>`id-${d(m).name}`);_y(f,{get id(){return d(y)},class:"c-task-tree-item",get item(){return d(m)},hasNestedItems:!0,disabled:!0,expandable:!1,expanded:!0,get headerContents(){return OI},get contents(){return RI}})}}),b(u,p)},c=u=>{var p=NI(),g=R(p);ht(g,{size:1,color:"neutral",children:(f,m)=>{var y=st("No task changes to display");b(f,y)},$$slots:{default:!0}}),b(u,p)};z(h,u=>{d(o)?u(l):u(c,!1)}),b(e,a),pt()}function Ga(e,t){ut(t,!1);const r=Kn.tryGetFromContext();pr(),de(e,{variant:"ghost-block",color:"neutral",size:.5,onclick:function(n){n?.stopPropagation(),r?.setActiveTab(_s.tasks)},children:(n,s)=>{vt(n,{name:"external-link",size:1})},$$slots:{default:!0}}),pt()}var UI=P('<div class="c-task-list-tool__counts svelte-177zs5s"><!> <!> <!> <!></div>'),qI=P("<!> <!>",1),jI=P('<div class="c-task-list-tool__no-diff svelte-177zs5s"><!></div>'),WI=P('<div class="c-task-list-tool__details svelte-177zs5s"><!></div>'),HI=P('<div class="c-task-list-tool-use-details__section svelte-vshkmb"><div class="c-task-list-tool-use-details__section-header svelte-vshkmb"><!></div> <div class="c-task-list-tool-use-details__task-list"><!></div></div>'),VI=P('<div class="c-task-list-tool-use-details__empty svelte-vshkmb"><!></div>'),GI=P('<div class="c-task-list-tool-use-details__section svelte-vshkmb"><div class="c-task-list-tool-use-details__section-header svelte-vshkmb"><!></div> <div class="c-task-list-tool-use-details__task-list"><!></div></div>'),YI=P('<div class="c-task-list-tool-use-details__loading svelte-vshkmb"><!></div>'),ZI=P('<div class="c-task-list-tool-use-details__loading svelte-vshkmb"><!></div>'),XI=P('<div class="c-task-list-tool-use-details svelte-vshkmb"><!></div>');function KI(e,t){ut(t,!0);const r=()=>Tt(o,"$ctx",s),n=()=>Tt(d(y),"$taskStore",s),[s,i]=se(),o=qr();let a=G(t,"toolUseInput",31,()=>Ne(r().toolUseInput)),h=G(t,"toolUseState",31,()=>Ne(r().toolUseState)),l=G(t,"requestId",31,()=>Ne(r().requestId)),c=G(t,"editable",3,!1);_e(()=>{a(r().toolUseInput)}),_e(()=>{h(r().toolUseState)}),_e(()=>{l(r().requestId)});let u=yt(!1);const p=O(()=>h().phase===dt.completed);let g=yt(void 0),f=yt(void 0),m=yt(void 0),y=yt(void 0);_e(()=>{d(f)&&X(m,Eu(d(f)),!0)}),_e(()=>{if(d(p)&&!d(u)&&h().result?.text){X(u,!0),X(g,h().result.text,!0);try{X(f,Fh(d(g)),!0),dc(X(y,Fn.createReadOnlyStore(d(f)),!0),"$taskStore",s)}catch(S){console.error("Failed to parse task list markdown:",S)}}});const v=je("enableAgentTabs");n()&&sy(n());var x=XI(),k=R(x),_=S=>{var T=J(),L=W(T),F=B=>{Ml(B,{get task(){return d(m)},get editable(){return c()}})},A=B=>{var M=HI(),$=R(M),E=R($);ht(E,{size:1,weight:"medium",color:"primary",children:(I,N)=>{var q=st("Task List");b(I,q)},$$slots:{default:!0}});var D=Y($,2);Di(R(D),{get task(){return d(m)},get taskStore(){return d(y)},get editable(){return c()}}),b(B,M)};z(L,B=>{Tt(v,"$enableAgentTabs",s)?B(F):B(A,!1)}),b(S,T)},w=S=>{var T=J(),L=W(T),F=B=>{var M=VI(),$=R(M);ht($,{size:1,color:"neutral",children:(E,D)=>{var I=st("No tasks to display");b(E,I)},$$slots:{default:!0}}),b(B,M)},A=B=>{var M=J(),$=W(M),E=I=>{var N=GI(),q=R(N),K=R(q);ht(K,{size:1,weight:"medium",color:"primary",children:(H,j)=>{var V=st("Task List");b(H,V)},$$slots:{default:!0}});var Z=Y(q,2),U=R(Z);Oh(U,{get markdown(){return d(g)}}),b(I,N)},D=I=>{var N=J(),q=W(N),K=U=>{var H=YI(),j=R(H);ht(j,{size:1,color:"neutral",children:(V,rt)=>{var tt=st("Loading...");b(V,tt)},$$slots:{default:!0}}),b(U,H)},Z=U=>{var H=ZI(),j=R(H);ht(j,{size:1,color:"neutral",children:(V,rt)=>{var tt=st("Waiting for task list...");b(V,tt)},$$slots:{default:!0}}),b(U,H)};z(q,U=>{d(p)?U(K):U(Z,!1)},!0),b(I,N)};z($,I=>{d(g)?I(E):I(D,!1)},!0),b(B,M)};z(L,B=>{d(y)!==void 0&&d(f)!==void 0?B(F):B(A,!1)},!0),b(S,T)};z(k,S=>{d(y)!==void 0&&d(m)!==void 0&&d(m).subTasksData&&d(m).subTasksData.length>0?S(_):S(w,!1)}),b(e,x),pt(),i()}var QI=P('<div class="c-view-task-list-tool__details svelte-1mvzn7s"><!></div>'),JI=P('<div class="c-reorganize-task-list-tool__counts svelte-1528ctp"><!> <!> <!> <!></div>'),t4=P("<!> <!>",1),e4=P('<div class="c-reorganize-task-list-tool__no-diff svelte-1528ctp"><!></div>'),r4=P('<div class="c-reorganize-task-list-tool__details svelte-1528ctp"><!></div>'),n4=P('<div class="c-add-tasks-tool__counts svelte-1rjuhj"><!> <!> <!> <!></div>'),s4=P("<!> <!>",1),i4=P('<div class="c-add-tasks-tool__no-diff svelte-1rjuhj"><!></div>'),o4=P('<div class="c-add-tasks-tool__details svelte-1rjuhj"><!></div>'),a4=P('<div class="searching svelte-c2wciv">Searching...</div>'),l4=P('<div class="no-results svelte-c2wciv">No search results available</div>'),c4=P('<div class="tool-content svelte-c2wciv"><!></div>'),h4=P('<span class="total-info svelte-h9oju"> </span>'),d4=P('<span class="range-info svelte-h9oju"> <!></span>'),u4=P("<span><!></span>"),p4=P('<span class="context-info svelte-z37tjo"> </span>'),g4=P('<span class="search-info svelte-z37tjo">Pattern <code class="svelte-z37tjo"> </code> <!></span>'),f4=P("<span><!></span>");const Jm={[xr.shell]:cs,[xr.webFetch]:function(e,t){let r=G(t,"toolUseInput",19,()=>({}));s_(e,{toolName:"Web Fetch",get toolUseInput(){return r()},get toolUseState(){return t.toolUseState}})},[xr.strReplaceEditor]:r_,[xr.codebaseRetrieval]:function(e,t){ut(t,!0);const r=()=>Tt(o,"$enableCommitIndexing",n),[n,s]=se();let i=G(t,"toolUseInput",19,()=>({}));const o=je("enableCommitIndexing");{const a=l=>{var c=J(),u=W(c),p=g=>{var f=cI(),m=W(f);vt(m,{name:"code"}),b(g,f)};z(u,g=>{r()&&g(p)}),b(l,c)};let h=O(()=>!r());Xd(e,{get toolUseInput(){return i()},get noRetrieval(){return d(h)},retrieval:a,$$slots:{retrieval:!0}})}pt(),s()},[xr.removeFiles]:function(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=O(()=>Array.isArray(r().file_paths)?r().file_paths.filter(s=>typeof s=="string"):[]);Te(e,{showToolOutput:!1,header:i=>{Se(i,{toolName:"Remove",icon:h=>{vt(h,{name:"file-minus"})},secondary:h=>{var l=hI();ge(l,20,()=>d(n),c=>c,(c,u)=>{Zi(c,{get filepath(){return u}})}),b(h,l)},$$slots:{icon:!0,secondary:!0}})},$$slots:{header:!0}}),pt()},[xr.view]:function(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=yt(!0),s=O(()=>Ir(r().path||r().file_path,"")),i=O(()=>r().type==="directory"),o=O(()=>Qm(r())!==void 0),a=O(()=>!d(i)&&!d(o)&&function(l){if(!l)return!1;const c=l.replace(/\\/g,"/"),u=`${Wp}/${Hp}/`,p=`${Wp}\\${Hp}\\`;return c.includes(u)||c.includes(p)}(d(s))&&t.toolUseState.phase===dt.completed),h=O(()=>d(a)&&t.toolUseState.result?.text?function(l){if(!l)return"";const c=l.split(`
`);let u=0,p=c.length;for(let m=0;m<c.length;m++){const y=c[m];if(y.startsWith(bI)&&(u=m+1),y.startsWith(xI)||y.trim()===""){p=m;break}}const g=c.slice(u,p).map(m=>{const y=m.match(/^\s*(\d+)\s+(.*)$/);return y?y[2]:m}),f=g.join(`
`).trim();return Tw.extractContent(f)}(t.toolUseState.result.text):"");{const l=g=>{Se(g,{icon:v=>{var x=J(),k=W(x),_=S=>{vt(S,{name:"folder"})},w=S=>{var T=J(),L=W(T),F=B=>{vt(B,{name:"search"})},A=B=>{vt(B,{name:"file"})};z(L,B=>{d(o)?B(F):B(A,!1)},!0),b(S,T)};z(k,S=>{d(i)?S(_):S(w,!1)}),b(v,x)},toolNameSnippet:v=>{{let x=O(()=>_h(r())),k=O(()=>Qm(r())),_=O(()=>function(w){return typeof w.case_sensitive=="boolean"&&w.case_sensitive}(r()));pI(v,Ye(()=>d(x),{get isDirectory(){return d(i)},get searchQueryRegex(){return d(k)},get caseSensitive(){return d(_)},get isRulesFile(){return d(a)}}))}},secondary:v=>{var x=J(),k=W(x),_=S=>{{let T=O(()=>_h(r()));Zi(S,Ye({get filepath(){return d(s)}},()=>d(T)))}},w=S=>{{let T=O(()=>_h(r()));la(S,Ye({get filepath(){return d(s)}},()=>d(T)))}};z(k,S=>{d(i)?S(_):S(w,!1)}),b(v,x)},$$slots:{icon:!0,toolNameSnippet:!0,secondary:!0}})},c=g=>{var f=J(),m=W(f),y=x=>{ca(x,{maxHeight:90,children:(k,_)=>{{let w=O(()=>({text:d(h),lang:"text",type:"code",raw:d(h)}));Dh(k,{get token(){return d(w)}})}},$$slots:{default:!0}})},v=x=>{vI(x,{get toolUseInput(){return r()}})};z(m,x=>{d(a)&&t.toolUseState.result?.text?x(y):x(v,!1)}),b(g,f)},u=g=>{var f=J(),m=W(f),y=v=>{Gr(v,Ye(()=>t.toolUseState.result??{}))};z(m,v=>{t.toolUseState.phase===dt.error&&v(y)}),b(g,f)};let p=O(()=>d(o)||d(a));Te(e,{get showToolOutput(){return d(p)},get collapsed(){return d(n)},set collapsed(g){X(n,g,!0)},header:l,details:c,error:u,$$slots:{header:!0,details:!0,error:!0}})}pt()},[xr.viewTaskList]:function(e,t){ut(t,!0);const[r,n]=se();let s=yt(!0);const i=je("enableAgentTabs");Te(e,{showToolOutput:!0,get collapsed(){return d(s)},set collapsed(l){X(s,l,!0)},header:l=>{Se(l,{toolName:"View Task List",icon:p=>{vt(p,{name:"list-checks"})},secondary:p=>{var g=J(),f=W(g),m=y=>{Ga(y,{})};z(f,y=>{Tt(i,"$enableAgentTabs",r)&&y(m)}),b(p,g)},$$slots:{icon:!0,secondary:!0}})},details:l=>{var c=QI(),u=R(c),p=g=>{KI(g,{editable:!1})};z(u,g=>{t.toolUseState.phase===dt.completed&&g(p)}),b(l,c)},error:l=>{var c=J(),u=W(c),p=g=>{Gr(g,Ye(()=>t.toolUseState.result??{},{hideDetailedMessage:!0}))};z(u,g=>{t.toolUseState.phase===dt.error&&g(p)}),b(l,c)},$$slots:{header:!0,details:!0,error:!0}}),pt(),n()},[xr.reorganizeTaskList]:function(e,t){ut(t,!0);const r=()=>Tt(p,"$enableAgentTabs",n),[n,s]=se();let i=yt(!0);const o=Dn(),a=O(()=>o?.rootTaskUuid?Le(o.rootTaskUuid):void 0),h=O(()=>t.toolUseState.result?.text&&!t.toolUseState.result.isError),l=O(()=>t.toolUseState.result?.text||""),c=O(()=>d(h)?jc(d(l),d(a)):{created:0,updated:0,deleted:0}),u=O(()=>d(c).created>0||d(c).updated>0||d(c).deleted>0),p=je("enableAgentTabs");Te(e,{get collapsed(){return d(i)},set collapsed(y){X(i,y,!0)},header:y=>{Se(y,{toolName:"Reorganize Task List",icon:_=>{vt(_,{name:"list-checks"})},secondary:_=>{var w=t4(),S=W(w),T=A=>{Ga(A,{})};z(S,A=>{r()&&A(T)});var L=Y(S,2),F=A=>{var B=JI(),M=R(B),$=Z=>{ae(Z,{color:"success",children:(U,H)=>{var j=st();et(()=>at(j,`${d(c).created??""} created`)),b(U,j)},$$slots:{default:!0}})};z(M,Z=>{d(c).created>0&&Z($)});var E=Y(M,2),D=Z=>{ae(Z,{color:"info",children:(U,H)=>{var j=st();et(()=>at(j,`${d(c).updated??""} updated`)),b(U,j)},$$slots:{default:!0}})};z(E,Z=>{d(c).updated>0&&Z(D)});var I=Y(E,2),N=Z=>{ae(Z,{color:"warning",children:(U,H)=>{var j=st();et(()=>at(j,`${d(c).deleted??""} deleted`)),b(U,j)},$$slots:{default:!0}})};z(I,Z=>{d(c).deleted>0&&Z(N)});var q=Y(I,2),K=Z=>{ae(Z,{color:"info",children:(U,H)=>{var j=st("No changes");b(U,j)},$$slots:{default:!0}})};z(q,Z=>{d(u)||Z(K)}),b(A,B)};z(L,A=>{!r()&&d(h)&&d(i)&&A(F)}),b(_,w)},headerActions:_=>{var w=J(),S=W(w),T=L=>{wh(L,{get taskCounts(){return d(c)}})};z(S,L=>{r()&&d(u)&&L(T)}),b(_,w)},$$slots:{icon:!0,secondary:!0,headerActions:!0}})},details:y=>{var v=r4(),x=R(v),k=w=>{var S=J(),T=W(S),L=A=>{Sh(A,{get text(){return d(l)}})},F=A=>{Ch(A,{get text(){return d(l)}})};z(T,A=>{r()?A(L):A(F,!1)}),b(w,S)},_=w=>{var S=J(),T=W(S),L=F=>{var A=e4(),B=R(A);ht(B,{size:1,color:"neutral",children:(M,$)=>{var E=st("No task changes to display");b(M,E)},$$slots:{default:!0}}),b(F,A)};z(T,F=>{d(h)&&!d(u)&&F(L)},!0),b(w,S)};z(x,w=>{d(h)&&d(u)?w(k):w(_,!1)}),b(y,v)},error:y=>{Gr(y,Ye(()=>t.toolUseState.result??{},{hideDetailedMessage:!0}))},$$slots:{header:!0,details:!0,error:!0}}),pt(),s()},[xr.updateTasks]:function(e,t){ut(t,!0);const r=()=>Tt(p,"$enableAgentTabs",n),[n,s]=se();let i=yt(!0);const o=Dn(),a=O(()=>o?.rootTaskUuid?Le(o.rootTaskUuid):void 0),h=O(()=>t.toolUseState.result?.text&&!t.toolUseState.result.isError),l=O(()=>t.toolUseState.result?.text||""),c=O(()=>d(h)?jc(d(l),d(a)):{created:0,updated:0,deleted:0}),u=O(()=>d(c).created>0||d(c).updated>0||d(c).deleted>0),p=je("enableAgentTabs");Te(e,{get collapsed(){return d(i)},set collapsed(y){X(i,y,!0)},header:y=>{Se(y,{toolName:"Update Task List",icon:_=>{vt(_,{name:"list-checks"})},secondary:_=>{var w=qI(),S=W(w),T=A=>{Ga(A,{})};z(S,A=>{r()&&A(T)});var L=Y(S,2),F=A=>{var B=UI(),M=R(B),$=Z=>{ae(Z,{color:"success",children:(U,H)=>{var j=st();et(()=>at(j,`${d(c).created??""} created`)),b(U,j)},$$slots:{default:!0}})};z(M,Z=>{d(c).created>0&&Z($)});var E=Y(M,2),D=Z=>{ae(Z,{color:"info",children:(U,H)=>{var j=st();et(()=>at(j,`${d(c).updated??""} updated`)),b(U,j)},$$slots:{default:!0}})};z(E,Z=>{d(c).updated>0&&Z(D)});var I=Y(E,2),N=Z=>{ae(Z,{color:"warning",children:(U,H)=>{var j=st();et(()=>at(j,`${d(c).deleted??""} deleted`)),b(U,j)},$$slots:{default:!0}})};z(I,Z=>{d(c).deleted>0&&Z(N)});var q=Y(I,2),K=Z=>{ae(Z,{color:"info",children:(U,H)=>{var j=st("No changes");b(U,j)},$$slots:{default:!0}})};z(q,Z=>{d(u)||Z(K)}),b(A,B)};z(L,A=>{!r()&&d(h)&&d(i)&&A(F)}),b(_,w)},headerActions:_=>{var w=J(),S=W(w),T=L=>{wh(L,{get taskCounts(){return d(c)}})};z(S,L=>{r()&&d(u)&&L(T)}),b(_,w)},$$slots:{icon:!0,secondary:!0,headerActions:!0}})},details:y=>{var v=WI(),x=R(v),k=w=>{var S=J(),T=W(S),L=A=>{Sh(A,{get text(){return d(l)}})},F=A=>{Ch(A,{get text(){return d(l)}})};z(T,A=>{r()?A(L):A(F,!1)}),b(w,S)},_=w=>{var S=J(),T=W(S),L=F=>{var A=jI(),B=R(A);ht(B,{size:1,color:"neutral",children:(M,$)=>{var E=st("No task changes to display");b(M,E)},$$slots:{default:!0}}),b(F,A)};z(T,F=>{d(h)&&!d(u)&&F(L)},!0),b(w,S)};z(x,w=>{d(h)&&d(u)?w(k):w(_,!1)}),b(y,v)},error:y=>{var v=J(),x=W(v),k=_=>{Gr(_,Ye(()=>t.toolUseState.result??{},{hideDetailedMessage:!0}))};z(x,_=>{t.toolUseState.phase===dt.error&&_(k)}),b(y,v)},$$slots:{header:!0,details:!0,error:!0}}),pt(),s()},[xr.addTasks]:function(e,t){ut(t,!0);const r=()=>Tt(p,"$enableAgentTabs",n),[n,s]=se();let i=yt(!0);const o=Dn(),a=O(()=>o?.rootTaskUuid?Le(o.rootTaskUuid):void 0),h=O(()=>t.toolUseState.result?.text&&!t.toolUseState.result.isError),l=O(()=>t.toolUseState.result?.text||""),c=O(()=>d(h)?jc(d(l),d(a)):{created:0,updated:0,deleted:0}),u=O(()=>d(c).created>0||d(c).updated>0||d(c).deleted>0),p=je("enableAgentTabs");Te(e,{get collapsed(){return d(i)},set collapsed(y){X(i,y,!0)},header:y=>{Se(y,{toolName:"Add Tasks",icon:_=>{vt(_,{name:"list-checks"})},secondary:_=>{var w=s4(),S=W(w),T=A=>{Ga(A,{})};z(S,A=>{r()&&A(T)});var L=Y(S,2),F=A=>{var B=n4(),M=R(B),$=Z=>{ae(Z,{color:"success",children:(U,H)=>{var j=st();et(()=>at(j,`${d(c).created??""} created`)),b(U,j)},$$slots:{default:!0}})};z(M,Z=>{d(c).created>0&&Z($)});var E=Y(M,2),D=Z=>{ae(Z,{color:"info",children:(U,H)=>{var j=st();et(()=>at(j,`${d(c).updated??""} updated`)),b(U,j)},$$slots:{default:!0}})};z(E,Z=>{d(c).updated>0&&Z(D)});var I=Y(E,2),N=Z=>{ae(Z,{color:"warning",children:(U,H)=>{var j=st();et(()=>at(j,`${d(c).deleted??""} deleted`)),b(U,j)},$$slots:{default:!0}})};z(I,Z=>{d(c).deleted>0&&Z(N)});var q=Y(I,2),K=Z=>{ae(Z,{color:"info",children:(U,H)=>{var j=st("No changes");b(U,j)},$$slots:{default:!0}})};z(q,Z=>{d(c).created===0&&d(c).updated===0&&d(c).deleted===0&&Z(K)}),b(A,B)};z(L,A=>{!r()&&d(h)&&d(i)&&A(F)}),b(_,w)},headerActions:_=>{var w=J(),S=W(w),T=L=>{wh(L,{get taskCounts(){return d(c)}})};z(S,L=>{r()&&d(u)&&L(T)}),b(_,w)},$$slots:{icon:!0,secondary:!0,headerActions:!0}})},details:y=>{var v=o4(),x=R(v),k=w=>{var S=J(),T=W(S),L=A=>{Sh(A,{get text(){return d(l)}})},F=A=>{Ch(A,{get text(){return d(l)}})};z(T,A=>{r()?A(L):A(F,!1)}),b(w,S)},_=w=>{var S=J(),T=W(S),L=F=>{var A=i4(),B=R(A);ht(B,{size:1,color:"neutral",children:(M,$)=>{var E=st("No task changes to display");b(M,E)},$$slots:{default:!0}}),b(F,A)};z(T,F=>{d(h)&&!d(u)&&F(L)},!0),b(w,S)};z(x,w=>{d(h)&&d(u)?w(k):w(_,!1)}),b(y,v)},error:y=>{Gr(y,Ye(()=>t.toolUseState.result??{},{hideDetailedMessage:!0}))},$$slots:{header:!0,details:!0,error:!0}}),pt(),s()},[xr.renderMermaid]:function(e,t){ut(t,!0);let r=yt(!1),n=O(()=>t.toolUseInput.title||"Mermaid Diagram"),s=O(()=>({type:"code",lang:"mermaid",text:t.toolUseInput.diagram_definition+"",raw:"```mermaid\n"+t.toolUseInput.diagram_definition+"\n```"}));Te(e,{showToolOutput:!0,get collapsed(){return d(r)},set collapsed(a){X(r,a,!0)},header:a=>{Se(a,{icon:u=>{vt(u,{name:"workflow"})},toolNameSnippet:u=>{var p=kI();b(u,p)},secondary:u=>{var p=_I(),g=R(p);et(()=>at(g,d(n))),b(u,p)},$$slots:{icon:!0,toolNameSnippet:!0,secondary:!0}})},details:a=>{var h=TI(),l=R(h),c=p=>{var g=wI();Kk(R(g),{get token(){return d(s)},codeblockMetadata:void 0}),b(p,g)},u=p=>{var g=J(),f=W(g),m=v=>{var x=CI(),k=R(x);ht(k,{children:(_,w)=>{var S=st("Rendering Mermaid diagram...");b(_,S)},$$slots:{default:!0}}),b(v,x)},y=v=>{var x=J(),k=W(x),_=w=>{var S=SI(),T=R(S);ht(T,{color:"error",children:(L,F)=>{var A=st();et(()=>at(A,`Error rendering Mermaid diagram: ${(t.toolUseState.result?.text||"Unknown error")??""}`)),b(L,A)},$$slots:{default:!0}}),b(w,S)};z(k,w=>{t.toolUseState.phase===dt.error&&w(_)},!0),b(v,x)};z(f,v=>{t.toolUseState.phase===dt.running?v(m):v(y,!1)},!0),b(p,g)};z(l,p=>{t.toolUseState.phase===dt.completed&&d(s)?p(c):p(u,!1)}),b(a,h)},$$slots:{header:!0,details:!0}}),pt()},[xr.grepSearch]:function(e,t){ut(t,!0);var r={toolUseInput:{}};return Te(e,{header:i=>{Se(i,{toolName:"Grep Search",icon:a=>{vt(a,{name:"search"})},$$slots:{icon:!0}})},details:i=>{var o=c4(),a=R(o),h=c=>{{let u=O(()=>({text:t.toolUseState.result.text,lang:"text",type:"code",raw:t.toolUseState.result.text}));Dh(c,{get token(){return d(u)}})}},l=c=>{var u=J(),p=W(u),g=m=>{var y=a4();b(m,y)},f=m=>{var y=l4();b(m,y)};z(p,m=>{t.toolUseState?.phase==="running"?m(g):m(f,!1)},!0),b(c,u)};z(a,c=>{t.toolUseState?.result?.text?c(h):c(l,!1)}),b(i,o)},$$slots:{header:!0,details:!0}}),pt(r)},[xr.viewRangeUntruncated]:function(e,t){ut(t,!1);const r=()=>Tt(i,"$ctx",n),[n,s]=se(),i=qr();function o(c){return typeof c.start_line=="number"?c.start_line:void 0}function a(c){return typeof c.end_line=="number"?c.end_line:void 0}function h(c){if(!c)return;const u=c.match(/<!-- toolType: ([^>]+) -->/);return u?u[1]:void 0}function l(c){return c?["launch-process","kill-process","read-process","write-process","list-processes","wait-process"].includes(c):!1}pr(),Te(e,{header:u=>{{const p=m=>{vt(m,{name:"zoom-in"})},g=m=>{var y=u4(),v=R(y);ht(v,{size:1,class:"c-view-range-untruncated__secondary",children:(x,k)=>{var _=J(),w=W(_),S=L=>{var F=st();et(A=>at(F,A),[()=>l(h(r().toolUseState.result?.text))?"Reading terminal output range...":"Reading full output range..."]),b(L,F)},T=L=>{var F=J(),A=W(F),B=$=>{const E=he(()=>o(r().toolUseInput)),D=he(()=>a(r().toolUseInput)),I=he(()=>function(U){if(!U)return;const H=U.match(/lines \d+-\d+ of (\d+) total lines/);if(H)return parseInt(H[1],10);const j=U.match(/Viewing lines \d+-\d+ \((\d+) total lines\)/);return j?parseInt(j[1],10):void 0}(r().toolUseState.result?.text));var N=d4(),q=R(N),K=Y(q),Z=U=>{var H=h4(),j=R(H);et(()=>at(j,`of ${d(I)??""} total lines`)),b(U,H)};z(K,U=>{d(I)&&U(Z)}),et(()=>at(q,`View lines ${d(E)??""}-${d(D)??""} `)),b($,N)},M=$=>{var E=st();et(D=>at(E,D),[()=>l(h(r().toolUseState.result?.text))?"View terminal output range":"View full output range"]),b($,E)};z(A,$=>{o(r().toolUseInput)&&a(r().toolUseInput)?$(B):$(M,!1)},!0),b(L,F)};z(w,L=>{r().toolUseState.phase<=dt.running?L(S):L(T,!1)}),b(x,_)},$$slots:{default:!0}}),b(m,y)};let f=he(()=>{return l(m=h(r().toolUseState.result?.text))?"View Terminal Output":m==="web-fetch"?"View Web Page":"View Full Output";var m});Se(u,{get toolName(){return d(f)},icon:p,secondary:g,$$slots:{icon:!0,secondary:!0}})}},$$slots:{header:!0}}),pt(),s()},[xr.searchUntruncated]:function(e,t){ut(t,!1);const r=()=>Tt(i,"$ctx",n),[n,s]=se(),i=qr();function o(c){return typeof c.search_term=="string"?c.search_term:void 0}function a(c){return typeof c.context_lines=="number"?c.context_lines:2}function h(c){if(!c)return;const u=c.match(/<!-- toolType: ([^>]+) -->/);return u?u[1]:void 0}function l(c){return c?["launch-process","kill-process","read-process","write-process","list-processes","wait-process"].includes(c):!1}pr(),Te(e,{header:u=>{{const p=m=>{vt(m,{name:"search"})},g=m=>{var y=f4(),v=R(y);ht(v,{size:1,class:"c-search-untruncated__secondary",children:(x,k)=>{var _=J(),w=W(_),S=L=>{var F=st();et(A=>at(F,A),[()=>l(h(r().toolUseState.result?.text))?"Searching terminal output...":"Searching full output..."]),b(L,F)},T=L=>{var F=J(),A=W(F),B=$=>{var E=g4(),D=Y(R(E)),I=R(D),N=Y(D,2),q=K=>{var Z=p4(),U=R(Z);et(H=>at(U,`(${H??""} context lines)`),[()=>a(r().toolUseInput)]),b(K,Z)};z(N,K=>{a(r().toolUseInput)!==2&&K(q)}),et(K=>at(I,K),[()=>o(r().toolUseInput)]),b($,E)},M=$=>{var E=st();et(D=>at(E,D),[()=>l(h(r().toolUseState.result?.text))?"Search terminal output":"Search full output"]),b($,E)};z(A,$=>{o(r().toolUseInput)?$(B):$(M,!1)},!0),b(L,F)};z(w,L=>{r().toolUseState.phase<=dt.running?L(S):L(T,!1)}),b(x,_)},$$slots:{default:!0}}),b(m,y)};let f=he(()=>{return l(m=h(r().toolUseState.result?.text))?"Search Terminal Output":m==="web-fetch"?"Search Web Page":"Search Full Output";var m});Se(u,{get toolName(){return d(f)},icon:p,secondary:g,$$slots:{icon:!0,secondary:!0}})}},$$slots:{header:!0}}),pt(),s()}};var m4=(e,t)=>d(t)?.focus(),y4=P('<button class="c-monaco-output-block__overlay svelte-1jc5ewx" aria-label="Focus editor"></button>'),v4=P('<div class="c-monaco-output-block__monaco-container svelte-1jc5ewx"><!> <!></div>'),b4=P('<div class="c-monaco-output-block__empty-state svelte-1jc5ewx"><!></div>'),x4=P('<div class="c-monaco-output-block svelte-1jc5ewx"><div class="c-monaco-output-block__header svelte-1jc5ewx"><!> <div class="c-monaco-output-block__actions svelte-1jc5ewx"><!> <!> <!></div></div> <!></div>');function t0(e,t){ut(t,!0);let r,n=G(t,"label",19,()=>{}),s=G(t,"doScrollToBottom",3,!1),i=G(t,"monacoOptions",19,()=>({lineNumbers:"off",wordWrap:"off",lineDecorationsWidth:0,folding:!1,showFoldingControls:"never",readOnly:!0,stickyScroll:{enabled:!1},overviewRulerLanes:0,scrollbar:{vertical:"auto",horizontal:"auto",alwaysConsumeMouseWheel:!1,verticalScrollbarSize:5}})),o=G(t,"showCopyButton",3,!0),a=G(t,"showViewInFileButton",3,!0),h=yt(void 0),l=yt(()=>{}),c=yt(!1);function u(M){M||(r&&clearTimeout(r),r=void 0,X(h,void 0))}async function p(){if(t.content){r&&clearTimeout(r);try{await navigator.clipboard.writeText(t.content),X(h,"Copied!"),r=setTimeout(d(l),1500)}catch(M){console.error("Failed to copy:",M),X(h,"Copy failed"),r=setTimeout(d(l),1500)}}}let g=yt(void 0);_e(()=>{s()&&d(g)&&s()&&d(g)&&(d(g)?.layout(),d(g).revealLine(d(g).getModel().getLineCount()))}),_e(()=>{d(g)&&d(g)&&(d(g).onDidFocusEditorText(()=>{X(c,!0)}),d(g).onDidBlurEditorText(()=>{X(c,!1)}))});var f=x4(),m=R(f),y=R(m),v=M=>{var $=J(),E=W($);ke(E,()=>t.labelSnippet),b(M,$)},x=M=>{ht(M,{size:1,weight:"medium",children:($,E)=>{var D=st();et(()=>at(D,n())),b($,D)},$$slots:{default:!0}})};z(y,M=>{t.labelSnippet?M(v):M(x,!1)});var k=Y(y,2),_=R(k),w=M=>{{let $=O(()=>d(h)||"Copy to clipboard"),E=O(()=>[Pe.Hover]);fe(M,{onOpenChange:u,get content(){return d($)},side:"bottom",get triggerOn(){return d(E)},get requestClose(){return d(l)},set requestClose(D){X(l,D,!0)},children:(D,I)=>{{let N=O(()=>!t.content);de(D,{variant:"ghost-block",color:"neutral",size:1,get disabled(){return d(N)},$$events:{click:p},children:(q,K)=>{vt(q,{name:"copy"})},$$slots:{default:!0}})}},$$slots:{default:!0}})}};z(_,M=>{o()&&M(w)});var S=Y(_,2),T=M=>{fe(M,{content:"View full content in editor",side:"bottom",children:($,E)=>{{let D=O(()=>!t.content);de($,{variant:"ghost-block",color:"neutral",size:1,get disabled(){return d(D)},$$events:{click(...I){t.onViewInFile?.apply(this,I)}},children:(I,N)=>{vt(I,{name:"external-link"})},$$slots:{default:!0}})}},$$slots:{default:!0}})};z(S,M=>{a()&&M(T)});var L=Y(S,2);ke(L,()=>t.actions??Ue);var F=Y(m,2),A=M=>{var $=v4(),E=R($),D=N=>{var q=y4();q.__click=[m4,g],b(N,q)};z(E,N=>{d(c)||N(D)});var I=Y(E,2);ve(I,()=>Ww.Root,(N,q)=>{q(N,{children:(K,Z)=>{wl(K,{height:100,get options(){return i()},get text(){return t.content},get lang(){return t.language},get editorInstance(){return d(g)},set editorInstance(U){X(g,U,!0)}})},$$slots:{default:!0}})}),b(M,$)},B=M=>{var $=b4(),E=R($);ht(E,{size:1,color:"secondary",children:(D,I)=>{var N=st("No content available.");b(D,N)},$$slots:{default:!0}}),b(M,$)};z(F,M=>{t.content?M(A):M(B,!1)}),b(e,f),pt()}fa(["click"]);var k4=P(" <!>",1),_4=P('<div class="c-setup-script-tool__save-button svelte-pndipf"><!></div>'),w4=P('<div class="c-setup-script-tool__save-option-icon svelte-pndipf"><!></div>'),C4=P('<div class="c-setup-script-tool__save-option-container svelte-pndipf"><span> </span> <!></div>'),S4=P("<!> <!>",1),T4=P("<div><!></div>"),$4=P('<div class="c-setup-script-tool__row svelte-pndipf"><div><!></div> <div class="c-setup-script-tool__row__title svelte-pndipf"><!></div></div>'),M4=P("View <!>",1),A4=P('<div class="c-setup-script-tool__row svelte-pndipf"><div class="c-setup-script-tool__row__status svelte-pndipf"><!></div> <div class="c-setup-script-tool__row__title svelte-pndipf"><!></div> <!></div>'),E4=P("View <!>",1),L4=P('<div class="c-setup-script-tool__row svelte-pndipf"><div class="c-setup-script-tool__row__status svelte-pndipf"><!></div> <div class="c-setup-script-tool__row__title svelte-pndipf"><!></div> <div class="c-setup-script-tool__row__actions"><!></div></div>'),B4=P('<div class="c-setup-script-tool__section svelte-pndipf"><!> <!></div>'),I4=P('<div class="c-setup-script-tool svelte-pndipf"><div class="c-setup-script-tool__id svelte-pndipf"></div> <div class="c-setup-script-tool__script svelte-pndipf"><!> <div class="c-setup-script-tool__script__actions svelte-pndipf"><!></div></div> <div class="c-setup-script-tool__section svelte-pndipf"><!> <!></div> <!></div>');function F4(e,t){t(!t())}var D4=P('<strong> </strong> <span class="c-collapsible-content__toggle-icon svelte-i6ryvq"> </span>',1),O4=P("<div><div><!></div></div>"),R4=P('<div class="c-collapsible-content"><button class="c-collapsible-content__toggle svelte-i6ryvq"><!></button> <!></div>');fa(["click"]);var P4=P("<strong> </strong>"),N4=P('<div class="c-tool-result-fields__status-row svelte-1ckik1b"><!> <!></div>'),z4=P("<strong> </strong>"),U4=P("<!> <!>",1),q4=P("<strong> </strong> ",1),j4=P('<div class="c-tool-result-fields__field svelte-1ckik1b"><!></div>'),W4=P('<div class="c-tool-result-fields svelte-1ckik1b"></div>');function xi(e,t){function r(i,o){return o.split(".").reduce((a,h)=>a?.[h],i)}ut(t,!0);let n=O(()=>t.fields.filter(i=>{const o=r(t.data,i.key);return!(!o&&o!==0&&o!==!1)&&!(i.condition&&!i.condition(t.data))}));var s=W4();ge(s,21,()=>d(n),Re,(i,o)=>{const a=O(()=>function(p){const g=r(t.data,p.key);return p.transform?p.transform(g):String(g||"")}(d(o)));var h=J(),l=W(h),c=p=>{{let g=O(()=>d(o).maxHeight||"300px");(function(f,m){ut(m,!0);let y=G(m,"expanded",15,!1),v=G(m,"maxHeight",3,"300px"),x=G(m,"showBorder",3,!0),k=G(m,"contentClass",3,"");const _=`collapsible-${Math.random().toString(36).substring(2,11)}`;var w=R4(),S=R(w);S.__click=[F4,y];var T=R(S);ht(T,{size:1,color:"neutral",children:(A,B)=>{var M=D4(),$=W(M),E=R($),D=Y($,2),I=R(D);et(()=>{at(E,`${m.label??""}:`),at(I,y()?"▼":"▶")}),b(A,M)},$$slots:{default:!0}});var L=Y(S,2),F=A=>{var B=O4(),M=R(B);let $;var E=R(M);ke(E,()=>m.children??Ue),et(D=>{Me(B,1,`c-collapsible-content__display ${k()??""}`,"svelte-i6ryvq"),Pr(B,"id",_),ri(B,`max-height: ${v()??""};`),$=Me(M,1,"c-collapsible-content__inner svelte-i6ryvq",null,$,D)},[()=>({bordered:x()})]),b(A,B)};z(L,A=>{y()&&A(F)}),et(()=>{Pr(S,"aria-expanded",y()),Pr(S,"aria-controls",_)}),b(f,w),pt()})(p,{get label(){return d(o).label},get maxHeight(){return d(g)},children:(f,m)=>{var y=J(),v=W(y),x=_=>{{let w=O(()=>d(o).color||"neutral");ht(_,{size:1,type:"monospace",get color(){return d(w)},children:(S,T)=>{var L=st();et(()=>at(L,d(a))),b(S,L)},$$slots:{default:!0}})}},k=_=>{{let w=O(()=>d(o).color||"neutral");ht(_,{size:1,get color(){return d(w)},children:(S,T)=>{var L=st();et(()=>at(L,d(a))),b(S,L)},$$slots:{default:!0}})}};z(v,_=>{d(o).type==="monospace"?_(x):_(k,!1)}),b(f,y)},$$slots:{default:!0}})}},u=p=>{var g=j4(),f=R(g),m=v=>{var x=N4(),k=R(x);ht(k,{size:1,color:"neutral",children:(w,S)=>{var T=P4(),L=R(T);et(()=>at(L,`${d(o).label??""}:`)),b(w,T)},$$slots:{default:!0}});var _=Y(k,2);{let w=O(()=>d(o).statusColor||"neutral");ae(_,{get color(){return d(w)},children:(S,T)=>{var L=st();et(()=>at(L,d(a))),b(S,L)},$$slots:{default:!0}})}b(v,x)},y=v=>{var x=J(),k=W(x),_=S=>{var T=U4(),L=W(T);ht(L,{size:1,color:"neutral",children:(A,B)=>{var M=z4(),$=R(M);et(()=>at($,`${d(o).label??""}:`)),b(A,M)},$$slots:{default:!0}});var F=Y(L,2);{let A=O(()=>d(o).color||"neutral");ht(F,{size:1,type:"monospace",get color(){return d(A)},children:(B,M)=>{var $=st();et(()=>at($,d(a))),b(B,$)},$$slots:{default:!0}})}b(S,T)},w=S=>{{let T=O(()=>d(o).color||"neutral");ht(S,{size:1,get color(){return d(T)},children:(L,F)=>{var A=q4(),B=W(A),M=R(B),$=Y(B);et(()=>{at(M,`${d(o).label??""}:`),at($,` ${d(a)??""}`)}),b(L,A)},$$slots:{default:!0}})}};z(k,S=>{d(o).type==="monospace"?S(_):S(w,!1)},!0),b(v,x)};z(f,v=>{d(o).type==="status"?v(m):v(y,!1)}),b(p,g)};z(l,p=>{d(o).collapsible?p(c):p(u,!1)}),b(i,h)}),b(e,s),pt()}var H4=P('<div class="c-start-worker-tool__counts svelte-1tg2ggt"><!> <!></div>'),V4=P('<div class="c-start-worker-tool__running"><!></div>'),G4=P(" <!>",1),Y4=P("<strong>Agent ID:</strong> ",1),Z4=P("<strong>Status:</strong> ",1),X4=P('<div class="c-start-worker-tool__success-details"><!> <!></div>'),K4=P("<strong>Error:</strong> ",1),Q4=P('<div class="c-start-worker-tool__error-details"><!></div>'),J4=P('<div class="c-start-worker-tool__worker-header svelte-1tg2ggt"><div class="c-start-worker-tool__worker-title svelte-1tg2ggt"><!> <!></div></div> <div class="c-start-worker-tool__worker-details svelte-1tg2ggt"><!> <!></div>',1),tF=P('<div class="c-start-worker-tool__results svelte-1tg2ggt"></div>'),eF=P('<div class="c-start-worker-tool__no-results"><!></div>'),rF=P('<div class="c-start-worker-tool__details svelte-1tg2ggt"><!></div>'),nF=P('<div class="c-send-instruction-tool__counts svelte-cnqzvu"><!> <!></div>'),sF=P('<div class="c-send-instruction-tool__running"><!></div>'),iF=P(" <!>",1),oF=P("<strong>Agent ID:</strong> ",1),aF=P('<div class="c-send-instruction-tool__success-details"><!> <!></div>'),lF=P("<strong>Error:</strong> ",1),cF=P("<strong>Target Agent ID:</strong> ",1),hF=P('<div class="c-send-instruction-tool__error-details"><!> <!></div>'),dF=P('<div class="c-send-instruction-tool__instruction-header svelte-cnqzvu"><div class="c-send-instruction-tool__instruction-title svelte-cnqzvu"><!> <!></div></div> <div class="c-send-instruction-tool__instruction-details svelte-cnqzvu"><!></div>',1),uF=P('<div class="c-send-instruction-tool__results svelte-cnqzvu"></div>'),pF=P('<div class="c-send-instruction-tool__no-results"><!></div>'),gF=P('<div class="c-send-instruction-tool__details svelte-cnqzvu"><!></div>'),fF=P('<div class="c-read-worker-state-tool__counts svelte-1a2g1md"><!> <!></div>'),mF=P('<div class="c-read-worker-state-tool__running"><!></div>'),yF=P("<strong>Status:</strong>"),vF=P('<div class="c-read-worker-state-tool__status-row svelte-1a2g1md"><!> <!></div>'),bF=P('<div class="c-read-worker-state-tool__success-details"><!> <!> <!></div>'),xF=P("<strong>Error:</strong> ",1),kF=P('<div class="c-read-worker-state-tool__error-details"><!></div>'),_F=P('<div class="c-read-worker-state-tool__worker-header svelte-1a2g1md"><div class="c-read-worker-state-tool__worker-title svelte-1a2g1md"><!> <!></div></div> <div class="c-read-worker-state-tool__worker-details svelte-1a2g1md"><!></div>',1),wF=P('<div class="c-read-worker-state-tool__results svelte-1a2g1md"></div>'),CF=P('<div class="c-read-worker-state-tool__no-results"><!></div>'),SF=P('<div class="c-read-worker-state-tool__details svelte-1a2g1md"><!></div>'),TF=P('<div class="c-wait-worker-tool__counts svelte-116gs6l"><!> <!></div>'),$F=P('<div class="c-wait-worker-tool__running"><!></div>'),MF=P("<strong>Target Status:</strong>"),AF=P("<strong>Final Status:</strong>"),EF=P("<strong>Wait Time:</strong> ",1),LF=P('<div class="c-wait-worker-tool__success-details"><div class="c-wait-worker-tool__status-row svelte-116gs6l"><!> <!></div> <div class="c-wait-worker-tool__status-row svelte-116gs6l"><!> <!></div> <!></div>'),BF=P("<strong>Error:</strong> ",1),IF=P("<strong>Agent ID:</strong> ",1),FF=P("<strong>Target Status:</strong> ",1),DF=P("<strong>Timeout:</strong> ",1),OF=P('<div class="c-wait-worker-tool__error-details"><!> <!> <!> <!></div>'),RF=P('<div class="c-wait-worker-tool__wait-header svelte-116gs6l"><div class="c-wait-worker-tool__wait-title svelte-116gs6l"><!> <!></div></div> <div class="c-wait-worker-tool__wait-details svelte-116gs6l"><!></div>',1),PF=P('<div class="c-wait-worker-tool__results svelte-116gs6l"></div>'),NF=P('<div class="c-wait-worker-tool__no-results"><!></div>'),zF=P('<div class="c-wait-worker-tool__details svelte-116gs6l"><!></div>'),UF=P('<div class="c-stop-worker-tool__counts svelte-1s0pbm1"><!> <!></div>'),qF=P('<div class="c-stop-worker-tool__running"><!></div>'),jF=P("<strong>Agent ID:</strong> ",1),WF=P('<div class="c-stop-worker-tool__success-details"><!> <!></div>'),HF=P("<strong>Error:</strong> ",1),VF=P("<strong>Agent ID:</strong> ",1),GF=P('<div class="c-stop-worker-tool__error-details"><!> <!></div>'),YF=P('<div class="c-stop-worker-tool__agent-header svelte-1s0pbm1"><div class="c-stop-worker-tool__agent-title svelte-1s0pbm1"><!> <!></div></div> <div class="c-stop-worker-tool__agent-details svelte-1s0pbm1"><!></div>',1),ZF=P('<div class="c-stop-worker-tool__results svelte-1s0pbm1"></div>'),XF=P('<div class="c-stop-worker-tool__no-results"><!></div>'),KF=P('<div class="c-stop-worker-tool__details svelte-1s0pbm1"><!></div>'),QF=P('<div class="c-delete-worker-tool__counts svelte-1wenjkg"><!> <!></div>'),JF=P('<div class="c-delete-worker-tool__running"><!></div>'),tD=P("<strong>Agent ID:</strong> ",1),eD=P('<div class="c-delete-worker-tool__success-details"><!> <!></div>'),rD=P("<strong>Error:</strong> ",1),nD=P("<strong>Agent ID:</strong> ",1),sD=P('<div class="c-delete-worker-tool__error-details"><!> <!></div>'),iD=P('<div class="c-delete-worker-tool__agent-header svelte-1wenjkg"><div class="c-delete-worker-tool__agent-title svelte-1wenjkg"><!> <!></div></div> <div class="c-delete-worker-tool__agent-details svelte-1wenjkg"><!></div>',1),oD=P('<div class="c-delete-worker-tool__results svelte-1wenjkg"></div>'),aD=P('<div class="c-delete-worker-tool__no-results"><!></div>'),lD=P('<div class="c-delete-worker-tool__details svelte-1wenjkg"><!></div>'),cD=P('<div class="c-read-edits-tool__counts svelte-spvkd4"><!> <!> <!></div>'),hD=P('<div class="c-read-edits-tool__running"><!></div>'),dD=P("<strong>Agent ID:</strong> ",1),uD=P("<strong> </strong>"),pD=P('<div class="c-read-edits-tool__file-edit svelte-spvkd4"><div class="c-read-edits-tool__file-header svelte-spvkd4"><!> <!></div> <!></div>'),gD=P('<div class="c-read-edits-tool__file-edits svelte-spvkd4"><!> <!></div>'),fD=P('<div class="c-read-edits-tool__success-details"><!> <!></div>'),mD=P("<strong>Error:</strong> ",1),yD=P("<strong>Agent ID:</strong> ",1),vD=P('<div class="c-read-edits-tool__error-details"><!> <!></div>'),bD=P('<div class="c-read-edits-tool__agent-header svelte-spvkd4"><div class="c-read-edits-tool__agent-title svelte-spvkd4"><!> <!></div></div> <div class="c-read-edits-tool__agent-details svelte-spvkd4"><!></div>',1),xD=P('<div class="c-read-edits-tool__results svelte-spvkd4"></div>'),kD=P('<div class="c-read-edits-tool__no-results"><!></div>'),_D=P('<div class="c-read-edits-tool__details svelte-spvkd4"><!></div>'),wD=P('<div class="c-apply-edits-tool__counts svelte-8hutmy"><!> <!> <!></div>');const e0={[ze.editFile]:r_,[ze.readFile]:function(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=O(()=>Ir(r().file_path,""));Te(e,{header:i=>{{const o=l=>{vt(l,{name:"file"})},a=l=>{la(l,{get filepath(){return d(n)}})};let h=O(()=>[d(n)]);Se(i,{toolName:"Read",get formattedToolArgs(){return d(h)},icon:o,secondary:a,$$slots:{icon:!0,secondary:!0}})}},$$slots:{header:!0}}),pt()},[ze.saveFile]:function(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=O(()=>Ir(r().path,Ir(r().file_path,""))),s=O(()=>t.toolUseState.phase===dt.cancelled?"File creation cancelled":t.toolUseState.phase===dt.cancelling?"Cancelling creation of file":t.toolUseState.phase===dt.completed?"Created file":t.toolUseState.phase===dt.error?"File creation failed.":"Creating file...");{const i=h=>{Se(h,{get toolName(){return d(s)},icon:u=>{vt(u,{name:"file-plus"})},secondary:u=>{la(u,{get filepath(){return d(n)}})},$$slots:{icon:!0,secondary:!0}})},o=h=>{var l=f6(),c=R(l);{let u=O(()=>Ir(r().file_content,"")),p=O(()=>Ir(r().path,""));wl(c,{get text(){return d(u)},get pathName(){return d(p)}})}b(h,l)};let a=O(()=>t.toolUseState.phase===dt.completed);Te(e,{get showToolOutput(){return d(a)},header:i,details:o,$$slots:{header:!0,details:!0}})}pt()},[ze.launchProcess]:cs,[ze.killProcess]:cs,[ze.readProcess]:cs,[ze.writeProcess]:cs,[ze.listProcesses]:cs,[ze.waitProcess]:cs,[ze.openBrowser]:function(e,t){let r=G(t,"toolUseInput",19,()=>({}));s_(e,{toolName:"Open in Browser",get toolUseInput(){return r()},get toolUseState(){return t.toolUseState}})},[ze.remember]:function(e,t){ut(t,!0);const[r,n]=se();let s=G(t,"toolUseInput",19,()=>({}));const i=je("enableMemoryRetrieval");var o=J(),a=W(o),h=c=>{Te(c,{header:g=>{{const f=y=>{vt(y,{name:"archive"})};let m=O(()=>[Ir(s().memory,"")]);Se(g,{toolName:"Remember",get formattedToolArgs(){return d(m)},icon:f,$$slots:{icon:!0}})}},details:g=>{{let f=O(()=>({memoriesRequestId:"",memory:Ir(s().memory,""),isFlushed:!0}));(function(m,y){ut(y,!0);const v=ci();let x=O(()=>y.memoryData?function($){const E=$.match(/^\[SCOPE:\s*([^\]]+)\]/);if(E)return E[1].trim()}(y.memoryData.memory):void 0),k=O(()=>y.memoryData?y.memoryData.memory.replace(/^\[SCOPE:\s*[^\]]+\]\s*/,"").trim():void 0);var _=M6(),w=R(_),S=$=>{var E=$6(),D=W(E),I=R(D);ht(I,{size:1,weight:"light",color:"secondary",children:(K,Z)=>{var U=st("Scope");b(K,U)},$$slots:{default:!0}});var N=Y(D,2),q=R(N);ht(q,{size:1,weight:"light",children:(K,Z)=>{var U=st();et(()=>at(U,d(x))),b(K,U)},$$slots:{default:!0}}),b($,E)};z(w,$=>{d(x)&&$(S)});var T=Y(w,2),L=R(T);ht(L,{size:1,weight:"light",color:"secondary",children:($,E)=>{var D=st("Content");b($,D)},$$slots:{default:!0}});var F=Y(T,2),A=R(F);ht(A,{size:1,weight:"light",children:($,E)=>{var D=st();et(()=>at(D,d(k))),b($,D)},$$slots:{default:!0}});var B=Y(F,2),M=$=>{T6($,{get memoryData(){return y.memoryData},get chatModel(){return v},get requestId(){return y.requestId}})};z(B,$=>{y.requestId&&$(M)}),b(m,_),pt()})(g,{get memoryData(){return d(f)},get requestId(){return t.toolUseState.requestId}})}},$$slots:{header:!0,details:!0}})},l=c=>{Te(c,{header:p=>{{const g=m=>{vt(m,{name:"archive"})};let f=O(()=>[Ir(s().memory,"")]);Se(p,{toolName:"Remember",get formattedToolArgs(){return d(f)},icon:g,$$slots:{icon:!0}})}},$$slots:{header:!0}})};z(a,c=>{Tt(i,"$enableMemoryRetrieval",r)?c(h):c(l,!1)}),b(e,o),pt(),n()},[ze.diagnostics]:function(e){Te(e,{header:r=>{Se(r,{toolName:"Diagnostics",icon:s=>{vt(s,{name:"circle-alert",size:2})},$$slots:{icon:!0}})},$$slots:{header:!0}})},[ze.setupScript]:function(e,t){ut(t,!0);let r=O(()=>{try{const U=t.toolUse?.input_json||"{}";return typeof U=="string"?JSON.parse(U):{}}catch(U){return console.error("Failed to parse tool input JSON:",U),{}}}),n=O(()=>{try{const U=t.toolUseState.result?.text||"{}";return typeof U=="string"?JSON.parse(U):U}catch(U){return console.error("Failed to parse tool result:",U),null}}),s=O(()=>d(r).script_content||""),i=O(()=>d(n)?.script_result||null),o=O(()=>d(n)?.test_results||[]),a=O(()=>t.toolUseState.phase===dt.running),h=O(()=>{try{return d(a)&&d(r).test_commands&&Array.isArray(d(r).test_commands)?d(r).test_commands:[]}catch(U){return console.error("Failed to parse test commands:",U),[]}}),l=yt(Ne([])),c=yt(()=>{});const u=me("chatModel"),p=u?.extensionClient,g=me(xs.key),f="setup.sh",m=bs();function y(U){m(Yi({repoRoot:"",pathName:U.path,allowOutOfWorkspace:!0,openLocalUri:U.location==="home"}))}async function v(U){U.stopPropagation();const H=d(l).length>0?d(l)[0]:null;try{H?y(H):p.openScratchFile(d(s),"shellscript")}catch(j){console.error("Error opening script in editor:",j)}}function x(U,H="plaintext"){p.openScratchFile(U,H)}async function k(){try{const U=(await g.listSetupScripts()).filter(H=>H.content.trim()===d(s).trim());X(l,U,!0)}catch(U){console.error("Error checking existing scripts:",U)}}let _=O(()=>{const U=d(l).some(H=>H.location==="git");return[{id:"home",...d(l).some(H=>H.location==="home")?{label:"Saved locally (in home directory)",lucideIcon:"check"}:{label:"Save locally (in home directory)",endIcon:void 0,lucidIcon:void 0}},{id:"git",...U?{label:"Saved in git repository",lucideIcon:"check"}:{label:"Save in git repository",endIcon:void 0,lucidIcon:void 0}}]});$s(async()=>{await k()});const w={[Wn.SUCCESS]:"success",[Wn.FAILED]:"error",[Wn.SKIPPED]:"skipped"};let S=O(()=>d(a)?"Running script...":t.toolUseState.phase===dt.completed?"Script ran successfully":t.toolUseState.phase===dt.error?d(i)?.status===Wn.FAILED?"Script failed to run":d(o).some(U=>U.status===Wn.FAILED)?"Script ran with failed tests":d(o).some(U=>U.status===Wn.SKIPPED)?"Script ran but skipped tests":"Script failed":t.toolUseState.phase===dt.cancelled?"Script cancelled":t.toolUseState.phase===dt.runnable?"Waiting for user approval to run":"");var T={toolUseInput:{}},L=I4(),F=R(L),A=Y(F,2),B=R(A);ht(B,{size:2,weight:"medium",children:(U,H)=>{var j=st("Setup script created");b(U,j)},$$slots:{default:!0}});var M=Y(B,2),$=R(M);ht($,{size:1,children:(U,H)=>{var j=k4(),V=W(j);Rc(Y(V),{}),et(()=>at(V,`${d(S)??""} `)),b(U,j)},$$slots:{default:!0}});var E=Y(A,2),D=R(E),I=U=>{t0(U,{label:"Generated script",get content(){return d(s)},language:"bash",onViewInFile:v,actions:j=>{var V=T4(),rt=R(V);ve(rt,()=>ce.Root,(tt,it)=>{it(tt,{get requestOpen(){return d(c)},set requestOpen(nt){X(c,nt,!0)},children:(nt,ct)=>{var mt=S4(),lt=W(mt);ve(lt,()=>ce.Trigger,(Ct,St)=>{St(Ct,{children:(Lt,kt)=>{fe(Lt,{content:"Save script",side:"bottom",children:(wt,bt)=>{var It=_4(),Yt=R(It);Nr(Yt,{variant:"ghost-block",color:"neutral",size:1,$$events:{click(...Ht){d(c)?.apply(this,Ht)}},iconLeft:Ht=>{vt(Ht,{name:"save"})},children:(Ht,Qt)=>{var ee=st("Save");b(Ht,ee)},$$slots:{iconLeft:!0,default:!0}}),b(wt,It)},$$slots:{default:!0}})},$$slots:{default:!0}})});var gt=Y(lt,2);ve(gt,()=>ce.Content,(Ct,St)=>{St(Ct,{side:"bottom",align:"start",children:(Lt,kt)=>{var wt=J(),bt=W(wt);ge(bt,17,()=>d(_),Re,(It,Yt)=>{var Xt=J(),Ht=W(Xt);ve(Ht,()=>ce.Item,(Qt,ee)=>{ee(Qt,{onSelect:$t=>{(async function(Wt,Jt){Wt.stopPropagation();const Vt=d(l).find(ie=>ie.location===Jt);Vt&&y(Vt);try{const ie=Jt,oe=await g.saveSetupScript(f,d(s),ie);if(oe.success&&oe.path){const ne={name:f,path:oe.path,content:d(s),location:ie};d(l).push(ne),y(ne)}else console.error("Failed to save script:",oe.error)}catch(ie){console.error("Error saving script:",ie)}await k()})($t,d(Yt).id)},children:($t,Wt)=>{var Jt=C4(),Vt=R(Jt),ie=R(Vt),oe=Y(Vt,2),ne=Ae=>{var er=w4(),Ke=R(er);vt(Ke,{get name(){return d(Yt).lucideIcon}}),b(Ae,er)};z(oe,Ae=>{d(Yt).lucideIcon&&Ae(ne)}),et(()=>at(ie,d(Yt).label)),b($t,Jt)},$$slots:{default:!0}})}),b(It,Xt)}),b(Lt,wt)},$$slots:{default:!0}})}),b(nt,mt)},$$slots:{default:!0}})}),b(j,V)},$$slots:{actions:!0}})};z(D,U=>{d(s)&&U(I)});var N=Y(D,2),q=U=>{var H=J(),j=W(H),V=rt=>{t0(rt,{get content(){return d(i).output},language:"bash",doScrollToBottom:!0,onViewInFile:()=>x(d(i).output||"No output available","bash"),labelSnippet:it=>{var nt=$4(),ct=R(nt),mt=R(ct);{let Ct=O(()=>d(a)?"loading":d(i).status?w[d(i).status]:"none");Xc(mt,{get commandResult(){return d(Ct)}})}var lt=Y(ct,2),gt=R(lt);ht(gt,{size:1,weight:"medium",children:(Ct,St)=>{var Lt=J(),kt=W(Lt),wt=It=>{var Yt=st("Running script...");b(It,Yt)},bt=It=>{var Yt=J(),Xt=W(Yt),Ht=ee=>{var $t=st("Script ran successfully");b(ee,$t)},Qt=ee=>{var $t=J(),Wt=W($t),Jt=Vt=>{var ie=st("Script failed to run");b(Vt,ie)};z(Wt,Vt=>{d(i).status===Wn.FAILED&&Vt(Jt)},!0),b(ee,$t)};z(Xt,ee=>{d(i).status===Wn.SUCCESS?ee(Ht):ee(Qt,!1)},!0),b(It,Yt)};z(kt,It=>{d(a)?It(wt):It(bt,!1)}),b(Ct,Lt)},$$slots:{default:!0}}),b(it,nt)},$$slots:{labelSnippet:!0}})};z(j,rt=>{d(i)?.output&&rt(V)}),b(U,H)};z(N,U=>{(d(i)||d(a))&&U(q)});var K=Y(E,2),Z=U=>{var H=B4(),j=R(H);ht(j,{size:1,weight:"medium",class:"c-setup-script-tool__section-header",children:(it,nt)=>{var ct=st("Test Results:");b(it,ct)},$$slots:{default:!0}});var V=Y(j,2),rt=it=>{var nt=J(),ct=W(nt);ge(ct,17,()=>d(h),Re,(mt,lt)=>{var gt=A4(),Ct=R(gt);Xc(R(Ct),{commandResult:"loading"});var St=Y(Ct,2),Lt=R(St);fe(Lt,{get content(){return d(lt)},side:"bottom",class:"c-setup-script-tool__row__title__container",children:(wt,bt)=>{ht(wt,{size:1,weight:"medium",children:(It,Yt)=>{var Xt=st();et(()=>at(Xt,d(lt))),b(It,Xt)},$$slots:{default:!0}})},$$slots:{default:!0}});var kt=Y(St,2);fe(kt,{content:"View full test result in editor",side:"bottom",children:(wt,bt)=>{Nr(wt,{variant:"ghost-block",color:"neutral",size:1,$$events:{click:()=>x(d(lt))},children:(It,Yt)=>{var Xt=M4(),Ht=Y(W(Xt));vt(Ht,{name:"external-link"}),b(It,Xt)},$$slots:{default:!0}})},$$slots:{default:!0}}),b(mt,gt)}),b(it,nt)},tt=it=>{var nt=J(),ct=W(nt);ge(ct,17,()=>d(o),Re,(mt,lt)=>{var gt=L4(),Ct=R(gt),St=R(Ct);{let It=O(()=>d(lt).status?w[d(lt).status]:"none");Xc(St,{get commandResult(){return d(It)}})}var Lt=Y(Ct,2),kt=R(Lt);fe(kt,{get content(){return d(lt).command},side:"bottom",class:"c-setup-script-tool__row__title__container",children:(It,Yt)=>{ht(It,{size:1,type:"monospace",children:(Xt,Ht)=>{var Qt=st();et(()=>at(Qt,d(lt).command)),b(Xt,Qt)},$$slots:{default:!0}})},$$slots:{default:!0}});var wt=Y(Lt,2),bt=R(wt);fe(bt,{content:"View full test result in editor",side:"bottom",children:(It,Yt)=>{Nr(It,{variant:"ghost-block",color:"neutral",size:1,$$events:{click:()=>x(d(lt).output||"No output available")},children:(Xt,Ht)=>{var Qt=E4(),ee=Y(W(Qt));vt(ee,{name:"external-link"}),b(Xt,Qt)},$$slots:{default:!0}})},$$slots:{default:!0}}),b(mt,gt)}),b(it,nt)};z(V,it=>{d(a)&&d(h).length>0?it(rt):it(tt,!1)}),b(U,H)};return z(K,U=>{(d(o).length>0||d(a)&&d(h).length>0)&&U(Z)}),et(()=>Pr(F,"data-tool-id",t.toolUse.tool_use_id)),b(e,L),pt(T)},[ze.readTerminal]:cs,[ze.gitCommitRetrieval]:function(e,t){let r=G(t,"toolUseInput",19,()=>({}));Xd(e,{retrievalText:"Commit History",get toolUseInput(){return r()},retrieval:s=>{ht(s,{size:1,color:"neutral",children:(i,o)=>{var a=D6(),h=W(a);vt(h,{name:"git-commit-horizontal"}),b(i,a)},$$slots:{default:!0}})},$$slots:{retrieval:!0}})},[ze.memoryRetrieval]:function(e,t){let r=G(t,"toolUseInput",19,()=>({}));Xd(e,{retrievalText:"Memories",get toolUseInput(){return r()}})},[ze.startWorkerAgent]:function(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=yt(!0),s=O(()=>Array.isArray(r().workers)?r().workers:[]),i=O(()=>(()=>{const c=[];return d(s).length>0&&c.push(on(d(s).length,"worker")),c})()),o=O(()=>(()=>{if(t.toolUseState.phase===dt.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const c=JSON.parse(t.toolUseState.result.text),u=Array.isArray(c.startedWorkers)?c.startedWorkers:[],p=Array.isArray(c.failedWorkers)?c.failedWorkers:[];return[...u,...p]}catch(c){console.error("Failed to parse start worker agent tool response:",c)}return[]})()),a=O(()=>d(o).filter(c=>c.success).length),h=O(()=>d(o).filter(c=>!c.success).length),l=O(()=>d(o).length>0);Te(e,{get collapsed(){return d(n)},set collapsed(g){X(n,g,!0)},header:g=>{Se(g,{toolName:"Start Worker Agents",get formattedToolArgs(){return d(i)},icon:y=>{vt(y,{name:"users-round"})},secondary:y=>{var v=J(),x=W(v),k=_=>{var w=H4(),S=R(w),T=A=>{ae(A,{color:"success",children:(B,M)=>{var $=st();et(()=>at($,`${d(a)??""} started`)),b(B,$)},$$slots:{default:!0}})};z(S,A=>{d(a)>0&&A(T)});var L=Y(S,2),F=A=>{ae(A,{color:"error",children:(B,M)=>{var $=st();et(()=>at($,`${d(h)??""} failed`)),b(B,$)},$$slots:{default:!0}})};z(L,A=>{d(h)>0&&A(F)}),b(_,w)};z(x,_=>{d(l)&&d(n)&&_(k)}),b(y,v)},$$slots:{icon:!0,secondary:!0}})},details:g=>{var f=rF(),m=R(f),y=x=>{var k=V4(),_=R(k);ht(_,{size:1,color:"neutral",children:(w,S)=>{var T=st("Starting worker agents...");b(w,T)},$$slots:{default:!0}}),b(x,k)},v=x=>{var k=J(),_=W(k),w=T=>{var L=tF();ge(L,21,()=>d(o),Re,(F,A)=>{const B=O(()=>d(s)[d(A).index]||{});un(F,{class:"c-start-worker-tool__worker-card",children:(M,$)=>{var E=J4(),D=W(E),I=R(D),N=R(I);ht(N,{size:1,weight:"medium",children:(j,V)=>{var rt=G4(),tt=W(rt),it=Y(tt),nt=ct=>{var mt=st();et(()=>at(mt,`- ${d(B).summary??""}`)),b(ct,mt)};z(it,ct=>{d(B).summary&&ct(nt)}),et(()=>at(tt,`Worker ${d(A).index+1} `)),b(j,rt)},$$slots:{default:!0}});var q=Y(N,2);{let j=O(()=>d(A).success?"success":"error");ae(q,{get color(){return d(j)},children:(V,rt)=>{var tt=st();et(()=>at(tt,d(A).success?"Started":"Failed")),b(V,tt)},$$slots:{default:!0}})}var K=Y(D,2),Z=R(K),U=j=>{var V=X4(),rt=R(V);ht(rt,{size:1,color:"neutral",children:(nt,ct)=>{var mt=Y4(),lt=Y(W(mt));et(()=>at(lt,` ${d(A).workerAgentId??""}`)),b(nt,mt)},$$slots:{default:!0}});var tt=Y(rt,2),it=nt=>{ht(nt,{size:1,color:"neutral",children:(ct,mt)=>{var lt=Z4(),gt=Y(W(lt));et(()=>at(gt,` ${d(A).status??""}`)),b(ct,lt)},$$slots:{default:!0}})};z(tt,nt=>{d(A).status&&nt(it)}),b(j,V)},H=j=>{var V=Q4(),rt=R(V);ht(rt,{size:1,color:"error",children:(tt,it)=>{var nt=K4(),ct=Y(W(nt));et(()=>at(ct,` ${(d(A).error||"Unknown error")??""}`)),b(tt,nt)},$$slots:{default:!0}}),b(j,V)};z(Z,j=>{d(A).success?j(U):j(H,!1)}),xi(Y(Z,2),{get data(){return d(B)},fields:[{key:"initial_prompt",label:"Initial Prompt",type:"monospace",collapsible:!0}]}),b(M,E)},$$slots:{default:!0}})}),b(T,L)},S=T=>{var L=J(),F=W(L),A=B=>{var M=eF(),$=R(M);ht($,{size:1,color:"neutral",children:(E,D)=>{var I=st("No worker agents were started.");b(E,I)},$$slots:{default:!0}}),b(B,M)};z(F,B=>{t.toolUseState.phase!==dt.completed||d(l)||B(A)},!0),b(T,L)};z(_,T=>{t.toolUseState.phase===dt.completed&&d(l)?T(w):T(S,!1)},!0),b(x,k)};z(m,x=>{t.toolUseState.phase===dt.running?x(y):x(v,!1)}),b(g,f)},error:g=>{var f=J(),m=W(f),y=v=>{Gr(v,Ye(()=>t.toolUseState.result??{}))};z(m,v=>{t.toolUseState.phase===dt.error&&v(y)}),b(g,f)},$$slots:{header:!0,details:!0,error:!0}}),pt()},[ze.sendInstructionToWorkerAgent]:function(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=yt(!0),s=O(()=>Array.isArray(r().instruction_operations)?r().instruction_operations:[]),i=O(()=>(()=>{const c=[];return d(s).length>0&&c.push(on(d(s).length,"instruction")),c})()),o=O(()=>(()=>{if(t.toolUseState.phase===dt.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const c=JSON.parse(t.toolUseState.result.text),u=Array.isArray(c.instructionResults)?c.instructionResults:[],p=Array.isArray(c.failedInstructions)?c.failedInstructions:[];return[...u,...p]}catch(c){console.error("Failed to parse send instruction tool response:",c)}return[]})()),a=O(()=>d(o).filter(c=>c.success).length),h=O(()=>d(o).filter(c=>!c.success).length),l=O(()=>d(o).length>0);Te(e,{get collapsed(){return d(n)},set collapsed(g){X(n,g,!0)},header:g=>{Se(g,{toolName:"Send Instructions",get formattedToolArgs(){return d(i)},icon:y=>{vt(y,{name:"message-square"})},secondary:y=>{var v=J(),x=W(v),k=_=>{var w=nF(),S=R(w),T=A=>{ae(A,{color:"success",children:(B,M)=>{var $=st();et(()=>at($,`${d(a)??""} sent`)),b(B,$)},$$slots:{default:!0}})};z(S,A=>{d(a)>0&&A(T)});var L=Y(S,2),F=A=>{ae(A,{color:"error",children:(B,M)=>{var $=st();et(()=>at($,`${d(h)??""} failed`)),b(B,$)},$$slots:{default:!0}})};z(L,A=>{d(h)>0&&A(F)}),b(_,w)};z(x,_=>{d(l)&&d(n)&&_(k)}),b(y,v)},$$slots:{icon:!0,secondary:!0}})},details:g=>{var f=gF(),m=R(f),y=x=>{var k=sF(),_=R(k);ht(_,{size:1,color:"neutral",children:(w,S)=>{var T=st("Sending instructions to worker agents...");b(w,T)},$$slots:{default:!0}}),b(x,k)},v=x=>{var k=J(),_=W(k),w=T=>{var L=uF();ge(L,21,()=>d(o),Re,(F,A)=>{const B=O(()=>d(s)[d(A).index]||{});un(F,{class:"c-send-instruction-tool__instruction-card",children:(M,$)=>{var E=dF(),D=W(E),I=R(D),N=R(I);ht(N,{size:1,weight:"medium",children:(j,V)=>{var rt=iF(),tt=W(rt),it=Y(tt),nt=ct=>{var mt=st();et(()=>at(mt,`- ${d(B).summary??""}`)),b(ct,mt)};z(it,ct=>{d(B).summary&&ct(nt)}),et(()=>at(tt,`Instruction ${d(A).index+1} `)),b(j,rt)},$$slots:{default:!0}});var q=Y(N,2);{let j=O(()=>d(A).success?"success":"error");ae(q,{get color(){return d(j)},children:(V,rt)=>{var tt=st();et(()=>at(tt,d(A).success?"Sent":"Failed")),b(V,tt)},$$slots:{default:!0}})}var K=Y(D,2),Z=R(K),U=j=>{var V=aF(),rt=R(V);ht(rt,{size:1,color:"neutral",children:(tt,it)=>{var nt=oF(),ct=Y(W(nt));et(()=>at(ct,` ${d(A).agentId??""}`)),b(tt,nt)},$$slots:{default:!0}}),xi(Y(rt,2),{get data(){return d(A)},fields:[{key:"instructionSent",label:"Instruction",type:"monospace",collapsible:!0}]}),b(j,V)},H=j=>{var V=hF(),rt=R(V);ht(rt,{size:1,color:"error",children:(nt,ct)=>{var mt=lF(),lt=Y(W(mt));et(()=>at(lt,` ${(d(A).error||"Unknown error")??""}`)),b(nt,mt)},$$slots:{default:!0}});var tt=Y(rt,2),it=nt=>{ht(nt,{size:1,color:"neutral",children:(ct,mt)=>{var lt=cF(),gt=Y(W(lt));et(()=>at(gt,` ${d(B).worker_agent_id??""}`)),b(ct,lt)},$$slots:{default:!0}})};z(tt,nt=>{d(B).worker_agent_id&&nt(it)}),b(j,V)};z(Z,j=>{d(A).success?j(U):j(H,!1)}),b(M,E)},$$slots:{default:!0}})}),b(T,L)},S=T=>{var L=J(),F=W(L),A=B=>{var M=pF(),$=R(M);ht($,{size:1,color:"neutral",children:(E,D)=>{var I=st("No instructions were sent.");b(E,I)},$$slots:{default:!0}}),b(B,M)};z(F,B=>{t.toolUseState.phase!==dt.completed||d(l)||B(A)},!0),b(T,L)};z(_,T=>{t.toolUseState.phase===dt.completed&&d(l)?T(w):T(S,!1)},!0),b(x,k)};z(m,x=>{t.toolUseState.phase===dt.running?x(y):x(v,!1)}),b(g,f)},error:g=>{var f=J(),m=W(f),y=v=>{Gr(v,Ye(()=>t.toolUseState.result??{}))};z(m,v=>{t.toolUseState.phase===dt.error&&v(y)}),b(g,f)},$$slots:{header:!0,details:!0,error:!0}}),pt()},[ze.readWorkerState]:function(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=yt(!0),s=O(()=>Array.isArray(r().worker_agent_ids)?r().worker_agent_ids:[]),i=O(()=>d(s).length>0?[on(d(s).length,"agent")]:["all agents"]),o=O(()=>{if(t.toolUseState.phase===dt.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const c=JSON.parse(t.toolUseState.result.text),u=Array.isArray(c.workerStates)?c.workerStates:[],p=Array.isArray(c.failedReads)?c.failedReads:[];return[...u,...p]}catch(c){console.error("Failed to parse read worker state tool response:",c)}return[]}),a=O(()=>d(o).filter(c=>c.success).length),h=O(()=>d(o).filter(c=>!c.success).length),l=O(()=>d(o).length>0);Te(e,{get collapsed(){return d(n)},set collapsed(g){X(n,g,!0)},header:g=>{Se(g,{toolName:"Read Worker States",get formattedToolArgs(){return d(i)},icon:y=>{vt(y,{name:"info"})},secondary:y=>{var v=J(),x=W(v),k=_=>{var w=fF(),S=R(w),T=A=>{ae(A,{color:"success",children:(B,M)=>{var $=st();et(()=>at($,`${d(a)??""} read`)),b(B,$)},$$slots:{default:!0}})};z(S,A=>{d(a)>0&&A(T)});var L=Y(S,2),F=A=>{ae(A,{color:"error",children:(B,M)=>{var $=st();et(()=>at($,`${d(h)??""} failed`)),b(B,$)},$$slots:{default:!0}})};z(L,A=>{d(h)>0&&A(F)}),b(_,w)};z(x,_=>{d(l)&&d(n)&&_(k)}),b(y,v)},$$slots:{icon:!0,secondary:!0}})},details:g=>{var f=SF(),m=R(f),y=x=>{var k=mF(),_=R(k);ht(_,{size:1,color:"neutral",children:(w,S)=>{var T=st("Reading worker agent states...");b(w,T)},$$slots:{default:!0}}),b(x,k)},v=x=>{var k=J(),_=W(k),w=T=>{var L=wF();ge(L,21,()=>d(o),Re,(F,A,B)=>{un(F,{class:"c-read-worker-state-tool__worker-card",children:(M,$)=>{var E=_F(),D=W(E),I=R(D),N=R(I);ht(N,{size:1,weight:"medium",children:(j,V)=>{var rt=st();et(()=>at(rt,`Agent ${(d(A).agentId||`${B+1}`)??""}`)),b(j,rt)},$$slots:{default:!0}});var q=Y(N,2);{let j=O(()=>d(A).success?"success":"error");ae(q,{get color(){return d(j)},children:(V,rt)=>{var tt=st();et(()=>at(tt,d(A).success?"Active":"Error")),b(V,tt)},$$slots:{default:!0}})}var K=Y(D,2),Z=R(K),U=j=>{var V=bF(),rt=R(V),tt=nt=>{var ct=vF(),mt=R(ct);ht(mt,{size:1,color:"neutral",children:(gt,Ct)=>{var St=yF();b(gt,St)},$$slots:{default:!0}});var lt=Y(mt,2);{let gt=O(()=>function(Ct){switch(Ct?.toLowerCase()){case"running":case"active":return"success";case"idle":case"waiting":return"info";case"stopped":case"paused":return"warning";case"error":case"failed":return"error";default:return"neutral"}}(d(A).status));ae(lt,{get color(){return d(gt)},children:(Ct,St)=>{var Lt=st();et(()=>at(Lt,d(A).status)),b(Ct,Lt)},$$slots:{default:!0}})}b(nt,ct)};z(rt,nt=>{d(A).status&&nt(tt)});var it=Y(rt,2);xi(it,{get data(){return d(A)},fields:[{key:"lastExchangeSummary",label:"Latest Exchange",type:"monospace",collapsible:!0}]}),xi(Y(it,2),{get data(){return d(A)},fields:[{key:"sessionSummary",label:"Session Summary",type:"monospace",collapsible:!0}]}),b(j,V)},H=j=>{var V=kF(),rt=R(V);ht(rt,{size:1,color:"error",children:(tt,it)=>{var nt=xF(),ct=Y(W(nt));et(()=>at(ct,` ${(d(A).error||"Unknown error")??""}`)),b(tt,nt)},$$slots:{default:!0}}),b(j,V)};z(Z,j=>{d(A).success?j(U):j(H,!1)}),b(M,E)},$$slots:{default:!0}})}),b(T,L)},S=T=>{var L=J(),F=W(L),A=B=>{var M=CF(),$=R(M);ht($,{size:1,color:"neutral",children:(E,D)=>{var I=st("No worker agent states were read.");b(E,I)},$$slots:{default:!0}}),b(B,M)};z(F,B=>{t.toolUseState.phase!==dt.completed||d(l)||B(A)},!0),b(T,L)};z(_,T=>{t.toolUseState.phase===dt.completed&&d(l)?T(w):T(S,!1)},!0),b(x,k)};z(m,x=>{t.toolUseState.phase===dt.running?x(y):x(v,!1)}),b(g,f)},error:g=>{var f=J(),m=W(f),y=v=>{Gr(v,Ye(()=>t.toolUseState.result??{}))};z(m,v=>{t.toolUseState.phase===dt.error&&v(y)}),b(g,f)},$$slots:{header:!0,details:!0,error:!0}}),pt()},[ze.waitForWorkerAgent]:function(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=yt(!0),s=O(()=>Array.isArray(r().wait_operations)?r().wait_operations:[]),i=O(()=>(()=>{const p=[];return d(s).length>0&&p.push(on(d(s).length,"agent")),p})()),o=O(()=>(()=>{if(t.toolUseState.phase===dt.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const p=JSON.parse(t.toolUseState.result.text),g=Array.isArray(p.waitResults)?p.waitResults:[],f=Array.isArray(p.failedWaits)?p.failedWaits:[];return[...g,...f]}catch(p){console.error("Failed to parse wait for worker agent tool response:",p)}return[]})()),a=O(()=>d(o).filter(p=>p.success).length),h=O(()=>d(o).filter(p=>!p.success).length),l=O(()=>d(o).length>0);function c(p){switch(p?.toLowerCase()){case"idle":return"success";case"failed":return"error";case"running":case"active":return"info";default:return"neutral"}}function u(p){if(p<60)return`${p}s`;if(p<3600){const g=Math.floor(p/60),f=p%60;return f>0?`${g}m ${f}s`:`${g}m`}{const g=Math.floor(p/3600),f=Math.floor(p%3600/60);return f>0?`${g}h ${f}m`:`${g}h`}}Te(e,{get collapsed(){return d(n)},set collapsed(m){X(n,m,!0)},header:m=>{Se(m,{toolName:"Wait for Worker Agents",get formattedToolArgs(){return d(i)},icon:x=>{vt(x,{name:"clock"})},secondary:x=>{var k=J(),_=W(k),w=S=>{var T=TF(),L=R(T),F=M=>{ae(M,{color:"success",children:($,E)=>{var D=st();et(()=>at(D,`${d(a)??""} completed`)),b($,D)},$$slots:{default:!0}})};z(L,M=>{d(a)>0&&M(F)});var A=Y(L,2),B=M=>{ae(M,{color:"error",children:($,E)=>{var D=st();et(()=>at(D,`${d(h)??""} failed`)),b($,D)},$$slots:{default:!0}})};z(A,M=>{d(h)>0&&M(B)}),b(S,T)};z(_,S=>{d(l)&&d(n)&&S(w)}),b(x,k)},$$slots:{icon:!0,secondary:!0}})},details:m=>{var y=zF(),v=R(y),x=_=>{var w=$F(),S=R(w);ht(S,{size:1,color:"neutral",children:(T,L)=>{var F=st("Waiting for worker agents...");b(T,F)},$$slots:{default:!0}}),b(_,w)},k=_=>{var w=J(),S=W(w),T=F=>{var A=PF();ge(A,21,()=>d(o),Re,(B,M)=>{const $=O(()=>d(s)[d(M).index]||{});un(B,{class:"c-wait-worker-tool__wait-card",children:(E,D)=>{var I=RF(),N=W(I),q=R(N),K=R(q);ht(K,{size:1,weight:"medium",children:(rt,tt)=>{var it=st();et(()=>at(it,`Wait ${d(M).index+1} - Agent ${d(M).agentId??""}`)),b(rt,it)},$$slots:{default:!0}});var Z=Y(K,2);{let rt=O(()=>d(M).success?"success":"error");ae(Z,{get color(){return d(rt)},children:(tt,it)=>{var nt=st();et(()=>at(nt,d(M).success?"Completed":"Failed")),b(tt,nt)},$$slots:{default:!0}})}var U=Y(N,2),H=R(U),j=rt=>{var tt=LF(),it=R(tt),nt=R(it);ht(nt,{size:1,color:"neutral",children:(Lt,kt)=>{var wt=MF();b(Lt,wt)},$$slots:{default:!0}});var ct=Y(nt,2);{let Lt=O(()=>c(d(M).targetStatus));ae(ct,{get color(){return d(Lt)},children:(kt,wt)=>{var bt=st();et(()=>at(bt,d(M).targetStatus)),b(kt,bt)},$$slots:{default:!0}})}var mt=Y(it,2),lt=R(mt);ht(lt,{size:1,color:"neutral",children:(Lt,kt)=>{var wt=AF();b(Lt,wt)},$$slots:{default:!0}});var gt=Y(lt,2);{let Lt=O(()=>c(d(M).status));ae(gt,{get color(){return d(Lt)},children:(kt,wt)=>{var bt=st();et(()=>at(bt,d(M).status)),b(kt,bt)},$$slots:{default:!0}})}var Ct=Y(mt,2),St=Lt=>{ht(Lt,{size:1,color:"neutral",children:(kt,wt)=>{var bt=EF(),It=Y(W(bt));et(Yt=>at(It,` ${Yt??""}`),[()=>u(d(M).waitedSeconds)]),b(kt,bt)},$$slots:{default:!0}})};z(Ct,Lt=>{d(M).waitedSeconds!==void 0&&Lt(St)}),b(rt,tt)},V=rt=>{var tt=OF(),it=R(tt);ht(it,{size:1,color:"error",children:(St,Lt)=>{var kt=BF(),wt=Y(W(kt));et(()=>at(wt,` ${(d(M).error||"Unknown error")??""}`)),b(St,kt)},$$slots:{default:!0}});var nt=Y(it,2),ct=St=>{ht(St,{size:1,color:"neutral",children:(Lt,kt)=>{var wt=IF(),bt=Y(W(wt));et(()=>at(bt,` ${d($).worker_agent_id??""}`)),b(Lt,wt)},$$slots:{default:!0}})};z(nt,St=>{d($).worker_agent_id&&St(ct)});var mt=Y(nt,2),lt=St=>{ht(St,{size:1,color:"neutral",children:(Lt,kt)=>{var wt=FF(),bt=Y(W(wt));et(()=>at(bt,` ${d($).target_status??""}`)),b(Lt,wt)},$$slots:{default:!0}})};z(mt,St=>{d($).target_status&&St(lt)});var gt=Y(mt,2),Ct=St=>{ht(St,{size:1,color:"neutral",children:(Lt,kt)=>{var wt=DF(),bt=Y(W(wt));et(It=>at(bt,` ${It??""}`),[()=>u(d($).timeout_seconds)]),b(Lt,wt)},$$slots:{default:!0}})};z(gt,St=>{d($).timeout_seconds&&St(Ct)}),b(rt,tt)};z(H,rt=>{d(M).success?rt(j):rt(V,!1)}),b(E,I)},$$slots:{default:!0}})}),b(F,A)},L=F=>{var A=J(),B=W(A),M=$=>{var E=NF(),D=R(E);ht(D,{size:1,color:"neutral",children:(I,N)=>{var q=st("No wait operations were completed.");b(I,q)},$$slots:{default:!0}}),b($,E)};z(B,$=>{t.toolUseState.phase!==dt.completed||d(l)||$(M)},!0),b(F,A)};z(S,F=>{t.toolUseState.phase===dt.completed&&d(l)?F(T):F(L,!1)},!0),b(_,w)};z(v,_=>{t.toolUseState.phase===dt.running?_(x):_(k,!1)}),b(m,y)},error:m=>{var y=J(),v=W(y),x=k=>{Gr(k,Ye(()=>t.toolUseState.result??{}))};z(v,k=>{t.toolUseState.phase===dt.error&&k(x)}),b(m,y)},$$slots:{header:!0,details:!0,error:!0}}),pt()},[ze.stopWorkerAgent]:function(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=yt(!0),s=O(()=>Array.isArray(r().worker_agent_ids)?r().worker_agent_ids:[]),i=O(()=>d(s).length>0?[on(d(s).length,"agent")]:["all agents"]),o=O(()=>{if(t.toolUseState.phase===dt.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const c=JSON.parse(t.toolUseState.result.text),u=Array.isArray(c.stopResults)?c.stopResults:[],p=Array.isArray(c.failedStops)?c.failedStops:[];return[...u,...p]}catch(c){console.error("Failed to parse stop worker agent tool response:",c)}return[]}),a=O(()=>d(o).filter(c=>c.success).length),h=O(()=>d(o).filter(c=>!c.success).length),l=O(()=>d(o).length>0);Te(e,{get collapsed(){return d(n)},set collapsed(g){X(n,g,!0)},header:g=>{Se(g,{toolName:"Stop Worker Agents",get formattedToolArgs(){return d(i)},icon:y=>{vt(y,{name:"square"})},secondary:y=>{var v=J(),x=W(v),k=_=>{var w=UF(),S=R(w),T=A=>{ae(A,{color:"success",children:(B,M)=>{var $=st();et(()=>at($,`${d(a)??""} stopped`)),b(B,$)},$$slots:{default:!0}})};z(S,A=>{d(a)>0&&A(T)});var L=Y(S,2),F=A=>{ae(A,{color:"error",children:(B,M)=>{var $=st();et(()=>at($,`${d(h)??""} failed`)),b(B,$)},$$slots:{default:!0}})};z(L,A=>{d(h)>0&&A(F)}),b(_,w)};z(x,_=>{d(l)&&d(n)&&_(k)}),b(y,v)},$$slots:{icon:!0,secondary:!0}})},details:g=>{var f=KF(),m=R(f),y=x=>{var k=qF(),_=R(k);ht(_,{size:1,color:"neutral",children:(w,S)=>{var T=st("Stopping worker agents...");b(w,T)},$$slots:{default:!0}}),b(x,k)},v=x=>{var k=J(),_=W(k),w=T=>{var L=ZF();ge(L,21,()=>d(o),Re,(F,A,B)=>{un(F,{class:"c-stop-worker-tool__agent-card",children:(M,$)=>{var E=YF(),D=W(E),I=R(D),N=R(I);ht(N,{size:1,weight:"medium",children:(j,V)=>{var rt=st();et(()=>at(rt,`Agent ${(d(A).agentId||`${B+1}`)??""}`)),b(j,rt)},$$slots:{default:!0}});var q=Y(N,2);{let j=O(()=>d(A).success?"success":"error");ae(q,{get color(){return d(j)},children:(V,rt)=>{var tt=st();et(()=>at(tt,d(A).success?"Stopped":"Failed")),b(V,tt)},$$slots:{default:!0}})}var K=Y(D,2),Z=R(K),U=j=>{var V=WF(),rt=R(V);ht(rt,{size:1,color:"neutral",children:(it,nt)=>{var ct=jF(),mt=Y(W(ct));et(()=>at(mt,` ${d(A).agentId??""}`)),b(it,ct)},$$slots:{default:!0}});var tt=Y(rt,2);ht(tt,{size:1,color:"success",children:(it,nt)=>{var ct=st("Worker agent has been successfully stopped.");b(it,ct)},$$slots:{default:!0}}),b(j,V)},H=j=>{var V=GF(),rt=R(V);ht(rt,{size:1,color:"error",children:(nt,ct)=>{var mt=HF(),lt=Y(W(mt));et(()=>at(lt,` ${(d(A).error||"Unknown error")??""}`)),b(nt,mt)},$$slots:{default:!0}});var tt=Y(rt,2),it=nt=>{ht(nt,{size:1,color:"neutral",children:(ct,mt)=>{var lt=VF(),gt=Y(W(lt));et(()=>at(gt,` ${d(A).agentId??""}`)),b(ct,lt)},$$slots:{default:!0}})};z(tt,nt=>{d(A).agentId&&nt(it)}),b(j,V)};z(Z,j=>{d(A).success?j(U):j(H,!1)}),b(M,E)},$$slots:{default:!0}})}),b(T,L)},S=T=>{var L=J(),F=W(L),A=B=>{var M=XF(),$=R(M);ht($,{size:1,color:"neutral",children:(E,D)=>{var I=st("No worker agents were stopped.");b(E,I)},$$slots:{default:!0}}),b(B,M)};z(F,B=>{t.toolUseState.phase!==dt.completed||d(l)||B(A)},!0),b(T,L)};z(_,T=>{t.toolUseState.phase===dt.completed&&d(l)?T(w):T(S,!1)},!0),b(x,k)};z(m,x=>{t.toolUseState.phase===dt.running?x(y):x(v,!1)}),b(g,f)},error:g=>{var f=J(),m=W(f),y=v=>{Gr(v,Ye(()=>t.toolUseState.result??{}))};z(m,v=>{t.toolUseState.phase===dt.error&&v(y)}),b(g,f)},$$slots:{header:!0,details:!0,error:!0}}),pt()},[ze.deleteWorkerAgent]:function(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=yt(!0),s=O(()=>Array.isArray(r().worker_agent_ids)?r().worker_agent_ids:[]),i=O(()=>{const c=[];return d(s).length>0?c.push(on(d(s).length,"agent")):c.push("all agents"),c}),o=O(()=>{if(t.toolUseState.phase===dt.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const c=JSON.parse(t.toolUseState.result.text),u=Array.isArray(c.deleteResults)?c.deleteResults:[],p=Array.isArray(c.failedDeletes)?c.failedDeletes:[];return[...u,...p]}catch(c){console.error("Failed to parse delete worker agent tool response:",c)}return[]}),a=O(()=>d(o).filter(c=>c.success).length),h=O(()=>d(o).filter(c=>!c.success).length),l=O(()=>d(o).length>0);Te(e,{get collapsed(){return d(n)},set collapsed(g){X(n,g,!0)},header:g=>{Se(g,{toolName:"Delete Worker Agents",get formattedToolArgs(){return d(i)},icon:y=>{vt(y,{name:"trash-2"})},secondary:y=>{var v=J(),x=W(v),k=_=>{var w=QF(),S=R(w),T=A=>{ae(A,{color:"success",children:(B,M)=>{var $=st();et(()=>at($,`${d(a)??""} deleted`)),b(B,$)},$$slots:{default:!0}})};z(S,A=>{d(a)>0&&A(T)});var L=Y(S,2),F=A=>{ae(A,{color:"error",children:(B,M)=>{var $=st();et(()=>at($,`${d(h)??""} failed`)),b(B,$)},$$slots:{default:!0}})};z(L,A=>{d(h)>0&&A(F)}),b(_,w)};z(x,_=>{d(l)&&d(n)&&_(k)}),b(y,v)},$$slots:{icon:!0,secondary:!0}})},details:g=>{var f=lD(),m=R(f),y=x=>{var k=JF(),_=R(k);ht(_,{size:1,color:"neutral",children:(w,S)=>{var T=st("Deleting worker agents...");b(w,T)},$$slots:{default:!0}}),b(x,k)},v=x=>{var k=J(),_=W(k),w=T=>{var L=oD();ge(L,21,()=>d(o),Re,(F,A,B)=>{un(F,{class:"c-delete-worker-tool__agent-card",children:(M,$)=>{var E=iD(),D=W(E),I=R(D),N=R(I);ht(N,{size:1,weight:"medium",children:(j,V)=>{var rt=st();et(()=>at(rt,`Agent ${(d(A).agentId||`${B+1}`)??""}`)),b(j,rt)},$$slots:{default:!0}});var q=Y(N,2);{let j=O(()=>d(A).success?"success":"error");ae(q,{get color(){return d(j)},children:(V,rt)=>{var tt=st();et(()=>at(tt,d(A).success?"Deleted":"Failed")),b(V,tt)},$$slots:{default:!0}})}var K=Y(D,2),Z=R(K),U=j=>{var V=eD(),rt=R(V);ht(rt,{size:1,color:"neutral",children:(it,nt)=>{var ct=tD(),mt=Y(W(ct));et(()=>at(mt,` ${d(A).agentId??""}`)),b(it,ct)},$$slots:{default:!0}});var tt=Y(rt,2);ht(tt,{size:1,color:"success",children:(it,nt)=>{var ct=st("Worker agent and its resources have been successfully deleted.");b(it,ct)},$$slots:{default:!0}}),b(j,V)},H=j=>{var V=sD(),rt=R(V);ht(rt,{size:1,color:"error",children:(nt,ct)=>{var mt=rD(),lt=Y(W(mt));et(()=>at(lt,` ${(d(A).error||"Unknown error")??""}`)),b(nt,mt)},$$slots:{default:!0}});var tt=Y(rt,2),it=nt=>{ht(nt,{size:1,color:"neutral",children:(ct,mt)=>{var lt=nD(),gt=Y(W(lt));et(()=>at(gt,` ${d(A).agentId??""}`)),b(ct,lt)},$$slots:{default:!0}})};z(tt,nt=>{d(A).agentId&&nt(it)}),b(j,V)};z(Z,j=>{d(A).success?j(U):j(H,!1)}),b(M,E)},$$slots:{default:!0}})}),b(T,L)},S=T=>{var L=J(),F=W(L),A=B=>{var M=aD(),$=R(M);ht($,{size:1,color:"neutral",children:(E,D)=>{var I=st("No worker agents were deleted.");b(E,I)},$$slots:{default:!0}}),b(B,M)};z(F,B=>{t.toolUseState.phase!==dt.completed||d(l)||B(A)},!0),b(T,L)};z(_,T=>{t.toolUseState.phase===dt.completed&&d(l)?T(w):T(S,!1)},!0),b(x,k)};z(m,x=>{t.toolUseState.phase===dt.running?x(y):x(v,!1)}),b(g,f)},error:g=>{var f=J(),m=W(f),y=v=>{Gr(v,Ye(()=>t.toolUseState.result??{}))};z(m,v=>{t.toolUseState.phase===dt.error&&v(y)}),b(g,f)},$$slots:{header:!0,details:!0,error:!0}}),pt()},[ze.readWorkerAgentEdits]:function(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=yt(!0),s=O(()=>Array.isArray(r().worker_agent_ids)?r().worker_agent_ids:[]),i=O(()=>d(s).length>0?[on(d(s).length,"agent")]:["all agents"]),o=O(()=>{if(t.toolUseState.phase===dt.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const u=JSON.parse(t.toolUseState.result.text),p=Array.isArray(u.editResults)?u.editResults:[],g=Array.isArray(u.failedReads)?u.failedReads:[];return[...p,...g]}catch(u){console.error("Failed to parse read worker agent edits tool response:",u)}return[]}),a=O(()=>d(o).filter(u=>u.success).length),h=O(()=>d(o).filter(u=>!u.success).length),l=O(()=>d(o).reduce((u,p)=>u+(p.success&&p.fileEdits?p.fileEdits.length:0),0)),c=O(()=>d(o).length>0);Te(e,{get collapsed(){return d(n)},set collapsed(f){X(n,f,!0)},header:f=>{Se(f,{toolName:"Read Worker Agent Edits",get formattedToolArgs(){return d(i)},icon:v=>{vt(v,{name:"file"})},secondary:v=>{var x=J(),k=W(x),_=w=>{var S=cD(),T=R(S),L=$=>{ae($,{color:"success",children:(E,D)=>{var I=st();et(N=>at(I,N),[()=>on(d(a),"agent")]),b(E,I)},$$slots:{default:!0}})};z(T,$=>{d(a)>0&&$(L)});var F=Y(T,2),A=$=>{ae($,{color:"info",children:(E,D)=>{var I=st();et(N=>at(I,N),[()=>on(d(l),"edit")]),b(E,I)},$$slots:{default:!0}})};z(F,$=>{d(l)>0&&$(A)});var B=Y(F,2),M=$=>{ae($,{color:"error",children:(E,D)=>{var I=st();et(()=>at(I,`${d(h)??""} failed`)),b(E,I)},$$slots:{default:!0}})};z(B,$=>{d(h)>0&&$(M)}),b(w,S)};z(k,w=>{d(c)&&d(n)&&w(_)}),b(v,x)},$$slots:{icon:!0,secondary:!0}})},details:f=>{var m=_D(),y=R(m),v=k=>{var _=hD(),w=R(_);ht(w,{size:1,color:"neutral",children:(S,T)=>{var L=st("Reading worker agent file edits...");b(S,L)},$$slots:{default:!0}}),b(k,_)},x=k=>{var _=J(),w=W(_),S=L=>{var F=xD();ge(F,21,()=>d(o),Re,(A,B,M)=>{un(A,{class:"c-read-edits-tool__agent-card",children:($,E)=>{var D=bD(),I=W(D),N=R(I),q=R(N);ht(q,{size:1,weight:"medium",children:(V,rt)=>{var tt=st();et(()=>at(tt,`Agent ${(d(B).agentId||`${M+1}`)??""}`)),b(V,tt)},$$slots:{default:!0}});var K=Y(q,2);{let V=O(()=>d(B).success?"success":"error");ae(K,{get color(){return d(V)},children:(rt,tt)=>{var it=st();et(()=>at(it,d(B).success?"Read":"Failed")),b(rt,it)},$$slots:{default:!0}})}var Z=Y(I,2),U=R(Z),H=V=>{var rt=fD(),tt=R(rt);ht(tt,{size:1,color:"neutral",children:(mt,lt)=>{var gt=dD(),Ct=Y(W(gt));et(()=>at(Ct,` ${d(B).agentId??""}`)),b(mt,gt)},$$slots:{default:!0}});var it=Y(tt,2),nt=mt=>{var lt=gD(),gt=R(lt);ht(gt,{size:1,color:"neutral",children:(St,Lt)=>{var kt=uD(),wt=R(kt);et(()=>at(wt,`File Edits (${d(B).fileEdits.length??""}):`)),b(St,kt)},$$slots:{default:!0}});var Ct=Y(gt,2);ge(Ct,17,()=>d(B).fileEdits,Re,(St,Lt)=>{var kt=pD(),wt=R(kt),bt=R(wt);ht(bt,{size:1,weight:"medium",type:"monospace",children:(Yt,Xt)=>{var Ht=st();et(()=>at(Ht,d(Lt).filePath)),b(Yt,Ht)},$$slots:{default:!0}});var It=Y(bt,2);{let Yt=O(()=>function(Xt){switch(Xt?.toLowerCase()){case"created":case"added":return"success";case"modified":case"updated":return"info";case"deleted":case"removed":return"error";case"renamed":case"moved":return"warning";default:return"neutral"}}(d(Lt).changeType));ae(It,{get color(){return d(Yt)},children:(Xt,Ht)=>{var Qt=st();et(()=>at(Qt,d(Lt).changeType)),b(Xt,Qt)},$$slots:{default:!0}})}xi(Y(wt,2),{get data(){return d(Lt)},fields:[{key:"content",label:"Content",type:"monospace",collapsible:!0}]}),b(St,kt)}),b(mt,lt)},ct=mt=>{ht(mt,{size:1,color:"neutral",children:(lt,gt)=>{var Ct=st("No file edits found for this agent.");b(lt,Ct)},$$slots:{default:!0}})};z(it,mt=>{d(B).fileEdits&&d(B).fileEdits.length>0?mt(nt):mt(ct,!1)}),b(V,rt)},j=V=>{var rt=vD(),tt=R(rt);ht(tt,{size:1,color:"error",children:(ct,mt)=>{var lt=mD(),gt=Y(W(lt));et(()=>at(gt,` ${(d(B).error||"Unknown error")??""}`)),b(ct,lt)},$$slots:{default:!0}});var it=Y(tt,2),nt=ct=>{ht(ct,{size:1,color:"neutral",children:(mt,lt)=>{var gt=yD(),Ct=Y(W(gt));et(()=>at(Ct,` ${d(B).agentId??""}`)),b(mt,gt)},$$slots:{default:!0}})};z(it,ct=>{d(B).agentId&&ct(nt)}),b(V,rt)};z(U,V=>{d(B).success?V(H):V(j,!1)}),b($,D)},$$slots:{default:!0}})}),b(L,F)},T=L=>{var F=J(),A=W(F),B=M=>{var $=kD(),E=R($);ht(E,{size:1,color:"neutral",children:(D,I)=>{var N=st("No worker agent edits were found.");b(D,N)},$$slots:{default:!0}}),b(M,$)};z(A,M=>{t.toolUseState.phase!==dt.completed||d(c)||M(B)},!0),b(L,F)};z(w,L=>{t.toolUseState.phase===dt.completed&&d(c)?L(S):L(T,!1)},!0),b(k,_)};z(y,k=>{t.toolUseState.phase===dt.running?k(v):k(x,!1)}),b(f,m)},error:f=>{var m=J(),y=W(m),v=x=>{Gr(x,Ye(()=>t.toolUseState.result??{}))};z(y,x=>{t.toolUseState.phase===dt.error&&x(v)}),b(f,m)},$$slots:{header:!0,details:!0,error:!0}}),pt()},[ze.applyWorkerAgentEdits]:function(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=yt(!0),s=O(()=>Array.isArray(r().worker_agent_ids)?r().worker_agent_ids:[]),i=O(()=>{const x=[];return d(s).length>0&&x.push(on(d(s).length,"agent")),x}),o=O(()=>{if(t.toolUseState.phase===dt.completed&&t.toolUseState.result?.text)try{return JSON.parse(t.toolUseState.result.text)}catch{return null}return null}),a=O(()=>t.toolUseState.phase===dt.completed&&d(o)),h=O(()=>d(o)?.appliedFiles?.length||0),l=O(()=>d(o)?.conflictFiles?.length||0),c=O(()=>d(o)?.errors?.length||0);const u={icon:void 0,color:"error",text:"Errors",lucideIconName:"x"},p={icon:void 0,color:"warning",text:"Conflicts",lucideIconName:"circle-alert"},g={icon:void 0,color:"success",text:"Success",lucideIconName:"circle-check"},f={icon:void 0,color:"neutral",text:"Apply",lucideIconName:"circle-check"};let m=O(()=>{if(t.toolUseState.phase===dt.error)return u;if(d(o)){const x=d(o).errors&&d(o).errors.length>0,k=d(o).conflictFiles&&d(o).conflictFiles.length>0;if(x)return u;if(k)return p;if(d(o).success)return g}return f}),y=O(()=>{const x={};d(s).length>0&&(x.workerAgentIds=d(s).join(", "));const k=r().application_method||"direct_files";x.applicationMethod=k;const _=r().target_files||[];_.length>0&&(x.targetFiles=_.join(", "));const w=r().target_branch||"current";return w!=="current"&&(x.targetBranch=w),d(o)?(d(o).message&&(x.status=d(o).message),d(o).appliedFiles&&Array.isArray(d(o).appliedFiles)&&d(o).appliedFiles.length>0&&(x.appliedFiles=d(o).appliedFiles.join(", ")),d(o).conflictFiles&&Array.isArray(d(o).conflictFiles)&&d(o).conflictFiles.length>0&&(x.conflictFiles=d(o).conflictFiles.join(", ")),d(o).errors&&Array.isArray(d(o).errors)&&d(o).errors.length>0&&(x.errors=d(o).errors.join("; ")),d(o).method&&(x.method=d(o).method)):t.toolUseState.result?.text&&(x.result=t.toolUseState.result.text),x}),v=O(()=>[{key:"workerAgentIds",label:"Worker Agent IDs",type:"text",color:"neutral"},{key:"applicationMethod",label:"Application Method",type:"text",color:"neutral"},{key:"method",label:"Applied Method",type:"text",color:"accent",condition:()=>d(y).method&&d(y).method!==d(y).applicationMethod},{key:"targetFiles",label:"Target Files",type:"text",color:"neutral",condition:()=>d(y).targetFiles},{key:"targetBranch",label:"Target Branch",type:"text",color:"neutral",condition:()=>d(y).targetBranch},{key:"status",label:"Status",type:"text",color:d(o)?.success?"success":"neutral"},{key:"appliedFiles",label:"Applied Files",type:"text",color:"success",condition:()=>d(y).appliedFiles},{key:"conflictFiles",label:"Conflict Files",type:"text",color:"error",condition:()=>d(y).conflictFiles},{key:"errors",label:"Errors",type:"text",color:"error",condition:()=>d(y).errors,collapsible:!0},{key:"result",label:"Raw Result",type:"monospace",color:"neutral",condition:()=>d(y).result,collapsible:!0}]);Te(e,{showToolOutput:!0,get collapsed(){return d(n)},set collapsed(_){X(n,_,!0)},header:_=>{Se(_,{toolName:"Apply Worker Edits",get formattedToolArgs(){return d(i)},icon:T=>{vt(T,{get name(){return d(m).lucideIconName}})},secondary:T=>{var L=J(),F=W(L),A=B=>{var M=wD(),$=R(M),E=K=>{ae(K,{color:"success",children:(Z,U)=>{var H=st();et(()=>at(H,`${d(h)??""} applied`)),b(Z,H)},$$slots:{default:!0}})};z($,K=>{d(h)>0&&K(E)});var D=Y($,2),I=K=>{ae(K,{color:"warning",children:(Z,U)=>{var H=st();et(()=>at(H,`${d(l)??""} conflicts`)),b(Z,H)},$$slots:{default:!0}})};z(D,K=>{d(l)>0&&K(I)});var N=Y(D,2),q=K=>{ae(K,{color:"error",children:(Z,U)=>{var H=st();et(()=>at(H,`${d(c)??""} errors`)),b(Z,H)},$$slots:{default:!0}})};z(N,K=>{d(c)>0&&K(q)}),b(B,M)};z(F,B=>{d(a)&&d(n)&&B(A)}),b(T,L)},$$slots:{icon:!0,secondary:!0}})},details:_=>{xi(_,{get data(){return d(y)},get fields(){return d(v)}})},$$slots:{header:!0,details:!0}}),pt()}};function r0(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({}));Te(e,{showToolOutput:!1,header:s=>{{const i=a=>{Jw(a)};let o=O(()=>[Ir(r().query,"")]);Se(s,{toolName:"Web",get formattedToolArgs(){return d(o)},icon:i,$$slots:{icon:!0}})}},$$slots:{header:!0}}),pt()}function ki(e,t){ut(t,!0);const r=()=>Tt(i,"$ctx",n),[n,s]=se(),i=qr();let o=O(()=>function(l={}){const{summary:c,...u}=l;let p=c??u.query;return{formattedToolArgs:p?[p]:void 0,toolUseInput:u}}(r().toolUseInput)),a=O(()=>d(o).formattedToolArgs),h=O(()=>d(o).toolUseInput);Te(e,{showToolOutput:!0,header:u=>{Se(u,{get toolName(){return t.toolName},get formattedToolArgs(){return d(a)},icon:f=>{var m=J(),y=W(m);ke(y,()=>t.icon??Ue),b(f,m)},toolAction:f=>{{let m=O(()=>function(y={}){const{href:v}=y;return typeof v=="string"?v:void 0}(d(h)));n_(f,{get href(){return d(m)}})}},$$slots:{icon:!0,toolAction:!0}})},details:u=>{t_(u,{get toolUseInput(){return d(h)},get toolUseState(){return r().toolUseState}})},$$slots:{header:!0,details:!0}}),pt(),s()}var CD=is("<svg><!></svg>"),SD=is("<svg><!></svg>"),TD=P('<span class="c-supabase-tool__summary svelte-c6z2oa"><!></span>');const n0={[Un.webSearch]:r0,[Un.webSearchV1]:r0,[Un.gitHub]:function(e){ki(e,{toolName:"GitHub",icon:r=>{vt(r,{name:"github"})},$$slots:{icon:!0}})},[Un.linear]:function(e){ki(e,{toolName:"Linear",icon:r=>{t2(r)},$$slots:{icon:!0}})},[Un.notion]:function(e){ki(e,{toolName:"Notion",icon:r=>{e2(r)},$$slots:{icon:!0}})},[Un.jira]:function(e){ki(e,{toolName:"Jira",icon:r=>{(function(n,s){const i=ys(s,["children","$$slots","$$events","$$legacy"]);var o=CD();vs(o,()=>({xmlns:"http://www.w3.org/2000/svg","data-ds-icon":"fa",viewBox:"0 0 496 512",...i}));var a=R(o);Xi(a,()=>'<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M490 241.7C417.1 169 320.6 71.8 248.5 0 83 164.9 6 241.7 6 241.7c-7.9 7.9-7.9 20.7 0 28.7C138.8 402.7 67.8 331.9 248.5 512c379.4-378 15.7-16.7 241.5-241.7 8-7.9 8-20.7 0-28.6m-241.5 90-76-75.7 76-75.7 76 75.7z"/>',!0),b(n,o)})(r,{})},$$slots:{icon:!0}})},[Un.confluence]:function(e){ki(e,{toolName:"Confluence",icon:r=>{(function(n,s){const i=ys(s,["children","$$slots","$$events","$$legacy"]);var o=SD();vs(o,()=>({xmlns:"http://www.w3.org/2000/svg","data-ds-icon":"fa",viewBox:"0 0 512 512",...i}));var a=R(o);Xi(a,()=>'<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M2.3 412.2c-4.5 7.6-2.1 17.5 5.5 22.2l105.9 65.2c7.7 4.7 17.7 2.4 22.4-5.3 0-.1.1-.2.1-.2 67.1-112.2 80.5-95.9 280.9-.7 8.1 3.9 17.8.4 21.7-7.7.1-.1.1-.3.2-.4l50.4-114.1c3.6-8.1-.1-17.6-8.1-21.3-22.2-10.4-66.2-31.2-105.9-50.3C127.5 179 44.6 345.3 2.3 412.2m507.4-312.1c4.5-7.6 2.1-17.5-5.5-22.2L398.4 12.8c-7.5-5-17.6-3.1-22.6 4.4-.2.3-.4.6-.6 1-67.3 112.6-81.1 95.6-280.6.9-8.1-3.9-17.8-.4-21.7 7.7-.1.1-.1.3-.2.4L22.2 141.3c-3.6 8.1.1 17.6 8.1 21.3 22.2 10.4 66.3 31.2 106 50.4 248 120 330.8-45.4 373.4-112.9"/>',!0),b(n,o)})(r,{})},$$slots:{icon:!0}})},[Un.supabase]:function(e,t){ut(t,!0);let r=G(t,"toolUseInput",19,()=>({})),n=O(()=>r().summary||"");Te(e,{showToolOutput:!1,header:i=>{Se(i,{toolName:"Supabase",get toolUseInput(){return r()},icon:h=>{r2(h)},secondary:h=>{var l=TD(),c=R(l);ht(c,{size:1,children:(u,p)=>{var g=st();et(()=>at(g,d(n))),b(u,g)},$$slots:{default:!0}}),b(h,l)},$$slots:{icon:!0,secondary:!0}})},$$slots:{header:!0}}),pt()},[Un.glean]:function(e){ki(e,{toolName:"Glean",icon:r=>{n2(r)},$$slots:{icon:!0}})}};var $D=is('<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.1449 2.40505C9.57467 1.83483 8.65013 1.8348 8.07986 2.40506L8.07985 2.40506L2.57309 7.91182C2.38301 8.1019 2.07483 8.1019 1.88475 7.91182C1.69467 7.72174 1.69467 7.41356 1.88475 7.22348L7.39151 1.71671L7.39152 1.71671C8.34193 0.76632 9.88283 0.766292 10.8332 1.7167C11.3962 2.27964 11.6257 3.04975 11.5217 3.78162C12.2536 3.67767 13.0238 3.90716 13.5867 4.4701L13.6154 4.49878L13.6155 4.49887C14.5658 5.44928 14.5658 6.99014 13.6154 7.94051L8.63502 12.9209C8.57168 12.9843 8.57166 13.087 8.63501 13.1503L9.65768 14.173C9.84775 14.3631 9.84774 14.6713 9.65765 14.8614C9.46757 15.0514 9.15938 15.0514 8.96931 14.8614L7.94669 13.8387C7.50317 13.3952 7.50315 12.6761 7.94667 12.2326L12.927 7.25217C13.4973 6.68194 13.4973 5.75739 12.927 5.18714L12.8984 5.15846L12.8983 5.15838C12.328 4.58821 11.4035 4.58824 10.8333 5.15846L6.73192 9.25986L6.72597 9.26572L6.67449 9.3172C6.48441 9.50728 6.17622 9.50729 5.98614 9.3172C5.79606 9.12712 5.79606 8.81894 5.98614 8.62886L10.1449 4.4701L10.1449 4.47009C10.7151 3.89984 10.7151 2.9753 10.1449 2.40507L10.1449 2.40505ZM9.45664 3.78176C9.64672 3.59168 9.64672 3.2835 9.45664 3.09341C9.26656 2.90333 8.95838 2.90333 8.7683 3.09341L4.69557 7.16612L4.69556 7.16613C3.74515 8.11652 3.74517 9.65744 4.69556 10.6079L4.69557 10.6079C5.64598 11.5582 7.18687 11.5582 8.13728 10.6079L8.13729 10.6079L12.21 6.53514C12.4001 6.34506 12.4001 6.03688 12.21 5.8468C12.0199 5.65671 11.7118 5.65671 11.5217 5.8468L7.44896 9.91952L7.44895 9.91953C6.8787 10.4897 5.95416 10.4897 5.38392 9.91953C4.81365 9.34925 4.81367 8.42469 5.3839 7.85448L5.38391 7.85448L9.45664 3.78176Z" fill="currentColor"></path></svg>');function MD(e){var t=$D();b(e,t)}var AD=P('<span class="c-mcp-tool__summary svelte-1jljdf0"><!></span>');function ED(e,t){ut(t,!0);const r=()=>Tt(o,"$ctx",n),[n,s]=se();let i=G(t,"toolUseInput",19,()=>({}));const o=qr();let a=O(()=>r().toolUse.tool_name),h=O(()=>r().toolUse.mcp_server_name),l=O(()=>r().toolUse.mcp_tool_name),c=O(()=>s2(d(h))),u=O(()=>d(h)?d(c)?.displayName??d(h):d(l)||d(a)||"MCP"),p=O(()=>d(h)&&d(l)||"");Te(e,{showToolOutput:!0,header:f=>{Se(f,{get toolName(){return d(u)},get toolUseInput(){return i()},icon:v=>{const x=O(()=>d(c)?.icon??MD);var k=J(),_=W(k);ve(_,()=>d(x),(w,S)=>{S(w,{})}),b(v,k)},secondary:v=>{var x=AD(),k=R(x);ht(k,{size:1,children:(_,w)=>{var S=st();et(()=>at(S,d(p))),b(_,S)},$$slots:{default:!0}}),b(v,x)},$$slots:{icon:!0,secondary:!0}})},$$slots:{header:!0}}),pt(),s()}function LD(e){const t=((r=e.tool_name)in e0?e0[r]:void 0)??function(s){return s in n0?n0[s]:void 0}(e.tool_name)??function(s){return s in Jm?Jm[s]:void 0}(e.tool_name);var r;return t||function(s){if(typeof s=="object"&&(s.mcp_server_name||s.mcp_tool_name))return ED}(e)||Te}function Kd(e,t){ut(t,!0);const r=()=>Tt(p,"$readableCtx",n),[n,s]=se();let i=G(t,"onToolRun",3,()=>{}),o=G(t,"onToolCancel",3,()=>{}),a=G(t,"onToolSkip",3,()=>{}),h=G(t,"turnIndex",3,0),l=G(t,"messageListContainer",19,()=>{}),c=G(t,"isGroupListItem",3,!1),u=O(()=>LD(t.toolUse));const{readableCtx:p,writableCtx:g}=ZB({toolUse:t.toolUse,toolUseState:t.toolUseState,isLastTurn:t.isLastTurn,requestId:t.requestId,onToolRun:i(),onToolCancel:o(),onToolSkip:a(),turnIndex:h(),messageListContainer:l(),isGroupListItem:c()});_e(()=>{ma(g,{toolUse:t.toolUse,toolUseState:t.toolUseState,isLastTurn:t.isLastTurn,requestId:t.requestId,onToolRun:i(),onToolCancel:o(),onToolSkip:a(),turnIndex:h(),messageListContainer:l(),isGroupListItem:c()})});const f=O(()=>()=>30);{let m=O(()=>"tool:"+(t.toolUse.tool_use_id??`${h()}-${t.toolUse.requestId}`));Iu(e,{get estimatedHeight(){return d(f)},get intersectionId(){return d(m)},children:(y,v)=>{var x=J(),k=W(x);ve(k,()=>d(u),(_,w)=>{w(_,Ye(r,{get messageListContainer(){return l()}}))}),b(y,x)},$$slots:{default:!0}})}pt(),s()}var BD=P('<div class="l-tooluse-list svelte-1jzshyv"></div>'),ID=(e,t)=>e.key==="Enter"&&t(),FD=P('<div data-testid="file-changes-summary-button" role="button" tabindex="0"><div class="file-changes-info__text svelte-h9cb4b"><!> <!></div> <!></div>'),DD=P('<div class="file-changes-summary svelte-h9cb4b"><div class="file-changes-header svelte-h9cb4b"><!></div></div>');fa(["click","keydown"]);var OD=P("<div><!></div>");function RD(e,t){ut(t,!0);const[r,n]=se();let s=G(t,"turnIndex",3,0),i=G(t,"isLastTurn",3,!1);const o=me(xs.key);let a=O(()=>Tt(o,"$remoteAgentsModel",r).currentConversation?.exchanges??[]),h=O(()=>l2(d(a),s())),l=O(()=>d(h).length>0),c=O(()=>c2(d(a),s())),u=O(()=>d(c).length>0?d(c)[0]?.sequence_id??0:0),p=O(()=>d(c).length>0?d(c)[d(c).length-1]?.sequence_id??1e5:1e5);var g=J(),f=W(g),m=y=>{var v=OD();let x;(function(k,_){ut(_,!0);const w=()=>Tt(E,"$remoteAgentsModel",T),S=()=>Tt(D,"$selectedTurnIndex",T),[T,L]=se();let F=G(_,"changedFiles",19,()=>[]),A=G(_,"suffix",3,""),B=G(_,"turnIndex",19,()=>-1),M=G(_,"startSequenceId",19,()=>{}),$=G(_,"endSequenceId",19,()=>{});const E=me(xs.key),D=me(F2),I=me(b2.key),N=Be(""),q=a2(N);$s(async()=>{try{const{remoteUrl:lt,error:gt}=await I.getRemoteUrl();if(gt)return void console.error("Failed to get remote url:",gt);N.set(lt)}catch(lt){console.error("Failed to get current repository URL:",lt)}});let K=O(()=>F().length>Ow),Z=O(()=>w().isDiffPanelOpen&&w().currentAgentId===w().diffPanelAgentId&&(B()===void 0&&S()===-1||B()!==void 0&&S()===B()));function U(){if(d(K))return;if(d(Z))return w().closeRemoteAgentDiffPanel(),void D.set(-1);let lt=[],gt="",Ct=!0,St=-1;F()?(lt=F(),B()!==void 0?(St=B(),Ct=!1,D.set(B()),gt=Wc(w().currentConversation?.exchanges??[],B())):(Ct=!0,D.set(-1),gt=Wc(w().currentConversation?.exchanges??[],1))):(lt=Zp(w().currentConversation?.exchanges??[]),Ct=!0,D.set(-1),gt=Wc(w().currentConversation?.exchanges??[],1));const Lt=St;w().showRemoteAgentDiffPanel({turnIdx:Lt,changedFiles:lt,userPrompt:gt,sessionSummary:w().currentAgent?.session_summary??"",isShowingAggregateChanges:Ct,isAgentFromDifferentRepo:!!w().currentAgent&&Tt(q,"$isAgentFromDifferentRepo",T)(w().currentAgent),startSequenceId:M(),endSequenceId:$()})}let H=O(()=>F()||Zp(w().currentConversation?.exchanges??[])),j=O(()=>d(H).length),V=O(()=>d(H).map(lt=>{const gt=Vp.generateDiff(lt.old_path,lt.new_path,lt.old_contents||"",lt.new_contents||"");return Vp.getDiffObjectStats(gt)})),rt=O(()=>d(V).reduce((lt,gt)=>lt+gt.additions,0)),tt=O(()=>d(V).reduce((lt,gt)=>lt+gt.deletions,0)),it=O(()=>d(j)>0);var nt=J(),ct=W(nt),mt=lt=>{var gt=DD(),Ct=R(gt),St=R(Ct);{let Lt=O(()=>d(K)?Rw:"View Diff");fe(St,{get content(){return d(Lt)},children:(kt,wt)=>{var bt=FD();let It;bt.__click=U,bt.__keydown=[ID,U];var Yt=R(bt),Xt=R(Yt);ht(Xt,{size:1,weight:"medium",truncate:!0,children:(Qt,ee)=>{var $t=st();et(Wt=>at($t,`${Wt??""} changed${A()??""}`),[()=>on(d(j),"file")]),b(Qt,$t)},$$slots:{default:!0}}),Au(Y(Xt,2),{get totalAddedLines(){return d(rt)},get totalRemovedLines(){return d(tt)}});var Ht=Y(Yt,2);vt(Ht,{name:"search"}),et(Qt=>It=Me(bt,1,"file-changes-info svelte-h9cb4b",null,It,Qt),[()=>({active:d(Z),disabled:d(K)})]),b(kt,bt)},$$slots:{default:!0}})}b(lt,gt)};z(ct,lt=>{d(it)&&lt(mt)}),b(k,nt),pt(),L()})(R(v),{get changedFiles(){return d(h)},suffix:" in this turn",get turnIndex(){return s()},get startSequenceId(){return d(u)},get endSequenceId(){return d(p)}}),et(k=>x=Me(v,1,"c-message-actions svelte-77ecdu",null,x,k),[()=>({"c-message-actions--last":i()})]),b(y,v)};z(f,y=>{d(l)&&y(m)}),b(e,g),pt(),n()}const PD={time:ty,timeDateFull:ey,timeDate:function(e){return(e instanceof Date?e:new Date(e)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}};var ND=P("<div><!></div>"),zD=P("<div><!></div>");const i_=Symbol("conversationNavigationItems");function DP(e={all:[]}){const t=Be(e);return Qr(i_,t),t}function UD(){return me(i_)}var qD=P("<!> <!>",1),jD=P('<div slot="content" class="c-conversation-navigation__tooltip svelte-m1594">Up <!></div>'),WD=P("<!> <!>",1),HD=P('<div slot="content" class="c-conversation-navigation__tooltip svelte-m1594">Down <!></div>'),VD=P('<div class="c-conversation-navigation svelte-m1594"><!> <!></div>'),GD=P("<div><!></div>");const YD={Controls:function(e,t){ut(t,!0);const r=()=>Tt(i,"$conversationNavigationItems",n),[n,s]=se(),i=UD(),o=O(()=>r().prev),a=O(()=>r().next),h=O(()=>r().scrollTo),l=O(()=>r().scrollToBottom),c=O(()=>r().canScrollToBottom),u=O(()=>d(c));function p(){d(u)&&(d(a)&&d(h)?d(h)(d(a).offsetTop-45):d(c)&&d(l)&&d(l)())}function g(){d(o)&&d(h)&&d(h)(d(o).offsetTop-45)}var f=J(),m=W(f),y=v=>{var x=VD(),k=R(x);fe(k,{side:"top",nested:!1,children:(w,S)=>{var T=qD(),L=W(T);Uh(0,{name:"scrollConversationUp",handler:g});var F=Y(L,2);{let A=O(()=>!d(o));de(F,{variant:"ghost-block",color:"neutral",size:.5,onclick:g,get disabled(){return d(A)},children:(B,M)=>{vt(B,{name:"arrow-up"})},$$slots:{default:!0}})}b(w,T)},$$slots:{default:!0,content:(w,S)=>{var T=jD();qh(Y(R(T)),{commandName:"scrollConversationUp",keysOnly:!0}),b(w,T)}}});var _=Y(k,2);fe(_,{side:"top",nested:!1,children:(w,S)=>{var T=WD(),L=W(T);Uh(0,{name:"scrollConversationDown",handler:p});var F=Y(L,2);{let A=O(()=>!d(u));de(F,{variant:"ghost-block",color:"neutral",size:.5,onclick:p,get disabled(){return d(A)},children:(B,M)=>{vt(B,{name:"arrow-down"})},$$slots:{default:!0}})}b(w,T)},$$slots:{default:!0,content:(w,S)=>{var T=HD();qh(Y(R(T)),{commandName:"scrollConversationDown",keysOnly:!0}),b(w,T)}}}),b(v,x)};z(m,v=>{(d(o)||d(c))&&v(y)}),b(e,f),pt(),s()},Item:function(e,t){var r=GD(),n=R(r);ke(n,()=>t.children??Ue),et(()=>Pr(r,"data-timestamp-id",t.id)),b(e,r)}};var ZD=P('<div class="c-chat-message__content hidden-when-empty svelte-6ub04x"><!></div>'),XD=P('<div class="c-chat-message__user-actions svelte-6ub04x"><!></div>'),KD=P('<!> <div class="c-chat-message__user svelte-6ub04x"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1),QD=P("<div><!></div> <!> <!>",1);function JD(e,t){ut(t,!0);const[r,n]=se();let s=G(t,"isAugment",3,!1),i=G(t,"timestamp",19,()=>{}),o=G(t,"isEditing",11,!1);const a=je("enableDesignSystemRichTextEditor");var h=QD(),l=W(h);let c;var u=R(l),p=y=>{var v=J(),x=W(v),k=_=>{var w=ZD(),S=R(w);ke(S,()=>t.content??Ue),b(_,w)};z(x,_=>{t.content&&_(k)}),b(y,v)},g=y=>{var v=KD(),x=W(v);{let T=O(()=>String(i()));ve(x,()=>YD.Item,(L,F)=>{F(L,{get id(){return d(T)},children:(A,B)=>{(function(M,$){ut($,!0);let E=G($,"timestamp",19,()=>{}),D=G($,"showTooltip",3,!0),I=G($,"tooltipSide",3,"right"),N=G($,"textColor",3,"secondary"),q=G($,"textSize",3,1),K=G($,"format",3,ty),Z=G($,"class",3,""),U=O(()=>typeof K()=="function"?K():PD[K()]);var H=J(),j=W(H),V=rt=>{var tt=J(),it=W(tt),nt=mt=>{{let lt=O(()=>ey(E()));fe(mt,{get content(){return d(lt)},get side(){return I()},children:(gt,Ct)=>{var St=ND(),Lt=R(St);ht(Lt,{get color(){return N()},get size(){return q()},children:(kt,wt)=>{var bt=st();et(It=>at(bt,It),[()=>d(U)(E())]),b(kt,bt)},$$slots:{default:!0}}),et(()=>Me(St,1,`c-timestamp-display ${Z()??""}`,"svelte-81luuj")),b(gt,St)},$$slots:{default:!0}})}},ct=mt=>{var lt=zD(),gt=R(lt);ht(gt,{get color(){return N()},get size(){return q()},children:(Ct,St)=>{var Lt=st();et(kt=>at(Lt,kt),[()=>d(U)(E())]),b(Ct,Lt)},$$slots:{default:!0}}),et(()=>Me(lt,1,`c-timestamp-display ${Z()??""}`,"svelte-81luuj")),b(mt,lt)};z(it,mt=>{D()?mt(nt):mt(ct,!1)}),b(rt,tt)};z(j,rt=>{E()&&rt(V)}),b(M,H),pt()})(A,{get timestamp(){return i()}})},$$slots:{default:!0}})})}var k=Y(x,2),_=R(k),w=T=>{var L=XD(),F=R(L);ke(F,()=>t.userActions??Ue),b(T,L)};z(_,T=>{t.userActions&&T(w)});var S=Y(_,2);{let T=O(()=>"c-chat-message__content "+(Tt(a,"$enableDesignSystemRichTextEditor",r)?"c-chat-message__content--rich-text":""));Y0(S,()=>({"--callout-flex-direction":"column","--callout-gap":"var(--ds-spacing-4)","--callout-body-overflow":"hidden","--callout-width":o()?"100%":"unset","--callout-max-width":"100%","--callout-padding":"var(--ds-spacing-1)","--text-font-size":"0.75rem","--text-line-height":"1rem","--text-letter-spacing":"0.0025em"})),h2(S.lastChild,{color:"neutral",size:1,variant:"ghost",get class(){return d(T)},children:(L,F)=>{var A=J(),B=W(A);ke(B,()=>t.content??Ue),b(L,A)},$$slots:{default:!0}})}b(y,v)};z(u,y=>{s()?y(p):y(g,!1)});var f=Y(l,2);ke(f,()=>t.footer??Ue);var m=Y(f,2);ke(m,()=>t.edit??Ue),et(y=>c=Me(l,1,"c-chat-message svelte-6ub04x",null,c,y),[()=>({"c-chat-message--augment":s()})]),b(e,h),pt(),n()}function tO(e,t,r){return r?.isActive?async()=>{if(r.currentAgentId)try{const n=await r.getConversationUrl(r.currentAgentId);n&&await navigator.clipboard.writeText(n)}catch(n){console.error("Failed to get conversation URL: ",n)}}:async()=>{if(t?.id)try{const n=await e?.getConversationUrl(t.id);n&&await navigator.clipboard.writeText(n)}catch(n){console.error("Failed to get conversation URL: ",n)}}}var eO=P("<div><!></div>");function rO(e,t){ut(t,!0);const[r,n]=se(),s=me("chatModel"),i=me(xs.key),o=O(()=>s?.currentConversationModel),a={share:"share-2",retry:"refresh-ccw"},h=p=>({lucideIconName:a[p]}),l=je("enableShareService"),c=O(()=>[...function(g,f,m,y){return{tooltipItems:[{label:"Share",action:tO(g,m,y),id:"share-message",disabled:!f,icon:"share",successMessage:"Link copied!"}]}}(Tt(s,"$chatModel",r),Tt(l,"$enableShareService",r),Tt(d(o),"$conversationModel",r),Tt(i,"$remoteAgentsModel",r)).tooltipItems.map(g=>({...g,...h(g.icon)})),...t.isLastTurn&&t.turn?.status===ur.failed?[{label:"Retry",action:()=>{d(o)&&t.turn&&(d(o).resendTurn(t.turn),s?.eventTracker?.trackEvent(U0.MESSAGE_SEND_RETRY_CLICKED,{source:"button",errorMessagePreview:t.turn.display_error_message?.substring(0,100),requestId:t.turn.request_id}))},id:"retry-message",disabled:!1,...h("retry")}]:[]]);var u=eO();Me(u,1,"c-aug-msg__actions svelte-h10o63",null,{},{"c-aug-msg__actions-visible":!1}),y6(R(u),{get items(){return d(c)}}),rs(3,u,()=>mu,()=>({duration:200})),b(e,u),pt(),n()}const oi=e=>e;let o_=oi;function a_(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class l_{constructor(){this.subscriptions=[]}add(t){var r,n;return r=this.subscriptions,n=t,r.indexOf(n)===-1&&r.push(n),()=>a_(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function c_(e,t){return t?e*(1e3/t):0}const nO=!1,Ya=["read","resolveKeyframes","update","preRender","render","postRender"];function sO(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=Ya.reduce((m,y)=>(m[y]=function(v,x){let k=new Set,_=new Set,w=!1,S=!1;const T=new WeakSet;let L={delta:0,timestamp:0,isProcessing:!1};function F(B){T.has(B)&&(A.schedule(B),v()),B(L)}const A={schedule:(B,M=!1,$=!1)=>{const E=$&&w?k:_;return M&&T.add(B),E.has(B)||E.add(B),B},cancel:B=>{_.delete(B),T.delete(B)},process:B=>{L=B,w?S=!0:(w=!0,[k,_]=[_,k],k.forEach(F),k.clear(),w=!1,S&&(S=!1,A.process(B)))}};return A}(i),m),{}),{read:a,resolveKeyframes:h,update:l,preRender:c,render:u,postRender:p}=o,g=()=>{const m=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(m-s.timestamp,40),1),s.timestamp=m,s.isProcessing=!0,a.process(s),h.process(s),l.process(s),c.process(s),u.process(s),p.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(g))};return{schedule:Ya.reduce((m,y)=>{const v=o[y];return m[y]=(x,k=!1,_=!1)=>(r||(r=!0,n=!0,s.isProcessing||e(g)),v.schedule(x,k,_)),m},{}),cancel:m=>{for(let y=0;y<Ya.length;y++)o[Ya[y]].cancel(m)},state:s,steps:o}}const{schedule:Nn,cancel:Qd,state:ic}=sO(typeof requestAnimationFrame<"u"?requestAnimationFrame:oi,!0);let kl;function iO(){kl=void 0}const ms={now:()=>(kl===void 0&&ms.set(ic.isProcessing||nO?ic.timestamp:performance.now()),kl),set:e=>{kl=e,queueMicrotask(iO)}};class h_{constructor(t,r={}){this.version="12.5.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const i=ms.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){var r;this.current=t,this.updatedAt=ms.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=(r=this.current,!isNaN(parseFloat(r))))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new l_);const n=this.events[t].add(r);return t==="change"?()=>{n(),Nn.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){r&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,r)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ms.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>30)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,30);return c_(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Go(e,t){return new h_(e,t)}const Pc=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};function Tp(e){let t;return()=>(t===void 0&&(t=e()),t)}const oO=Tp(()=>window.ScrollTimeline!==void 0);class aO{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,r){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=r}attachTimeline(t,r){const n=this.animations.map(s=>oO()&&s.attachTimeline?s.attachTimeline(t):typeof r=="function"?r(s):void 0);return()=>{n.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class d_ extends aO{then(t,r){return Promise.all(this.animations).then(t).catch(r)}}const ts=e=>1e3*e,es=e=>e/1e3,oc=2e4;function $p(e){let t=0,r=e.next(t);for(;!r.done&&t<oc;)t+=50,r=e.next(t);return t>=oc?1/0:t}const u_=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let i=0;i<s;i++)n+=e(Pc(0,s-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`},ai=(e,t,r)=>r>t?t:r<e?e:r,lO=5;function p_(e,t,r){const n=Math.max(t-lO,0);return c_(r-e(n),t-n)}const Je={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Th=.001;function cO({duration:e=Je.duration,bounce:t=Je.bounce,velocity:r=Je.velocity,mass:n=Je.mass}){let s,i,o=1-t;o=ai(Je.minDamping,Je.maxDamping,o),e=ai(Je.minDuration,Je.maxDuration,es(e)),o<1?(s=h=>{const l=h*o,c=l*e,u=l-r,p=Jd(h,o),g=Math.exp(-c);return Th-u/p*g},i=h=>{const l=h*o*e,c=l*r+r,u=Math.pow(o,2)*Math.pow(h,2)*e,p=Math.exp(-l),g=Jd(Math.pow(h,2),o);return(-s(h)+Th>0?-1:1)*((c-u)*p)/g}):(s=h=>Math.exp(-h*e)*((h-r)*e+1)-Th,i=h=>Math.exp(-h*e)*(e*e*(r-h)));const a=function(h,l,c){let u=c;for(let p=1;p<hO;p++)u-=h(u)/l(u);return u}(s,i,5/e);if(e=ts(e),isNaN(a))return{stiffness:Je.stiffness,damping:Je.damping,duration:e};{const h=Math.pow(a,2)*n;return{stiffness:h,damping:2*o*Math.sqrt(n*h),duration:e}}}const hO=12;function Jd(e,t){return e*Math.sqrt(1-t*t)}const dO=["duration","bounce"],uO=["stiffness","damping","mass"];function s0(e,t){return t.some(r=>e[r]!==void 0)}function Mp(e=Je.visualDuration,t=Je.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],a={done:!1,value:i},{stiffness:h,damping:l,mass:c,duration:u,velocity:p,isResolvedFromDuration:g}=function(w){let S={velocity:Je.velocity,stiffness:Je.stiffness,damping:Je.damping,mass:Je.mass,isResolvedFromDuration:!1,...w};if(!s0(w,uO)&&s0(w,dO))if(w.visualDuration){const T=w.visualDuration,L=2*Math.PI/(1.2*T),F=L*L,A=2*ai(.05,1,1-(w.bounce||0))*Math.sqrt(F);S={...S,mass:Je.mass,stiffness:F,damping:A}}else{const T=cO(w);S={...S,...T,mass:Je.mass},S.isResolvedFromDuration=!0}return S}({...r,velocity:-es(r.velocity||0)}),f=p||0,m=l/(2*Math.sqrt(h*c)),y=o-i,v=es(Math.sqrt(h/c)),x=Math.abs(y)<5;let k;if(n||(n=x?Je.restSpeed.granular:Je.restSpeed.default),s||(s=x?Je.restDelta.granular:Je.restDelta.default),m<1){const w=Jd(v,m);k=S=>{const T=Math.exp(-m*v*S);return o-T*((f+m*v*y)/w*Math.sin(w*S)+y*Math.cos(w*S))}}else if(m===1)k=w=>o-Math.exp(-v*w)*(y+(f+v*y)*w);else{const w=v*Math.sqrt(m*m-1);k=S=>{const T=Math.exp(-m*v*S),L=Math.min(w*S,300);return o-T*((f+m*v*y)*Math.sinh(L)+w*y*Math.cosh(L))/w}}const _={calculatedDuration:g&&u||null,next:w=>{const S=k(w);if(g)a.done=w>=u;else{let T=0;m<1&&(T=w===0?ts(f):p_(k,w,S));const L=Math.abs(T)<=n,F=Math.abs(o-S)<=s;a.done=L&&F}return a.value=a.done?o:S,a},toString:()=>{const w=Math.min($p(_),oc),S=u_(T=>_.next(w*T).value,w,30);return w+"ms "+S}};return _}function pO(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min($p(n),oc);return{type:"keyframes",ease:i=>n.next(s*i).value/t,duration:es(s)}}function Nc(e){return typeof e=="function"}const gO=(e,t,r)=>{const n=t-e;return((r-e)%n+n)%n+e},g_=e=>Array.isArray(e)&&typeof e[0]!="number";function f_(e,t){return g_(e)?e[gO(0,e.length,t)]:e}const Ca=(e,t,r)=>e+(t-e)*r;function m_(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Pc(0,t,n);e.push(Ca(r,1,s))}}function y_(e){const t=[0];return m_(t,e.length-1),t}const Fr=e=>!!(e&&e.getVelocity);function tu(e){return typeof e=="object"&&!Array.isArray(e)}function v_(e,t,r,n){return typeof e=="string"&&tu(t)?function(s,i,o){var a;if(s instanceof EventTarget)return[s];if(typeof s=="string"){let h=document;const l=(a=o?.[s])!==null&&a!==void 0?a:h.querySelectorAll(s);return l?Array.from(l):[]}return Array.from(s)}(e,0,n):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function fO(e,t,r){return e*(t+1)}function i0(e,t,r,n){var s;return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?r:(s=n.get(t))!==null&&s!==void 0?s:e}function mO(e,t,r,n,s,i){(function(o,a,h){for(let l=0;l<o.length;l++){const c=o[l];c.at>a&&c.at<h&&(a_(o,c),l--)}})(e,s,i);for(let o=0;o<t.length;o++)e.push({value:t[o],at:Ca(s,i,n[o]),easing:f_(r,o)})}function yO(e,t){for(let r=0;r<e.length;r++)e[r]=e[r]/(t+1)}function vO(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const bO="easeInOut";function o0(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function a0(e,t){return t[e]||(t[e]=[]),t[e]}function xO(e){return Array.isArray(e)?e:[e]}function kO(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const _O=e=>typeof e=="number",wO=e=>e.every(_O),ha=new WeakMap;function b_(e,t){return e?e[t]||e.default||e:void 0}const co=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ho=new Set(co),x_=new Set(["width","height","top","left","right","bottom",...co]),CO=e=>(t=>Array.isArray(t))(e)?e[e.length-1]||0:e;function l0(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function k_(e,t,r,n){if(typeof t=="function"){const[s,i]=l0(n);t=t(r!==void 0?r:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=l0(n);t=t(r!==void 0?r:e.custom,s,i)}return t}function SO(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Go(r))}function TO(e,t){const r=function(o,a,h){const l=o.getProps();return k_(l,a,l.custom,o)}(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i)SO(e,o,CO(i[o]))}function $O(e,t){const r=e.getValue("willChange");if(n=r,!!(Fr(n)&&n.add))return r.add(t);var n}const eu=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),MO="data-"+eu("framerAppearId");function AO(e){return e.props[MO]}function c0(e,t){e.timeline=t,e.onfinish=null}const Ap=e=>Array.isArray(e)&&typeof e[0]=="number",EO={linearEasing:void 0};function LO(e,t){const r=Tp(e);return()=>{var n;return(n=EO[t])!==null&&n!==void 0?n:r()}}const ac=LO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function __(e){return!!(typeof e=="function"&&ac()||!e||typeof e=="string"&&(e in ru||ac())||Ap(e)||Array.isArray(e)&&e.every(__))}const Po=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,ru={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Po([0,.65,.55,1]),circOut:Po([.55,0,1,.45]),backIn:Po([.31,.01,.66,-.59]),backOut:Po([.33,1.53,.69,.99])};function w_(e,t){return e?typeof e=="function"&&ac()?u_(e,t):Ap(e)?Po(e):Array.isArray(e)?e.map(r=>w_(r,t)||ru.easeOut):ru[e]:void 0}const h0=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,BO=1e-7,IO=12;function Sa(e,t,r,n){if(e===t&&r===n)return oi;const s=i=>function(o,a,h,l,c){let u,p,g=0;do p=a+(h-a)/2,u=h0(p,l,c)-o,u>0?h=p:a=p;while(Math.abs(u)>BO&&++g<IO);return p}(i,0,1,e,r);return i=>i===0||i===1?i:h0(s(i),t,n)}const C_=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,S_=e=>t=>1-e(1-t),T_=Sa(.33,1.53,.69,.99),Ep=S_(T_),$_=C_(Ep),M_=e=>(e*=2)<1?.5*Ep(e):.5*(2-Math.pow(2,-10*(e-1))),Lp=e=>1-Math.sin(Math.acos(e)),FO=S_(Lp),A_=C_(Lp),E_=e=>/^0[^.\s]+$/u.test(e),uo={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},da={...uo,transform:e=>ai(0,1,e)},Za={...uo,default:1},Yo=e=>Math.round(1e5*e)/1e5,Bp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,DO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ip=(e,t)=>r=>!!(typeof r=="string"&&DO.test(r)&&r.startsWith(e)||t&&!function(n){return n==null}(r)&&Object.prototype.hasOwnProperty.call(r,t)),L_=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,a]=n.match(Bp);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},$h={...uo,transform:e=>Math.round((t=>ai(0,255,t))(e))},Xs={test:Ip("rgb","red"),parse:L_("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+$h.transform(e)+", "+$h.transform(t)+", "+$h.transform(r)+", "+Yo(da.transform(n))+")"},nu={test:Ip("#"),parse:function(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}},transform:Xs.transform},Ta=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),hs=Ta("deg"),Ni=Ta("%"),te=Ta("px"),OO=Ta("vh"),RO=Ta("vw"),d0={...Ni,parse:e=>Ni.parse(e)/100,transform:e=>Ni.transform(100*e)},Bi={test:Ip("hsl","hue"),parse:L_("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Ni.transform(Yo(t))+", "+Ni.transform(Yo(r))+", "+Yo(da.transform(n))+")"},Mr={test:e=>Xs.test(e)||nu.test(e)||Bi.test(e),parse:e=>Xs.test(e)?Xs.parse(e):Bi.test(e)?Bi.parse(e):nu.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Xs.transform(e):Bi.transform(e)},PO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,B_="number",I_="color",NO="var",zO="var(",u0="${}",UO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ua(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const o=t.replace(UO,a=>(Mr.test(a)?(n.color.push(i),s.push(I_),r.push(Mr.parse(a))):a.startsWith(zO)?(n.var.push(i),s.push(NO),r.push(a)):(n.number.push(i),s.push(B_),r.push(parseFloat(a))),++i,u0)).split(u0);return{values:r,split:o,indexes:n,types:s}}function p0(e){return ua(e).values}function g0(e){const{split:t,types:r}=ua(e),n=t.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],s[o]!==void 0){const a=r[o];i+=a===B_?Yo(s[o]):a===I_?Mr.transform(s[o]):s[o]}return i}}const qO=e=>typeof e=="number"?0:e,po={test:function(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Bp))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(PO))===null||r===void 0?void 0:r.length)||0)>0},parse:p0,createTransformer:g0,getAnimatableNone:function(e){const t=p0(e);return g0(e)(t.map(qO))}},jO=new Set(["brightness","contrast","saturate","opacity"]);function WO(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(Bp)||[];if(!n)return e;const s=r.replace(n,"");let i=jO.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const HO=/\b([a-z-]*)\(.*?\)/gu,su={...po,getAnimatableNone:e=>{const t=e.match(HO);return t?t.map(WO).join(" "):e}},VO={borderWidth:te,borderTopWidth:te,borderRightWidth:te,borderBottomWidth:te,borderLeftWidth:te,borderRadius:te,radius:te,borderTopLeftRadius:te,borderTopRightRadius:te,borderBottomRightRadius:te,borderBottomLeftRadius:te,width:te,maxWidth:te,height:te,maxHeight:te,top:te,right:te,bottom:te,left:te,padding:te,paddingTop:te,paddingRight:te,paddingBottom:te,paddingLeft:te,margin:te,marginTop:te,marginRight:te,marginBottom:te,marginLeft:te,backgroundPositionX:te,backgroundPositionY:te},GO={rotate:hs,rotateX:hs,rotateY:hs,rotateZ:hs,scale:Za,scaleX:Za,scaleY:Za,scaleZ:Za,skew:hs,skewX:hs,skewY:hs,distance:te,translateX:te,translateY:te,translateZ:te,x:te,y:te,z:te,perspective:te,transformPerspective:te,opacity:da,originX:d0,originY:d0,originZ:te},f0={...uo,transform:Math.round},iu={...VO,...GO,zIndex:f0,size:te,fillOpacity:da,strokeOpacity:da,numOctaves:f0},YO={...iu,color:Mr,backgroundColor:Mr,outlineColor:Mr,fill:Mr,stroke:Mr,borderColor:Mr,borderTopColor:Mr,borderRightColor:Mr,borderBottomColor:Mr,borderLeftColor:Mr,filter:su,WebkitFilter:su},F_=e=>YO[e];function D_(e,t){let r=F_(e);return r!==su&&(r=po),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const ZO=new Set(["auto","none","0"]),Ks=e=>180*e/Math.PI,lc=e=>{const t=Ks(Math.atan2(e[1],e[0]));return ou(t)},XO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:lc,rotateZ:lc,skewX:e=>Ks(Math.atan(e[1])),skewY:e=>Ks(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},ou=e=>((e%=360)<0&&(e+=360),e),m0=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),y0=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),KO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:m0,scaleY:y0,scale:e=>(m0(e)+y0(e))/2,rotateX:e=>ou(Ks(Math.atan2(e[6],e[5]))),rotateY:e=>ou(Ks(Math.atan2(-e[2],e[0]))),rotateZ:lc,rotate:lc,skewX:e=>Ks(Math.atan(e[4])),skewY:e=>Ks(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function v0(e){return e.includes("scale")?1:0}function au(e,t){if(!e||e==="none")return v0(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=KO,s=r;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=XO,s=a}if(!s)return v0(t);const i=n[t],o=s[1].split(",").map(QO);return typeof i=="function"?i(o):o[i]}function QO(e){return parseFloat(e.trim())}const b0=e=>e===uo||e===te,JO=new Set(["x","y","z"]),t8=co.filter(e=>!JO.has(e)),Ii={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>au(t,"x"),y:(e,{transform:t})=>au(t,"y")};Ii.translateX=Ii.x,Ii.translateY=Ii.y;const ti=new Set;let lu=!1,cu=!1;function O_(){if(cu){const e=Array.from(ti).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=function(i){const o=[];return t8.forEach(a=>{const h=i.getValue(a);h!==void 0&&(o.push([a,h.get()]),h.set(a.startsWith("scale")?1:0))}),o}(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var a;(a=n.getValue(i))===null||a===void 0||a.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}cu=!1,lu=!1,ti.forEach(e=>e.complete()),ti.clear()}function R_(){ti.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(cu=!0)})}class Fp{constructor(t,r,n,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ti.add(this),lu||(lu=!0,Nn.read(R_),Nn.resolveKeyframes(O_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;for(let i=0;i<t.length;i++)if(t[i]===null)if(i===0){const o=s?.get(),a=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&r){const h=n.readValue(r,a);h!=null&&(t[0]=h)}t[0]===void 0&&(t[0]=a),s&&o===void 0&&s.set(t[0])}else t[i]=t[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ti.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ti.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const P_=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),N_=e=>t=>typeof t=="string"&&t.startsWith(e),z_=N_("--"),e8=N_("var(--"),Dp=e=>!!e8(e)&&r8.test(e.split("/*")[0].trim()),r8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,n8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function U_(e,t,r=1){const[n,s]=function(o){const a=n8.exec(o);if(!a)return[,];const[,h,l,c]=a;return[`--${h??l}`,c]}(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return P_(o)?parseFloat(o):o}return Dp(s)?U_(s,t,r+1):s}const q_=e=>t=>t.test(e),j_=[uo,te,Ni,hs,RO,OO,{test:e=>e==="auto",parse:e=>e}],x0=e=>j_.find(q_(e));class W_ extends Fp{constructor(t,r,n,s,i){super(t,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let l=t[h];if(typeof l=="string"&&(l=l.trim(),Dp(l))){const c=U_(l,r.current);c!==void 0&&(t[h]=c),h===t.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!x_.has(n)||t.length!==2)return;const[s,i]=t,o=x0(s),a=x0(i);if(o!==a)if(b0(o)&&b0(a))for(let h=0;h<t.length;h++){const l=t[h];typeof l=="string"&&(t[h]=parseFloat(l))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let i=0;i<t.length;i++)(typeof(s=t[i])=="number"?s===0:s===null||s==="none"||s==="0"||E_(s))&&n.push(i);var s;n.length&&function(i,o,a){let h,l=0;for(;l<i.length&&!h;){const c=i[l];typeof c=="string"&&!ZO.has(c)&&ua(c).values.length&&(h=i[l]),l++}if(h&&a)for(const c of o)i[c]=D_(a,h)}(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ii[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:s}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Ii[n](r.measureViewportBox(),window.getComputedStyle(r.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([h,l])=>{r.getValue(h).set(l)}),this.resolveNoneKeyframes()}}const k0=(e,t)=>t!=="zIndex"&&(!(typeof e!="number"&&!Array.isArray(e))||!(typeof e!="string"||!po.test(e)&&e!=="0"||e.startsWith("url(")));function s8(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=k0(s,t),a=k0(i,t);return!(!o||!a)&&(function(h){const l=h[0];if(h.length===1)return!0;for(let c=0;c<h.length;c++)if(h[c]!==l)return!0}(e)||(r==="spring"||Nc(r))&&n)}const i8=e=>e!==null;function zc(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(i8),i=t&&r!=="loop"&&t%2==1?0:s.length-1;return i&&n!==void 0?n:s[i]}class H_{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ms.now(),this.options={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(R_(),O_()),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=ms.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:i,delay:o,onComplete:a,onUpdate:h,isGenerator:l}=this.options;if(!l&&!s8(t,n,s,i)){if(!o)return h&&h(zc(t,this.options,r)),a&&a(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(t,r);c!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...c},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function Mh(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function cc(e,t){return r=>r>0?t:e}const Ah=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},o8=[nu,Xs,Bi];function _0(e){const t=(n=>o8.find(s=>s.test(n)))(e);if(!t)return!1;let r=t.parse(e);return t===Bi&&(r=function({hue:n,saturation:s,lightness:i,alpha:o}){n/=360,i/=100;let a=0,h=0,l=0;if(s/=100){const c=i<.5?i*(1+s):i+s-i*s,u=2*i-c;a=Mh(u,c,n+1/3),h=Mh(u,c,n),l=Mh(u,c,n-1/3)}else a=h=l=i;return{red:Math.round(255*a),green:Math.round(255*h),blue:Math.round(255*l),alpha:o}}(r)),r}const w0=(e,t)=>{const r=_0(e),n=_0(t);if(!r||!n)return cc(e,t);const s={...r};return i=>(s.red=Ah(r.red,n.red,i),s.green=Ah(r.green,n.green,i),s.blue=Ah(r.blue,n.blue,i),s.alpha=Ca(r.alpha,n.alpha,i),Xs.transform(s))},a8=(e,t)=>r=>t(e(r)),Op=(...e)=>e.reduce(a8),Eh=new Set(["none","hidden"]);function l8(e,t){return r=>Ca(e,t,r)}function Rp(e){return typeof e=="number"?l8:typeof e=="string"?Dp(e)?cc:Mr.test(e)?w0:h8:Array.isArray(e)?V_:typeof e=="object"?Mr.test(e)?w0:c8:cc}function V_(e,t){const r=[...e],n=r.length,s=e.map((i,o)=>Rp(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function c8(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=Rp(e[s])(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}const h8=(e,t)=>{const r=po.createTransformer(t),n=ua(e),s=ua(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Eh.has(e)&&!s.values.length||Eh.has(t)&&!n.values.length?function(i,o){return Eh.has(i)?a=>a<=0?i:o:a=>a>=1?o:i}(e,t):Op(V_(function(i,o){var a;const h=[],l={color:0,var:0,number:0};for(let c=0;c<o.values.length;c++){const u=o.types[c],p=i.indexes[u][l[u]],g=(a=i.values[p])!==null&&a!==void 0?a:0;h[c]=g,l[u]++}return h}(n,s),s.values),r):cc(e,t)};function G_(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Ca(e,t,r):Rp(e)(e,t)}function C0({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:h,restDelta:l=.5,restSpeed:c}){const u=e[0],p={done:!1,value:u},g=T=>a===void 0?h:h===void 0||Math.abs(a-T)<Math.abs(h-T)?a:h;let f=r*t;const m=u+f,y=o===void 0?m:o(m);y!==m&&(f=y-u);const v=T=>-f*Math.exp(-T/n),x=T=>y+v(T),k=T=>{const L=v(T),F=x(T);p.done=Math.abs(L)<=l,p.value=p.done?y:F};let _,w;const S=T=>{(L=>a!==void 0&&L<a||h!==void 0&&L>h)(p.value)&&(_=T,w=Mp({keyframes:[p.value,g(p.value)],velocity:p_(x,T,p.value),damping:s,stiffness:i,restDelta:l,restSpeed:c}))};return S(0),{calculatedDuration:null,next:T=>{let L=!1;return w||_!==void 0||(L=!0,k(T),S(T)),_!==void 0&&T>=_?w.next(T-_):(!L&&k(T),p)}}}const d8=Sa(.42,0,1,1),u8=Sa(0,0,.58,1),Y_=Sa(.42,0,.58,1),p8={linear:oi,easeIn:d8,easeInOut:Y_,easeOut:u8,circIn:Lp,circInOut:A_,circOut:FO,backIn:Ep,backInOut:$_,backOut:T_,anticipate:M_},S0=e=>{if(Ap(e)){o_(e.length===4);const[t,r,n,s]=e;return Sa(t,r,n,s)}return typeof e=="string"?p8[e]:e};function g8(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(o_(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(c,u,p){const g=[],f=p||G_,m=c.length-1;for(let y=0;y<m;y++){let v=f(c[y],c[y+1]);if(u){const x=Array.isArray(u)?u[y]||oi:u;v=Op(x,v)}g.push(v)}return g}(t,n,s),h=a.length,l=c=>{if(o&&c<e[0])return t[0];let u=0;if(h>1)for(;u<e.length-2&&!(c<e[u+1]);u++);const p=Pc(e[u],e[u+1],c);return a[u](p)};return r?c=>l(ai(e[0],e[i-1],c)):l}function hc({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=g_(n)?n.map(S0):S0(n),i={done:!1,value:t[0]},o=function(c,u){return c.map(p=>p*u)}(r&&r.length===t.length?r:y_(t),e),a=g8(o,t,{ease:Array.isArray(s)?s:(h=t,l=s,h.map(()=>l||Y_).splice(0,h.length-1))});var h,l;return{calculatedDuration:e,next:c=>(i.value=a(c),i.done=c>=e,i)}}const f8=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Nn.update(t,!0),stop:()=>Qd(t),now:()=>ic.isProcessing?ic.timestamp:ms.now()}},m8={decay:C0,inertia:C0,tween:hc,keyframes:hc,spring:Mp},y8=e=>e/100;class hu extends H_{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()};const{name:r,motionValue:n,element:s,keyframes:i}=this.options,o=s?.KeyframeResolver||Fp;this.resolver=new o(i,(a,h)=>this.onKeyframesResolved(a,h),r,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:r="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=Nc(r)?r:m8[r]||hc;let h,l;a!==hc&&typeof t[0]!="number"&&(h=Op(y8,G_(t[0],t[1])),t=[0,100]);const c=a({...this.options,keyframes:t});i==="mirror"&&(l=a({...this.options,keyframes:[...t].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=$p(c));const{calculatedDuration:u}=c,p=u+s;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:h,calculatedDuration:u,resolvedDuration:p,totalDuration:p*(n+1)-s}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState!=="paused"&&t?this.state=this.pendingPlayState:this.pause()}tick(t,r=!1){const{resolved:n}=this;if(!n){const{keyframes:L}=this.options;return{done:!0,value:L[L.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:h,calculatedDuration:l,totalDuration:c,resolvedDuration:u}=n;if(this.startTime===null)return i.next(0);const{delay:p,repeat:g,repeatType:f,repeatDelay:m,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const v=this.currentTime-p*(this.speed>=0?1:-1),x=this.speed>=0?v<0:v>c;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let k=this.currentTime,_=i;if(g){const L=Math.min(this.currentTime,c)/u;let F=Math.floor(L),A=L%1;!A&&L>=1&&(A=1),A===1&&F--,F=Math.min(F,g+1),F%2&&(f==="reverse"?(A=1-A,m&&(A-=m/u)):f==="mirror"&&(_=o)),k=ai(0,1,A)*u}const w=x?{done:!1,value:h[0]}:_.next(k);a&&(w.value=a(w.value));let{done:S}=w;x||l===null||(S=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return T&&s!==void 0&&(w.value=zc(h,this.options,s)),y&&y(w.value),T&&this.finish(),w}get duration(){const{resolved:t}=this;return t?es(t.calculatedDuration):0}get time(){return es(this.currentTime)}set time(t){t=ts(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=es(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:t=f8,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),r&&r();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;this._resolved?(this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0):this.pendingPlayState="paused"}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const v8=new Set(["opacity","clipPath","filter","transform"]);function b8(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:h}={}){const l={[t]:r};h&&(l.offset=h);const c=w_(a,s);return Array.isArray(c)&&(l.easing=c),e.animate(l,{delay:n,duration:s,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const x8=Tp(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),T0={anticipate:M_,backInOut:$_,circInOut:A_};class $0 extends H_{constructor(t){super(t);const{name:r,motionValue:n,element:s,keyframes:i}=this.options;this.resolver=new W_(i,(o,a)=>this.onKeyframesResolved(o,a),r,n,s),this.resolver.scheduleResolve()}initPlayback(t,r){let{duration:n=300,times:s,ease:i,type:o,motionValue:a,name:h,startTime:l}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&ac()&&function(p){return p in T0}(i)&&(i=T0[i]),Nc((c=this.options).type)||c.type==="spring"||!__(c.ease)){const{onComplete:p,onUpdate:g,motionValue:f,element:m,...y}=this.options,v=function(x,k){const _=new hu({...k,keyframes:x,repeat:0,delay:0,isGenerator:!0});let w={done:!1,value:x[0]};const S=[];let T=0;for(;!w.done&&T<2e4;)w=_.sample(T),S.push(w.value),T+=10;return{times:void 0,keyframes:S,duration:T-10,ease:"linear"}}(t,y);(t=v.keyframes).length===1&&(t[1]=t[0]),n=v.duration,s=v.times,i=v.ease,o="keyframes"}var c;const u=b8(a.owner.current,h,t,{...this.options,duration:n,times:s,ease:i});return u.startTime=l??this.calcStartTime(),this.pendingTimeline?(c0(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:p}=this.options;a.set(zc(t,this.options,r)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:s,type:o,ease:i,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return es(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return es(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=ts(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(this._resolved){const{resolved:r}=this;if(!r)return oi;const{animation:n}=r;c0(n,t)}else this.pendingTimeline=t;return oi}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:n,duration:s,type:i,ease:o,times:a}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:l,onUpdate:c,onComplete:u,element:p,...g}=this.options,f=new hu({...g,keyframes:n,duration:s,type:i,ease:o,times:a,isGenerator:!0}),m=ts(this.time);l.setWithVelocity(f.sample(m-10).value,f.sample(m).value,10)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:n,repeatDelay:s,repeatType:i,damping:o,type:a}=t;if(!(r&&r.owner&&r.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:l}=r.owner.getProps();return x8()&&n&&v8.has(n)&&!h&&!l&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const k8={type:"spring",stiffness:500,damping:25,restSpeed:10},_8={type:"keyframes",duration:.8},w8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},C8=(e,{keyframes:t})=>t.length>2?_8:ho.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:t[1]===0?2*Math.sqrt(550):30,restSpeed:10}:k8:w8,Z_=(e,t,r,n={},s,i)=>o=>{const a=b_(n,e)||{},h=a.delay||n.delay||0;let{elapsed:l=0}=n;l-=ts(h);let c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-l,onUpdate:p=>{t.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};(function({when:p,delay:g,delayChildren:f,staggerChildren:m,staggerDirection:y,repeat:v,repeatType:x,repeatDelay:k,from:_,elapsed:w,...S}){return!!Object.keys(S).length})(a)||(c={...c,...C8(e,c)}),c.duration&&(c.duration=ts(c.duration)),c.repeatDelay&&(c.repeatDelay=ts(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let u=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(u=!0)),c.allowFlatten=!a.type&&!a.ease,u&&!i&&t.get()!==void 0){const p=zc(c.keyframes,a);if(p!==void 0)return Nn.update(()=>{c.onUpdate(p),c.onComplete()}),new d_([])}return!i&&$0.supports(c)?new $0(c):new hu(c)};function S8({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function T8(e,t,{delay:r=0,transitionOverride:n,type:s}={}){var i;let{transition:o=e.getDefaultTransition(),transitionEnd:a,...h}=t;n&&(o=n);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const u in h){const p=e.getValue(u,(i=e.latestValues[u])!==null&&i!==void 0?i:null),g=h[u];if(g===void 0||c&&S8(c,u))continue;const f={delay:r,...b_(o||{},u)};let m=!1;if(window.MotionHandoffAnimation){const v=AO(e);if(v){const x=window.MotionHandoffAnimation(v,u,Nn);x!==null&&(f.startTime=x,m=!0)}}$O(e,u),p.start(Z_(u,p,g,e.shouldReduceMotion&&x_.has(u)?{type:!1}:f,e,m));const y=p.animation;y&&l.push(y)}return a&&Promise.all(l).then(()=>{Nn.update(()=>{a&&TO(e,a)})}),l}const $8=()=>({x:{min:0,max:0},y:{min:0,max:0}}),M0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},du={};for(const e in M0)du[e]={isEnabled:t=>M0[e].some(r=>!!t[r])};const M8=typeof window<"u",Lh={current:null},A0={current:!1},A8=[...j_,Mr,po],E8=["initial","animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"];function E0(e){return function(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}(e.animate)||E8.some(t=>function(r){return typeof r=="string"||Array.isArray(r)}(e[t]))}const L0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class X_{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Fp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=ms.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Nn.render(this.render,!1,!0))};const{latestValues:h,renderState:l,onUpdate:c}=o;this.onUpdate=c,this.latestValues=h,this.baseTarget={...h},this.initialValues=r.initial?{...h}:{},this.renderState=l,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=E0(r),this.isVariantNode=function(g){return!!(E0(g)||g.variants)}(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...p}=this.scrapeMotionValuesFromProps(r,{},this);for(const g in p){const f=p[g];h[g]!==void 0&&Fr(f)&&f.set(h[g],!1)}}mount(t){this.current=t,ha.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),A0.current||function(){if(A0.current=!0,M8)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),n=()=>Lh.current=r.matches;r.addListener(n),n()}else Lh.current=!1}(),this.shouldReduceMotion=this.reducedMotionConfig!=="never"&&(this.reducedMotionConfig==="always"||Lh.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Qd(this.notifyUpdate),Qd(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=ho.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Nn.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),i(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}updateFeatures(){let t="animation";for(t in du){const r=du[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<L0.length;n++){const s=L0[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=function(n,s,i){for(const o in s){const a=s[o],h=i[o];if(Fr(a))n.addValue(o,a);else if(Fr(h))n.addValue(o,Go(a,{owner:n}));else if(h!==a)if(n.hasValue(o)){const l=n.getValue(o);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=n.getStaticValue(o);n.addValue(o,Go(l!==void 0?l:a,{owner:n}))}}for(const o in i)s[o]===void 0&&n.removeValue(o);return s}(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Go(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){var n;let s=this.latestValues[t]===void 0&&this.current?(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options):this.latestValues[t];return s!=null&&(typeof s=="string"&&(P_(s)||E_(s))?s=parseFloat(s):!(i=>A8.find(q_(i)))(s)&&po.test(r)&&(s=D_(t,r)),this.setBaseTarget(t,Fr(s)?s.get():s)),Fr(s)?s.get():s}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const o=k_(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(s=o[t])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i===void 0||Fr(i)?this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]:i}on(t,r){return this.events[t]||(this.events[t]=new l_),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class K_ extends X_{constructor(){super(...arguments),this.KeyframeResolver=W_}sortInstanceNodePosition(t,r){return 2&t.compareDocumentPosition(r)?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Fr(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}const B0=(e,t)=>t&&typeof e=="number"?t.transform(e):e,L8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},B8=co.length;function Q_(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const h in t){const l=t[h];if(ho.has(h))o=!0;else if(z_(h))s[h]=l;else{const c=B0(l,iu[h]);h.startsWith("origin")?(a=!0,i[h]=c):n[h]=c}}if(t.transform||(o||r?n.transform=function(h,l,c){let u="",p=!0;for(let g=0;g<B8;g++){const f=co[g],m=h[f];if(m===void 0)continue;let y=!0;if(y=typeof m=="number"?m===(f.startsWith("scale")?1:0):parseFloat(m)===0,!y||c){const v=B0(m,iu[f]);y||(p=!1,u+=`${L8[f]||f}(${v}) `),c&&(l[f]=v)}}return u=u.trim(),c?u=c(l,p?"":u):p&&(u="none"),u}(t,e.transform,r):n.transform&&(n.transform="none")),a){const{originX:h="50%",originY:l="50%",originZ:c=0}=i;n.transformOrigin=`${h} ${l} ${c}`}}const I8={offset:"stroke-dashoffset",array:"stroke-dasharray"},F8={offset:"strokeDashoffset",array:"strokeDasharray"};function I0(e,t,r){return typeof e=="string"?e:te.transform(t+r*e)}function D8(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:h=0,...l},c,u){if(Q_(e,l,u),c)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:p,style:g,dimensions:f}=e;p.transform&&(f&&(g.transform=p.transform),delete p.transform),f&&(s!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=function(m,y,v){return`${I0(y,m.x,m.width)} ${I0(v,m.y,m.height)}`}(f,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(p.x=t),r!==void 0&&(p.y=r),n!==void 0&&(p.scale=n),o!==void 0&&function(m,y,v=1,x=0,k=!0){m.pathLength=1;const _=k?I8:F8;m[_.offset]=te.transform(-x);const w=te.transform(y),S=te.transform(v);m[_.array]=`${w} ${S}`}(p,o,a,h,!1)}const F0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function J_(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const O8={};function R8(e,{layout:t,layoutId:r}){return ho.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!O8[e]||e==="opacity")}function tw(e,t,r){var n;const{style:s}=e,i={};for(const o in s)(Fr(s[o])||t.style&&Fr(t.style[o])||R8(o,e)||((n=r?.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[o]=s[o]);return i}class P8 extends K_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$8,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&function(t,r){try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}(this.current,this.renderState)}}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(ho.has(r)){const n=F_(r);return n&&n.default||0}return r=F0.has(r)?r:eu(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return function(s,i,o){const a=tw(s,i,o);for(const h in s)(Fr(s[h])||Fr(i[h]))&&(a[co.indexOf(h)!==-1?"attr"+h.charAt(0).toUpperCase()+h.substring(1):h]=s[h]);return a}(t,r,n)}onBindTransform(){this.current&&!this.renderState.dimensions&&Nn.postRender(this.updateDimensions)}build(t,r,n){D8(t,r,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,n,s){(function(i,o,a,h){J_(i,o,void 0,h);for(const l in o.attrs)i.setAttribute(F0.has(l)?l:eu(l),o.attrs[l])})(t,r,0,s)}mount(t){var r;this.isSVGTag=typeof(r=t.tagName)=="string"&&r.toLowerCase()==="svg",super.mount(t)}}class N8 extends K_{constructor(){super(...arguments),this.type="html",this.renderInstance=J_}readValueFromInstance(t,r){if(ho.has(r))return((s,i)=>{const{transform:o="none"}=getComputedStyle(s);return au(o,i)})(t,r);{const s=(n=t,window.getComputedStyle(n)),i=(z_(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}var n}measureInstanceViewportBox(t,{transformPagePoint:r}){return function(n,s){return function({top:i,left:o,right:a,bottom:h}){return{x:{min:o,max:a},y:{min:i,max:h}}}(function(i,o){if(!o)return i;const a=o({x:i.left,y:i.top}),h=o({x:i.right,y:i.bottom});return{top:a.y,left:a.x,bottom:h.y,right:h.x}}(n.getBoundingClientRect(),s))}(t,r)}build(t,r,n){Q_(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return tw(t,r,n)}}class z8 extends X_{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,r){if(function(n,s){return n in s}(r,t)){const n=t[r];if(typeof n=="string"||typeof n=="number")return n}}getBaseTargetFromProps(){}removeValueFromRenderState(t,r){delete r.output[t]}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}build(t,r){Object.assign(t.output,r)}renderInstance(t,{output:r}){Object.assign(t,r)}sortInstanceNodePosition(){return 0}}function U8(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},r=function(n){return n instanceof SVGElement&&n.tagName!=="svg"}(e)?new P8(t):new N8(t);r.mount(e),ha.set(e,r)}function q8(e){const t=new z8({presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}});t.mount(e),ha.set(e,t)}function ew(e,t,r,n){const s=[];if(function(i,o){return Fr(i)||typeof i=="number"||typeof i=="string"&&!tu(o)}(e,t))s.push(function(i,o,a){const h=Fr(i)?i:Go(i);return h.start(Z_("",h,o,a)),h.animation}(e,tu(t)&&t.default||t,r&&r.default||r));else{const i=v_(e,t),o=i.length;for(let a=0;a<o;a++){const h=i[a],l=h instanceof Element?U8:q8;ha.has(h)||l(h);const c=ha.get(h),u={...r};"delay"in u&&typeof u.delay=="function"&&(u.delay=u.delay(a,o)),s.push(...T8(c,{...t,transition:u},{}))}}return s}function j8(e,t,r){const n=[];return function(i,{defaultTransition:o={},...a}={},h,l){const c=o.duration||.3,u=new Map,p=new Map,g={},f=new Map;let m=0,y=0,v=0;for(let x=0;x<i.length;x++){const k=i[x];if(typeof k=="string"){f.set(k,y);continue}if(!Array.isArray(k)){f.set(k.name,i0(y,k.at,m,f));continue}let[_,w,S={}]=k;S.at!==void 0&&(y=i0(y,S.at,m,f));let T=0;const L=(F,A,B,M=0,$=0)=>{const E=xO(F),{delay:D=0,times:I=y_(E),type:N="keyframes",repeat:q,repeatType:K,repeatDelay:Z=0,...U}=A;let{ease:H=o.ease||"easeOut",duration:j}=A;const V=typeof D=="function"?D(M,$):D,rt=E.length,tt=Nc(N)?N:l?.[N];if(rt<=2&&tt){let mt=100;if(rt===2&&wO(E)){const Ct=E[1]-E[0];mt=Math.abs(Ct)}const lt={...U};j!==void 0&&(lt.duration=ts(j));const gt=pO(lt,mt,tt);H=gt.ease,j=gt.duration}j!=null||(j=c);const it=y+V;I.length===1&&I[0]===0&&(I[1]=1);const nt=I.length-E.length;if(nt>0&&m_(I,nt),E.length===1&&E.unshift(null),q){j=fO(j,q);const mt=[...E],lt=[...I];H=Array.isArray(H)?[...H]:[H];const gt=[...H];for(let Ct=0;Ct<q;Ct++){E.push(...mt);for(let St=0;St<mt.length;St++)I.push(lt[St]+(Ct+1)),H.push(St===0?"linear":f_(gt,St-1))}yO(I,q)}const ct=it+j;mO(B,E,H,I,it,ct),T=Math.max(V+j,T),v=Math.max(ct,v)};if(Fr(_))L(w,S,a0("default",o0(_,p)));else{const F=v_(_,w,0,g),A=F.length;for(let B=0;B<A;B++){const M=o0(F[B],p);for(const $ in w)L(w[$],kO(S,$),a0($,M),B,A)}}m=y,y+=T}return p.forEach((x,k)=>{for(const _ in x){const w=x[_];w.sort(vO);const S=[],T=[],L=[];for(let A=0;A<w.length;A++){const{at:B,value:M,easing:$}=w[A];S.push(M),T.push(Pc(0,v,B)),L.push($||"easeOut")}T[0]!==0&&(T.unshift(0),S.unshift(S[0]),L.unshift(bO)),T[T.length-1]!==1&&(T.push(1),S.push(null)),u.has(k)||u.set(k,{keyframes:{},transition:{}});const F=u.get(k);F.keyframes[_]=S,F.transition[_]={...o,duration:v,ease:L,times:T,...a}}}),u}(e,t,0,{spring:Mp}).forEach(({keyframes:i,transition:o},a)=>{n.push(...ew(a,i,o))}),n}const W8=function(e,t,r){let n=[];var s;return s=e,n=Array.isArray(s)&&s.some(Array.isArray)?j8(e,t):ew(e,t,r),new d_(n)};var H8=P('<span class="c-animated-number-indicator svelte-tgxfrx"><!></span>');function V8(e,t){ut(t,!0);let r=G(t,"value",3,0),n=G(t,"size",3,1),s=G(t,"maxDuration",3,500),i=G(t,"delay",3,0),o=G(t,"autoStart",3,!1),a=G(t,"skipAnimation",3,!1);const h=new h_(0),l=Ne({value:0}),c=O(()=>String(l.value).length);$s(()=>h.on("change",g=>{l.value=Math.round(g)})),_e(()=>{if(!o())return h.set(0),void(l.value=0);if(a())return h.set(r()),void(l.value=r());const g=function(m){if(m===0)return .016;const y=Math.log10(m+1)/Math.log10(1e3),v=300+(s()-300)*Math.min(y,1);return(m<20?Math.max(300,400):v)/1e3}(r()),f=W8(h,r(),{duration:g,delay:i()/1e3,ease:[.42,0,.58,1]});return()=>{f.stop()}});var u=H8(),p=R(u);ht(p,{get size(){return n()},get color(){return t.color},children:(g,f)=>{var m=st();et(()=>at(m,l.value)),b(g,m)},$$slots:{default:!0}}),et(()=>ri(u,`--digits:${d(c)??""}`)),b(e,u),pt()}let rw;function OP(e){rw=e}var G8=P('<!> <span class="c-turn-summary-item__label-container svelte-1jr8nef"><!> <span class="c-turn-summary__label svelte-1jr8nef"><!></span></span>',1),Y8=P('<span class="c-turn-summary-item__content svelte-1jr8nef"><!></span>'),Z8=P('<div class="c-turn-summary-item svelte-1jr8nef"><!></div>');function X8(e,t){ut(t,!0);const r=O(()=>J0(t.entry.value,t.entry.singularLabel,t.entry.pluralLabel)),n=rw;function s(){n?.trackEvent(U0.TURN_SUMMARY_BUTTON_CLICKED,{buttonName:t.entry.singularLabel,value:t.entry.value}),t.entry.callback&&t.entry.callback()}const i={difference:"file-diff"};var o=Z8(),a=R(o);fe(a,{get content(){return d(r)},children:(h,l)=>{{let c=O(()=>t.entry.callback?s:qs),u=O(()=>!t.entry.callback);Nr(h,{get onclick(){return d(c)},variant:"ghost",color:"neutral",size:.5,get readonly(){return d(u)},children:(p,g)=>{var f=Y8();(m=>{var y=G8(),v=W(y);{let S=O(()=>i[t.entry.icon]||t.entry.icon);vt(v,{get name(){return d(S)},size:2})}var x=Y(v,2),k=R(x);Zw(k,()=>`${t.animationResetKey}-${t.index}-${t.entry.value}`,S=>{{let T=O(()=>t.index*t.fadeInDelay*1.1);V8(S,{get value(){return t.entry.value},size:1,get autoStart(){return t.shouldStartNumbers},get delay(){return d(T)},get skipAnimation(){return t.entry.skipAnimation}})}});var _=Y(k,2),w=R(_);ht(w,{size:1,children:(S,T)=>{var L=st();et(()=>at(L,` ${d(r)??""}`)),b(S,L)},$$slots:{default:!0}}),b(m,y)})(R(f)),b(p,f)},$$slots:{default:!0}})}},$$slots:{default:!0}}),b(e,o),pt()}var K8=P('<div class="c-scroll-navigation-buttons svelte-fpyp6u"><!> <!></div>'),Q8=P('<div class="c-turn-summary__item svelte-n2atb8"><!></div>'),J8=P('<div class="c-turn-summary__list svelte-n2atb8"></div>'),tR=P("<!> <!>",1),eR=P('<div slot="header" class="c-turn-summary svelte-n2atb8"><!></div>');function rR(e,t){ut(t,!0);const r=G(t,"entries",19,()=>[]);let n=yt(!1),s=yt(void 0),i=yt(void 0);const o=O(()=>(r()||[]).filter(h=>h.value>0));let a;_e(()=>{if(d(s))return a||(a=new Cy({threshold:1})),a.once(d(s),()=>{X(n,!0)})}),uc(e,{expandable:!1,$$slots:{header:(h,l)=>{var c=eR(),u=R(c),p=f=>{var m=tR(),y=W(m);L2(y,{stretch:!0,get containerElement(){return d(i)},set containerElement(v){X(i,v,!0)},children:(v,x)=>{var k=J8();ge(k,23,()=>d(o),_=>_.singularLabel,(_,w,S)=>{var T=Q8();X8(R(T),{get entry(){return d(w)},get index(){return d(S)},animationResetKey:0,get shouldStartNumbers(){return d(n)},fadeInDelay:100}),rs(5,T,()=>P0,()=>({duration:250,x:40,delay:100*d(S)})),b(_,T)}),b(v,k)},$$slots:{default:!0}}),function(v,x){ut(x,!0);let k=G(x,"scrollableElement",3,null),_=yt(!1),w=yt(!1),S=yt(!1);function T(){if(!k())return X(w,!1),void X(S,!1);const{scrollLeft:E,scrollWidth:D,clientWidth:I}=k(),N=D-I;X(w,E>0),X(S,E<N-1)}function L(){k()?(X(_,k().scrollWidth>k().clientWidth),T()):X(_,!1)}function F(){if(!k()||!d(w))return;const E=(k().children[0]?.getBoundingClientRect().width||0)+(parseInt(getComputedStyle(k()).gap)||0);k().scrollBy({left:-E,behavior:"smooth"})}function A(){if(!k()||!d(S))return;const E=(k().children[0]?.getBoundingClientRect().width||0)+(parseInt(getComputedStyle(k()).gap)||0);k().scrollBy({left:E,behavior:"smooth"})}_e(()=>{if(k())return L(),k().addEventListener("scroll",T),()=>{k().removeEventListener("scroll",T)}}),$s(()=>{if(typeof ResizeObserver<"u"&&k()){const E=new ResizeObserver(()=>{L()});return E.observe(k()),k().parentElement&&E.observe(k().parentElement),T(),()=>{E.disconnect()}}});var B=J(),M=W(B),$=E=>{var D=K8(),I=R(D);{let q=O(()=>!d(w));de(I,{size:.5,variant:"ghost-block",color:"neutral",onclick:F,get disabled(){return d(q)},class:"c-scroll-navigation-buttons__button-left",children:(K,Z)=>{vt(K,{name:"chevron-left",size:1})},$$slots:{default:!0}})}var N=Y(I,2);{let q=O(()=>!d(S));de(N,{size:.5,variant:"ghost-block",color:"neutral",onclick:A,get disabled(){return d(q)},children:(K,Z)=>{vt(K,{name:"chevron-right",size:1})},$$slots:{default:!0}})}b(E,D)};z(M,E=>{d(_)&&E($)}),b(v,B),pt()}(Y(y,2),{get scrollableElement(){return d(i)}}),b(f,m)},g=f=>{ht(f,{size:1,color:"secondary",children:(m,y)=>{var v=st("No activity to report.");b(m,v)},$$slots:{default:!0}})};z(u,f=>{d(o).length>0&&d(n)?f(p):f(g,!1)}),Kr(c,f=>X(s,f),()=>d(s)),b(h,c)}}}),pt()}const An={PENDING_MEMORY:{SINGULAR:"Pending Memory",PLURAL:"Pending Memories"},MEMORY_CREATED:{SINGULAR:"Memory Created",PLURAL:"Memories Created"},FILE_CHANGED:{SINGULAR:"File Changed",PLURAL:"Files Changed"},FILE_EXAMINED:{SINGULAR:"File Examined",PLURAL:"Files Examined"},TOOL_USED:{SINGULAR:"Tool Used",PLURAL:"Tools Used"}},nR={threadsPanel:"ThreadsPanel",memories:"Memories"};function sR(e,t){ut(t,!0);const r=()=>Tt(h,"$enableMemoryRetrieval",n),[n,s]=se(),i=$w(),o=Kn.getFromContext(),{availableTabs:a}=o,h=je("enableMemoryRetrieval"),l=je("enableAgentTabs"),c=bs(),u=Mw;let p=O(()=>Tt(l,"$enableAgentTabs",n)&&Tt(a,"$availableTabs",n).includes(_s.agentEdits)),g=O(()=>(()=>{const k=v2(t.group)||[],_=[],w=[];let S=0,T=0;for(const L of k)r()&&u2(L)&&S++,L.type===wr.TOOL_USE&&T++,g2(L)&&_.push(L),p2(L)&&w.push(L);return{conversationMemoryCount:S,conversationToolUseCount:T,conversationStrReplaceFiles:Qp(_),conversationViewFiles:Qp(w)}})()),f=O(()=>[...r()?[{singularLabel:An.PENDING_MEMORY.SINGULAR,pluralLabel:An.PENDING_MEMORY.PLURAL,value:Tt(i,"$memories",n).length,icon:"archive",callback:()=>{r()&&c(u(nR.memories))}},{singularLabel:An.MEMORY_CREATED.SINGULAR,pluralLabel:An.MEMORY_CREATED.PLURAL,value:d(g).conversationMemoryCount,icon:"archive"}]:[],{singularLabel:An.FILE_CHANGED.SINGULAR,pluralLabel:An.FILE_CHANGED.PLURAL,value:d(g).conversationStrReplaceFiles,icon:"file-diff",callback:d(p)?()=>{d(p)&&o.setActiveTab(_s.agentEdits)}:void 0},{singularLabel:An.FILE_EXAMINED.SINGULAR,pluralLabel:An.FILE_EXAMINED.PLURAL,value:d(g).conversationViewFiles,icon:"file-search-2"},{singularLabel:An.TOOL_USED.SINGULAR,pluralLabel:An.TOOL_USED.PLURAL,value:d(g).conversationToolUseCount,icon:"wrench"}]);const m=O(()=>d(f).some(k=>k.value>0));var y=J(),v=W(y),x=k=>{rR(k,{get entries(){return d(f)}})};z(v,k=>{d(m)&&k(x)}),b(e,y),pt(),s()}function D0(e){return[ze.strReplaceEditor,ze.editFile].includes(e.tool_name)}var iR=P('<div class="l-tooluse-list svelte-t0psfi"></div>'),oR=P('<div class="l-tooluse-list svelte-t0psfi"></div>'),aR=P('<div slot="header"><div class="l-tooluse-list__container svelte-t0psfi"><div class="l-tooluse-list__container__left svelte-t0psfi"><!> <!></div> <div class="l-tooluse-list__container__right svelte-t0psfi"><!> <!></div></div></div>');function lR(e,t){ut(t,!1);const r=()=>Tt(c(),"$remoteAgentsModel",n),[n,s]=se(),i=_t(),o=_t(),a=_t();let h=G(t,"conversationModel",8),l=G(t,"toolsWebviewModel",8),c=G(t,"remoteAgentsModel",24,()=>{}),u=G(t,"requestId",8),p=G(t,"toolUseNodes",8),g=G(t,"isLastTurn",8),f=G(t,"turnIndex",8,0),m=G(t,"messageListContainer",24,()=>{});function y(B,M,$){l().approveTool(B,M.tool_use_id,M.tool_name,$,h().chatHistory.filter(E=>No(E)).map(vu),h().id)}function v(B,M){l().cancelToolRun(B,M)}function x(B,M){l().skipToolRun(B,M)}const k=ci();let _=_t(!1),w=_t(0),S=_t(0),T=_t(!1);qt(()=>(xt(u()),xt(p()),xt(h()),xt(c())),()=>{X(i,bu(u(),p(),h(),c()))}),qt(()=>xt(p()),()=>{X(o,p().filter(B=>B.tool_use!==void 0&&D0(B.tool_use)))}),qt(()=>(d(o),xt(u()),r(),xt(h()),dt),()=>{X(a,d(o).every(B=>{const M=B.tool_use,$=B.requestId??u();return(r()?.isActive?r().getToolUseState(M.tool_use_id):h().getToolUseState($,M.tool_use_id)).phase===dt.completed}))}),qt(()=>(d(a),d(_),d(T)),()=>{d(a)&&d(_)&&!d(T)&&async function(){if(d(T)||!d(_))return;let B=0,M=0;const $=p().filter(E=>E.tool_use!==void 0&&D0(E.tool_use)).filter(E=>{const D=E.tool_use,I=E.requestId??u();return(r()?.isActive?r().getToolUseState(D.tool_use_id):h().getToolUseState(I,D.tool_use_id)).phase===dt.completed});for(const E of $)try{const D=E.requestId??u(),I=await k.extensionClient?.getAgentEditChangesByRequestId(D);I&&(B+=I.totalAddedLines??0,M+=I.totalRemovedLines??0)}catch(D){console.warn("Failed to load changes for tool use:",E.tool_use?.tool_use_id,D)}X(w,B),X(S,M),X(T,!0)}()}),Ms(),pr();var L=J(),F=W(L),A=B=>{var M=J(),$=W(M),E=I=>{var N=iR();ge(N,5,()=>d(i),Re,(q,K)=>{const Z=he(()=>(d(K),Ft(()=>d(K).tool_use)));var U=J(),H=W(U),j=V=>{const rt=he(()=>(r(),xt(d(Z)),xt(h()),d(K),xt(u()),Ft(()=>r()?.isActive?r().getToolUseState(d(Z).tool_use_id):h().getToolUseState(d(K).requestId??u(),d(Z).tool_use_id))));{let tt=he(()=>(d(K),xt(u()),Ft(()=>d(K).requestId??u())));Kd(V,{get toolUse(){return d(Z)},get toolUseState(){return d(rt)},get isLastTurn(){return g()},get requestId(){return d(tt)},onToolRun:y,onToolCancel:v,onToolSkip:x,get turnIndex(){return f()},get messageListContainer(){return m()}})}};z(H,V=>{d(Z)&&V(j)}),b(q,U)}),b(I,N)},D=I=>{uc(I,{stickyHeader:!1,stickyHeaderTop:0,children:(N,q)=>{var K=oR();ge(K,5,p,Re,(Z,U)=>{const H=he(()=>(d(U),Ft(()=>d(U).tool_use)));var j=J(),V=W(j),rt=tt=>{const it=he(()=>(r(),xt(d(H)),xt(h()),d(U),xt(u()),Ft(()=>r()?.isActive?r().getToolUseState(d(H).tool_use_id):h().getToolUseState(d(U).requestId??u(),d(H).tool_use_id))));{let nt=he(()=>(d(U),xt(u()),Ft(()=>d(U).requestId??u())));Kd(tt,{get toolUse(){return d(H)},get toolUseState(){return d(it)},get isLastTurn(){return g()},get requestId(){return d(nt)},onToolRun:y,onToolCancel:v,onToolSkip:x,get turnIndex(){return f()},get messageListContainer(){return m()},isGroupListItem:!0})}};z(V,tt=>{d(H)&&tt(rt)}),b(Z,j)}),b(N,K)},$$slots:{default:!0,header:(N,q)=>{var K=aR(),Z=R(K),U=R(Z),H=R(U);Ka(H,{color:"neutral",size:1,variant:"soft",children:(it,nt)=>{var ct=st();et(()=>at(ct,(xt(p()),Ft(()=>p().length)))),b(it,ct)},$$slots:{default:!0}});var j=Y(H,2);ht(j,{size:1,weight:"medium",color:"secondary",children:(it,nt)=>{var ct=st("Tools used");b(it,ct)},$$slots:{default:!0}});var V=Y(U,2),rt=R(V);Au(rt,{get totalAddedLines(){return d(w)},get totalRemovedLines(){return d(S)}});var tt=Y(rt,2);Xw(tt,{size:.5}),Jr(Z,(it,nt)=>As?.(it,nt),()=>({onVisible:()=>X(_,!0),scrollTarget:document.body})),b(N,K)}}})};z($,I=>{d(i),Ft(()=>d(i).length===1)?I(E):I(D,!1)}),b(B,M)};z(F,B=>{d(i),Ft(()=>d(i)?.length)&&B(A)}),b(e,L),pt(),s()}var cR=P("<!> <!> <!>",1),hR=P('<div class="c-aug-msg__suggestions svelte-18c6goi"><!></div>'),dR=P('<div class="c-aug-msg__feedback svelte-18c6goi"><!></div>'),uR=P('<div class="l-turn-summary-container svelte-18c6goi"><!></div> <div class="c-aug-msg__actions-row svelte-18c6goi"><!></div> <!>',1),pR=P('<div class="c-aug-msg__footer hidden-when-empty svelte-18c6goi"><!> <!></div>'),gR=P("<div><!></div>");function RP(e,t){ut(t,!0);const r=()=>Tt(y,"$remoteAgentsModel",i),n=()=>Tt(f,"$chatModel",i),s=()=>Tt(d(_),"$conversationModel",i),[i,o]=se();let a=G(t,"turn",19,()=>{}),h=G(t,"requestId",19,()=>{}),l=G(t,"turnIndex",3,0),c=G(t,"isLastTurn",3,!1),u=G(t,"showFooter",3,!0),p=G(t,"messageListContainer",19,()=>{}),g=G(t,"group",19,()=>{});const f=me("chatModel"),m=me("toolsWebviewModel"),y=me(xs.key),v=je("showThinkingSummary"),x=je("enableGroupedTools");let k=O(()=>D2(r())),_=O(()=>n()?.currentConversationModel),w=O(()=>qw(a()));const S=Be(h()||"");_e(()=>{h()&&S.set(h())}),Qr("requestId",S);const T=Be(a()?.status);_e(()=>{a()?.status&&T.set(a().status)}),Qr("requestStatus",T);let L=yt(!1),F=O(()=>{let B=[];return B=a()&&a().status!==ur.sent&&h()&&c()&&a().structured_output_nodes&&a().structured_output_nodes.length>0?a().structured_output_nodes.find(M=>M.type===wr.SUGGESTED_QUESTIONS)?.content.split(`
`)??[]:[],B});_e(()=>{n()&&d(F).length>0&&!d(L)&&(X(L,!0),n().extensionClient.reportWebviewClientEvent(Sn.chatDisplaySuggestedQuestions))});var A=gR();{const B=$=>{var E=cR(),D=W(E),I=U=>{const H=O(()=>a().structured_output_nodes.filter(j=>j.type===wr.THINKING&&j.thinking?.summary));(function(j,V){ut(V,!0);var rt=J(),tt=W(rt),it=nt=>{var ct=_B();ge(ct,21,()=>V.nodes,Re,(mt,lt)=>{var gt=J(),Ct=W(gt),St=Lt=>{const kt=O(()=>function(Qt,ee=15){if(!Qt)return{title:"",summary:""};const $t=Qt.match(/^\s*(\*\*|__)(.+?)\1\s*\n?/);if($t)return{title:$t[2].trim(),summary:Qt.slice($t[0].length).trimStart()};const Wt=Qt.trimStart();return{title:Wt.length>ee?Wt.slice(0,ee)+"...":Wt,summary:Qt}}(d(lt).thinking?.summary)),wt=O(()=>d(kt).summary.trim().length>0);var bt=kB();const It=Qt=>{var ee=vB(),$t=W(ee),Wt=oe=>{var ne=mB(),Ae=R(ne);et(()=>at(Ae,d(kt).title)),b(oe,ne)},Jt=oe=>{var ne=yB();b(oe,ne)};z($t,oe=>{d(kt).title?oe(Wt):oe(Jt,!1)});var Vt=Y($t,2),ie=oe=>{vt(oe,{name:"chevron-right",class:"c-thinking__chevron"})};z(Vt,oe=>{d(wt)&&oe(ie)}),b(Qt,ee)};var Yt=R(bt),Xt=Qt=>{var ee=bB(),$t=R(ee),Wt=R($t);It(Wt);var Jt=Y($t,2),Vt=R(Jt),ie=R(Vt);ww(ie,{orientation:"vertical",size:4});var oe=Y(Vt,2),ne=R(oe);{let Ae=O(()=>({code:jm,codespan:Vm,link:Gm}));Oh(ne,{get renderers(){return d(Ae)},get markdown(){return d(kt).summary}})}b(Qt,ee)},Ht=Qt=>{var ee=xB(),$t=R(ee);It($t),b(Qt,ee)};z(Yt,Qt=>{d(wt)?Qt(Xt):Qt(Ht,!1)}),b(Lt,bt)};z(Ct,Lt=>{d(lt).thinking?.summary&&Lt(St)}),b(mt,gt)}),b(nt,ct)};z(tt,nt=>{V.nodes.length>0&&nt(it)}),b(j,rt),pt()})(U,{get nodes(){return d(H)}})};z(D,U=>{s()&&a()&&n()&&h()&&a().structured_output_nodes&&Tt(v,"$showThinkingSummary",i)&&U(I)});var N=Y(D,2),q=U=>{{let H=O(()=>({code:jm,codespan:Vm,link:Gm}));Oh(U,{get renderers(){return d(H)},get markdown(){return t.markdown}})}};z(N,U=>{t.markdown.trim().length>0&&U(q)});var K=Y(N,2),Z=U=>{const H=O(()=>a().structured_output_nodes.filter(tt=>tt.type===wr.TOOL_USE));var j=J(),V=W(j),rt=tt=>{var it=J(),nt=W(it),ct=lt=>{lR(lt,{get requestId(){return h()},get toolsWebviewModel(){return m},get remoteAgentsModel(){return y},get conversationModel(){return s()},get toolUseNodes(){return d(H)},get isLastTurn(){return c()},get turnIndex(){return l()},get messageListContainer(){return p()}})},mt=lt=>{(function(gt,Ct){ut(Ct,!0);const St=()=>Tt(wt(),"$remoteAgentsModel",Lt),[Lt,kt]=se();let wt=G(Ct,"remoteAgentsModel",19,()=>{}),bt=G(Ct,"turnIndex",3,0),It=G(Ct,"messageListContainer",19,()=>{});function Yt(Jt,Vt,ie){Ct.toolsWebviewModel.approveTool(Jt,Vt.tool_use_id,Vt.tool_name,ie,Ct.conversationModel.chatHistory.filter(oe=>No(oe)).map(vu),Ct.conversationModel.id)}function Xt(Jt,Vt){Ct.toolsWebviewModel.cancelToolRun(Jt,Vt)}function Ht(Jt,Vt){Ct.toolsWebviewModel.skipToolRun(Jt,Vt)}const Qt=O(()=>bu(Ct.requestId,Ct.toolUseNodes,Ct.conversationModel,wt()));var ee=J(),$t=W(ee),Wt=Jt=>{var Vt=BD();ge(Vt,21,()=>d(Qt),Re,(ie,oe)=>{const ne=O(()=>d(oe).tool_use);var Ae=J(),er=W(Ae),Ke=We=>{const rr=O(()=>St()?.isActive?St().getToolUseState(d(ne).tool_use_id):Ct.conversationModel.getToolUseState(Ct.requestId,d(ne).tool_use_id));Kd(We,{get toolUse(){return d(ne)},get toolUseState(){return d(rr)},get isLastTurn(){return Ct.isLastTurn},get requestId(){return Ct.requestId},onToolRun:Yt,onToolCancel:Xt,onToolSkip:Ht,get turnIndex(){return bt()},get messageListContainer(){return It()},isGroupListItem:!0})};z(er,We=>{d(ne)&&We(Ke)}),b(ie,Ae)}),b(Jt,Vt)};z($t,Jt=>{Ct.toolUseNodes!==void 0&&Ct.toolUseNodes.length>0&&Jt(Wt)}),b(gt,ee),pt(),kt()})(lt,{get requestId(){return h()},get toolsWebviewModel(){return m},get remoteAgentsModel(){return y},get conversationModel(){return s()},get toolUseNodes(){return d(H)},get isLastTurn(){return c()},get turnIndex(){return l()},get messageListContainer(){return p()}})};z(nt,lt=>{Tt(x,"$enableGroupedTools",i)?lt(ct):lt(mt,!1)}),b(tt,it)};z(V,tt=>{d(H).length>0&&m&&tt(rt)}),b(U,j)};z(K,U=>{s()&&a()&&n()&&h()&&a().structured_output_nodes&&U(Z)}),b($,E)},M=$=>{var E=pR(),D=R(E),I=K=>{var Z=hR(),U=R(Z);{let H=O(()=>({questionsLoaded:!0,questions:d(F),status:a().status,request_message:a().request_message,request_id:a().request_id,chatItemType:V0.summaryResponse}));OB(U,{get conversationModel(){return s()},get turn(){return d(H)},showIntroText:!1})}b(K,Z)};z(D,K=>{s()&&a()&&d(F).length>0&&K(I)});var N=Y(D,2),q=K=>{var Z=uR(),U=W(Z);sR(R(U),{get group(){return g()}});var H=Y(U,2),j=R(H),V=nt=>{{let ct=O(()=>`turn-summary-${a()?.request_id}`);Iu(nt,{get intersectionId(){return d(ct)},estimatedHeight:()=>20,children:(mt,lt)=>{var gt=dR(),Ct=R(gt);{let St=O(()=>g()?()=>y2(g()):void 0);IB(Ct,{get requestId(){return h()},get getResponseText(){return d(St)},feedbackMetadata:(Lt,kt)=>{let wt=Xa.chat;return r()?.isActive?wt=Xa.remoteAgent:Aw(s())&&(wt=Xa.agent),{chatMode:wt,note:kt||""}}})}rs(3,gt,()=>mu,()=>({duration:200})),b(mt,gt)},$$slots:{default:!0}})}},rt=nt=>{rO(nt,{get turn(){return a()},get isLastTurn(){return c()}})};z(j,nt=>{a()&&s()&&n()&&[ur.success,ur.failed,ur.cancelled].includes(a().status)&&h()?nt(V):nt(rt,!1)});var tt=Y(H,2),it=nt=>{RD(nt,{get turnIndex(){return l()},get isLastTurn(){return c()}})};z(tt,nt=>{d(k).doShowTurnSelector&&nt(it)}),b(K,Z)};z(N,K=>{u()&&d(w)&&K(q)}),b($,E)};JD(R(A),{isAugment:!0,content:B,footer:M,$$slots:{content:!0,footer:!0}})}b(e,A),pt(),o()}export{CP as $,gP as A,jo as B,On as C,iT as D,S$ as E,lp as F,Ar as G,Vy as H,k5 as I,o5 as J,pM as K,Lg as L,nM as M,vf as N,yf as O,wP as P,vP as Q,kP as R,xP as S,mP as T,re as U,vi as V,Vu as W,_P as X,yP as Y,SP as Z,C as _,b$ as a,Zr as a$,bP as a0,UT as a1,to as a2,uP as a3,Tc as a4,TP as a5,i$ as a6,Ou as a7,jg as a8,aM as a9,zt as aA,AP as aB,iE as aC,tE as aD,JA as aE,hA as aF,sM as aG,dP as aH,_a as aI,lA as aJ,aA as aK,RP as aL,CC as aM,py as aN,pc as aO,gc as aP,Sl as aQ,oy as aR,ay as aS,bC as aT,ju as aU,ds as aV,lf as aW,E3 as aX,Jo as aY,Nt as aZ,_b as a_,yd as aa,x5 as ab,p$ as ac,va as ad,Dt as ae,jt as af,ev as ag,IA as ah,Sk as ai,LP as aj,l5 as ak,gr as al,Es as am,rp as an,Qb as ao,pi as ap,Mb as aq,_C as ar,eS as as,pC as at,Su as au,Sg as av,wE as aw,EP as ax,BP as ay,MP as az,v$ as b,QR as b$,M3 as b0,nh as b1,Kg as b2,Ho as b3,pv as b4,fP as b5,sT as b6,fC as b7,kC as b8,tS as b9,KR as bA,Kp as bB,J0 as bC,L2 as bD,b2 as bE,Uh as bF,XR as bG,k2 as bH,O2 as bI,Ja as bJ,JR as bK,Fn as bL,ig as bM,YR as bN,D2 as bO,Au as bP,eg as bQ,uS as bR,ui as bS,Kn as bT,Jp as bU,_s as bV,ae as bW,nP as bX,aS as bY,sP as bZ,Eu as b_,Tu as ba,AC as bb,sS as bc,LC as bd,FC as be,ya as bf,$l as bg,xC as bh,gy as bi,KC as bj,QC as bk,Rs as bl,gg as bm,dC as bn,$u as bo,HC as bp,JC as bq,wi as br,us as bs,Cg as bt,Mu as bu,ly as bv,qs as bw,Vh as bx,qh as by,on as bz,Oe as c,Di as c0,F2 as c1,Xc as c2,Dn as c3,aP as c4,Tg as c5,PS as c6,Zh as c7,tl as c8,lP as c9,DP as cA,Ph as cB,nR as cC,SC as cD,fc as cE,rP as ca,oP as cb,Ml as cc,Z0 as cd,X2 as ce,Wn as cf,UD as cg,tP as ch,eP as ci,iy as cj,JD as ck,y6 as cl,GR as cm,Gm as cn,Jk as co,As as cp,hP as cq,cP as cr,YD as cs,OB as ct,Iu as cu,Y0 as cv,ey as cw,ZR as cx,OP as cy,iP as cz,we as d,tv as e,hr as f,k$ as g,ns as h,fn as i,u5 as j,oo as k,ft as l,Eb as m,ba as n,pP as o,FP as p,_$ as q,IP as r,x$ as s,w$ as t,Cn as u,a5 as v,C5 as w,XA as x,$P as y,y$ as z};
//# sourceMappingURL=AugmentMessage-BHgnxRkx.js.map
