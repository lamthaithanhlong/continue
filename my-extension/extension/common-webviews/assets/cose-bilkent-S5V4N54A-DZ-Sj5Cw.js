import{_ as X,l as B,d as gt}from"./AugmentMessage-BHgnxRkx.js";import{c as et}from"./cytoscape.esm-B0joLj6_.js";import{g as ut}from"./index-BuNY6jLF.js";import"./TextAugment-CCgoKCVh.js";import"./index-B9uIMiyK.js";import"./preload-helper-iZIsTGZK.js";import"./await-Bft3-TRy.js";import"./index-B4NDmpYR.js";import"./IconButtonAugment-CsdawHyK.js";/* empty css                                                */import"./Store-CzuxPCq8.js";import"./CardAugment-Bqwu5ahx.js";import"./focusTrapStack-9JCo5vKi.js";import"./Chevron-Cl2ZClCm.js";import"./BaseTextInput-CKEk7GUD.js";import"./message-broker-CppRv-qk.js";import"./index-Bz1AJAWu.js";import"./chat-model-DaVfYv7o.js";import"./file-type-utils-CBkYZ4gj.js";import"./CalloutAugment-BUb-HAQ6.js";import"./types-DGsjtdxm.js";import"./chat-model-context-DwFUhpQk.js";import"./Markdown-F1hzawoT.js";import"./CollapseButtonAugment-CdECN-QQ.js";import"./toggleHighContrast-BIKVVoPO.js";import"./ButtonAugment-dm8Gq3Cq.js";import"./Filespan-DQTy5qup.js";import"./OpenFileButton-DcM9qoQQ.js";import"./index-Czcl53hR.js";import"./remote-agents-client-3ykFyqEs.js";import"./SuccessfulButton-CqblPP5m.js";import"./CopyButton-CYoKSKPU.js";import"./LanguageIcon-BRHvdy0u.js";import"./keypress-fD7XHdyk.js";import"./TextAreaAugment-Pjr5jpcU.js";import"./partner-mcp-utils-8KSbNsEE.js";import"./augment-logo-CnRinIIJ.js";import"./utils-BOGwHecm.js";try{H=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(z=new H.Error().stack)&&(H._sentryDebugIds=H._sentryDebugIds||{},H._sentryDebugIds[z]="5ec9dcd5-4112-41a6-a2aa-253b3f3d486a",H._sentryDebugIdIdentifier="sentry-dbid-5ec9dcd5-4112-41a6-a2aa-253b3f3d486a")}catch{}var H,z,Z,Q={exports:{}},W={exports:{}},V={exports:{}};V.exports;function ct(){return Z||(Z=1,R=function(){return function(L){var _={};function u(e){if(_[e])return _[e].exports;var t=_[e]={i:e,l:!1,exports:{}};return L[e].call(t.exports,t,t.exports,u),t.l=!0,t.exports}return u.m=L,u.c=_,u.i=function(e){return e},u.d=function(e,t,o){u.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u(u.s=26)}([function(L,_,u){function e(){}e.QUALITY=1,e.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,e.DEFAULT_INCREMENTAL=!1,e.DEFAULT_ANIMATION_ON_LAYOUT=!0,e.DEFAULT_ANIMATION_DURING_LAYOUT=!1,e.DEFAULT_ANIMATION_PERIOD=50,e.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,e.DEFAULT_GRAPH_MARGIN=15,e.NODE_DIMENSIONS_INCLUDE_LABELS=!1,e.SIMPLE_NODE_SIZE=40,e.SIMPLE_NODE_HALF_SIZE=e.SIMPLE_NODE_SIZE/2,e.EMPTY_COMPOUND_NODE_SIZE=40,e.MIN_EDGE_LENGTH=1,e.WORLD_BOUNDARY=1e6,e.INITIAL_WORLD_BOUNDARY=e.WORLD_BOUNDARY/1e3,e.WORLD_CENTER_X=1200,e.WORLD_CENTER_Y=900,L.exports=e},function(L,_,u){var e=u(2),t=u(8),o=u(9);function n(i,h,a){e.call(this,a),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=a,this.bendpoints=[],this.source=i,this.target=h}for(var r in n.prototype=Object.create(e.prototype),e)n[r]=e[r];n.prototype.getSource=function(){return this.source},n.prototype.getTarget=function(){return this.target},n.prototype.isInterGraph=function(){return this.isInterGraph},n.prototype.getLength=function(){return this.length},n.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},n.prototype.getBendpoints=function(){return this.bendpoints},n.prototype.getLca=function(){return this.lca},n.prototype.getSourceInLca=function(){return this.sourceInLca},n.prototype.getTargetInLca=function(){return this.targetInLca},n.prototype.getOtherEnd=function(i){if(this.source===i)return this.target;if(this.target===i)return this.source;throw"Node is not incident with this edge"},n.prototype.getOtherEndInGraph=function(i,h){for(var a=this.getOtherEnd(i),g=h.getGraphManager().getRoot();;){if(a.getOwner()==h)return a;if(a.getOwner()==g)break;a=a.getOwner().getParent()}return null},n.prototype.updateLength=function(){var i=new Array(4);this.isOverlapingSourceAndTarget=t.getIntersection(this.target.getRect(),this.source.getRect(),i),this.isOverlapingSourceAndTarget||(this.lengthX=i[0]-i[2],this.lengthY=i[1]-i[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},n.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},L.exports=n},function(L,_,u){L.exports=function(e){this.vGraphObject=e}},function(L,_,u){var e=u(2),t=u(10),o=u(13),n=u(0),r=u(16),i=u(4);function h(g,p,l,f){l==null&&f==null&&(f=p),e.call(this,f),g.graphManager!=null&&(g=g.graphManager),this.estimatedSize=t.MIN_VALUE,this.inclusionTreeDepth=t.MAX_VALUE,this.vGraphObject=f,this.edges=[],this.graphManager=g,this.rect=l!=null&&p!=null?new o(p.x,p.y,l.width,l.height):new o}for(var a in h.prototype=Object.create(e.prototype),e)h[a]=e[a];h.prototype.getEdges=function(){return this.edges},h.prototype.getChild=function(){return this.child},h.prototype.getOwner=function(){return this.owner},h.prototype.getWidth=function(){return this.rect.width},h.prototype.setWidth=function(g){this.rect.width=g},h.prototype.getHeight=function(){return this.rect.height},h.prototype.setHeight=function(g){this.rect.height=g},h.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},h.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},h.prototype.getCenter=function(){return new i(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},h.prototype.getLocation=function(){return new i(this.rect.x,this.rect.y)},h.prototype.getRect=function(){return this.rect},h.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},h.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},h.prototype.setRect=function(g,p){this.rect.x=g.x,this.rect.y=g.y,this.rect.width=p.width,this.rect.height=p.height},h.prototype.setCenter=function(g,p){this.rect.x=g-this.rect.width/2,this.rect.y=p-this.rect.height/2},h.prototype.setLocation=function(g,p){this.rect.x=g,this.rect.y=p},h.prototype.moveBy=function(g,p){this.rect.x+=g,this.rect.y+=p},h.prototype.getEdgeListToNode=function(g){var p=[],l=this;return l.edges.forEach(function(f){if(f.target==g){if(f.source!=l)throw"Incorrect edge source!";p.push(f)}}),p},h.prototype.getEdgesBetween=function(g){var p=[],l=this;return l.edges.forEach(function(f){if(f.source!=l&&f.target!=l)throw"Incorrect edge source and/or target";f.target!=g&&f.source!=g||p.push(f)}),p},h.prototype.getNeighborsList=function(){var g=new Set,p=this;return p.edges.forEach(function(l){if(l.source==p)g.add(l.target);else{if(l.target!=p)throw"Incorrect incidency!";g.add(l.source)}}),g},h.prototype.withChildren=function(){var g=new Set;if(g.add(this),this.child!=null)for(var p=this.child.getNodes(),l=0;l<p.length;l++)p[l].withChildren().forEach(function(f){g.add(f)});return g},h.prototype.getNoOfChildren=function(){var g=0;if(this.child==null)g=1;else for(var p=this.child.getNodes(),l=0;l<p.length;l++)g+=p[l].getNoOfChildren();return g==0&&(g=1),g},h.prototype.getEstimatedSize=function(){if(this.estimatedSize==t.MIN_VALUE)throw"assert failed";return this.estimatedSize},h.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},h.prototype.scatter=function(){var g,p,l=-n.INITIAL_WORLD_BOUNDARY,f=n.INITIAL_WORLD_BOUNDARY;g=n.WORLD_CENTER_X+r.nextDouble()*(f-l)+l;var A=-n.INITIAL_WORLD_BOUNDARY,N=n.INITIAL_WORLD_BOUNDARY;p=n.WORLD_CENTER_Y+r.nextDouble()*(N-A)+A,this.rect.x=g,this.rect.y=p},h.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var g=this.getChild();if(g.updateBounds(!0),this.rect.x=g.getLeft(),this.rect.y=g.getTop(),this.setWidth(g.getRight()-g.getLeft()),this.setHeight(g.getBottom()-g.getTop()),n.NODE_DIMENSIONS_INCLUDE_LABELS){var p=g.getRight()-g.getLeft(),l=g.getBottom()-g.getTop();this.labelWidth>p&&(this.rect.x-=(this.labelWidth-p)/2,this.setWidth(this.labelWidth)),this.labelHeight>l&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-l)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-l),this.setHeight(this.labelHeight))}}},h.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==t.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},h.prototype.transform=function(g){var p=this.rect.x;p>n.WORLD_BOUNDARY?p=n.WORLD_BOUNDARY:p<-n.WORLD_BOUNDARY&&(p=-n.WORLD_BOUNDARY);var l=this.rect.y;l>n.WORLD_BOUNDARY?l=n.WORLD_BOUNDARY:l<-n.WORLD_BOUNDARY&&(l=-n.WORLD_BOUNDARY);var f=new i(p,l),A=g.inverseTransformPoint(f);this.setLocation(A.x,A.y)},h.prototype.getLeft=function(){return this.rect.x},h.prototype.getRight=function(){return this.rect.x+this.rect.width},h.prototype.getTop=function(){return this.rect.y},h.prototype.getBottom=function(){return this.rect.y+this.rect.height},h.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},L.exports=h},function(L,_,u){function e(t,o){t==null&&o==null?(this.x=0,this.y=0):(this.x=t,this.y=o)}e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.setX=function(t){this.x=t},e.prototype.setY=function(t){this.y=t},e.prototype.getDifference=function(t){return new DimensionD(this.x-t.x,this.y-t.y)},e.prototype.getCopy=function(){return new e(this.x,this.y)},e.prototype.translate=function(t){return this.x+=t.width,this.y+=t.height,this},L.exports=e},function(L,_,u){var e=u(2),t=u(10),o=u(0),n=u(6),r=u(3),i=u(1),h=u(13),a=u(12),g=u(11);function p(f,A,N){e.call(this,N),this.estimatedSize=t.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=f,A!=null&&A instanceof n?this.graphManager=A:A!=null&&A instanceof Layout&&(this.graphManager=A.graphManager)}for(var l in p.prototype=Object.create(e.prototype),e)p[l]=e[l];p.prototype.getNodes=function(){return this.nodes},p.prototype.getEdges=function(){return this.edges},p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getParent=function(){return this.parent},p.prototype.getLeft=function(){return this.left},p.prototype.getRight=function(){return this.right},p.prototype.getTop=function(){return this.top},p.prototype.getBottom=function(){return this.bottom},p.prototype.isConnected=function(){return this.isConnected},p.prototype.add=function(f,A,N){if(A==null&&N==null){var v=f;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(v)>-1)throw"Node already in graph!";return v.owner=this,this.getNodes().push(v),v}var y=f;if(!(this.getNodes().indexOf(A)>-1&&this.getNodes().indexOf(N)>-1))throw"Source or target not in graph!";if(A.owner!=N.owner||A.owner!=this)throw"Both owners must be this graph!";return A.owner!=N.owner?null:(y.source=A,y.target=N,y.isInterGraph=!1,this.getEdges().push(y),A.edges.push(y),N!=A&&N.edges.push(y),y)},p.prototype.remove=function(f){var A=f;if(f instanceof r){if(A==null)throw"Node is null!";if(A.owner==null||A.owner!=this)throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var N=A.edges.slice(),v=N.length,y=0;y<v;y++)(m=N[y]).isInterGraph?this.graphManager.remove(m):m.source.owner.remove(m);if((s=this.nodes.indexOf(A))==-1)throw"Node not in owner node list!";this.nodes.splice(s,1)}else if(f instanceof i){var m;if((m=f)==null)throw"Edge is null!";if(m.source==null||m.target==null)throw"Source and/or target is null!";if(m.source.owner==null||m.target.owner==null||m.source.owner!=this||m.target.owner!=this)throw"Source and/or target owner is invalid!";var s,d=m.source.edges.indexOf(m),c=m.target.edges.indexOf(m);if(!(d>-1&&c>-1))throw"Source and/or target doesn't know this edge!";if(m.source.edges.splice(d,1),m.target!=m.source&&m.target.edges.splice(c,1),(s=m.source.owner.getEdges().indexOf(m))==-1)throw"Not in owner's edge list!";m.source.owner.getEdges().splice(s,1)}},p.prototype.updateLeftTop=function(){for(var f,A,N,v=t.MAX_VALUE,y=t.MAX_VALUE,m=this.getNodes(),s=m.length,d=0;d<s;d++){var c=m[d];v>(f=c.getTop())&&(v=f),y>(A=c.getLeft())&&(y=A)}return v==t.MAX_VALUE?null:(N=m[0].getParent().paddingLeft!=null?m[0].getParent().paddingLeft:this.margin,this.left=y-N,this.top=v-N,new a(this.left,this.top))},p.prototype.updateBounds=function(f){for(var A,N,v,y,m,s=t.MAX_VALUE,d=-t.MAX_VALUE,c=t.MAX_VALUE,E=-t.MAX_VALUE,T=this.nodes,O=T.length,I=0;I<O;I++){var w=T[I];f&&w.child!=null&&w.updateBounds(),s>(A=w.getLeft())&&(s=A),d<(N=w.getRight())&&(d=N),c>(v=w.getTop())&&(c=v),E<(y=w.getBottom())&&(E=y)}var D=new h(s,c,d-s,E-c);s==t.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),m=T[0].getParent().paddingLeft!=null?T[0].getParent().paddingLeft:this.margin,this.left=D.x-m,this.right=D.x+D.width+m,this.top=D.y-m,this.bottom=D.y+D.height+m},p.calculateBounds=function(f){for(var A,N,v,y,m=t.MAX_VALUE,s=-t.MAX_VALUE,d=t.MAX_VALUE,c=-t.MAX_VALUE,E=f.length,T=0;T<E;T++){var O=f[T];m>(A=O.getLeft())&&(m=A),s<(N=O.getRight())&&(s=N),d>(v=O.getTop())&&(d=v),c<(y=O.getBottom())&&(c=y)}return new h(m,d,s-m,c-d)},p.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==t.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){for(var f=0,A=this.nodes,N=A.length,v=0;v<N;v++)f+=A[v].calcEstimatedSize();return this.estimatedSize=f==0?o.EMPTY_COMPOUND_NODE_SIZE:f/Math.sqrt(this.nodes.length),this.estimatedSize},p.prototype.updateConnected=function(){var f=this;if(this.nodes.length!=0){var A,N,v=new g,y=new Set,m=this.nodes[0];for(m.withChildren().forEach(function(E){v.push(E),y.add(E)});v.length!==0;)for(var s=(A=(m=v.shift()).getEdges()).length,d=0;d<s;d++)(N=A[d].getOtherEndInGraph(m,this))==null||y.has(N)||N.withChildren().forEach(function(E){v.push(E),y.add(E)});if(this.isConnected=!1,y.size>=this.nodes.length){var c=0;y.forEach(function(E){E.owner==f&&c++}),c==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},L.exports=p},function(L,_,u){var e,t=u(1);function o(n){e=u(5),this.layout=n,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var n=this.layout.newGraph(),r=this.layout.newNode(null),i=this.add(n,r);return this.setRootGraph(i),this.rootGraph},o.prototype.add=function(n,r,i,h,a){if(i==null&&h==null&&a==null){if(n==null)throw"Graph is null!";if(r==null)throw"Parent node is null!";if(this.graphs.indexOf(n)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(n),n.parent!=null)throw"Already has a parent!";if(r.child!=null)throw"Already has a child!";return n.parent=r,r.child=n,n}a=i,i=n;var g=(h=r).getOwner(),p=a.getOwner();if(g==null||g.getGraphManager()!=this)throw"Source not in this graph mgr!";if(p==null||p.getGraphManager()!=this)throw"Target not in this graph mgr!";if(g==p)return i.isInterGraph=!1,g.add(i,h,a);if(i.isInterGraph=!0,i.source=h,i.target=a,this.edges.indexOf(i)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(i),i.source==null||i.target==null)throw"Edge source and/or target is null!";if(i.source.edges.indexOf(i)!=-1||i.target.edges.indexOf(i)!=-1)throw"Edge already in source and/or target incidency list!";return i.source.edges.push(i),i.target.edges.push(i),i},o.prototype.remove=function(n){if(n instanceof e){var r=n;if(r.getGraphManager()!=this)throw"Graph not in this graph mgr";if(r!=this.rootGraph&&(r.parent==null||r.parent.graphManager!=this))throw"Invalid parent node!";for(var i,h=[],a=(h=h.concat(r.getEdges())).length,g=0;g<a;g++)i=h[g],r.remove(i);var p,l=[];for(a=(l=l.concat(r.getNodes())).length,g=0;g<a;g++)p=l[g],r.remove(p);r==this.rootGraph&&this.setRootGraph(null);var f=this.graphs.indexOf(r);this.graphs.splice(f,1),r.parent=null}else if(n instanceof t){if((i=n)==null)throw"Edge is null!";if(!i.isInterGraph)throw"Not an inter-graph edge!";if(i.source==null||i.target==null)throw"Source and/or target is null!";if(i.source.edges.indexOf(i)==-1||i.target.edges.indexOf(i)==-1)throw"Source and/or target doesn't know this edge!";if(f=i.source.edges.indexOf(i),i.source.edges.splice(f,1),f=i.target.edges.indexOf(i),i.target.edges.splice(f,1),i.source.owner==null||i.source.owner.getGraphManager()==null)throw"Edge owner graph or owner graph manager is null!";if(i.source.owner.getGraphManager().edges.indexOf(i)==-1)throw"Not in owner graph manager's edge list!";f=i.source.owner.getGraphManager().edges.indexOf(i),i.source.owner.getGraphManager().edges.splice(f,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(this.allNodes==null){for(var n=[],r=this.getGraphs(),i=r.length,h=0;h<i;h++)n=n.concat(r[h].getNodes());this.allNodes=n}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(this.allEdges==null){var n=[],r=this.getGraphs();r.length;for(var i=0;i<r.length;i++)n=n.concat(r[i].getEdges());n=n.concat(this.edges),this.allEdges=n}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(n){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=n},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(n){if(n.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=n,n.parent==null&&(n.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(n,r){if(n==null||r==null)throw"assert failed";if(n==r)return!0;for(var i,h=n.getOwner();(i=h.getParent())!=null;){if(i==r)return!0;if((h=i.getOwner())==null)break}for(h=r.getOwner();(i=h.getParent())!=null;){if(i==n)return!0;if((h=i.getOwner())==null)break}return!1},o.prototype.calcLowestCommonAncestors=function(){for(var n,r,i,h,a,g=this.getAllEdges(),p=g.length,l=0;l<p;l++)if(r=(n=g[l]).source,i=n.target,n.lca=null,n.sourceInLca=r,n.targetInLca=i,r!=i){for(h=r.getOwner();n.lca==null;){for(n.targetInLca=i,a=i.getOwner();n.lca==null;){if(a==h){n.lca=a;break}if(a==this.rootGraph)break;if(n.lca!=null)throw"assert failed";n.targetInLca=a.getParent(),a=n.targetInLca.getOwner()}if(h==this.rootGraph)break;n.lca==null&&(n.sourceInLca=h.getParent(),h=n.sourceInLca.getOwner())}if(n.lca==null)throw"assert failed"}else n.lca=r.getOwner()},o.prototype.calcLowestCommonAncestor=function(n,r){if(n==r)return n.getOwner();for(var i=n.getOwner();i!=null;){for(var h=r.getOwner();h!=null;){if(h==i)return h;h=h.getParent().getOwner()}i=i.getParent().getOwner()}return i},o.prototype.calcInclusionTreeDepths=function(n,r){var i;n==null&&r==null&&(n=this.rootGraph,r=1);for(var h=n.getNodes(),a=h.length,g=0;g<a;g++)(i=h[g]).inclusionTreeDepth=r,i.child!=null&&this.calcInclusionTreeDepths(i.child,r+1)},o.prototype.includesInvalidEdge=function(){for(var n,r=this.edges.length,i=0;i<r;i++)if(n=this.edges[i],this.isOneAncestorOfOther(n.source,n.target))return!0;return!1},L.exports=o},function(L,_,u){var e=u(0);function t(){}for(var o in e)t[o]=e[o];t.MAX_ITERATIONS=2500,t.DEFAULT_EDGE_LENGTH=50,t.DEFAULT_SPRING_STRENGTH=.45,t.DEFAULT_REPULSION_STRENGTH=4500,t.DEFAULT_GRAVITY_STRENGTH=.4,t.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,t.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,t.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,t.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,t.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,t.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,t.COOLING_ADAPTATION_FACTOR=.33,t.ADAPTATION_LOWER_NODE_LIMIT=1e3,t.ADAPTATION_UPPER_NODE_LIMIT=5e3,t.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,t.MAX_NODE_DISPLACEMENT=3*t.MAX_NODE_DISPLACEMENT_INCREMENTAL,t.MIN_REPULSION_DIST=t.DEFAULT_EDGE_LENGTH/10,t.CONVERGENCE_CHECK_PERIOD=100,t.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,t.MIN_EDGE_LENGTH=1,t.GRID_CALCULATION_CHECK_PERIOD=10,L.exports=t},function(L,_,u){var e=u(12);function t(){}t.calcSeparationAmount=function(o,n,r,i){if(!o.intersects(n))throw"assert failed";var h=new Array(2);this.decideDirectionsForOverlappingNodes(o,n,h),r[0]=Math.min(o.getRight(),n.getRight())-Math.max(o.x,n.x),r[1]=Math.min(o.getBottom(),n.getBottom())-Math.max(o.y,n.y),o.getX()<=n.getX()&&o.getRight()>=n.getRight()?r[0]+=Math.min(n.getX()-o.getX(),o.getRight()-n.getRight()):n.getX()<=o.getX()&&n.getRight()>=o.getRight()&&(r[0]+=Math.min(o.getX()-n.getX(),n.getRight()-o.getRight())),o.getY()<=n.getY()&&o.getBottom()>=n.getBottom()?r[1]+=Math.min(n.getY()-o.getY(),o.getBottom()-n.getBottom()):n.getY()<=o.getY()&&n.getBottom()>=o.getBottom()&&(r[1]+=Math.min(o.getY()-n.getY(),n.getBottom()-o.getBottom()));var a=Math.abs((n.getCenterY()-o.getCenterY())/(n.getCenterX()-o.getCenterX()));n.getCenterY()===o.getCenterY()&&n.getCenterX()===o.getCenterX()&&(a=1);var g=a*r[0],p=r[1]/a;r[0]<p?p=r[0]:g=r[1],r[0]=-1*h[0]*(p/2+i),r[1]=-1*h[1]*(g/2+i)},t.decideDirectionsForOverlappingNodes=function(o,n,r){o.getCenterX()<n.getCenterX()?r[0]=-1:r[0]=1,o.getCenterY()<n.getCenterY()?r[1]=-1:r[1]=1},t.getIntersection2=function(o,n,r){var i=o.getCenterX(),h=o.getCenterY(),a=n.getCenterX(),g=n.getCenterY();if(o.intersects(n))return r[0]=i,r[1]=h,r[2]=a,r[3]=g,!0;var p=o.getX(),l=o.getY(),f=o.getRight(),A=o.getX(),N=o.getBottom(),v=o.getRight(),y=o.getWidthHalf(),m=o.getHeightHalf(),s=n.getX(),d=n.getY(),c=n.getRight(),E=n.getX(),T=n.getBottom(),O=n.getRight(),I=n.getWidthHalf(),w=n.getHeightHalf(),D=!1,C=!1;if(i===a){if(h>g)return r[0]=i,r[1]=l,r[2]=a,r[3]=T,!1;if(h<g)return r[0]=i,r[1]=N,r[2]=a,r[3]=d,!1}else if(h===g){if(i>a)return r[0]=p,r[1]=h,r[2]=c,r[3]=g,!1;if(i<a)return r[0]=f,r[1]=h,r[2]=s,r[3]=g,!1}else{var M=o.height/o.width,F=n.height/n.width,G=(g-h)/(a-i),x=void 0,b=void 0,P=void 0,S=void 0,U=void 0,Y=void 0;if(-M===G?i>a?(r[0]=A,r[1]=N,D=!0):(r[0]=f,r[1]=l,D=!0):M===G&&(i>a?(r[0]=p,r[1]=l,D=!0):(r[0]=v,r[1]=N,D=!0)),-F===G?a>i?(r[2]=E,r[3]=T,C=!0):(r[2]=c,r[3]=d,C=!0):F===G&&(a>i?(r[2]=s,r[3]=d,C=!0):(r[2]=O,r[3]=T,C=!0)),D&&C)return!1;if(i>a?h>g?(x=this.getCardinalDirection(M,G,4),b=this.getCardinalDirection(F,G,2)):(x=this.getCardinalDirection(-M,G,3),b=this.getCardinalDirection(-F,G,1)):h>g?(x=this.getCardinalDirection(-M,G,1),b=this.getCardinalDirection(-F,G,3)):(x=this.getCardinalDirection(M,G,2),b=this.getCardinalDirection(F,G,4)),!D)switch(x){case 1:S=l,P=i+-m/G,r[0]=P,r[1]=S;break;case 2:P=v,S=h+y*G,r[0]=P,r[1]=S;break;case 3:S=N,P=i+m/G,r[0]=P,r[1]=S;break;case 4:P=A,S=h+-y*G,r[0]=P,r[1]=S}if(!C)switch(b){case 1:Y=d,U=a+-w/G,r[2]=U,r[3]=Y;break;case 2:U=O,Y=g+I*G,r[2]=U,r[3]=Y;break;case 3:Y=T,U=a+w/G,r[2]=U,r[3]=Y;break;case 4:U=E,Y=g+-I*G,r[2]=U,r[3]=Y}}return!1},t.getCardinalDirection=function(o,n,r){return o>n?r:1+r%4},t.getIntersection=function(o,n,r,i){if(i==null)return this.getIntersection2(o,n,r);var h,a,g,p,l,f,A,N=o.x,v=o.y,y=n.x,m=n.y,s=r.x,d=r.y,c=i.x,E=i.y;return(A=(h=m-v)*(p=s-c)-(a=E-d)*(g=N-y))==0?null:new e((g*(f=c*d-s*E)-p*(l=y*v-N*m))/A,(a*l-h*f)/A)},t.angleOfVector=function(o,n,r,i){var h=void 0;return o!==r?(h=Math.atan((i-n)/(r-o)),r<o?h+=Math.PI:i<n&&(h+=this.TWO_PI)):h=i<n?this.ONE_AND_HALF_PI:this.HALF_PI,h},t.doIntersect=function(o,n,r,i){var h=o.x,a=o.y,g=n.x,p=n.y,l=r.x,f=r.y,A=i.x,N=i.y,v=(g-h)*(N-f)-(A-l)*(p-a);if(v===0)return!1;var y=((N-f)*(A-h)+(l-A)*(N-a))/v,m=((a-p)*(A-h)+(g-h)*(N-a))/v;return 0<y&&y<1&&0<m&&m<1},t.HALF_PI=.5*Math.PI,t.ONE_AND_HALF_PI=1.5*Math.PI,t.TWO_PI=2*Math.PI,t.THREE_PI=3*Math.PI,L.exports=t},function(L,_,u){function e(){}e.sign=function(t){return t>0?1:t<0?-1:0},e.floor=function(t){return t<0?Math.ceil(t):Math.floor(t)},e.ceil=function(t){return t<0?Math.floor(t):Math.ceil(t)},L.exports=e},function(L,_,u){function e(){}e.MAX_VALUE=2147483647,e.MIN_VALUE=-2147483648,L.exports=e},function(L,_,u){var e=function(){function i(h,a){for(var g=0;g<a.length;g++){var p=a[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,a,g){return a&&i(h.prototype,a),g&&i(h,g),h}}(),t=function(i){return{value:i,next:null,prev:null}},o=function(i,h,a,g){return i!==null?i.next=h:g.head=h,a!==null?a.prev=h:g.tail=h,h.prev=i,h.next=a,g.length++,h},n=function(i,h){var a=i.prev,g=i.next;return a!==null?a.next=g:h.head=g,g!==null?g.prev=a:h.tail=a,i.prev=i.next=null,h.length--,i},r=function(){function i(h){var a=this;(function(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")})(this,i),this.length=0,this.head=null,this.tail=null,h?.forEach(function(g){return a.push(g)})}return e(i,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(h,a){return o(a.prev,t(h),a,this)}},{key:"insertAfter",value:function(h,a){return o(a,t(h),a.next,this)}},{key:"insertNodeBefore",value:function(h,a){return o(a.prev,h,a,this)}},{key:"insertNodeAfter",value:function(h,a){return o(a,h,a.next,this)}},{key:"push",value:function(h){return o(this.tail,t(h),null,this)}},{key:"unshift",value:function(h){return o(null,t(h),this.head,this)}},{key:"remove",value:function(h){return n(h,this)}},{key:"pop",value:function(){return n(this.tail,this).value}},{key:"popNode",value:function(){return n(this.tail,this)}},{key:"shift",value:function(){return n(this.head,this).value}},{key:"shiftNode",value:function(){return n(this.head,this)}},{key:"get_object_at",value:function(h){if(h<=this.length()){for(var a=1,g=this.head;a<h;)g=g.next,a++;return g.value}}},{key:"set_object_at",value:function(h,a){if(h<=this.length()){for(var g=1,p=this.head;g<h;)p=p.next,g++;p.value=a}}}]),i}();L.exports=r},function(L,_,u){function e(t,o,n){this.x=null,this.y=null,t==null&&o==null&&n==null?(this.x=0,this.y=0):typeof t=="number"&&typeof o=="number"&&n==null?(this.x=t,this.y=o):t.constructor.name=="Point"&&o==null&&n==null&&(n=t,this.x=n.x,this.y=n.y)}e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.getLocation=function(){return new e(this.x,this.y)},e.prototype.setLocation=function(t,o,n){t.constructor.name=="Point"&&o==null&&n==null?(n=t,this.setLocation(n.x,n.y)):typeof t=="number"&&typeof o=="number"&&n==null&&(parseInt(t)==t&&parseInt(o)==o?this.move(t,o):(this.x=Math.floor(t+.5),this.y=Math.floor(o+.5)))},e.prototype.move=function(t,o){this.x=t,this.y=o},e.prototype.translate=function(t,o){this.x+=t,this.y+=o},e.prototype.equals=function(t){if(t.constructor.name=="Point"){var o=t;return this.x==o.x&&this.y==o.y}return this==t},e.prototype.toString=function(){return new e().constructor.name+"[x="+this.x+",y="+this.y+"]"},L.exports=e},function(L,_,u){function e(t,o,n,r){this.x=0,this.y=0,this.width=0,this.height=0,t!=null&&o!=null&&n!=null&&r!=null&&(this.x=t,this.y=o,this.width=n,this.height=r)}e.prototype.getX=function(){return this.x},e.prototype.setX=function(t){this.x=t},e.prototype.getY=function(){return this.y},e.prototype.setY=function(t){this.y=t},e.prototype.getWidth=function(){return this.width},e.prototype.setWidth=function(t){this.width=t},e.prototype.getHeight=function(){return this.height},e.prototype.setHeight=function(t){this.height=t},e.prototype.getRight=function(){return this.x+this.width},e.prototype.getBottom=function(){return this.y+this.height},e.prototype.intersects=function(t){return!(this.getRight()<t.x||this.getBottom()<t.y||t.getRight()<this.x||t.getBottom()<this.y)},e.prototype.getCenterX=function(){return this.x+this.width/2},e.prototype.getMinX=function(){return this.getX()},e.prototype.getMaxX=function(){return this.getX()+this.width},e.prototype.getCenterY=function(){return this.y+this.height/2},e.prototype.getMinY=function(){return this.getY()},e.prototype.getMaxY=function(){return this.getY()+this.height},e.prototype.getWidthHalf=function(){return this.width/2},e.prototype.getHeightHalf=function(){return this.height/2},L.exports=e},function(L,_,u){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function t(){}t.lastID=0,t.createID=function(o){return t.isPrimitive(o)?o:(o.uniqueID!=null||(o.uniqueID=t.getString(),t.lastID++),o.uniqueID)},t.getString=function(o){return o==null&&(o=t.lastID),"Object#"+o},t.isPrimitive=function(o){var n=o===void 0?"undefined":e(o);return o==null||n!="object"&&n!="function"},L.exports=t},function(L,_,u){function e(l){if(Array.isArray(l)){for(var f=0,A=Array(l.length);f<l.length;f++)A[f]=l[f];return A}return Array.from(l)}var t=u(0),o=u(6),n=u(3),r=u(1),i=u(5),h=u(4),a=u(17),g=u(27);function p(l){g.call(this),this.layoutQuality=t.QUALITY,this.createBendsAsNeeded=t.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=t.DEFAULT_INCREMENTAL,this.animationOnLayout=t.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=t.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=t.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=t.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,l!=null&&(this.isRemoteUse=l)}p.RANDOM_SEED=1,p.prototype=Object.create(g.prototype),p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},p.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},p.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},p.prototype.newGraphManager=function(){var l=new o(this);return this.graphManager=l,l},p.prototype.newGraph=function(l){return new i(null,this.graphManager,l)},p.prototype.newNode=function(l){return new n(this.graphManager,l)},p.prototype.newEdge=function(l){return new r(null,null,l)},p.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},p.prototype.runLayout=function(){var l;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),l=!this.checkLayoutSuccess()&&this.layout(),t.ANIMATE!=="during"&&(l&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,l)},p.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},p.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var l=this.graphManager.getAllEdges(),f=0;f<l.length;f++)l[f];var A=this.graphManager.getRoot().getNodes();for(f=0;f<A.length;f++)A[f];this.update(this.graphManager.getRoot())}},p.prototype.update=function(l){if(l==null)this.update2();else if(l instanceof n){var f=l;if(f.getChild()!=null)for(var A=f.getChild().getNodes(),N=0;N<A.length;N++)update(A[N]);f.vGraphObject!=null&&f.vGraphObject.update(f)}else if(l instanceof r){var v=l;v.vGraphObject!=null&&v.vGraphObject.update(v)}else if(l instanceof i){var y=l;y.vGraphObject!=null&&y.vGraphObject.update(y)}},p.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=t.QUALITY,this.animationDuringLayout=t.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=t.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=t.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=t.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=t.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=t.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},p.prototype.transform=function(l){if(l==null)this.transform(new h(0,0));else{var f=new a,A=this.graphManager.getRoot().updateLeftTop();if(A!=null){f.setWorldOrgX(l.x),f.setWorldOrgY(l.y),f.setDeviceOrgX(A.x),f.setDeviceOrgY(A.y);for(var N=this.getAllNodes(),v=0;v<N.length;v++)N[v].transform(f)}}},p.prototype.positionNodesRandomly=function(l){if(l==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var f,A,N=l.getNodes(),v=0;v<N.length;v++)(A=(f=N[v]).getChild())==null||A.getNodes().length==0?f.scatter():(this.positionNodesRandomly(A),f.updateBounds())},p.prototype.getFlatForest=function(){for(var l=[],f=!0,A=this.graphManager.getRoot().getNodes(),N=!0,v=0;v<A.length;v++)A[v].getChild()!=null&&(N=!1);if(!N)return l;var y=new Set,m=[],s=new Map,d=[];for(d=d.concat(A);d.length>0&&f;){for(m.push(d[0]);m.length>0&&f;){var c=m[0];m.splice(0,1),y.add(c);var E=c.getEdges();for(v=0;v<E.length;v++){var T=E[v].getOtherEnd(c);if(s.get(c)!=T){if(y.has(T)){f=!1;break}m.push(T),s.set(T,c)}}}if(f){var O=[].concat(e(y));for(l.push(O),v=0;v<O.length;v++){var I=O[v],w=d.indexOf(I);w>-1&&d.splice(w,1)}y=new Set,s=new Map}else l=[]}return l},p.prototype.createDummyNodesForBendpoints=function(l){for(var f=[],A=l.source,N=this.graphManager.calcLowestCommonAncestor(l.source,l.target),v=0;v<l.bendpoints.length;v++){var y=this.newNode(null);y.setRect(new Point(0,0),new Dimension(1,1)),N.add(y);var m=this.newEdge(null);this.graphManager.add(m,A,y),f.add(y),A=y}return m=this.newEdge(null),this.graphManager.add(m,A,l.target),this.edgeToDummyNodes.set(l,f),l.isInterGraph()?this.graphManager.remove(l):N.remove(l),f},p.prototype.createBendpointsFromDummyNodes=function(){var l=[];l=l.concat(this.graphManager.getAllEdges()),l=[].concat(e(this.edgeToDummyNodes.keys())).concat(l);for(var f=0;f<l.length;f++){var A=l[f];if(A.bendpoints.length>0){for(var N=this.edgeToDummyNodes.get(A),v=0;v<N.length;v++){var y=N[v],m=new h(y.getCenterX(),y.getCenterY()),s=A.bendpoints.get(v);s.x=m.x,s.y=m.y,y.getOwner().remove(y)}this.graphManager.add(A,A.source,A.target)}}},p.transform=function(l,f,A,N){if(A!=null&&N!=null){var v=f;return l<=50?v-=(f-f/A)/50*(50-l):v+=(f*N-f)/50*(l-50),v}var y,m;return l<=50?(y=9*f/500,m=f/10):(y=9*f/50,m=-8*f),y*l+m},p.findCenterOfTree=function(l){var f=[];f=f.concat(l);var A=[],N=new Map,v=!1,y=null;f.length!=1&&f.length!=2||(v=!0,y=f[0]);for(var m=0;m<f.length;m++){var s=(E=f[m]).getNeighborsList().size;N.set(E,E.getNeighborsList().size),s==1&&A.push(E)}var d=[];for(d=d.concat(A);!v;){var c=[];for(c=c.concat(d),d=[],m=0;m<f.length;m++){var E=f[m],T=f.indexOf(E);T>=0&&f.splice(T,1),E.getNeighborsList().forEach(function(O){if(A.indexOf(O)<0){var I=N.get(O)-1;I==1&&d.push(O),N.set(O,I)}})}A=A.concat(d),f.length!=1&&f.length!=2||(v=!0,y=f[0])}return y},p.prototype.setGraphManager=function(l){this.graphManager=l},L.exports=p},function(L,_,u){function e(){}e.seed=1,e.x=0,e.nextDouble=function(){return e.x=1e4*Math.sin(e.seed++),e.x-Math.floor(e.x)},L.exports=e},function(L,_,u){var e=u(4);function t(o,n){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}t.prototype.getWorldOrgX=function(){return this.lworldOrgX},t.prototype.setWorldOrgX=function(o){this.lworldOrgX=o},t.prototype.getWorldOrgY=function(){return this.lworldOrgY},t.prototype.setWorldOrgY=function(o){this.lworldOrgY=o},t.prototype.getWorldExtX=function(){return this.lworldExtX},t.prototype.setWorldExtX=function(o){this.lworldExtX=o},t.prototype.getWorldExtY=function(){return this.lworldExtY},t.prototype.setWorldExtY=function(o){this.lworldExtY=o},t.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},t.prototype.setDeviceOrgX=function(o){this.ldeviceOrgX=o},t.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},t.prototype.setDeviceOrgY=function(o){this.ldeviceOrgY=o},t.prototype.getDeviceExtX=function(){return this.ldeviceExtX},t.prototype.setDeviceExtX=function(o){this.ldeviceExtX=o},t.prototype.getDeviceExtY=function(){return this.ldeviceExtY},t.prototype.setDeviceExtY=function(o){this.ldeviceExtY=o},t.prototype.transformX=function(o){var n=0,r=this.lworldExtX;return r!=0&&(n=this.ldeviceOrgX+(o-this.lworldOrgX)*this.ldeviceExtX/r),n},t.prototype.transformY=function(o){var n=0,r=this.lworldExtY;return r!=0&&(n=this.ldeviceOrgY+(o-this.lworldOrgY)*this.ldeviceExtY/r),n},t.prototype.inverseTransformX=function(o){var n=0,r=this.ldeviceExtX;return r!=0&&(n=this.lworldOrgX+(o-this.ldeviceOrgX)*this.lworldExtX/r),n},t.prototype.inverseTransformY=function(o){var n=0,r=this.ldeviceExtY;return r!=0&&(n=this.lworldOrgY+(o-this.ldeviceOrgY)*this.lworldExtY/r),n},t.prototype.inverseTransformPoint=function(o){return new e(this.inverseTransformX(o.x),this.inverseTransformY(o.y))},L.exports=t},function(L,_,u){var e=u(15),t=u(7),o=u(0),n=u(8),r=u(9);function i(){e.call(this),this.useSmartIdealEdgeLengthCalculation=t.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=t.DEFAULT_EDGE_LENGTH,this.springConstant=t.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=t.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=t.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=t.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=t.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=t.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*t.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=t.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=t.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=t.MAX_ITERATIONS}for(var h in i.prototype=Object.create(e.prototype),e)i[h]=e[h];i.prototype.initParameters=function(){e.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=t.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},i.prototype.calcIdealEdgeLengths=function(){for(var a,g,p,l,f,A,N=this.getGraphManager().getAllEdges(),v=0;v<N.length;v++)(a=N[v]).idealLength=this.idealEdgeLength,a.isInterGraph&&(p=a.getSource(),l=a.getTarget(),f=a.getSourceInLca().getEstimatedSize(),A=a.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(a.idealLength+=f+A-2*o.SIMPLE_NODE_SIZE),g=a.getLca().getInclusionTreeDepth(),a.idealLength+=t.DEFAULT_EDGE_LENGTH*t.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(p.getInclusionTreeDepth()+l.getInclusionTreeDepth()-2*g))},i.prototype.initSpringEmbedder=function(){var a=this.getAllNodes().length;this.incremental?(a>t.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*t.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(a-t.ADAPTATION_LOWER_NODE_LIMIT)/(t.ADAPTATION_UPPER_NODE_LIMIT-t.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-t.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=t.MAX_NODE_DISPLACEMENT_INCREMENTAL):(a>t.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(t.COOLING_ADAPTATION_FACTOR,1-(a-t.ADAPTATION_LOWER_NODE_LIMIT)/(t.ADAPTATION_UPPER_NODE_LIMIT-t.ADAPTATION_LOWER_NODE_LIMIT)*(1-t.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=t.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},i.prototype.calcSpringForces=function(){for(var a,g=this.getAllEdges(),p=0;p<g.length;p++)a=g[p],this.calcSpringForce(a,a.idealLength)},i.prototype.calcRepulsionForces=function(){var a,g,p,l,f,A=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],N=arguments.length>1&&arguments[1]!==void 0&&arguments[1],v=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%t.GRID_CALCULATION_CHECK_PERIOD==1&&A&&this.updateGrid(),f=new Set,a=0;a<v.length;a++)p=v[a],this.calculateRepulsionForceOfANode(p,f,A,N),f.add(p);else for(a=0;a<v.length;a++)for(p=v[a],g=a+1;g<v.length;g++)l=v[g],p.getOwner()==l.getOwner()&&this.calcRepulsionForce(p,l)},i.prototype.calcGravitationalForces=function(){for(var a,g=this.getAllNodesToApplyGravitation(),p=0;p<g.length;p++)a=g[p],this.calcGravitationalForce(a)},i.prototype.moveNodes=function(){for(var a=this.getAllNodes(),g=0;g<a.length;g++)a[g].move()},i.prototype.calcSpringForce=function(a,g){var p,l,f,A,N=a.getSource(),v=a.getTarget();if(this.uniformLeafNodeSizes&&N.getChild()==null&&v.getChild()==null)a.updateLengthSimple();else if(a.updateLength(),a.isOverlapingSourceAndTarget)return;(p=a.getLength())!=0&&(f=(l=this.springConstant*(p-g))*(a.lengthX/p),A=l*(a.lengthY/p),N.springForceX+=f,N.springForceY+=A,v.springForceX-=f,v.springForceY-=A)},i.prototype.calcRepulsionForce=function(a,g){var p,l,f,A,N,v,y,m=a.getRect(),s=g.getRect(),d=new Array(2),c=new Array(4);if(m.intersects(s)){n.calcSeparationAmount(m,s,d,t.DEFAULT_EDGE_LENGTH/2),v=2*d[0],y=2*d[1];var E=a.noOfChildren*g.noOfChildren/(a.noOfChildren+g.noOfChildren);a.repulsionForceX-=E*v,a.repulsionForceY-=E*y,g.repulsionForceX+=E*v,g.repulsionForceY+=E*y}else this.uniformLeafNodeSizes&&a.getChild()==null&&g.getChild()==null?(p=s.getCenterX()-m.getCenterX(),l=s.getCenterY()-m.getCenterY()):(n.getIntersection(m,s,c),p=c[2]-c[0],l=c[3]-c[1]),Math.abs(p)<t.MIN_REPULSION_DIST&&(p=r.sign(p)*t.MIN_REPULSION_DIST),Math.abs(l)<t.MIN_REPULSION_DIST&&(l=r.sign(l)*t.MIN_REPULSION_DIST),f=p*p+l*l,A=Math.sqrt(f),v=(N=this.repulsionConstant*a.noOfChildren*g.noOfChildren/f)*p/A,y=N*l/A,a.repulsionForceX-=v,a.repulsionForceY-=y,g.repulsionForceX+=v,g.repulsionForceY+=y},i.prototype.calcGravitationalForce=function(a){var g,p,l,f,A,N,v,y;p=((g=a.getOwner()).getRight()+g.getLeft())/2,l=(g.getTop()+g.getBottom())/2,f=a.getCenterX()-p,A=a.getCenterY()-l,N=Math.abs(f)+a.getWidth()/2,v=Math.abs(A)+a.getHeight()/2,a.getOwner()==this.graphManager.getRoot()?(N>(y=g.getEstimatedSize()*this.gravityRangeFactor)||v>y)&&(a.gravitationForceX=-this.gravityConstant*f,a.gravitationForceY=-this.gravityConstant*A):(N>(y=g.getEstimatedSize()*this.compoundGravityRangeFactor)||v>y)&&(a.gravitationForceX=-this.gravityConstant*f*this.compoundGravityConstant,a.gravitationForceY=-this.gravityConstant*A*this.compoundGravityConstant)},i.prototype.isConverged=function(){var a,g=!1;return this.totalIterations>this.maxIterations/3&&(g=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),a=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,a||g},i.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},i.prototype.calcNoOfChildrenForAllNodes=function(){for(var a,g=this.graphManager.getAllNodes(),p=0;p<g.length;p++)(a=g[p]).noOfChildren=a.getNoOfChildren()},i.prototype.calcGrid=function(a){var g,p;g=parseInt(Math.ceil((a.getRight()-a.getLeft())/this.repulsionRange)),p=parseInt(Math.ceil((a.getBottom()-a.getTop())/this.repulsionRange));for(var l=new Array(g),f=0;f<g;f++)l[f]=new Array(p);for(f=0;f<g;f++)for(var A=0;A<p;A++)l[f][A]=new Array;return l},i.prototype.addNodeToGrid=function(a,g,p){var l,f,A,N;l=parseInt(Math.floor((a.getRect().x-g)/this.repulsionRange)),f=parseInt(Math.floor((a.getRect().width+a.getRect().x-g)/this.repulsionRange)),A=parseInt(Math.floor((a.getRect().y-p)/this.repulsionRange)),N=parseInt(Math.floor((a.getRect().height+a.getRect().y-p)/this.repulsionRange));for(var v=l;v<=f;v++)for(var y=A;y<=N;y++)this.grid[v][y].push(a),a.setGridCoordinates(l,f,A,N)},i.prototype.updateGrid=function(){var a,g,p=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),a=0;a<p.length;a++)g=p[a],this.addNodeToGrid(g,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},i.prototype.calculateRepulsionForceOfANode=function(a,g,p,l){if(this.totalIterations%t.GRID_CALCULATION_CHECK_PERIOD==1&&p||l){var f,A=new Set;a.surrounding=new Array;for(var N=this.grid,v=a.startX-1;v<a.finishX+2;v++)for(var y=a.startY-1;y<a.finishY+2;y++)if(!(v<0||y<0||v>=N.length||y>=N[0].length)){for(var m=0;m<N[v][y].length;m++)if(f=N[v][y][m],a.getOwner()==f.getOwner()&&a!=f&&!g.has(f)&&!A.has(f)){var s=Math.abs(a.getCenterX()-f.getCenterX())-(a.getWidth()/2+f.getWidth()/2),d=Math.abs(a.getCenterY()-f.getCenterY())-(a.getHeight()/2+f.getHeight()/2);s<=this.repulsionRange&&d<=this.repulsionRange&&A.add(f)}}a.surrounding=[].concat(function(c){if(Array.isArray(c)){for(var E=0,T=Array(c.length);E<c.length;E++)T[E]=c[E];return T}return Array.from(c)}(A))}for(v=0;v<a.surrounding.length;v++)this.calcRepulsionForce(a,a.surrounding[v])},i.prototype.calcRepulsionRange=function(){return 0},L.exports=i},function(L,_,u){var e=u(1),t=u(7);function o(r,i,h){e.call(this,r,i,h),this.idealLength=t.DEFAULT_EDGE_LENGTH}for(var n in o.prototype=Object.create(e.prototype),e)o[n]=e[n];L.exports=o},function(L,_,u){var e=u(3);function t(n,r,i,h){e.call(this,n,r,i,h),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var o in t.prototype=Object.create(e.prototype),e)t[o]=e[o];t.prototype.setGridCoordinates=function(n,r,i,h){this.startX=n,this.finishX=r,this.startY=i,this.finishY=h},L.exports=t},function(L,_,u){function e(t,o){this.width=0,this.height=0,t!==null&&o!==null&&(this.height=o,this.width=t)}e.prototype.getWidth=function(){return this.width},e.prototype.setWidth=function(t){this.width=t},e.prototype.getHeight=function(){return this.height},e.prototype.setHeight=function(t){this.height=t},L.exports=e},function(L,_,u){var e=u(14);function t(){this.map={},this.keys=[]}t.prototype.put=function(o,n){var r=e.createID(o);this.contains(r)||(this.map[r]=n,this.keys.push(o))},t.prototype.contains=function(o){return e.createID(o),this.map[o]!=null},t.prototype.get=function(o){var n=e.createID(o);return this.map[n]},t.prototype.keySet=function(){return this.keys},L.exports=t},function(L,_,u){var e=u(14);function t(){this.set={}}t.prototype.add=function(o){var n=e.createID(o);this.contains(n)||(this.set[n]=o)},t.prototype.remove=function(o){delete this.set[e.createID(o)]},t.prototype.clear=function(){this.set={}},t.prototype.contains=function(o){return this.set[e.createID(o)]==o},t.prototype.isEmpty=function(){return this.size()===0},t.prototype.size=function(){return Object.keys(this.set).length},t.prototype.addAllTo=function(o){for(var n=Object.keys(this.set),r=n.length,i=0;i<r;i++)o.push(this.set[n[i]])},t.prototype.size=function(){return Object.keys(this.set).length},t.prototype.addAll=function(o){for(var n=o.length,r=0;r<n;r++){var i=o[r];this.add(i)}},L.exports=t},function(L,_,u){var e=function(){function n(r,i){for(var h=0;h<i.length;h++){var a=i[h];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}return function(r,i,h){return i&&n(r.prototype,i),h&&n(r,h),r}}(),t=u(11),o=function(){function n(r,i){(function(a,g){if(!(a instanceof g))throw new TypeError("Cannot call a class as a function")})(this,n),i===null&&i===void 0||(this.compareFunction=this._defaultCompareFunction);var h=void 0;h=r instanceof t?r.size():r.length,this._quicksort(r,0,h-1)}return e(n,[{key:"_quicksort",value:function(r,i,h){if(i<h){var a=this._partition(r,i,h);this._quicksort(r,i,a),this._quicksort(r,a+1,h)}}},{key:"_partition",value:function(r,i,h){for(var a=this._get(r,i),g=i,p=h;;){for(;this.compareFunction(a,this._get(r,p));)p--;for(;this.compareFunction(this._get(r,g),a);)g++;if(!(g<p))return p;this._swap(r,g,p),g++,p--}}},{key:"_get",value:function(r,i){return r instanceof t?r.get_object_at(i):r[i]}},{key:"_set",value:function(r,i,h){r instanceof t?r.set_object_at(i,h):r[i]=h}},{key:"_swap",value:function(r,i,h){var a=this._get(r,i);this._set(r,i,this._get(r,h)),this._set(r,h,a)}},{key:"_defaultCompareFunction",value:function(r,i){return i>r}}]),n}();L.exports=o},function(L,_,u){var e=function(){function o(n,r){for(var i=0;i<r.length;i++){var h=r[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(n,h.key,h)}}return function(n,r,i){return r&&o(n.prototype,r),i&&o(n,i),n}}(),t=function(){function o(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;(function(A,N){if(!(A instanceof N))throw new TypeError("Cannot call a class as a function")})(this,o),this.sequence1=n,this.sequence2=r,this.match_score=i,this.mismatch_penalty=h,this.gap_penalty=a,this.iMax=n.length+1,this.jMax=r.length+1,this.grid=new Array(this.iMax);for(var g=0;g<this.iMax;g++){this.grid[g]=new Array(this.jMax);for(var p=0;p<this.jMax;p++)this.grid[g][p]=0}this.tracebackGrid=new Array(this.iMax);for(var l=0;l<this.iMax;l++){this.tracebackGrid[l]=new Array(this.jMax);for(var f=0;f<this.jMax;f++)this.tracebackGrid[l][f]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return e(o,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var n=1;n<this.jMax;n++)this.grid[0][n]=this.grid[0][n-1]+this.gap_penalty,this.tracebackGrid[0][n]=[!1,!1,!0];for(var r=1;r<this.iMax;r++)this.grid[r][0]=this.grid[r-1][0]+this.gap_penalty,this.tracebackGrid[r][0]=[!1,!0,!1];for(var i=1;i<this.iMax;i++)for(var h=1;h<this.jMax;h++){var a=[this.sequence1[i-1]===this.sequence2[h-1]?this.grid[i-1][h-1]+this.match_score:this.grid[i-1][h-1]+this.mismatch_penalty,this.grid[i-1][h]+this.gap_penalty,this.grid[i][h-1]+this.gap_penalty],g=this.arrayAllMaxIndexes(a);this.grid[i][h]=a[g[0]],this.tracebackGrid[i][h]=[g.includes(0),g.includes(1),g.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var n=[];for(n.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});n[0];){var r=n[0],i=this.tracebackGrid[r.pos[0]][r.pos[1]];i[0]&&n.push({pos:[r.pos[0]-1,r.pos[1]-1],seq1:this.sequence1[r.pos[0]-1]+r.seq1,seq2:this.sequence2[r.pos[1]-1]+r.seq2}),i[1]&&n.push({pos:[r.pos[0]-1,r.pos[1]],seq1:this.sequence1[r.pos[0]-1]+r.seq1,seq2:"-"+r.seq2}),i[2]&&n.push({pos:[r.pos[0],r.pos[1]-1],seq1:"-"+r.seq1,seq2:this.sequence2[r.pos[1]-1]+r.seq2}),r.pos[0]===0&&r.pos[1]===0&&this.alignments.push({sequence1:r.seq1,sequence2:r.seq2}),n.shift()}return this.alignments}},{key:"getAllIndexes",value:function(n,r){for(var i=[],h=-1;(h=n.indexOf(r,h+1))!==-1;)i.push(h);return i}},{key:"arrayAllMaxIndexes",value:function(n){return this.getAllIndexes(n,Math.max.apply(null,n))}}]),o}();L.exports=t},function(L,_,u){var e=function(){};e.FDLayout=u(18),e.FDLayoutConstants=u(7),e.FDLayoutEdge=u(19),e.FDLayoutNode=u(20),e.DimensionD=u(21),e.HashMap=u(22),e.HashSet=u(23),e.IGeometry=u(8),e.IMath=u(9),e.Integer=u(10),e.Point=u(12),e.PointD=u(4),e.RandomSeed=u(16),e.RectangleD=u(13),e.Transform=u(17),e.UniqueIDGeneretor=u(14),e.Quicksort=u(24),e.LinkedList=u(11),e.LGraphObject=u(2),e.LGraph=u(5),e.LEdge=u(1),e.LGraphManager=u(6),e.LNode=u(3),e.Layout=u(15),e.LayoutConstants=u(0),e.NeedlemanWunsch=u(25),L.exports=e},function(L,_,u){function e(){this.listeners=[]}var t=e.prototype;t.addListener=function(o,n){this.listeners.push({event:o,callback:n})},t.removeListener=function(o,n){for(var r=this.listeners.length;r>=0;r--){var i=this.listeners[r];i.event===o&&i.callback===n&&this.listeners.splice(r,1)}},t.emit=function(o,n){for(var r=0;r<this.listeners.length;r++){var i=this.listeners[r];o===i.event&&i.callback(n)}},L.exports=e}])},V.exports=R()),V.exports;var R}var $;W.exports;var K,J,tt,dt=(K||(K=1,Q.exports=($||($=1,tt=function(R){return function(L){var _={};function u(e){if(_[e])return _[e].exports;var t=_[e]={i:e,l:!1,exports:{}};return L[e].call(t.exports,t,t.exports,u),t.l=!0,t.exports}return u.m=L,u.c=_,u.i=function(e){return e},u.d=function(e,t,o){u.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u(u.s=7)}([function(L,_){L.exports=R},function(L,_,u){var e=u(0).FDLayoutConstants;function t(){}for(var o in e)t[o]=e[o];t.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,t.DEFAULT_RADIAL_SEPARATION=e.DEFAULT_EDGE_LENGTH,t.DEFAULT_COMPONENT_SEPERATION=60,t.TILE=!0,t.TILING_PADDING_VERTICAL=10,t.TILING_PADDING_HORIZONTAL=10,t.TREE_REDUCTION_ON_INCREMENTAL=!1,L.exports=t},function(L,_,u){var e=u(0).FDLayoutEdge;function t(n,r,i){e.call(this,n,r,i)}for(var o in t.prototype=Object.create(e.prototype),e)t[o]=e[o];L.exports=t},function(L,_,u){var e=u(0).LGraph;function t(n,r,i){e.call(this,n,r,i)}for(var o in t.prototype=Object.create(e.prototype),e)t[o]=e[o];L.exports=t},function(L,_,u){var e=u(0).LGraphManager;function t(n){e.call(this,n)}for(var o in t.prototype=Object.create(e.prototype),e)t[o]=e[o];L.exports=t},function(L,_,u){var e=u(0).FDLayoutNode,t=u(0).IMath;function o(r,i,h,a){e.call(this,r,i,h,a)}for(var n in o.prototype=Object.create(e.prototype),e)o[n]=e[n];o.prototype.move=function(){var r=this.graphManager.getLayout();this.displacementX=r.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=r.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>r.coolingFactor*r.maxNodeDisplacement&&(this.displacementX=r.coolingFactor*r.maxNodeDisplacement*t.sign(this.displacementX)),Math.abs(this.displacementY)>r.coolingFactor*r.maxNodeDisplacement&&(this.displacementY=r.coolingFactor*r.maxNodeDisplacement*t.sign(this.displacementY)),this.child==null||this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),r.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},o.prototype.propogateDisplacementToChildren=function(r,i){for(var h,a=this.getChild().getNodes(),g=0;g<a.length;g++)(h=a[g]).getChild()==null?(h.moveBy(r,i),h.displacementX+=r,h.displacementY+=i):h.propogateDisplacementToChildren(r,i)},o.prototype.setPred1=function(r){this.pred1=r},o.prototype.getPred1=function(){return pred1},o.prototype.getPred2=function(){return pred2},o.prototype.setNext=function(r){this.next=r},o.prototype.getNext=function(){return next},o.prototype.setProcessed=function(r){this.processed=r},o.prototype.isProcessed=function(){return processed},L.exports=o},function(L,_,u){var e=u(0).FDLayout,t=u(4),o=u(3),n=u(5),r=u(2),i=u(1),h=u(0).FDLayoutConstants,a=u(0).LayoutConstants,g=u(0).Point,p=u(0).PointD,l=u(0).Layout,f=u(0).Integer,A=u(0).IGeometry,N=u(0).LGraph,v=u(0).Transform;function y(){e.call(this),this.toBeTiled={}}for(var m in y.prototype=Object.create(e.prototype),e)y[m]=e[m];y.prototype.newGraphManager=function(){var s=new t(this);return this.graphManager=s,s},y.prototype.newGraph=function(s){return new o(null,this.graphManager,s)},y.prototype.newNode=function(s){return new n(this.graphManager,s)},y.prototype.newEdge=function(s){return new r(null,null,s)},y.prototype.initParameters=function(){e.prototype.initParameters.call(this,arguments),this.isSubLayout||(i.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=i.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=h.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=h.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=h.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},y.prototype.layout=function(){return a.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},y.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental)i.TREE_REDUCTION_ON_INCREMENTAL&&(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),d=new Set(this.getAllNodes()),c=this.nodesWithGravity.filter(function(E){return d.has(E)}),this.graphManager.setAllNodesToApplyGravitation(c));else{var s=this.getFlatForest();if(s.length>0)this.positionNodesRadially(s);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var d=new Set(this.getAllNodes()),c=this.nodesWithGravity.filter(function(E){return d.has(E)});this.graphManager.setAllNodesToApplyGravitation(c),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},y.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var s=new Set(this.getAllNodes()),d=this.nodesWithGravity.filter(function(T){return s.has(T)});this.graphManager.setAllNodesToApplyGravitation(d),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var c=!this.isTreeGrowing&&!this.isGrowthFinished,E=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(c,E),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},y.prototype.getPositionsData=function(){for(var s=this.graphManager.getAllNodes(),d={},c=0;c<s.length;c++){var E=s[c].rect,T=s[c].id;d[T]={id:T,x:E.getCenterX(),y:E.getCenterY(),w:E.width,h:E.height}}return d},y.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var s=!1;if(h.ANIMATE==="during")this.emit("layoutstarted");else{for(;!s;)s=this.tick();this.graphManager.updateBounds()}},y.prototype.calculateNodesToApplyGravitationTo=function(){var s,d,c=[],E=this.graphManager.getGraphs(),T=E.length;for(d=0;d<T;d++)(s=E[d]).updateConnected(),s.isConnected||(c=c.concat(s.getNodes()));return c},y.prototype.createBendpoints=function(){var s=[];s=s.concat(this.graphManager.getAllEdges());var d,c=new Set;for(d=0;d<s.length;d++){var E=s[d];if(!c.has(E)){var T=E.getSource(),O=E.getTarget();if(T==O)E.getBendpoints().push(new p),E.getBendpoints().push(new p),this.createDummyNodesForBendpoints(E),c.add(E);else{var I=[];if(I=(I=I.concat(T.getEdgeListToNode(O))).concat(O.getEdgeListToNode(T)),!c.has(I[0])){var w;if(I.length>1)for(w=0;w<I.length;w++){var D=I[w];D.getBendpoints().push(new p),this.createDummyNodesForBendpoints(D)}I.forEach(function(C){c.add(C)})}}}if(c.size==s.length)break}},y.prototype.positionNodesRadially=function(s){for(var d=new g(0,0),c=Math.ceil(Math.sqrt(s.length)),E=0,T=0,O=0,I=new p(0,0),w=0;w<s.length;w++){w%c==0&&(O=0,T=E,w!=0&&(T+=i.DEFAULT_COMPONENT_SEPERATION),E=0);var D=s[w],C=l.findCenterOfTree(D);d.x=O,d.y=T,(I=y.radialLayout(D,C,d)).y>E&&(E=Math.floor(I.y)),O=Math.floor(I.x+i.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(a.WORLD_CENTER_X-I.x/2,a.WORLD_CENTER_Y-I.y/2))},y.radialLayout=function(s,d,c){var E=Math.max(this.maxDiagonalInTree(s),i.DEFAULT_RADIAL_SEPARATION);y.branchRadialLayout(d,null,0,359,0,E);var T=N.calculateBounds(s),O=new v;O.setDeviceOrgX(T.getMinX()),O.setDeviceOrgY(T.getMinY()),O.setWorldOrgX(c.x),O.setWorldOrgY(c.y);for(var I=0;I<s.length;I++)s[I].transform(O);var w=new p(T.getMaxX(),T.getMaxY());return O.inverseTransformPoint(w)},y.branchRadialLayout=function(s,d,c,E,T,O){var I=(E-c+1)/2;I<0&&(I+=180);var w=(I+c)%360*A.TWO_PI/360,D=T*Math.cos(w),C=T*Math.sin(w);s.setCenter(D,C);var M=[],F=(M=M.concat(s.getEdges())).length;d!=null&&F--;for(var G,x=0,b=M.length,P=s.getEdgesBetween(d);P.length>1;){var S=P[0];P.splice(0,1);var U=M.indexOf(S);U>=0&&M.splice(U,1),b--,F--}G=d!=null?(M.indexOf(P[0])+1)%b:0;for(var Y=Math.abs(E-c)/F,k=G;x!=F;k=++k%b){var j=M[k].getOtherEnd(s);if(j!=d){var q=(c+x*Y)%360,lt=(q+Y)%360;y.branchRadialLayout(j,s,q,lt,T+O,O),x++}}},y.maxDiagonalInTree=function(s){for(var d=f.MIN_VALUE,c=0;c<s.length;c++){var E=s[c].getDiagonal();E>d&&(d=E)}return d},y.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},y.prototype.groupZeroDegreeMembers=function(){var s=this,d={};this.memberGroups={},this.idToDummyNode={};for(var c=[],E=this.graphManager.getAllNodes(),T=0;T<E.length;T++){var O=(I=E[T]).getParent();this.getNodeDegreeWithChildren(I)!==0||O.id!=null&&this.getToBeTiled(O)||c.push(I)}for(T=0;T<c.length;T++){var I,w=(I=c[T]).getParent().id;d[w]===void 0&&(d[w]=[]),d[w]=d[w].concat(I)}Object.keys(d).forEach(function(D){if(d[D].length>1){var C="DummyCompound_"+D;s.memberGroups[C]=d[D];var M=d[D][0].getParent(),F=new n(s.graphManager);F.id=C,F.paddingLeft=M.paddingLeft||0,F.paddingRight=M.paddingRight||0,F.paddingBottom=M.paddingBottom||0,F.paddingTop=M.paddingTop||0,s.idToDummyNode[C]=F;var G=s.getGraphManager().add(s.newGraph(),F),x=M.getChild();x.add(F);for(var b=0;b<d[D].length;b++){var P=d[D][b];x.remove(P),G.add(P)}}})},y.prototype.clearCompounds=function(){var s={},d={};this.performDFSOnCompounds();for(var c=0;c<this.compoundOrder.length;c++)d[this.compoundOrder[c].id]=this.compoundOrder[c],s[this.compoundOrder[c].id]=[].concat(this.compoundOrder[c].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[c].getChild()),this.compoundOrder[c].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(s,d)},y.prototype.clearZeroDegreeMembers=function(){var s=this,d=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(c){var E=s.idToDummyNode[c];d[c]=s.tileNodes(s.memberGroups[c],E.paddingLeft+E.paddingRight),E.rect.width=d[c].width,E.rect.height=d[c].height})},y.prototype.repopulateCompounds=function(){for(var s=this.compoundOrder.length-1;s>=0;s--){var d=this.compoundOrder[s],c=d.id,E=d.paddingLeft,T=d.paddingTop;this.adjustLocations(this.tiledMemberPack[c],d.rect.x,d.rect.y,E,T)}},y.prototype.repopulateZeroDegreeMembers=function(){var s=this,d=this.tiledZeroDegreePack;Object.keys(d).forEach(function(c){var E=s.idToDummyNode[c],T=E.paddingLeft,O=E.paddingTop;s.adjustLocations(d[c],E.rect.x,E.rect.y,T,O)})},y.prototype.getToBeTiled=function(s){var d=s.id;if(this.toBeTiled[d]!=null)return this.toBeTiled[d];var c=s.getChild();if(c==null)return this.toBeTiled[d]=!1,!1;for(var E=c.getNodes(),T=0;T<E.length;T++){var O=E[T];if(this.getNodeDegree(O)>0)return this.toBeTiled[d]=!1,!1;if(O.getChild()!=null){if(!this.getToBeTiled(O))return this.toBeTiled[d]=!1,!1}else this.toBeTiled[O.id]=!1}return this.toBeTiled[d]=!0,!0},y.prototype.getNodeDegree=function(s){s.id;for(var d=s.getEdges(),c=0,E=0;E<d.length;E++){var T=d[E];T.getSource().id!==T.getTarget().id&&(c+=1)}return c},y.prototype.getNodeDegreeWithChildren=function(s){var d=this.getNodeDegree(s);if(s.getChild()==null)return d;for(var c=s.getChild().getNodes(),E=0;E<c.length;E++){var T=c[E];d+=this.getNodeDegreeWithChildren(T)}return d},y.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},y.prototype.fillCompexOrderByDFS=function(s){for(var d=0;d<s.length;d++){var c=s[d];c.getChild()!=null&&this.fillCompexOrderByDFS(c.getChild().getNodes()),this.getToBeTiled(c)&&this.compoundOrder.push(c)}},y.prototype.adjustLocations=function(s,d,c,E,T){c+=T;for(var O=d+=E,I=0;I<s.rows.length;I++){var w=s.rows[I];d=O;for(var D=0,C=0;C<w.length;C++){var M=w[C];M.rect.x=d,M.rect.y=c,d+=M.rect.width+s.horizontalPadding,M.rect.height>D&&(D=M.rect.height)}c+=D+s.verticalPadding}},y.prototype.tileCompoundMembers=function(s,d){var c=this;this.tiledMemberPack=[],Object.keys(s).forEach(function(E){var T=d[E];c.tiledMemberPack[E]=c.tileNodes(s[E],T.paddingLeft+T.paddingRight),T.rect.width=c.tiledMemberPack[E].width,T.rect.height=c.tiledMemberPack[E].height})},y.prototype.tileNodes=function(s,d){var c={rows:[],rowWidth:[],rowHeight:[],width:0,height:d,verticalPadding:i.TILING_PADDING_VERTICAL,horizontalPadding:i.TILING_PADDING_HORIZONTAL};s.sort(function(O,I){return O.rect.width*O.rect.height>I.rect.width*I.rect.height?-1:O.rect.width*O.rect.height<I.rect.width*I.rect.height?1:0});for(var E=0;E<s.length;E++){var T=s[E];c.rows.length==0?this.insertNodeToRow(c,T,0,d):this.canAddHorizontal(c,T.rect.width,T.rect.height)?this.insertNodeToRow(c,T,this.getShortestRowIndex(c),d):this.insertNodeToRow(c,T,c.rows.length,d),this.shiftToLastRow(c)}return c},y.prototype.insertNodeToRow=function(s,d,c,E){var T=E;c==s.rows.length&&(s.rows.push([]),s.rowWidth.push(T),s.rowHeight.push(0));var O=s.rowWidth[c]+d.rect.width;s.rows[c].length>0&&(O+=s.horizontalPadding),s.rowWidth[c]=O,s.width<O&&(s.width=O);var I=d.rect.height;c>0&&(I+=s.verticalPadding);var w=0;I>s.rowHeight[c]&&(w=s.rowHeight[c],s.rowHeight[c]=I,w=s.rowHeight[c]-w),s.height+=w,s.rows[c].push(d)},y.prototype.getShortestRowIndex=function(s){for(var d=-1,c=Number.MAX_VALUE,E=0;E<s.rows.length;E++)s.rowWidth[E]<c&&(d=E,c=s.rowWidth[E]);return d},y.prototype.getLongestRowIndex=function(s){for(var d=-1,c=Number.MIN_VALUE,E=0;E<s.rows.length;E++)s.rowWidth[E]>c&&(d=E,c=s.rowWidth[E]);return d},y.prototype.canAddHorizontal=function(s,d,c){var E=this.getShortestRowIndex(s);if(E<0)return!0;var T=s.rowWidth[E];if(T+s.horizontalPadding+d<=s.width)return!0;var O,I,w=0;return s.rowHeight[E]<c&&E>0&&(w=c+s.verticalPadding-s.rowHeight[E]),O=s.width-T>=d+s.horizontalPadding?(s.height+w)/(T+d+s.horizontalPadding):(s.height+w)/s.width,w=c+s.verticalPadding,(I=s.width<d?(s.height+w)/d:(s.height+w)/s.width)<1&&(I=1/I),O<1&&(O=1/O),O<I},y.prototype.shiftToLastRow=function(s){var d=this.getLongestRowIndex(s),c=s.rowWidth.length-1,E=s.rows[d],T=E[E.length-1],O=T.width+s.horizontalPadding;if(s.width-s.rowWidth[c]>O&&d!=c){E.splice(-1,1),s.rows[c].push(T),s.rowWidth[d]=s.rowWidth[d]-O,s.rowWidth[c]=s.rowWidth[c]+O,s.width=s.rowWidth[instance.getLongestRowIndex(s)];for(var I=Number.MIN_VALUE,w=0;w<E.length;w++)E[w].height>I&&(I=E[w].height);d>0&&(I+=s.verticalPadding);var D=s.rowHeight[d]+s.rowHeight[c];s.rowHeight[d]=I,s.rowHeight[c]<T.height+s.verticalPadding&&(s.rowHeight[c]=T.height+s.verticalPadding);var C=s.rowHeight[d]+s.rowHeight[c];s.height+=C-D,this.shiftToLastRow(s)}},y.prototype.tilingPreLayout=function(){i.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},y.prototype.tilingPostLayout=function(){i.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},y.prototype.reduceTrees=function(){for(var s,d=[],c=!0;c;){var E=this.graphManager.getAllNodes(),T=[];c=!1;for(var O=0;O<E.length;O++)(s=E[O]).getEdges().length!=1||s.getEdges()[0].isInterGraph||s.getChild()!=null||(T.push([s,s.getEdges()[0],s.getOwner()]),c=!0);if(c==1){for(var I=[],w=0;w<T.length;w++)T[w][0].getEdges().length==1&&(I.push(T[w]),T[w][0].getOwner().remove(T[w][0]));d.push(I),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=d},y.prototype.growTree=function(s){for(var d,c=s[s.length-1],E=0;E<c.length;E++)d=c[E],this.findPlaceforPrunedNode(d),d[2].add(d[0]),d[2].add(d[1],d[1].source,d[1].target);s.splice(s.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},y.prototype.findPlaceforPrunedNode=function(s){var d,c,E=s[0],T=(c=E==s[1].source?s[1].target:s[1].source).startX,O=c.finishX,I=c.startY,w=c.finishY,D=[0,0,0,0];if(I>0)for(var C=T;C<=O;C++)D[0]+=this.grid[C][I-1].length+this.grid[C][I].length-1;if(O<this.grid.length-1)for(C=I;C<=w;C++)D[1]+=this.grid[O+1][C].length+this.grid[O][C].length-1;if(w<this.grid[0].length-1)for(C=T;C<=O;C++)D[2]+=this.grid[C][w+1].length+this.grid[C][w].length-1;if(T>0)for(C=I;C<=w;C++)D[3]+=this.grid[T-1][C].length+this.grid[T][C].length-1;for(var M,F,G=f.MAX_VALUE,x=0;x<D.length;x++)D[x]<G?(G=D[x],M=1,F=x):D[x]==G&&M++;if(M==3&&G==0)D[0]==0&&D[1]==0&&D[2]==0?d=1:D[0]==0&&D[1]==0&&D[3]==0?d=0:D[0]==0&&D[2]==0&&D[3]==0?d=3:D[1]==0&&D[2]==0&&D[3]==0&&(d=2);else if(M==2&&G==0){var b=Math.floor(2*Math.random());d=D[0]==0&&D[1]==0?b==0?0:1:D[0]==0&&D[2]==0?b==0?0:2:D[0]==0&&D[3]==0?b==0?0:3:D[1]==0&&D[2]==0?b==0?1:2:D[1]==0&&D[3]==0?b==0?1:3:b==0?2:3}else d=M==4&&G==0?b=Math.floor(4*Math.random()):F;d==0?E.setCenter(c.getCenterX(),c.getCenterY()-c.getHeight()/2-h.DEFAULT_EDGE_LENGTH-E.getHeight()/2):d==1?E.setCenter(c.getCenterX()+c.getWidth()/2+h.DEFAULT_EDGE_LENGTH+E.getWidth()/2,c.getCenterY()):d==2?E.setCenter(c.getCenterX(),c.getCenterY()+c.getHeight()/2+h.DEFAULT_EDGE_LENGTH+E.getHeight()/2):E.setCenter(c.getCenterX()-c.getWidth()/2-h.DEFAULT_EDGE_LENGTH-E.getWidth()/2,c.getCenterY())},L.exports=y},function(L,_,u){var e={};e.layoutBase=u(0),e.CoSEConstants=u(1),e.CoSEEdge=u(2),e.CoSEGraph=u(3),e.CoSEGraphManager=u(4),e.CoSELayout=u(6),e.CoSENode=u(5),L.exports=e}])},W.exports=tt(ct())),J=W.exports,function(R){var L={};function _(u){if(L[u])return L[u].exports;var e=L[u]={i:u,l:!1,exports:{}};return R[u].call(e.exports,e,e.exports,_),e.l=!0,e.exports}return _.m=R,_.c=L,_.i=function(u){return u},_.d=function(u,e,t){_.o(u,e)||Object.defineProperty(u,e,{configurable:!1,enumerable:!0,get:t})},_.n=function(u){var e=u&&u.__esModule?function(){return u.default}:function(){return u};return _.d(e,"a",e),e},_.o=function(u,e){return Object.prototype.hasOwnProperty.call(u,e)},_.p="",_(_.s=1)}([function(R,L){R.exports=J},function(R,L,_){var u=_(0).layoutBase.LayoutConstants,e=_(0).layoutBase.FDLayoutConstants,t=_(0).CoSEConstants,o=_(0).CoSELayout,n=_(0).CoSENode,r=_(0).layoutBase.PointD,i=_(0).layoutBase.DimensionD,h={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function a(l){this.options=function(f,A){var N={};for(var v in f)N[v]=f[v];for(var v in A)N[v]=A[v];return N}(h,l),g(this.options)}var g=function(l){l.nodeRepulsion!=null&&(t.DEFAULT_REPULSION_STRENGTH=e.DEFAULT_REPULSION_STRENGTH=l.nodeRepulsion),l.idealEdgeLength!=null&&(t.DEFAULT_EDGE_LENGTH=e.DEFAULT_EDGE_LENGTH=l.idealEdgeLength),l.edgeElasticity!=null&&(t.DEFAULT_SPRING_STRENGTH=e.DEFAULT_SPRING_STRENGTH=l.edgeElasticity),l.nestingFactor!=null&&(t.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=l.nestingFactor),l.gravity!=null&&(t.DEFAULT_GRAVITY_STRENGTH=e.DEFAULT_GRAVITY_STRENGTH=l.gravity),l.numIter!=null&&(t.MAX_ITERATIONS=e.MAX_ITERATIONS=l.numIter),l.gravityRange!=null&&(t.DEFAULT_GRAVITY_RANGE_FACTOR=e.DEFAULT_GRAVITY_RANGE_FACTOR=l.gravityRange),l.gravityCompound!=null&&(t.DEFAULT_COMPOUND_GRAVITY_STRENGTH=e.DEFAULT_COMPOUND_GRAVITY_STRENGTH=l.gravityCompound),l.gravityRangeCompound!=null&&(t.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=e.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=l.gravityRangeCompound),l.initialEnergyOnIncremental!=null&&(t.DEFAULT_COOLING_FACTOR_INCREMENTAL=e.DEFAULT_COOLING_FACTOR_INCREMENTAL=l.initialEnergyOnIncremental),l.quality=="draft"?u.QUALITY=0:l.quality=="proof"?u.QUALITY=2:u.QUALITY=1,t.NODE_DIMENSIONS_INCLUDE_LABELS=e.NODE_DIMENSIONS_INCLUDE_LABELS=u.NODE_DIMENSIONS_INCLUDE_LABELS=l.nodeDimensionsIncludeLabels,t.DEFAULT_INCREMENTAL=e.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!l.randomize,t.ANIMATE=e.ANIMATE=u.ANIMATE=l.animate,t.TILE=l.tile,t.TILING_PADDING_VERTICAL=typeof l.tilingPaddingVertical=="function"?l.tilingPaddingVertical.call():l.tilingPaddingVertical,t.TILING_PADDING_HORIZONTAL=typeof l.tilingPaddingHorizontal=="function"?l.tilingPaddingHorizontal.call():l.tilingPaddingHorizontal};a.prototype.run=function(){var l,f,A=this.options;this.idToLNode={};var N=this.layout=new o,v=this;v.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var y=N.newGraphManager();this.gm=y;var m=this.options.eles.nodes(),s=this.options.eles.edges();this.root=y.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(m),N);for(var d=0;d<s.length;d++){var c=s[d],E=this.idToLNode[c.data("source")],T=this.idToLNode[c.data("target")];E!==T&&E.getEdgesBetween(T).length==0&&(y.add(N.newEdge(),E,T).id=c.id())}var O=function(w,D){typeof w=="number"&&(w=D);var C=w.data("id"),M=v.idToLNode[C];return{x:M.getRect().getCenterX(),y:M.getRect().getCenterY()}},I=function w(){for(var D,C=function(){A.fit&&A.cy.fit(A.eles,A.padding),l||(l=!0,v.cy.one("layoutready",A.ready),v.cy.trigger({type:"layoutready",layout:v}))},M=v.options.refresh,F=0;F<M&&!D;F++)D=v.stopped||v.layout.tick();if(D)return N.checkLayoutSuccess()&&!N.isSubLayout&&N.doPostLayout(),N.tilingPostLayout&&N.tilingPostLayout(),N.isLayoutFinished=!0,v.options.eles.nodes().positions(O),C(),v.cy.one("layoutstop",v.options.stop),v.cy.trigger({type:"layoutstop",layout:v}),f&&cancelAnimationFrame(f),void(l=!1);var G=v.layout.getPositionsData();A.eles.nodes().positions(function(x,b){if(typeof x=="number"&&(x=b),!x.isParent()){for(var P=x.id(),S=G[P],U=x;S==null&&(S=G[U.data("parent")]||G["DummyCompound_"+U.data("parent")],G[P]=S,(U=U.parent()[0])!=null););return S!=null?{x:S.x,y:S.y}:{x:x.position("x"),y:x.position("y")}}}),C(),f=requestAnimationFrame(w)};return N.addListener("layoutstarted",function(){v.options.animate==="during"&&(f=requestAnimationFrame(I))}),N.runLayout(),this.options.animate!=="during"&&(v.options.eles.nodes().not(":parent").layoutPositions(v,v.options,O),l=!1),this},a.prototype.getTopMostNodes=function(l){for(var f={},A=0;A<l.length;A++)f[l[A].id()]=!0;var N=l.filter(function(v,y){typeof v=="number"&&(v=y);for(var m=v.parent()[0];m!=null;){if(f[m.id()])return!1;m=m.parent()[0]}return!0});return N},a.prototype.processChildrenList=function(l,f,A){for(var N=f.length,v=0;v<N;v++){var y,m,s=f[v],d=s.children(),c=s.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((y=s.outerWidth()!=null&&s.outerHeight()!=null?l.add(new n(A.graphManager,new r(s.position("x")-c.w/2,s.position("y")-c.h/2),new i(parseFloat(c.w),parseFloat(c.h)))):l.add(new n(this.graphManager))).id=s.data("id"),y.paddingLeft=parseInt(s.css("padding")),y.paddingTop=parseInt(s.css("padding")),y.paddingRight=parseInt(s.css("padding")),y.paddingBottom=parseInt(s.css("padding")),this.options.nodeDimensionsIncludeLabels&&s.isParent()){var E=s.boundingBox({includeLabels:!0,includeNodes:!1}).w,T=s.boundingBox({includeLabels:!0,includeNodes:!1}).h,O=s.css("text-halign");y.labelWidth=E,y.labelHeight=T,y.labelPos=O}this.idToLNode[s.data("id")]=y,isNaN(y.rect.x)&&(y.rect.x=0),isNaN(y.rect.y)&&(y.rect.y=0),d!=null&&d.length>0&&(m=A.getGraphManager().add(A.newGraph(),y),this.processChildrenList(m,d,A))}},a.prototype.stop=function(){return this.stopped=!0,this};var p=function(l){l("layout","cose-bilkent",a)};typeof cytoscape<"u"&&p(cytoscape),R.exports=p}]))),Q.exports);const pt=ut(dt);function rt(R,L){R.forEach(_=>{const u={id:_.id,labelText:_.label,height:_.height,width:_.width,padding:_.padding??0};Object.keys(_).forEach(e=>{["id","label","height","width","padding","x","y"].includes(e)||(u[e]=_[e])}),L.add({group:"nodes",data:u,position:{x:_.x??0,y:_.y??0}})})}function nt(R,L){R.forEach(_=>{const u={id:_.id,source:_.start,target:_.end};Object.keys(_).forEach(e=>{["id","start","end"].includes(e)||(u[e]=_[e])}),L.add({group:"edges",data:u})})}function it(R){return new Promise(L=>{const _=gt("body").append("div").attr("id","cy").attr("style","display:none"),u=et({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});_.remove(),rt(R.nodes,u),nt(R.edges,u),u.nodes().forEach(function(e){e.layoutDimensions=()=>{const t=e.data();return{w:t.width,h:t.height}}}),u.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),u.ready(e=>{B.info("Cytoscape ready",e),L(u)})})}function ot(R){return R.nodes().map(L=>{const _=L.data(),u=L.position(),e={id:_.id,x:u.x,y:u.y};return Object.keys(_).forEach(t=>{t!=="id"&&(e[t]=_[t])}),e})}function st(R){return R.edges().map(L=>{const _=L.data(),u=L._private.rscratch,e={id:_.id,source:_.source,target:_.target,startX:u.startX,startY:u.startY,midX:u.midX,midY:u.midY,endX:u.endX,endY:u.endY};return Object.keys(_).forEach(t=>{["id","source","target"].includes(t)||(e[t]=_[t])}),e})}async function at(R,L){B.debug("Starting cose-bilkent layout algorithm");try{ht(R);const _=await it(R),u=ot(_),e=st(_);return B.debug(`Layout completed: ${u.length} nodes, ${e.length} edges`),{nodes:u,edges:e}}catch(_){throw B.error("Error in cose-bilkent layout algorithm:",_),_}}function ht(R){if(!R)throw new Error("Layout data is required");if(!R.config)throw new Error("Configuration is required in layout data");if(!R.rootNode)throw new Error("Root node is required");if(!R.nodes||!Array.isArray(R.nodes))throw new Error("No nodes found in layout data");if(!Array.isArray(R.edges))throw new Error("Edges array is required in layout data");return!0}et.use(pt),X(rt,"addNodes"),X(nt,"addEdges"),X(it,"createCytoscapeInstance"),X(ot,"extractPositionedNodes"),X(st,"extractPositionedEdges"),X(at,"executeCoseBilkentLayout"),X(ht,"validateLayoutData");var ft=X(async(R,L,{insertCluster:_,insertEdge:u,insertEdgeLabel:e,insertMarkers:t,insertNode:o,log:n,positionEdgeLabel:r},{algorithm:i})=>{const h={},a={},g=L.select("g");t(g,R.markers,R.type,R.diagramId);const p=g.insert("g").attr("class","subgraphs"),l=g.insert("g").attr("class","edgePaths"),f=g.insert("g").attr("class","edgeLabels"),A=g.insert("g").attr("class","nodes");n.debug("Inserting nodes into DOM for dimension calculation"),await Promise.all(R.nodes.map(async y=>{if(y.isGroup){const m={...y};a[y.id]=m,h[y.id]=m,await _(p,y)}else{const m={...y};h[y.id]=m;const s=await o(A,y,{config:R.config,dir:R.direction||"TB"}),d=s.node().getBBox();m.width=d.width,m.height=d.height,m.domId=s,n.debug(`Node ${y.id} dimensions: ${d.width}x${d.height}`)}})),n.debug("Running cose-bilkent layout algorithm");const N={...R,nodes:R.nodes.map(y=>{const m=h[y.id];return{...y,width:m.width,height:m.height}})},v=await at(N,R.config);n.debug("Positioning nodes based on layout results"),v.nodes.forEach(y=>{const m=h[y.id];m?.domId&&(m.domId.attr("transform",`translate(${y.x}, ${y.y})`),m.x=y.x,m.y=y.y,n.debug(`Positioned node ${m.id} at center (${y.x}, ${y.y})`))}),v.edges.forEach(y=>{const m=R.edges.find(s=>s.id===y.id);m&&(m.points=[{x:y.startX,y:y.startY},{x:y.midX,y:y.midY},{x:y.endX,y:y.endY}])}),n.debug("Inserting and positioning edges"),await Promise.all(R.edges.map(async y=>{await e(f,y);const m=h[y.start??""],s=h[y.end??""];if(m&&s){const d=v.edges.find(c=>c.id===y.id);if(d){n.debug("APA01 positionedEdge",d);const c={...y},E=u(l,c,a,R.type,m,s,R.diagramId);r(c,E)}else{const c={...y,points:[{x:m.x||0,y:m.y||0},{x:s.x||0,y:s.y||0}]},E=u(l,c,a,R.type,m,s,R.diagramId);r(c,E)}}})),n.debug("Cose-bilkent rendering completed")},"render"),te=ft;export{te as render};
//# sourceMappingURL=cose-bilkent-S5V4N54A-DZ-Sj5Cw.js.map
