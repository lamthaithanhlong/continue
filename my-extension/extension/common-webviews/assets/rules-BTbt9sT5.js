import{t as Y,aF as ge,x as m,G as k,O as he,C as e,Q as d,E as a,n as r,F as Z,A as ye,J as f,T as C,a5 as N,I as ee,aG as A,W as G,N as $e,v as be,M as we,an as Fe,a6 as Ee,a4 as Ie,w as Te,aE as Se}from"./TextAugment-CCgoKCVh.js";import"./design-system-init-D_ikSdGN.js";import{B as xe}from"./ButtonAugment-dm8Gq3Cq.js";import{M as ze}from"./MonacoMarkdownEditor-Bb9-jeHF.js";import{g as De,R as x,s as Me,o as _e,T as Le,S as Re,F as ke}from"./Store-CzuxPCq8.js";import{T as Ce}from"./CardAugment-Bqwu5ahx.js";import{R as Ne,M as Ae}from"./message-broker-CppRv-qk.js";import{O as Ge}from"./OpenFileButton-DcM9qoQQ.js";import{R as Oe}from"./RulesModeSelector-CMEKpeTG.js";import{I as je}from"./IconButtonAugment-CsdawHyK.js";import"./index-BuNY6jLF.js";import"./focusTrapStack-9JCo5vKi.js";import"./Chevron-Cl2ZClCm.js";import"./BaseTextInput-CKEk7GUD.js";import"./index-B4NDmpYR.js";/* empty css                                                */import"./chat-model-context-DwFUhpQk.js";import"./index-Czcl53hR.js";import"./index-Bz1AJAWu.js";import"./remote-agents-client-3ykFyqEs.js";import"./types-DGsjtdxm.js";import"./SuccessfulButton-CqblPP5m.js";try{c=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(H=new c.Error().stack)&&(c._sentryDebugIds=c._sentryDebugIds||{},c._sentryDebugIds[H]="68426ec4-ee0d-4dee-8620-9c42a9cb18cf",c._sentryDebugIdIdentifier="sentry-dbid-68426ec4-ee0d-4dee-8620-9c42a9cb18cf")}catch{}var c,H,qe=m('<div class="c-rule-config svelte-w4thrv"><div class="c-rule-field c-rule-field-full-width svelte-w4thrv"><!> <!></div></div>'),Be=m('<div class="l-file-controls svelte-w4thrv"><div class="l-file-controls-left svelte-w4thrv"><div class="c-trigger-section svelte-w4thrv"><!> <!> <!></div></div> <!></div> <!>',1),Qe=m('<div class="l-rules-editor svelte-w4thrv"><div class="c-rules-editor__content svelte-w4thrv"><!></div></div>'),Ue=m("<div>Loading...</div>"),Ve=m('<div class="c-rules-container svelte-1qamlzv"><!></div>');Se(function(O,te){Y(te,!1);const j=()=>Ee(B,"$rule",se),[se,ae]=Ie(),q=new Ae(A),B=Te(null),re={handleMessageFromExtension(v){const i=v.data;if(i&&i.type===G.loadFile&&i){const g=i.data.content;if(g!==void 0){const h=g.replace(/^\n+/,""),y=x.getDescriptionFrontmatterKey(h),z=x.getRuleTypeFromContent(h),D=x.extractContent(h);B.set({path:i.data.pathName,content:D,type:z,description:y})}}return!0}};$e(()=>{q.registerConsumer(re),A.postMessage({type:G.rulesLoaded})}),be(),we("message",Fe,function(...v){q.onMessageFromExtension?.apply(this,v)}),Re(O,{children:(v,i)=>{ke(v,{fetch:!0,children:(g,h)=>{var y=Ve(),z=a(y),D=l=>{(function(M,o){Y(o,!0);let $=d(()=>o.rule.path),b=d(()=>o.rule.type),Q=d(()=>o.rule.content),u=d(()=>o.rule.description),U=d(()=>x.extractContent(e(Q))),w=he(void 0),ne=d(()=>({path:e($),type:e(b),content:e(Q),description:e(u),settingsStored:o.rule.settingsStored}));const V=De(),W=async(F,t)=>{if(!e(w))return;const E=e(w).getValue(),I=F??e(b),T=t??e(u),_={type:I,path:e($),content:E,description:T,settingsStored:o.rule.settingsStored};V(Me(_))},J=(F,t)=>W(F,t),ie=ge(J,500),le=()=>{A.postMessage({type:G.openSettingsPage,data:"guidelines"})};var K=Qe(),ce=a(K),de=a(ce);ze(de,{saveFunction:W,get value(){return e(U)},set value(t){k(U,t)},get editorInstance(){return e(w)},set editorInstance(t){k(w,t,!0)},header:t=>{var E=Be(),I=ye(E),T=a(I),_=a(T),P=a(_);Ce(P,{content:"Navigate back to all Rules & Guidelines",children:(s,p)=>{xe(s,{size:1,variant:"ghost-block",color:"neutral",class:"c-back-button",$$events:{click:le},$$slots:{iconLeft:(n,S)=>{je(n,{slot:"iconLeft",name:"chevron-left"})}}})},$$slots:{default:!0}});var X=f(P,2);C(X,{size:1,class:"c-field-label",children:(s,p)=>{var n=N("Trigger:");r(s,n)},$$slots:{default:!0}});var ve=f(X,2);Oe(ve,{onSave:J,get rule(){return e(ne)}});var ue=f(T,2);Ge(ue,{size:1,get path(){return e($)},onOpenLocalFile:async()=>(V(_e({repoRoot:"",pathName:e($)})),"success"),$$slots:{text:(s,p)=>{C(s,{slot:"text",size:1,children:(n,S)=>{var L=N("Open file");r(n,L)},$$slots:{default:!0}})}}});var pe=f(I,2),fe=s=>{var p=qe(),n=a(p),S=a(n);C(S,{size:1,class:"c-field-label",children:(R,We)=>{var me=N("Description");r(R,me)},$$slots:{default:!0}});var L=f(S,2);Le(L,{placeholder:"When should this rules file be fetched by the Agent?",size:1,get value(){return e(u)},set value(R){k(u,R)},$$events:{input:()=>ie(e(b),e(u))}}),r(s,p)};ee(pe,s=>{e(b)===Ne.AGENT_REQUESTED&&s(fe)}),r(t,E)},$$slots:{header:!0}}),r(M,K),Z()})(l,{get rule(){return j()}})},oe=l=>{var M=Ue();r(l,M)};ee(z,l=>{j()!==null?l(D):l(oe,!1)}),r(g,y)},$$slots:{default:!0}})},$$slots:{default:!0}}),Z(),ae()},{target:document.getElementById("app")});
//# sourceMappingURL=rules-BTbt9sT5.js.map
