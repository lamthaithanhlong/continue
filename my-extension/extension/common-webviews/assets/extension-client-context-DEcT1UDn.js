import{a_ as le,a$ as de,b0 as fe,b1 as pe,w as oe,aU as $,l as he,n as N,ak as ge,t as ye,u as S,x as re,I as me,C as B,Q as se,E as I,J,K as P,L as M,$ as be,M as Q,F as ve,A as we,a0 as K,b2 as F,y as Y,ac as ke,ab as Ce}from"./TextAugment-CCgoKCVh.js";import{j as U}from"./Store-CzuxPCq8.js";import{a as Se}from"./BaseTextInput-CKEk7GUD.js";import{R as W}from"./message-broker-CppRv-qk.js";import{g as _e}from"./index-BuNY6jLF.js";try{C=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(Z=new C.Error().stack)&&(C._sentryDebugIds=C._sentryDebugIds||{},C._sentryDebugIds[Z]="7667fa61-f981-404d-9725-7699d9751a18",C._sentryDebugIdIdentifier="sentry-dbid-7667fa61-f981-404d-9725-7699d9751a18")}catch{}var C,Z;const Ae=[];function Xe(t,e=!1,n=!1){return D(t,new Map,"",Ae,null,n)}function D(t,e,n,o,r=null,s=!1){if(typeof t=="object"&&t!==null){var i=e.get(t);if(i!==void 0)return i;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(le(t)){var l=Array(t.length);e.set(t,l),r!==null&&e.set(r,l);for(var c=0;c<t.length;c+=1){var u=t[c];c in t&&(l[c]=D(u,e,n,o,null,s))}return l}if(de(t)===fe){for(var p in l={},e.set(t,l),r!==null&&e.set(r,l),t)l[p]=D(t[p],e,n,o,null,s);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!s)return D(t.toJSON(),e,n,o,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}function xe(){return Symbol(pe)}const H={enabled:!1,volume:.5,playOnlyWhenWindowUnfocused:!1},et={enabled:!0},Ee=""+new URL("agent-complete-DO0gyADk.mp3",import.meta.url).href,ie=oe(!0);function tt(t){ie.set(t)}var ae=(t=>(t.AGENT_COMPLETE="agent-complete",t))(ae||{});const Te={"agent-complete":Ee};class A{static _instance;audioCache=new Map;constructor(){}static getInstance(){return A._instance||(A._instance=new A),A._instance}retrieveAudioElement(e,n){let o=this.audioCache.get(e);return o?o.volume=n.volume:(o=new Audio,o.src=Te[e],o.volume=n.volume,o.preload="auto",o._isUnlocked=!1,this.audioCache.set(e,o)),o}async playSound(e,n){if(n.enabled&&(!n.playOnlyWhenWindowUnfocused||!$(ie)))try{const o=this.retrieveAudioElement(e,n);o.currentTime=0,await o.play()}catch(o){if(o instanceof DOMException&&o.name==="NotAllowedError")return void console.error("Audio blocked by browser policy. Sound will work after user interaction.");console.error("Failed to play sound:",o)}}async unlockSoundForConfig(e){if(!e.enabled)return;const n=this.retrieveAudioElement("agent-complete",e);if(!n._isUnlocked)try{await this.playSound("agent-complete",{enabled:!0,volume:0}),n._isUnlocked=!0}catch(o){console.warn("Failed to unlock sound:",o)}}disposeSounds(){this.audioCache.forEach(e=>{e.pause(),e.src="",e._isUnlocked=!1}),this.audioCache.clear()}}const G=A.getInstance();class nt{constructor(e){this._msgBroker=e,this.initialize()}static key="soundModel";_soundSettings=oe(H);_isLoaded=!1;async refreshSettings(){try{const e=await this._msgBroker.sendToSidecar({type:U.getSoundSettings});e.data&&this._soundSettings.set(e.data)}catch(e){console.warn("Failed to refresh sound settings:",e)}}async unlockSound(){$(this._soundSettings).enabled&&G.unlockSoundForConfig($(this._soundSettings))}async playAgentComplete(e){const n={...$(this._soundSettings),...e};await G.playSound(ae.AGENT_COMPLETE,n)}get getCurrentSettings(){return this._soundSettings}async initialize(){if(!this._isLoaded)try{const e=await this._msgBroker.sendToSidecar({type:U.getSoundSettings});e.data&&this._soundSettings.set(e.data),this._isLoaded=!0}catch(e){console.warn("Failed to load sound settings, using defaults:",e),this._soundSettings.set(H),this._isLoaded=!0}}async updateSettings(e){try{await this._msgBroker.sendToSidecar({type:U.updateSoundSettings,data:e}),this._soundSettings.update(n=>({...n,...e}))}catch(n){throw console.error("Failed to update sound settings:",n),n}}async setEnabled(e){await this.updateSettings({enabled:e})}async setVolume(e){const n=Math.max(0,Math.min(1,e));await this.updateSettings({volume:n})}async resetToDefaults(){await this.updateSettings(H)}updateEnabled(e){this.setEnabled(e).catch(n=>{console.error("Failed to update enabled setting:",n)})}updateVolume(e){this.setVolume(e).catch(n=>{console.error("Failed to update volume setting:",n)})}dispose=()=>{G.disposeSounds()}}var Le=he('<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.5 2C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V4.70711L9.29289 2H3.5ZM2 2.5C2 1.67157 2.67157 1 3.5 1H9.5C9.63261 1 9.75979 1.05268 9.85355 1.14645L12.7803 4.07322C12.921 4.21388 13 4.40464 13 4.60355V12.5C13 13.3284 12.3284 14 11.5 14H3.5C2.67157 14 2 13.3284 2 12.5V2.5ZM4.75 7.5C4.75 7.22386 4.97386 7 5.25 7H7V5.25C7 4.97386 7.22386 4.75 7.5 4.75C7.77614 4.75 8 4.97386 8 5.25V7H9.75C10.0261 7 10.25 7.22386 10.25 7.5C10.25 7.77614 10.0261 8 9.75 8H8V9.75C8 10.0261 7.77614 10.25 7.5 10.25C7.22386 10.25 7 10.0261 7 9.75V8H5.25C4.97386 8 4.75 7.77614 4.75 7.5Z" fill="currentColor"></path></svg>');function ot(t){var e=Le();N(t,e)}function je(t,e,n,o){e()||(t.key!=="Enter"&&t.key!==" "||(t.preventDefault(),n(!n())),o.onkeydown?.(t))}function Me(t,e){e.onchange?.(t)}var Oe=re("<span> </span> <span> </span>",1),$e=re('<label><!> <input type="checkbox" role="switch"/></label>');function rt(t,e){ye(e,!0);let n=S(e,"checked",15,!1),o=S(e,"disabled",3,!1),r=S(e,"size",3,2),s=S(e,"ariaLabel",19,()=>{}),i=S(e,"onText",19,()=>{}),l=S(e,"offText",19,()=>{}),c=se(()=>i()||l());var u=$e();let p;var m=I(u),f=g=>{var w=Oe(),k=we(w);let x;var T=I(k),v=J(k,2);let E;var L=I(v);P((j,V)=>{x=M(k,1,"c-toggle-text c-toggle-text--off svelte-q28axe",null,x,j),K(T,l()||""),E=M(v,1,"c-toggle-text c-toggle-text--on svelte-q28axe",null,E,V),K(L,i()||"")},[()=>({visible:!n()&&l()}),()=>({visible:n()&&i()})]),N(g,w)};me(m,g=>{B(c)&&g(f)});var h=J(m,2);let b;h.__keydown=[je,o,n,e],h.__change=[Me,e],h.__click=function(...g){e.onclick?.apply(this,g)},P((g,w)=>{p=M(u,1,`c-toggle-track c-toggle-track-size--${r()??""}`,"svelte-q28axe",p,g),b=M(h,1,"c-toggle-input svelte-q28axe",null,b,w),h.disabled=o(),be(h,"aria-label",s())},[()=>({checked:n(),disabled:o(),"has-text":B(c)}),()=>({disabled:o()})]),Q("blur",h,function(...g){e.onblur?.apply(this,g)}),Q("focus",h,function(...g){e.onfocus?.apply(this,g)}),Se(h,n),N(t,u),ve()}function st(t){const{rules:e,workspaceGuidelinesContent:n,contextRules:o=[]}=t,r=e.filter(c=>c.type===W.ALWAYS_ATTACHED).reduce((c,u)=>c+u.content.length+u.path.length,0),s=e.filter(c=>c.type===W.AGENT_REQUESTED).reduce((c,u)=>c+100+(u.description?.length??0)+u.path.length,0),i=r+e.filter(c=>c.type===W.MANUAL).filter(c=>o.some(u=>u.path===c.path)).reduce((c,u)=>c+u.content.length+u.path.length,0)+s+n.length,l=t.rulesAndGuidelinesLimit&&i>t.rulesAndGuidelinesLimit;return{totalCharacterCount:i,isOverLimit:l,warningMessage:l&&t.rulesAndGuidelinesLimit?`Total number of characters in included rules and workspace guidelines (${i} chars)
        exceeds the limit of ${t.rulesAndGuidelinesLimit} characters, remove some rules
        or reduce the length of your guidelines.`:void 0}}ge(["keydown","change","click"]);const De=["string","number","bigint","boolean"];function R(t){return t==null||!!De.includes(typeof t)||(Array.isArray(t)?t.every(e=>R(e)):typeof t=="object"&&Object.getPrototypeOf(t)===Object.prototype)}const q=Symbol("box"),Ve=Symbol("is-writable");function it(t,e){const n=se(t);return e?{[q]:!0,[Ve]:!0,get current(){return B(n)},set current(o){e(o)}}:{[q]:!0,get current(){return t()}}}function Ie(...t){return function(e){for(const n of t)if(n){if(e.defaultPrevented)return;typeof n=="function"?n.call(this,e):n.current?.call(this,e)}}}var z,X,ee,_={},Fe=function(){if(ee)return _;ee=1;var t=_&&_.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(n,o){var r=null;if(!n||typeof n!="string")return r;var s=(0,e.default)(n),i=typeof o=="function";return s.forEach(function(l){if(l.type==="declaration"){var c=l.property,u=l.value;i?o(c,u,l):u&&((r=r||{})[c]=u)}}),r};var e=t(function(){if(X)return z;X=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,o=/\n/g,r=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,l=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,u=/^\s+|\s+$/g,p="";function m(f){return f?f.replace(u,p):p}return z=function(f,h){if(typeof f!="string")throw new TypeError("First argument must be a string");if(!f)return[];h=h||{};var b=1,g=1;function w(d){var a=d.match(o);a&&(b+=a.length);var y=d.lastIndexOf(`
`);g=~y?d.length-y:g+d.length}function k(){var d={line:b,column:g};return function(a){return a.position=new x(d),E(),a}}function x(d){this.start=d,this.end={line:b,column:g},this.source=h.source}function T(d){var a=new Error(h.source+":"+b+":"+g+": "+d);if(a.reason=d,a.filename=h.source,a.line=b,a.column=g,a.source=f,!h.silent)throw a}function v(d){var a=d.exec(f);if(a){var y=a[0];return w(y),f=f.slice(y.length),a}}function E(){v(r)}function L(d){var a;for(d=d||[];a=j();)a!==!1&&d.push(a);return d}function j(){var d=k();if(f.charAt(0)=="/"&&f.charAt(1)=="*"){for(var a=2;p!=f.charAt(a)&&(f.charAt(a)!="*"||f.charAt(a+1)!="/");)++a;if(a+=2,p===f.charAt(a-1))return T("End of comment missing");var y=f.slice(2,a-2);return g+=2,w(y),f=f.slice(a),g+=2,d({type:"comment",comment:y})}}function V(){var d=k(),a=v(s);if(a){if(j(),!v(i))return T("property missing ':'");var y=v(l),ue=d({type:"declaration",property:m(a[0].replace(n,p)),value:y?m(y[0].replace(n,p)):p});return v(c),ue}}return x.prototype.content=f,E(),function(){var d,a=[];for(L(a);d=V();)d!==!1&&(a.push(d),L(a));return a}()},z}());return _}();const te=_e(Fe),Ue=te.default||te,We=/\d/,He=["-","_","/","."];function Ge(t=""){if(!We.test(t))return t!==t.toLowerCase()}function ne(t){return t?function(e){const n=[];let o,r,s="";for(const i of e){const l=He.includes(i);if(l===!0){n.push(s),s="",o=void 0;continue}const c=Ge(i);if(r===!1){if(o===!1&&c===!0){n.push(s),s=i,o=c;continue}if(o===!0&&c===!1&&s.length>1){const u=s.at(-1);n.push(s.slice(0,Math.max(0,s.length-1))),s=u+i,o=c;continue}}s+=i,o=c,r=l}return n.push(s),n}(t).map(e=>function(n){return n?n[0].toUpperCase()+n.slice(1):""}(e)).join(""):""}function O(t){if(!t)return{};const e={};return Ue(t,function(n,o){var r;n.startsWith("-moz-")||n.startsWith("-webkit-")||n.startsWith("-ms-")||n.startsWith("-o-")?e[ne(n)]=o:n.startsWith("--")?e[n]=o:e[r=n,function(s){return s?s[0].toLowerCase()+s.slice(1):""}(ne(r||""))]=o}),e}function ze(...t){return(...e)=>{for(const n of t)typeof n=="function"&&n(...e)}}const Ne=function(t,e){const n=RegExp(t,"g");return o=>{if(typeof o!="string")throw new TypeError("expected an argument of type string, but got "+typeof o);return o.match(n)?o.replace(n,e):o}}(/[A-Z]/,t=>`-${t.toLowerCase()}`);function Be(t={}){return function(e){if(!e||typeof e!="object"||Array.isArray(e))throw new TypeError("expected an argument of type object, but got "+typeof e);return Object.keys(e).map(n=>`${Ne(n)}: ${e[n]};`).join(`
`)}(t).replace(`
`," ")}const Re=new Set(["onabort","onanimationcancel","onanimationend","onanimationiteration","onanimationstart","onauxclick","onbeforeinput","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncompositionend","oncompositionstart","oncompositionupdate","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onformdata","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectionchange","onselectstart","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel"]);function qe(t){return Re.has(t)}function at(...t){const e={...t[0]};for(let n=1;n<t.length;n++){const o=t[n];if(o){for(const r of Object.keys(o)){const s=e[r],i=o[r],l=typeof s=="function",c=typeof i=="function";if(l&&qe(r)){const u=s,p=i;e[r]=Ie(u,p)}else if(l&&c)e[r]=ze(s,i);else if(r==="class"){const u=R(s),p=R(i);u&&p?e[r]=F(s,i):u?e[r]=F(s):p&&(e[r]=F(i))}else if(r==="style"){const u=typeof s=="object",p=typeof i=="object",m=typeof s=="string",f=typeof i=="string";if(u&&p)e[r]={...s,...i};else if(u&&f){const h=O(i);e[r]={...s,...h}}else if(m&&p){const h=O(s);e[r]={...h,...i}}else if(m&&f){const h=O(s),b=O(i);e[r]={...h,...b}}else u?e[r]=s:p?e[r]=i:m?e[r]=s:f&&(e[r]=i)}else e[r]=i!==void 0?i:s}for(const r of Object.getOwnPropertySymbols(o)){const s=e[r],i=o[r];e[r]=i!==void 0?i:s}}}return typeof e.style=="object"&&(e.style=Be(e.style).replaceAll(`
`," ")),e.hidden===!1&&(e.hidden=void 0,delete e.hidden),e.disabled===!1&&(e.disabled=void 0,delete e.disabled),e}function ct(t,e){return{[xe()]:n=>{return function(r){return r!==null&&typeof r=="object"}(o=t)&&q in o?(t.current=n,Y(()=>e?.(n)),()=>{"isConnected"in n&&n.isConnected||(t.current=null)}):(t(n),Y(()=>e?.(n)),()=>{"isConnected"in n&&n.isConnected||t(null)});var o}}}function ut(t){return t?"true":"false"}function lt(t){return t?"":void 0}function dt(t,e){return e?"mixed":t?"true":"false"}class Ze{#e;#t;attrs;constructor(e){this.#e=e.getVariant?e.getVariant():null,this.#t=this.#e?`data-${this.#e}-`:`data-${e.component}-`,this.getAttr=this.getAttr.bind(this),this.selector=this.selector.bind(this),this.attrs=Object.fromEntries(e.parts.map(n=>[n,this.getAttr(n)]))}getAttr(e,n){return n?`data-${n}-${e}`:`${this.#t}${e}`}selector(e,n){return`[${this.getAttr(e,n)}]`}}function ft(t){const e=new Ze(t);return{...e.attrs,selector:e.selector,getAttr:e.getAttr}}function pt(t,e){return`bits-${t}`}function ht(t="bits"){return globalThis.bitsIdCounter.current++,`${t}-${globalThis.bitsIdCounter.current}`}globalThis.bitsIdCounter??={current:0};const ce="extensionClient";function gt(t){ke(ce,t)}function yt(){const t=Ce(ce);if(!t)throw new Error("ExtensionClient context not found. Make sure setExtensionClientContext() was called in a parent component.");return t}export{et as D,ot as F,nt as S,rt as T,ct as a,pt as b,ft as c,it as d,st as e,gt as f,yt as g,Be as h,lt as i,ut as j,dt as k,tt as l,at as m,Xe as s,ht as u};
//# sourceMappingURL=extension-client-context-DEcT1UDn.js.map
