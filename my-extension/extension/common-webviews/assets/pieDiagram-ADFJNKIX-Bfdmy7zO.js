import{V as w,P as z,aG as P,_ as s,g as V,s as j,a as L,b as q,t as G,q as H,l as O,c as K,F as J,K as Q,a4 as U,e as X,z as Y,H as Z}from"./AugmentMessage-BHgnxRkx.js";import{p as tt}from"./chunk-4BX2VUAB-DFnrP50b.js";import{p as et}from"./treemap-KMMF4GRG-BWWKpPk0.js";import{d as E}from"./arc-BTMcSefQ.js";import{o as at}from"./ordinal-PkyRlZ8Q.js";import"./TextAugment-CCgoKCVh.js";import"./index-B9uIMiyK.js";import"./preload-helper-iZIsTGZK.js";import"./await-Bft3-TRy.js";import"./index-B4NDmpYR.js";import"./IconButtonAugment-CsdawHyK.js";/* empty css                                                */import"./Store-CzuxPCq8.js";import"./CardAugment-Bqwu5ahx.js";import"./focusTrapStack-9JCo5vKi.js";import"./Chevron-Cl2ZClCm.js";import"./BaseTextInput-CKEk7GUD.js";import"./message-broker-CppRv-qk.js";import"./index-BuNY6jLF.js";import"./index-Bz1AJAWu.js";import"./chat-model-DaVfYv7o.js";import"./file-type-utils-CBkYZ4gj.js";import"./CalloutAugment-BUb-HAQ6.js";import"./types-DGsjtdxm.js";import"./chat-model-context-DwFUhpQk.js";import"./Markdown-F1hzawoT.js";import"./CollapseButtonAugment-CdECN-QQ.js";import"./toggleHighContrast-BIKVVoPO.js";import"./ButtonAugment-dm8Gq3Cq.js";import"./Filespan-DQTy5qup.js";import"./OpenFileButton-DcM9qoQQ.js";import"./index-Czcl53hR.js";import"./remote-agents-client-3ykFyqEs.js";import"./SuccessfulButton-CqblPP5m.js";import"./CopyButton-CYoKSKPU.js";import"./LanguageIcon-BRHvdy0u.js";import"./keypress-fD7XHdyk.js";import"./TextAreaAugment-Pjr5jpcU.js";import"./partner-mcp-utils-8KSbNsEE.js";import"./augment-logo-CnRinIIJ.js";import"./utils-BOGwHecm.js";import"./_baseUniq-uDqqXzFx.js";import"./_basePickBy-iiVghp6f.js";import"./clone-GIaI6k5A.js";import"./init-CpIN3PJq.js";try{T=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(W=new T.Error().stack)&&(T._sentryDebugIds=T._sentryDebugIds||{},T._sentryDebugIds[W]="a2f26942-c007-475c-b8cf-d4fb691dbd92",T._sentryDebugIdIdentifier="sentry-dbid-a2f26942-c007-475c-b8cf-d4fb691dbd92")}catch{}var T,W;function rt(t,i){return i<t?-1:i>t?1:i>=t?0:NaN}function it(t){return t}var nt=Z.pie,_={sections:new Map,showData:!1},M=_.sections,I=_.showData,ot=structuredClone(nt),N={getConfig:s(()=>structuredClone(ot),"getConfig"),clear:s(()=>{M=new Map,I=_.showData,Y()},"clear"),setDiagramTitle:H,getDiagramTitle:G,setAccTitle:q,getAccTitle:L,setAccDescription:j,getAccDescription:V,addSection:s(({label:t,value:i})=>{if(i<0)throw new Error(`"${t}" has invalid value: ${i}. Negative values are not allowed in pie charts. All slice values must be >= 0.`);M.has(t)||(M.set(t,i),O.debug(`added new section: ${t}, with value: ${i}`))},"addSection"),getSections:s(()=>M,"getSections"),setShowData:s(t=>{I=t},"setShowData"),getShowData:s(()=>I,"getShowData")},lt=s((t,i)=>{tt(t,i),i.setShowData(t.showData),t.sections.map(i.addSection)},"populateDb"),st={parse:s(async t=>{const i=await et("pie",t);O.debug(i),lt(i,N)},"parse")},pt=s(t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieOuterCircle{
    stroke: ${t.pieOuterStrokeColor};
    stroke-width: ${t.pieOuterStrokeWidth};
    fill: none;
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`,"getStyles"),ct=s(t=>{const i=[...t.values()].reduce((n,l)=>n+l,0),R=[...t.entries()].map(([n,l])=>({label:n,value:l})).filter(n=>n.value/i*100>=1).sort((n,l)=>l.value-n.value);return function(){var n=it,l=rt,p=null,x=w(0),f=w(z),A=w(0);function o(e){var a,g,C,c,h,d=(e=P(e)).length,y=0,v=new Array(d),u=new Array(d),m=+x.apply(this,arguments),S=Math.min(z,Math.max(-z,f.apply(this,arguments)-m)),$=Math.min(Math.abs(S)/d,A.apply(this,arguments)),k=$*(S<0?-1:1);for(a=0;a<d;++a)(h=u[v[a]=a]=+n(e[a],a,e))>0&&(y+=h);for(l!=null?v.sort(function(b,D){return l(u[b],u[D])}):p!=null&&v.sort(function(b,D){return p(e[b],e[D])}),a=0,C=y?(S-d*k)/y:0;a<d;++a,m=c)g=v[a],c=m+((h=u[g])>0?h*C:0)+k,u[g]={data:e[g],index:a,value:h,startAngle:m,endAngle:c,padAngle:$};return u}return o.value=function(e){return arguments.length?(n=typeof e=="function"?e:w(+e),o):n},o.sortValues=function(e){return arguments.length?(l=e,p=null,o):l},o.sort=function(e){return arguments.length?(p=e,l=null,o):p},o.startAngle=function(e){return arguments.length?(x=typeof e=="function"?e:w(+e),o):x},o.endAngle=function(e){return arguments.length?(f=typeof e=="function"?e:w(+e),o):f},o.padAngle=function(e){return arguments.length?(A=typeof e=="function"?e:w(+e),o):A},o}().value(n=>n.value)(R)},"createPieArcs"),ae={parser:st,db:N,renderer:{draw:s((t,i,R,B)=>{O.debug(`rendering pie chart
`+t);const n=B.db,l=K(),p=J(n.getConfig(),l.pie),x=18,f=450,A=f,o=Q(i),e=o.append("g");e.attr("transform","translate(225,225)");const{themeVariables:a}=l;let[g]=U(a.pieOuterStrokeWidth);g??=2;const C=p.textPosition,c=Math.min(A,f)/2-40,h=E().innerRadius(0).outerRadius(c),d=E().innerRadius(c*C).outerRadius(c*C);e.append("circle").attr("cx",0).attr("cy",0).attr("r",c+g/2).attr("class","pieOuterCircle");const y=n.getSections(),v=ct(y),u=[a.pie1,a.pie2,a.pie3,a.pie4,a.pie5,a.pie6,a.pie7,a.pie8,a.pie9,a.pie10,a.pie11,a.pie12];let m=0;y.forEach(r=>{m+=r});const S=v.filter(r=>(r.data.value/m*100).toFixed(0)!=="0"),$=at(u);e.selectAll("mySlices").data(S).enter().append("path").attr("d",h).attr("fill",r=>$(r.data.label)).attr("class","pieCircle"),e.selectAll("mySlices").data(S).enter().append("text").text(r=>(r.data.value/m*100).toFixed(0)+"%").attr("transform",r=>"translate("+d.centroid(r)+")").style("text-anchor","middle").attr("class","slice"),e.append("text").text(n.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");const k=[...y.entries()].map(([r,F])=>({label:r,value:F})),b=e.selectAll(".legend").data(k).enter().append("g").attr("class","legend").attr("transform",(r,F)=>"translate(216,"+(22*F-22*k.length/2)+")");b.append("rect").attr("width",x).attr("height",x).style("fill",r=>$(r.label)).style("stroke",r=>$(r.label)),b.append("text").attr("x",22).attr("y",14).text(r=>n.getShowData()?`${r.label} [${r.value}]`:r.label);const D=512+Math.max(...b.selectAll("text").nodes().map(r=>r?.getBoundingClientRect().width??0));o.attr("viewBox",`0 0 ${D} 450`),X(o,f,D,p.useMaxWidth)},"draw")},styles:pt};export{ae as diagram};
//# sourceMappingURL=pieDiagram-ADFJNKIX-Bfdmy7zO.js.map
